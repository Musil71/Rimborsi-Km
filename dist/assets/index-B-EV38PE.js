function Ax(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function u0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Px(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var y2={exports:{}},Rh={},w2={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc=Symbol.for("react.element"),Ex=Symbol.for("react.portal"),Cx=Symbol.for("react.fragment"),Tx=Symbol.for("react.strict_mode"),Lx=Symbol.for("react.profiler"),Ix=Symbol.for("react.provider"),Rx=Symbol.for("react.context"),Ox=Symbol.for("react.forward_ref"),Dx=Symbol.for("react.suspense"),Fx=Symbol.for("react.memo"),Mx=Symbol.for("react.lazy"),Kg=Symbol.iterator;function zx(t){return t===null||typeof t!="object"?null:(t=Kg&&t[Kg]||t["@@iterator"],typeof t=="function"?t:null)}var x2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b2=Object.assign,_2={};function kl(t,e,n){this.props=t,this.context=e,this.refs=_2,this.updater=n||x2}kl.prototype.isReactComponent={};kl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function S2(){}S2.prototype=kl.prototype;function c0(t,e,n){this.props=t,this.context=e,this.refs=_2,this.updater=n||x2}var d0=c0.prototype=new S2;d0.constructor=c0;b2(d0,kl.prototype);d0.isPureReactComponent=!0;var Jg=Array.isArray,N2=Object.prototype.hasOwnProperty,h0={current:null},k2={key:!0,ref:!0,__self:!0,__source:!0};function j2(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)N2.call(e,r)&&!k2.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),d=0;d<o;d++)l[d]=arguments[d+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:gc,type:t,key:s,ref:a,props:i,_owner:h0.current}}function Bx(t,e){return{$$typeof:gc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function f0(t){return typeof t=="object"&&t!==null&&t.$$typeof===gc}function Ux(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qg=/\/+/g;function Qf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ux(""+t.key):e.toString(36)}function Bd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case gc:case Ex:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Qf(a,0):r,Jg(i)?(n="",t!=null&&(n=t.replace(Qg,"$&/")+"/"),Bd(i,e,n,"",function(d){return d})):i!=null&&(f0(i)&&(i=Bx(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Qg,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Jg(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+Qf(s,o);a+=Bd(s,e,n,l,i)}else if(l=zx(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+Qf(s,o++),a+=Bd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function hd(t,e,n){if(t==null)return t;var r=[],i=0;return Bd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $x(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cr={current:null},Ud={transition:null},qx={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:Ud,ReactCurrentOwner:h0};function A2(){throw Error("act(...) is not supported in production builds of React.")}xt.Children={map:hd,forEach:function(t,e,n){hd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hd(t,function(){e++}),e},toArray:function(t){return hd(t,function(e){return e})||[]},only:function(t){if(!f0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xt.Component=kl;xt.Fragment=Cx;xt.Profiler=Lx;xt.PureComponent=c0;xt.StrictMode=Tx;xt.Suspense=Dx;xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qx;xt.act=A2;xt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=b2({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=h0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)N2.call(e,l)&&!k2.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var d=0;d<l;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:gc,type:t.type,key:i,ref:s,props:r,_owner:a}};xt.createContext=function(t){return t={$$typeof:Rx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ix,_context:t},t.Consumer=t};xt.createElement=j2;xt.createFactory=function(t){var e=j2.bind(null,t);return e.type=t,e};xt.createRef=function(){return{current:null}};xt.forwardRef=function(t){return{$$typeof:Ox,render:t}};xt.isValidElement=f0;xt.lazy=function(t){return{$$typeof:Mx,_payload:{_status:-1,_result:t},_init:$x}};xt.memo=function(t,e){return{$$typeof:Fx,type:t,compare:e===void 0?null:e}};xt.startTransition=function(t){var e=Ud.transition;Ud.transition={};try{t()}finally{Ud.transition=e}};xt.unstable_act=A2;xt.useCallback=function(t,e){return cr.current.useCallback(t,e)};xt.useContext=function(t){return cr.current.useContext(t)};xt.useDebugValue=function(){};xt.useDeferredValue=function(t){return cr.current.useDeferredValue(t)};xt.useEffect=function(t,e){return cr.current.useEffect(t,e)};xt.useId=function(){return cr.current.useId()};xt.useImperativeHandle=function(t,e,n){return cr.current.useImperativeHandle(t,e,n)};xt.useInsertionEffect=function(t,e){return cr.current.useInsertionEffect(t,e)};xt.useLayoutEffect=function(t,e){return cr.current.useLayoutEffect(t,e)};xt.useMemo=function(t,e){return cr.current.useMemo(t,e)};xt.useReducer=function(t,e,n){return cr.current.useReducer(t,e,n)};xt.useRef=function(t){return cr.current.useRef(t)};xt.useState=function(t){return cr.current.useState(t)};xt.useSyncExternalStore=function(t,e,n){return cr.current.useSyncExternalStore(t,e,n)};xt.useTransition=function(){return cr.current.useTransition()};xt.version="18.3.1";w2.exports=xt;var he=w2.exports;const Wx=u0(he),Hx=Ax({__proto__:null,default:Wx},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx=he,Gx=Symbol.for("react.element"),Yx=Symbol.for("react.fragment"),Kx=Object.prototype.hasOwnProperty,Jx=Vx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qx={key:!0,ref:!0,__self:!0,__source:!0};function P2(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Kx.call(e,r)&&!Qx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Gx,type:t,key:s,ref:a,props:i,_owner:Jx.current}}Rh.Fragment=Yx;Rh.jsx=P2;Rh.jsxs=P2;y2.exports=Rh;var c=y2.exports,E2={exports:{}},zr={},C2={exports:{}},T2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,U){var ae=G.length;G.push(U);e:for(;0<ae;){var pe=ae-1>>>1,T=G[pe];if(0<i(T,U))G[pe]=U,G[ae]=T,ae=pe;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var U=G[0],ae=G.pop();if(ae!==U){G[0]=ae;e:for(var pe=0,T=G.length,$=T>>>1;pe<$;){var J=2*(pe+1)-1,ne=G[J],P=J+1,H=G[P];if(0>i(ne,ae))P<T&&0>i(H,ne)?(G[pe]=H,G[P]=ae,pe=P):(G[pe]=ne,G[J]=ae,pe=J);else if(P<T&&0>i(H,ae))G[pe]=H,G[P]=ae,pe=P;else break e}}return U}function i(G,U){var ae=G.sortIndex-U.sortIndex;return ae!==0?ae:G.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],d=[],g=1,m=null,v=3,p=!1,S=!1,_=!1,j=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var U=n(d);U!==null;){if(U.callback===null)r(d);else if(U.startTime<=G)r(d),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(d)}}function N(G){if(_=!1,w(G),!S)if(n(l)!==null)S=!0,W(D);else{var U=n(d);U!==null&&X(N,U.startTime-G)}}function D(G,U){S=!1,_&&(_=!1,x(I),I=-1),p=!0;var ae=v;try{for(w(U),m=n(l);m!==null&&(!(m.expirationTime>U)||G&&!R());){var pe=m.callback;if(typeof pe=="function"){m.callback=null,v=m.priorityLevel;var T=pe(m.expirationTime<=U);U=t.unstable_now(),typeof T=="function"?m.callback=T:m===n(l)&&r(l),w(U)}else r(l);m=n(l)}if(m!==null)var $=!0;else{var J=n(d);J!==null&&X(N,J.startTime-U),$=!1}return $}finally{m=null,v=ae,p=!1}}var E=!1,L=null,I=-1,Y=5,ee=-1;function R(){return!(t.unstable_now()-ee<Y)}function A(){if(L!==null){var G=t.unstable_now();ee=G;var U=!0;try{U=L(!0,G)}finally{U?V():(E=!1,L=null)}}else E=!1}var V;if(typeof f=="function")V=function(){f(A)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,re=K.port2;K.port1.onmessage=A,V=function(){re.postMessage(null)}}else V=function(){j(A,0)};function W(G){L=G,E||(E=!0,V())}function X(G,U){I=j(function(){G(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){S||p||(S=!0,W(D))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var ae=v;v=U;try{return G()}finally{v=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,U){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ae=v;v=G;try{return U()}finally{v=ae}},t.unstable_scheduleCallback=function(G,U,ae){var pe=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?pe+ae:pe):ae=pe,G){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=ae+T,G={id:g++,callback:U,priorityLevel:G,startTime:ae,expirationTime:T,sortIndex:-1},ae>pe?(G.sortIndex=ae,e(d,G),n(l)===null&&G===n(d)&&(_?(x(I),I=-1):_=!0,X(N,ae-pe))):(G.sortIndex=T,e(l,G),S||p||(S=!0,W(D))),G},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(G){var U=v;return function(){var ae=v;v=U;try{return G.apply(this,arguments)}finally{v=ae}}}})(T2);C2.exports=T2;var Xx=C2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx=he,Mr=Xx;function ze(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L2=new Set,zu={};function eo(t,e){yl(t,e),yl(t+"Capture",e)}function yl(t,e){for(zu[t]=e,t=0;t<e.length;t++)L2.add(e[t])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hp=Object.prototype.hasOwnProperty,eb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xg={},Zg={};function tb(t){return Hp.call(Zg,t)?!0:Hp.call(Xg,t)?!1:eb.test(t)?Zg[t]=!0:(Xg[t]=!0,!1)}function nb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rb(t,e,n,r){if(e===null||typeof e>"u"||nb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dr(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var $n={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$n[t]=new dr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$n[e]=new dr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$n[t]=new dr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$n[t]=new dr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$n[t]=new dr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$n[t]=new dr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$n[t]=new dr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$n[t]=new dr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$n[t]=new dr(t,5,!1,t.toLowerCase(),null,!1,!1)});var p0=/[\-:]([a-z])/g;function m0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(p0,m0);$n[e]=new dr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(p0,m0);$n[e]=new dr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(p0,m0);$n[e]=new dr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$n[t]=new dr(t,1,!1,t.toLowerCase(),null,!1,!1)});$n.xlinkHref=new dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$n[t]=new dr(t,1,!1,t.toLowerCase(),null,!0,!0)});function g0(t,e,n,r){var i=$n.hasOwnProperty(e)?$n[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rb(e,n,i,r)&&(n=null),r||i===null?tb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vs=Zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fd=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),v0=Symbol.for("react.strict_mode"),Vp=Symbol.for("react.profiler"),I2=Symbol.for("react.provider"),R2=Symbol.for("react.context"),y0=Symbol.for("react.forward_ref"),Gp=Symbol.for("react.suspense"),Yp=Symbol.for("react.suspense_list"),w0=Symbol.for("react.memo"),zs=Symbol.for("react.lazy"),O2=Symbol.for("react.offscreen"),e1=Symbol.iterator;function ou(t){return t===null||typeof t!="object"?null:(t=e1&&t[e1]||t["@@iterator"],typeof t=="function"?t:null)}var Zt=Object.assign,Xf;function yu(t){if(Xf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xf=e&&e[1]||""}return`
`+Xf+t}var Zf=!1;function ep(t,e){if(!t||Zf)return"";Zf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Zf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?yu(t):""}function ib(t){switch(t.tag){case 5:return yu(t.type);case 16:return yu("Lazy");case 13:return yu("Suspense");case 19:return yu("SuspenseList");case 0:case 2:case 15:return t=ep(t.type,!1),t;case 11:return t=ep(t.type.render,!1),t;case 1:return t=ep(t.type,!0),t;default:return""}}function Kp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case Qo:return"Portal";case Vp:return"Profiler";case v0:return"StrictMode";case Gp:return"Suspense";case Yp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R2:return(t.displayName||"Context")+".Consumer";case I2:return(t._context.displayName||"Context")+".Provider";case y0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w0:return e=t.displayName||null,e!==null?e:Kp(t.type)||"Memo";case zs:e=t._payload,t=t._init;try{return Kp(t(e))}catch{}}return null}function sb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kp(e);case 8:return e===v0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function aa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ab(t){var e=D2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pd(t){t._valueTracker||(t._valueTracker=ab(t))}function F2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=D2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jp(t,e){var n=e.checked;return Zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function t1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=aa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function M2(t,e){e=e.checked,e!=null&&g0(t,"checked",e,!1)}function Qp(t,e){M2(t,e);var n=aa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xp(t,e.type,aa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function n1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xp(t,e,n){(e!=="number"||Xd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wu=Array.isArray;function cl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+aa(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Zp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ze(91));return Zt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function r1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ze(92));if(wu(n)){if(1<n.length)throw Error(ze(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:aa(n)}}function z2(t,e){var n=aa(e.value),r=aa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function i1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function B2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?B2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var md,U2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(md=md||document.createElement("div"),md.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=md.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Su={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ob=["Webkit","ms","Moz","O"];Object.keys(Su).forEach(function(t){ob.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Su[e]=Su[t]})});function $2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Su.hasOwnProperty(t)&&Su[t]?(""+e).trim():e+"px"}function q2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var lb=Zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tm(t,e){if(e){if(lb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ze(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ze(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ze(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ze(62))}}function nm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rm=null;function x0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var im=null,dl=null,hl=null;function s1(t){if(t=wc(t)){if(typeof im!="function")throw Error(ze(280));var e=t.stateNode;e&&(e=zh(e),im(t.stateNode,t.type,e))}}function W2(t){dl?hl?hl.push(t):hl=[t]:dl=t}function H2(){if(dl){var t=dl,e=hl;if(hl=dl=null,s1(t),e)for(t=0;t<e.length;t++)s1(e[t])}}function V2(t,e){return t(e)}function G2(){}var tp=!1;function Y2(t,e,n){if(tp)return t(e,n);tp=!0;try{return V2(t,e,n)}finally{tp=!1,(dl!==null||hl!==null)&&(G2(),H2())}}function Uu(t,e){var n=t.stateNode;if(n===null)return null;var r=zh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ze(231,e,typeof n));return n}var sm=!1;if(fs)try{var lu={};Object.defineProperty(lu,"passive",{get:function(){sm=!0}}),window.addEventListener("test",lu,lu),window.removeEventListener("test",lu,lu)}catch{sm=!1}function ub(t,e,n,r,i,s,a,o,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(g){this.onError(g)}}var Nu=!1,Zd=null,eh=!1,am=null,cb={onError:function(t){Nu=!0,Zd=t}};function db(t,e,n,r,i,s,a,o,l){Nu=!1,Zd=null,ub.apply(cb,arguments)}function hb(t,e,n,r,i,s,a,o,l){if(db.apply(this,arguments),Nu){if(Nu){var d=Zd;Nu=!1,Zd=null}else throw Error(ze(198));eh||(eh=!0,am=d)}}function to(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function K2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function a1(t){if(to(t)!==t)throw Error(ze(188))}function fb(t){var e=t.alternate;if(!e){if(e=to(t),e===null)throw Error(ze(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return a1(i),t;if(s===r)return a1(i),e;s=s.sibling}throw Error(ze(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(ze(189))}}if(n.alternate!==r)throw Error(ze(190))}if(n.tag!==3)throw Error(ze(188));return n.stateNode.current===n?t:e}function J2(t){return t=fb(t),t!==null?Q2(t):null}function Q2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q2(t);if(e!==null)return e;t=t.sibling}return null}var X2=Mr.unstable_scheduleCallback,o1=Mr.unstable_cancelCallback,pb=Mr.unstable_shouldYield,mb=Mr.unstable_requestPaint,cn=Mr.unstable_now,gb=Mr.unstable_getCurrentPriorityLevel,b0=Mr.unstable_ImmediatePriority,Z2=Mr.unstable_UserBlockingPriority,th=Mr.unstable_NormalPriority,vb=Mr.unstable_LowPriority,ey=Mr.unstable_IdlePriority,Oh=null,qi=null;function yb(t){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(Oh,t,void 0,(t.current.flags&128)===128)}catch{}}var Si=Math.clz32?Math.clz32:bb,wb=Math.log,xb=Math.LN2;function bb(t){return t>>>=0,t===0?32:31-(wb(t)/xb|0)|0}var gd=64,vd=4194304;function xu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=xu(o):(s&=a,s!==0&&(r=xu(s)))}else a=n&~i,a!==0?r=xu(a):s!==0&&(r=xu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Si(e),i=1<<n,r|=t[n],e&=~i;return r}function _b(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Si(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=_b(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function om(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ty(){var t=gd;return gd<<=1,!(gd&4194240)&&(gd=64),t}function np(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Si(e),t[e]=n}function Nb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Si(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function _0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Si(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Lt=0;function ny(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ry,S0,iy,sy,ay,lm=!1,yd=[],Js=null,Qs=null,Xs=null,$u=new Map,qu=new Map,$s=[],kb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l1(t,e){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":$u.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qu.delete(e.pointerId)}}function uu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=wc(e),e!==null&&S0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jb(t,e,n,r,i){switch(e){case"focusin":return Js=uu(Js,t,e,n,r,i),!0;case"dragenter":return Qs=uu(Qs,t,e,n,r,i),!0;case"mouseover":return Xs=uu(Xs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return $u.set(s,uu($u.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qu.set(s,uu(qu.get(s)||null,t,e,n,r,i)),!0}return!1}function oy(t){var e=Oa(t.target);if(e!==null){var n=to(e);if(n!==null){if(e=n.tag,e===13){if(e=K2(n),e!==null){t.blockedOn=e,ay(t.priority,function(){iy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=um(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rm=r,n.target.dispatchEvent(r),rm=null}else return e=wc(n),e!==null&&S0(e),t.blockedOn=n,!1;e.shift()}return!0}function u1(t,e,n){$d(t)&&n.delete(e)}function Ab(){lm=!1,Js!==null&&$d(Js)&&(Js=null),Qs!==null&&$d(Qs)&&(Qs=null),Xs!==null&&$d(Xs)&&(Xs=null),$u.forEach(u1),qu.forEach(u1)}function cu(t,e){t.blockedOn===e&&(t.blockedOn=null,lm||(lm=!0,Mr.unstable_scheduleCallback(Mr.unstable_NormalPriority,Ab)))}function Wu(t){function e(i){return cu(i,t)}if(0<yd.length){cu(yd[0],t);for(var n=1;n<yd.length;n++){var r=yd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Js!==null&&cu(Js,t),Qs!==null&&cu(Qs,t),Xs!==null&&cu(Xs,t),$u.forEach(e),qu.forEach(e),n=0;n<$s.length;n++)r=$s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$s.length&&(n=$s[0],n.blockedOn===null);)oy(n),n.blockedOn===null&&$s.shift()}var fl=vs.ReactCurrentBatchConfig,rh=!0;function Pb(t,e,n,r){var i=Lt,s=fl.transition;fl.transition=null;try{Lt=1,N0(t,e,n,r)}finally{Lt=i,fl.transition=s}}function Eb(t,e,n,r){var i=Lt,s=fl.transition;fl.transition=null;try{Lt=4,N0(t,e,n,r)}finally{Lt=i,fl.transition=s}}function N0(t,e,n,r){if(rh){var i=um(t,e,n,r);if(i===null)hp(t,e,r,ih,n),l1(t,r);else if(jb(i,t,e,n,r))r.stopPropagation();else if(l1(t,r),e&4&&-1<kb.indexOf(t)){for(;i!==null;){var s=wc(i);if(s!==null&&ry(s),s=um(t,e,n,r),s===null&&hp(t,e,r,ih,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else hp(t,e,r,null,n)}}var ih=null;function um(t,e,n,r){if(ih=null,t=x0(r),t=Oa(t),t!==null)if(e=to(t),e===null)t=null;else if(n=e.tag,n===13){if(t=K2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ih=t,null}function ly(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gb()){case b0:return 1;case Z2:return 4;case th:case vb:return 16;case ey:return 536870912;default:return 16}default:return 16}}var Vs=null,k0=null,qd=null;function uy(){if(qd)return qd;var t,e=k0,n=e.length,r,i="value"in Vs?Vs.value:Vs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return qd=i.slice(t,1<r?1-r:void 0)}function Wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wd(){return!0}function c1(){return!1}function Br(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wd:c1,this.isPropagationStopped=c1,this}return Zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wd)},persist:function(){},isPersistent:wd}),e}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j0=Br(jl),yc=Zt({},jl,{view:0,detail:0}),Cb=Br(yc),rp,ip,du,Dh=Zt({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:A0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==du&&(du&&t.type==="mousemove"?(rp=t.screenX-du.screenX,ip=t.screenY-du.screenY):ip=rp=0,du=t),rp)},movementY:function(t){return"movementY"in t?t.movementY:ip}}),d1=Br(Dh),Tb=Zt({},Dh,{dataTransfer:0}),Lb=Br(Tb),Ib=Zt({},yc,{relatedTarget:0}),sp=Br(Ib),Rb=Zt({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),Ob=Br(Rb),Db=Zt({},jl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fb=Br(Db),Mb=Zt({},jl,{data:0}),h1=Br(Mb),zb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ub={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $b(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ub[t])?!!e[t]:!1}function A0(){return $b}var qb=Zt({},yc,{key:function(t){if(t.key){var e=zb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:A0,charCode:function(t){return t.type==="keypress"?Wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wb=Br(qb),Hb=Zt({},Dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f1=Br(Hb),Vb=Zt({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:A0}),Gb=Br(Vb),Yb=Zt({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kb=Br(Yb),Jb=Zt({},Dh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qb=Br(Jb),Xb=[9,13,27,32],P0=fs&&"CompositionEvent"in window,ku=null;fs&&"documentMode"in document&&(ku=document.documentMode);var Zb=fs&&"TextEvent"in window&&!ku,cy=fs&&(!P0||ku&&8<ku&&11>=ku),p1=" ",m1=!1;function dy(t,e){switch(t){case"keyup":return Xb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zo=!1;function e4(t,e){switch(t){case"compositionend":return hy(e);case"keypress":return e.which!==32?null:(m1=!0,p1);case"textInput":return t=e.data,t===p1&&m1?null:t;default:return null}}function t4(t,e){if(Zo)return t==="compositionend"||!P0&&dy(t,e)?(t=uy(),qd=k0=Vs=null,Zo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cy&&e.locale!=="ko"?null:e.data;default:return null}}var n4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!n4[t.type]:e==="textarea"}function fy(t,e,n,r){W2(r),e=sh(e,"onChange"),0<e.length&&(n=new j0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ju=null,Hu=null;function r4(t){Ny(t,0)}function Fh(t){var e=nl(t);if(F2(e))return t}function i4(t,e){if(t==="change")return e}var py=!1;if(fs){var ap;if(fs){var op="oninput"in document;if(!op){var v1=document.createElement("div");v1.setAttribute("oninput","return;"),op=typeof v1.oninput=="function"}ap=op}else ap=!1;py=ap&&(!document.documentMode||9<document.documentMode)}function y1(){ju&&(ju.detachEvent("onpropertychange",my),Hu=ju=null)}function my(t){if(t.propertyName==="value"&&Fh(Hu)){var e=[];fy(e,Hu,t,x0(t)),Y2(r4,e)}}function s4(t,e,n){t==="focusin"?(y1(),ju=e,Hu=n,ju.attachEvent("onpropertychange",my)):t==="focusout"&&y1()}function a4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fh(Hu)}function o4(t,e){if(t==="click")return Fh(e)}function l4(t,e){if(t==="input"||t==="change")return Fh(e)}function u4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ki=typeof Object.is=="function"?Object.is:u4;function Vu(t,e){if(ki(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hp.call(e,i)||!ki(t[i],e[i]))return!1}return!0}function w1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function x1(t,e){var n=w1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=w1(n)}}function gy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vy(){for(var t=window,e=Xd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xd(t.document)}return e}function E0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function c4(t){var e=vy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gy(n.ownerDocument.documentElement,n)){if(r!==null&&E0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=x1(n,s);var a=x1(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var d4=fs&&"documentMode"in document&&11>=document.documentMode,el=null,cm=null,Au=null,dm=!1;function b1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dm||el==null||el!==Xd(r)||(r=el,"selectionStart"in r&&E0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Au&&Vu(Au,r)||(Au=r,r=sh(cm,"onSelect"),0<r.length&&(e=new j0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=el)))}function xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var tl={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},lp={},yy={};fs&&(yy=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Mh(t){if(lp[t])return lp[t];if(!tl[t])return t;var e=tl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yy)return lp[t]=e[n];return t}var wy=Mh("animationend"),xy=Mh("animationiteration"),by=Mh("animationstart"),_y=Mh("transitionend"),Sy=new Map,_1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ca(t,e){Sy.set(t,e),eo(e,[t])}for(var up=0;up<_1.length;up++){var cp=_1[up],h4=cp.toLowerCase(),f4=cp[0].toUpperCase()+cp.slice(1);ca(h4,"on"+f4)}ca(wy,"onAnimationEnd");ca(xy,"onAnimationIteration");ca(by,"onAnimationStart");ca("dblclick","onDoubleClick");ca("focusin","onFocus");ca("focusout","onBlur");ca(_y,"onTransitionEnd");yl("onMouseEnter",["mouseout","mouseover"]);yl("onMouseLeave",["mouseout","mouseover"]);yl("onPointerEnter",["pointerout","pointerover"]);yl("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p4=new Set("cancel close invalid load scroll toggle".split(" ").concat(bu));function S1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hb(r,e,void 0,t),t.currentTarget=null}function Ny(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,d=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;S1(i,o,d),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,d=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;S1(i,o,d),s=l}}}if(eh)throw t=am,eh=!1,am=null,t}function $t(t,e){var n=e[gm];n===void 0&&(n=e[gm]=new Set);var r=t+"__bubble";n.has(r)||(ky(e,t,2,!1),n.add(r))}function dp(t,e,n){var r=0;e&&(r|=4),ky(n,t,r,e)}var bd="_reactListening"+Math.random().toString(36).slice(2);function Gu(t){if(!t[bd]){t[bd]=!0,L2.forEach(function(n){n!=="selectionchange"&&(p4.has(n)||dp(n,!1,t),dp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bd]||(e[bd]=!0,dp("selectionchange",!1,e))}}function ky(t,e,n,r){switch(ly(e)){case 1:var i=Pb;break;case 4:i=Eb;break;default:i=N0}n=i.bind(null,e,n,t),i=void 0,!sm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Oa(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}Y2(function(){var d=s,g=x0(n),m=[];e:{var v=Sy.get(t);if(v!==void 0){var p=j0,S=t;switch(t){case"keypress":if(Wd(n)===0)break e;case"keydown":case"keyup":p=Wb;break;case"focusin":S="focus",p=sp;break;case"focusout":S="blur",p=sp;break;case"beforeblur":case"afterblur":p=sp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=d1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Lb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Gb;break;case wy:case xy:case by:p=Ob;break;case _y:p=Kb;break;case"scroll":p=Cb;break;case"wheel":p=Qb;break;case"copy":case"cut":case"paste":p=Fb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=f1}var _=(e&4)!==0,j=!_&&t==="scroll",x=_?v!==null?v+"Capture":null:v;_=[];for(var f=d,w;f!==null;){w=f;var N=w.stateNode;if(w.tag===5&&N!==null&&(w=N,x!==null&&(N=Uu(f,x),N!=null&&_.push(Yu(f,N,w)))),j)break;f=f.return}0<_.length&&(v=new p(v,S,null,n,g),m.push({event:v,listeners:_}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",v&&n!==rm&&(S=n.relatedTarget||n.fromElement)&&(Oa(S)||S[ps]))break e;if((p||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,p?(S=n.relatedTarget||n.toElement,p=d,S=S?Oa(S):null,S!==null&&(j=to(S),S!==j||S.tag!==5&&S.tag!==6)&&(S=null)):(p=null,S=d),p!==S)){if(_=d1,N="onMouseLeave",x="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(_=f1,N="onPointerLeave",x="onPointerEnter",f="pointer"),j=p==null?v:nl(p),w=S==null?v:nl(S),v=new _(N,f+"leave",p,n,g),v.target=j,v.relatedTarget=w,N=null,Oa(g)===d&&(_=new _(x,f+"enter",S,n,g),_.target=w,_.relatedTarget=j,N=_),j=N,p&&S)t:{for(_=p,x=S,f=0,w=_;w;w=Ro(w))f++;for(w=0,N=x;N;N=Ro(N))w++;for(;0<f-w;)_=Ro(_),f--;for(;0<w-f;)x=Ro(x),w--;for(;f--;){if(_===x||x!==null&&_===x.alternate)break t;_=Ro(_),x=Ro(x)}_=null}else _=null;p!==null&&N1(m,v,p,_,!1),S!==null&&j!==null&&N1(m,j,S,_,!0)}}e:{if(v=d?nl(d):window,p=v.nodeName&&v.nodeName.toLowerCase(),p==="select"||p==="input"&&v.type==="file")var D=i4;else if(g1(v))if(py)D=l4;else{D=a4;var E=s4}else(p=v.nodeName)&&p.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(D=o4);if(D&&(D=D(t,d))){fy(m,D,n,g);break e}E&&E(t,v,d),t==="focusout"&&(E=v._wrapperState)&&E.controlled&&v.type==="number"&&Xp(v,"number",v.value)}switch(E=d?nl(d):window,t){case"focusin":(g1(E)||E.contentEditable==="true")&&(el=E,cm=d,Au=null);break;case"focusout":Au=cm=el=null;break;case"mousedown":dm=!0;break;case"contextmenu":case"mouseup":case"dragend":dm=!1,b1(m,n,g);break;case"selectionchange":if(d4)break;case"keydown":case"keyup":b1(m,n,g)}var L;if(P0)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Zo?dy(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(cy&&n.locale!=="ko"&&(Zo||I!=="onCompositionStart"?I==="onCompositionEnd"&&Zo&&(L=uy()):(Vs=g,k0="value"in Vs?Vs.value:Vs.textContent,Zo=!0)),E=sh(d,I),0<E.length&&(I=new h1(I,t,null,n,g),m.push({event:I,listeners:E}),L?I.data=L:(L=hy(n),L!==null&&(I.data=L)))),(L=Zb?e4(t,n):t4(t,n))&&(d=sh(d,"onBeforeInput"),0<d.length&&(g=new h1("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:d}),g.data=L))}Ny(m,e)})}function Yu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Uu(t,n),s!=null&&r.unshift(Yu(t,s,i)),s=Uu(t,e),s!=null&&r.push(Yu(t,s,i))),t=t.return}return r}function Ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function N1(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,d=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&d!==null&&(o=d,i?(l=Uu(n,s),l!=null&&a.unshift(Yu(n,l,o))):i||(l=Uu(n,s),l!=null&&a.push(Yu(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var m4=/\r\n?/g,g4=/\u0000|\uFFFD/g;function k1(t){return(typeof t=="string"?t:""+t).replace(m4,`
`).replace(g4,"")}function _d(t,e,n){if(e=k1(e),k1(t)!==e&&n)throw Error(ze(425))}function ah(){}var hm=null,fm=null;function pm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mm=typeof setTimeout=="function"?setTimeout:void 0,v4=typeof clearTimeout=="function"?clearTimeout:void 0,j1=typeof Promise=="function"?Promise:void 0,y4=typeof queueMicrotask=="function"?queueMicrotask:typeof j1<"u"?function(t){return j1.resolve(null).then(t).catch(w4)}:mm;function w4(t){setTimeout(function(){throw t})}function fp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Wu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wu(e)}function Zs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function A1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Al=Math.random().toString(36).slice(2),zi="__reactFiber$"+Al,Ku="__reactProps$"+Al,ps="__reactContainer$"+Al,gm="__reactEvents$"+Al,x4="__reactListeners$"+Al,b4="__reactHandles$"+Al;function Oa(t){var e=t[zi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ps]||n[zi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=A1(t);t!==null;){if(n=t[zi])return n;t=A1(t)}return e}t=n,n=t.parentNode}return null}function wc(t){return t=t[zi]||t[ps],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ze(33))}function zh(t){return t[Ku]||null}var vm=[],rl=-1;function da(t){return{current:t}}function Wt(t){0>rl||(t.current=vm[rl],vm[rl]=null,rl--)}function Bt(t,e){rl++,vm[rl]=t.current,t.current=e}var oa={},tr=da(oa),wr=da(!1),Ga=oa;function wl(t,e){var n=t.type.contextTypes;if(!n)return oa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xr(t){return t=t.childContextTypes,t!=null}function oh(){Wt(wr),Wt(tr)}function P1(t,e,n){if(tr.current!==oa)throw Error(ze(168));Bt(tr,e),Bt(wr,n)}function jy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ze(108,sb(t)||"Unknown",i));return Zt({},n,r)}function lh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oa,Ga=tr.current,Bt(tr,t),Bt(wr,wr.current),!0}function E1(t,e,n){var r=t.stateNode;if(!r)throw Error(ze(169));n?(t=jy(t,e,Ga),r.__reactInternalMemoizedMergedChildContext=t,Wt(wr),Wt(tr),Bt(tr,t)):Wt(wr),Bt(wr,n)}var ls=null,Bh=!1,pp=!1;function Ay(t){ls===null?ls=[t]:ls.push(t)}function _4(t){Bh=!0,Ay(t)}function ha(){if(!pp&&ls!==null){pp=!0;var t=0,e=Lt;try{var n=ls;for(Lt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ls=null,Bh=!1}catch(i){throw ls!==null&&(ls=ls.slice(t+1)),X2(b0,ha),i}finally{Lt=e,pp=!1}}return null}var il=[],sl=0,uh=null,ch=0,Jr=[],Qr=0,Ya=null,us=1,cs="";function Pa(t,e){il[sl++]=ch,il[sl++]=uh,uh=t,ch=e}function Py(t,e,n){Jr[Qr++]=us,Jr[Qr++]=cs,Jr[Qr++]=Ya,Ya=t;var r=us;t=cs;var i=32-Si(r)-1;r&=~(1<<i),n+=1;var s=32-Si(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,us=1<<32-Si(e)+i|n<<i|r,cs=s+t}else us=1<<s|n<<i|r,cs=t}function C0(t){t.return!==null&&(Pa(t,1),Py(t,1,0))}function T0(t){for(;t===uh;)uh=il[--sl],il[sl]=null,ch=il[--sl],il[sl]=null;for(;t===Ya;)Ya=Jr[--Qr],Jr[Qr]=null,cs=Jr[--Qr],Jr[Qr]=null,us=Jr[--Qr],Jr[Qr]=null}var Dr=null,Rr=null,Vt=!1,_i=null;function Ey(t,e){var n=Xr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function C1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dr=t,Rr=Zs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dr=t,Rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ya!==null?{id:us,overflow:cs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dr=t,Rr=null,!0):!1;default:return!1}}function ym(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wm(t){if(Vt){var e=Rr;if(e){var n=e;if(!C1(t,e)){if(ym(t))throw Error(ze(418));e=Zs(n.nextSibling);var r=Dr;e&&C1(t,e)?Ey(r,n):(t.flags=t.flags&-4097|2,Vt=!1,Dr=t)}}else{if(ym(t))throw Error(ze(418));t.flags=t.flags&-4097|2,Vt=!1,Dr=t}}}function T1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dr=t}function Sd(t){if(t!==Dr)return!1;if(!Vt)return T1(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pm(t.type,t.memoizedProps)),e&&(e=Rr)){if(ym(t))throw Cy(),Error(ze(418));for(;e;)Ey(t,e),e=Zs(e.nextSibling)}if(T1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ze(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rr=Zs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rr=null}}else Rr=Dr?Zs(t.stateNode.nextSibling):null;return!0}function Cy(){for(var t=Rr;t;)t=Zs(t.nextSibling)}function xl(){Rr=Dr=null,Vt=!1}function L0(t){_i===null?_i=[t]:_i.push(t)}var S4=vs.ReactCurrentBatchConfig;function hu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ze(309));var r=n.stateNode}if(!r)throw Error(ze(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(ze(284));if(!n._owner)throw Error(ze(290,t))}return t}function Nd(t,e){throw t=Object.prototype.toString.call(e),Error(ze(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L1(t){var e=t._init;return e(t._payload)}function Ty(t){function e(x,f){if(t){var w=x.deletions;w===null?(x.deletions=[f],x.flags|=16):w.push(f)}}function n(x,f){if(!t)return null;for(;f!==null;)e(x,f),f=f.sibling;return null}function r(x,f){for(x=new Map;f!==null;)f.key!==null?x.set(f.key,f):x.set(f.index,f),f=f.sibling;return x}function i(x,f){return x=ra(x,f),x.index=0,x.sibling=null,x}function s(x,f,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<f?(x.flags|=2,f):w):(x.flags|=2,f)):(x.flags|=1048576,f)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,f,w,N){return f===null||f.tag!==6?(f=bp(w,x.mode,N),f.return=x,f):(f=i(f,w),f.return=x,f)}function l(x,f,w,N){var D=w.type;return D===Xo?g(x,f,w.props.children,N,w.key):f!==null&&(f.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===zs&&L1(D)===f.type)?(N=i(f,w.props),N.ref=hu(x,f,w),N.return=x,N):(N=Qd(w.type,w.key,w.props,null,x.mode,N),N.ref=hu(x,f,w),N.return=x,N)}function d(x,f,w,N){return f===null||f.tag!==4||f.stateNode.containerInfo!==w.containerInfo||f.stateNode.implementation!==w.implementation?(f=_p(w,x.mode,N),f.return=x,f):(f=i(f,w.children||[]),f.return=x,f)}function g(x,f,w,N,D){return f===null||f.tag!==7?(f=$a(w,x.mode,N,D),f.return=x,f):(f=i(f,w),f.return=x,f)}function m(x,f,w){if(typeof f=="string"&&f!==""||typeof f=="number")return f=bp(""+f,x.mode,w),f.return=x,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case fd:return w=Qd(f.type,f.key,f.props,null,x.mode,w),w.ref=hu(x,null,f),w.return=x,w;case Qo:return f=_p(f,x.mode,w),f.return=x,f;case zs:var N=f._init;return m(x,N(f._payload),w)}if(wu(f)||ou(f))return f=$a(f,x.mode,w,null),f.return=x,f;Nd(x,f)}return null}function v(x,f,w,N){var D=f!==null?f.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return D!==null?null:o(x,f,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fd:return w.key===D?l(x,f,w,N):null;case Qo:return w.key===D?d(x,f,w,N):null;case zs:return D=w._init,v(x,f,D(w._payload),N)}if(wu(w)||ou(w))return D!==null?null:g(x,f,w,N,null);Nd(x,w)}return null}function p(x,f,w,N,D){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(w)||null,o(f,x,""+N,D);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case fd:return x=x.get(N.key===null?w:N.key)||null,l(f,x,N,D);case Qo:return x=x.get(N.key===null?w:N.key)||null,d(f,x,N,D);case zs:var E=N._init;return p(x,f,w,E(N._payload),D)}if(wu(N)||ou(N))return x=x.get(w)||null,g(f,x,N,D,null);Nd(f,N)}return null}function S(x,f,w,N){for(var D=null,E=null,L=f,I=f=0,Y=null;L!==null&&I<w.length;I++){L.index>I?(Y=L,L=null):Y=L.sibling;var ee=v(x,L,w[I],N);if(ee===null){L===null&&(L=Y);break}t&&L&&ee.alternate===null&&e(x,L),f=s(ee,f,I),E===null?D=ee:E.sibling=ee,E=ee,L=Y}if(I===w.length)return n(x,L),Vt&&Pa(x,I),D;if(L===null){for(;I<w.length;I++)L=m(x,w[I],N),L!==null&&(f=s(L,f,I),E===null?D=L:E.sibling=L,E=L);return Vt&&Pa(x,I),D}for(L=r(x,L);I<w.length;I++)Y=p(L,x,I,w[I],N),Y!==null&&(t&&Y.alternate!==null&&L.delete(Y.key===null?I:Y.key),f=s(Y,f,I),E===null?D=Y:E.sibling=Y,E=Y);return t&&L.forEach(function(R){return e(x,R)}),Vt&&Pa(x,I),D}function _(x,f,w,N){var D=ou(w);if(typeof D!="function")throw Error(ze(150));if(w=D.call(w),w==null)throw Error(ze(151));for(var E=D=null,L=f,I=f=0,Y=null,ee=w.next();L!==null&&!ee.done;I++,ee=w.next()){L.index>I?(Y=L,L=null):Y=L.sibling;var R=v(x,L,ee.value,N);if(R===null){L===null&&(L=Y);break}t&&L&&R.alternate===null&&e(x,L),f=s(R,f,I),E===null?D=R:E.sibling=R,E=R,L=Y}if(ee.done)return n(x,L),Vt&&Pa(x,I),D;if(L===null){for(;!ee.done;I++,ee=w.next())ee=m(x,ee.value,N),ee!==null&&(f=s(ee,f,I),E===null?D=ee:E.sibling=ee,E=ee);return Vt&&Pa(x,I),D}for(L=r(x,L);!ee.done;I++,ee=w.next())ee=p(L,x,I,ee.value,N),ee!==null&&(t&&ee.alternate!==null&&L.delete(ee.key===null?I:ee.key),f=s(ee,f,I),E===null?D=ee:E.sibling=ee,E=ee);return t&&L.forEach(function(A){return e(x,A)}),Vt&&Pa(x,I),D}function j(x,f,w,N){if(typeof w=="object"&&w!==null&&w.type===Xo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case fd:e:{for(var D=w.key,E=f;E!==null;){if(E.key===D){if(D=w.type,D===Xo){if(E.tag===7){n(x,E.sibling),f=i(E,w.props.children),f.return=x,x=f;break e}}else if(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===zs&&L1(D)===E.type){n(x,E.sibling),f=i(E,w.props),f.ref=hu(x,E,w),f.return=x,x=f;break e}n(x,E);break}else e(x,E);E=E.sibling}w.type===Xo?(f=$a(w.props.children,x.mode,N,w.key),f.return=x,x=f):(N=Qd(w.type,w.key,w.props,null,x.mode,N),N.ref=hu(x,f,w),N.return=x,x=N)}return a(x);case Qo:e:{for(E=w.key;f!==null;){if(f.key===E)if(f.tag===4&&f.stateNode.containerInfo===w.containerInfo&&f.stateNode.implementation===w.implementation){n(x,f.sibling),f=i(f,w.children||[]),f.return=x,x=f;break e}else{n(x,f);break}else e(x,f);f=f.sibling}f=_p(w,x.mode,N),f.return=x,x=f}return a(x);case zs:return E=w._init,j(x,f,E(w._payload),N)}if(wu(w))return S(x,f,w,N);if(ou(w))return _(x,f,w,N);Nd(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,f!==null&&f.tag===6?(n(x,f.sibling),f=i(f,w),f.return=x,x=f):(n(x,f),f=bp(w,x.mode,N),f.return=x,x=f),a(x)):n(x,f)}return j}var bl=Ty(!0),Ly=Ty(!1),dh=da(null),hh=null,al=null,I0=null;function R0(){I0=al=hh=null}function O0(t){var e=dh.current;Wt(dh),t._currentValue=e}function xm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pl(t,e){hh=t,I0=al=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yr=!0),t.firstContext=null)}function ei(t){var e=t._currentValue;if(I0!==t)if(t={context:t,memoizedValue:e,next:null},al===null){if(hh===null)throw Error(ze(308));al=t,hh.dependencies={lanes:0,firstContext:t}}else al=al.next=t;return e}var Da=null;function D0(t){Da===null?Da=[t]:Da.push(t)}function Iy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,D0(e)):(n.next=i.next,i.next=n),e.interleaved=n,ms(t,r)}function ms(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bs=!1;function F0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ry(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ea(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Nt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ms(t,n)}return i=r.interleaved,i===null?(e.next=e,D0(r)):(e.next=i.next,i.next=e),r.interleaved=e,ms(t,n)}function Hd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_0(t,n)}}function I1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fh(t,e,n,r){var i=t.updateQueue;Bs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,d=l.next;l.next=null,a===null?s=d:a.next=d,a=l;var g=t.alternate;g!==null&&(g=g.updateQueue,o=g.lastBaseUpdate,o!==a&&(o===null?g.firstBaseUpdate=d:o.next=d,g.lastBaseUpdate=l))}if(s!==null){var m=i.baseState;a=0,g=d=l=null,o=s;do{var v=o.lane,p=o.eventTime;if((r&v)===v){g!==null&&(g=g.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var S=t,_=o;switch(v=e,p=n,_.tag){case 1:if(S=_.payload,typeof S=="function"){m=S.call(p,m,v);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=_.payload,v=typeof S=="function"?S.call(p,m,v):S,v==null)break e;m=Zt({},m,v);break e;case 2:Bs=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[o]:v.push(o))}else p={eventTime:p,lane:v,tag:o.tag,payload:o.payload,callback:o.callback,next:null},g===null?(d=g=p,l=m):g=g.next=p,a|=v;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;v=o,o=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(g===null&&(l=m),i.baseState=l,i.firstBaseUpdate=d,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ja|=a,t.lanes=a,t.memoizedState=m}}function R1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ze(191,i));i.call(r)}}}var xc={},Wi=da(xc),Ju=da(xc),Qu=da(xc);function Fa(t){if(t===xc)throw Error(ze(174));return t}function M0(t,e){switch(Bt(Qu,e),Bt(Ju,t),Bt(Wi,xc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=em(e,t)}Wt(Wi),Bt(Wi,e)}function _l(){Wt(Wi),Wt(Ju),Wt(Qu)}function Oy(t){Fa(Qu.current);var e=Fa(Wi.current),n=em(e,t.type);e!==n&&(Bt(Ju,t),Bt(Wi,n))}function z0(t){Ju.current===t&&(Wt(Wi),Wt(Ju))}var Jt=da(0);function ph(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mp=[];function B0(){for(var t=0;t<mp.length;t++)mp[t]._workInProgressVersionPrimary=null;mp.length=0}var Vd=vs.ReactCurrentDispatcher,gp=vs.ReactCurrentBatchConfig,Ka=0,Xt=null,jn=null,In=null,mh=!1,Pu=!1,Xu=0,N4=0;function Gn(){throw Error(ze(321))}function U0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ki(t[n],e[n]))return!1;return!0}function $0(t,e,n,r,i,s){if(Ka=s,Xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vd.current=t===null||t.memoizedState===null?P4:E4,t=n(r,i),Pu){s=0;do{if(Pu=!1,Xu=0,25<=s)throw Error(ze(301));s+=1,In=jn=null,e.updateQueue=null,Vd.current=C4,t=n(r,i)}while(Pu)}if(Vd.current=gh,e=jn!==null&&jn.next!==null,Ka=0,In=jn=Xt=null,mh=!1,e)throw Error(ze(300));return t}function q0(){var t=Xu!==0;return Xu=0,t}function Mi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Xt.memoizedState=In=t:In=In.next=t,In}function ti(){if(jn===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=jn.next;var e=In===null?Xt.memoizedState:In.next;if(e!==null)In=e,jn=t;else{if(t===null)throw Error(ze(310));jn=t,t={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},In===null?Xt.memoizedState=In=t:In=In.next=t}return In}function Zu(t,e){return typeof e=="function"?e(t):e}function vp(t){var e=ti(),n=e.queue;if(n===null)throw Error(ze(311));n.lastRenderedReducer=t;var r=jn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,d=s;do{var g=d.lane;if((Ka&g)===g)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:g,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(o=l=m,a=r):l=l.next=m,Xt.lanes|=g,Ja|=g}d=d.next}while(d!==null&&d!==s);l===null?a=r:l.next=o,ki(r,e.memoizedState)||(yr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Xt.lanes|=s,Ja|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yp(t){var e=ti(),n=e.queue;if(n===null)throw Error(ze(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);ki(s,e.memoizedState)||(yr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Dy(){}function Fy(t,e){var n=Xt,r=ti(),i=e(),s=!ki(r.memoizedState,i);if(s&&(r.memoizedState=i,yr=!0),r=r.queue,W0(By.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||In!==null&&In.memoizedState.tag&1){if(n.flags|=2048,ec(9,zy.bind(null,n,r,i,e),void 0,null),Rn===null)throw Error(ze(349));Ka&30||My(n,e,i)}return i}function My(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zy(t,e,n,r){e.value=n,e.getSnapshot=r,Uy(e)&&$y(t)}function By(t,e,n){return n(function(){Uy(e)&&$y(t)})}function Uy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ki(t,n)}catch{return!0}}function $y(t){var e=ms(t,1);e!==null&&Ni(e,t,1,-1)}function O1(t){var e=Mi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zu,lastRenderedState:t},e.queue=t,t=t.dispatch=A4.bind(null,Xt,t),[e.memoizedState,t]}function ec(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qy(){return ti().memoizedState}function Gd(t,e,n,r){var i=Mi();Xt.flags|=t,i.memoizedState=ec(1|e,n,void 0,r===void 0?null:r)}function Uh(t,e,n,r){var i=ti();r=r===void 0?null:r;var s=void 0;if(jn!==null){var a=jn.memoizedState;if(s=a.destroy,r!==null&&U0(r,a.deps)){i.memoizedState=ec(e,n,s,r);return}}Xt.flags|=t,i.memoizedState=ec(1|e,n,s,r)}function D1(t,e){return Gd(8390656,8,t,e)}function W0(t,e){return Uh(2048,8,t,e)}function Wy(t,e){return Uh(4,2,t,e)}function Hy(t,e){return Uh(4,4,t,e)}function Vy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gy(t,e,n){return n=n!=null?n.concat([t]):null,Uh(4,4,Vy.bind(null,e,t),n)}function H0(){}function Yy(t,e){var n=ti();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&U0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ky(t,e){var n=ti();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&U0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Jy(t,e,n){return Ka&21?(ki(n,e)||(n=ty(),Xt.lanes|=n,Ja|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yr=!0),t.memoizedState=n)}function k4(t,e){var n=Lt;Lt=n!==0&&4>n?n:4,t(!0);var r=gp.transition;gp.transition={};try{t(!1),e()}finally{Lt=n,gp.transition=r}}function Qy(){return ti().memoizedState}function j4(t,e,n){var r=na(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xy(t))Zy(e,n);else if(n=Iy(t,e,n,r),n!==null){var i=ur();Ni(n,t,r,i),e5(n,e,r)}}function A4(t,e,n){var r=na(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xy(t))Zy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,ki(o,a)){var l=e.interleaved;l===null?(i.next=i,D0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Iy(t,e,i,r),n!==null&&(i=ur(),Ni(n,t,r,i),e5(n,e,r))}}function Xy(t){var e=t.alternate;return t===Xt||e!==null&&e===Xt}function Zy(t,e){Pu=mh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function e5(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_0(t,n)}}var gh={readContext:ei,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},P4={readContext:ei,useCallback:function(t,e){return Mi().memoizedState=[t,e===void 0?null:e],t},useContext:ei,useEffect:D1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gd(4194308,4,Vy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gd(4,2,t,e)},useMemo:function(t,e){var n=Mi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j4.bind(null,Xt,t),[r.memoizedState,t]},useRef:function(t){var e=Mi();return t={current:t},e.memoizedState=t},useState:O1,useDebugValue:H0,useDeferredValue:function(t){return Mi().memoizedState=t},useTransition:function(){var t=O1(!1),e=t[0];return t=k4.bind(null,t[1]),Mi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xt,i=Mi();if(Vt){if(n===void 0)throw Error(ze(407));n=n()}else{if(n=e(),Rn===null)throw Error(ze(349));Ka&30||My(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,D1(By.bind(null,r,s,t),[t]),r.flags|=2048,ec(9,zy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Mi(),e=Rn.identifierPrefix;if(Vt){var n=cs,r=us;n=(r&~(1<<32-Si(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=N4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},E4={readContext:ei,useCallback:Yy,useContext:ei,useEffect:W0,useImperativeHandle:Gy,useInsertionEffect:Wy,useLayoutEffect:Hy,useMemo:Ky,useReducer:vp,useRef:qy,useState:function(){return vp(Zu)},useDebugValue:H0,useDeferredValue:function(t){var e=ti();return Jy(e,jn.memoizedState,t)},useTransition:function(){var t=vp(Zu)[0],e=ti().memoizedState;return[t,e]},useMutableSource:Dy,useSyncExternalStore:Fy,useId:Qy,unstable_isNewReconciler:!1},C4={readContext:ei,useCallback:Yy,useContext:ei,useEffect:W0,useImperativeHandle:Gy,useInsertionEffect:Wy,useLayoutEffect:Hy,useMemo:Ky,useReducer:yp,useRef:qy,useState:function(){return yp(Zu)},useDebugValue:H0,useDeferredValue:function(t){var e=ti();return jn===null?e.memoizedState=t:Jy(e,jn.memoizedState,t)},useTransition:function(){var t=yp(Zu)[0],e=ti().memoizedState;return[t,e]},useMutableSource:Dy,useSyncExternalStore:Fy,useId:Qy,unstable_isNewReconciler:!1};function gi(t,e){if(t&&t.defaultProps){e=Zt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Zt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $h={isMounted:function(t){return(t=t._reactInternals)?to(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ur(),i=na(t),s=hs(r,i);s.payload=e,n!=null&&(s.callback=n),e=ea(t,s,i),e!==null&&(Ni(e,t,i,r),Hd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ur(),i=na(t),s=hs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ea(t,s,i),e!==null&&(Ni(e,t,i,r),Hd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ur(),r=na(t),i=hs(n,r);i.tag=2,e!=null&&(i.callback=e),e=ea(t,i,r),e!==null&&(Ni(e,t,r,n),Hd(e,t,r))}};function F1(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Vu(n,r)||!Vu(i,s):!0}function t5(t,e,n){var r=!1,i=oa,s=e.contextType;return typeof s=="object"&&s!==null?s=ei(s):(i=xr(e)?Ga:tr.current,r=e.contextTypes,s=(r=r!=null)?wl(t,i):oa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$h,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function M1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$h.enqueueReplaceState(e,e.state,null)}function _m(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},F0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ei(s):(s=xr(e)?Ga:tr.current,i.context=wl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(bm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$h.enqueueReplaceState(i,i.state,null),fh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Sl(t,e){try{var n="",r=e;do n+=ib(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var T4=typeof WeakMap=="function"?WeakMap:Map;function n5(t,e,n){n=hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yh||(yh=!0,Im=r),Sm(t,e)},n}function r5(t,e,n){n=hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Sm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Sm(t,e),typeof r!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function z1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new T4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=H4.bind(null,t,e,n),e.then(t,t))}function B1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function U1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hs(-1,1),e.tag=2,ea(n,e,1))),n.lanes|=1),t)}var L4=vs.ReactCurrentOwner,yr=!1;function or(t,e,n,r){e.child=t===null?Ly(e,null,n,r):bl(e,t.child,n,r)}function $1(t,e,n,r,i){n=n.render;var s=e.ref;return pl(e,i),r=$0(t,e,n,r,s,i),n=q0(),t!==null&&!yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gs(t,e,i)):(Vt&&n&&C0(e),e.flags|=1,or(t,e,r,i),e.child)}function q1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Z0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,i5(t,e,s,r,i)):(t=Qd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vu,n(a,r)&&t.ref===e.ref)return gs(t,e,i)}return e.flags|=1,t=ra(s,r),t.ref=e.ref,t.return=e,e.child=t}function i5(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Vu(s,r)&&t.ref===e.ref)if(yr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(yr=!0);else return e.lanes=t.lanes,gs(t,e,i)}return Nm(t,e,n,r,i)}function s5(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(ll,Tr),Tr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Bt(ll,Tr),Tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Bt(ll,Tr),Tr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Bt(ll,Tr),Tr|=r;return or(t,e,i,n),e.child}function a5(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nm(t,e,n,r,i){var s=xr(n)?Ga:tr.current;return s=wl(e,s),pl(e,i),n=$0(t,e,n,r,s,i),r=q0(),t!==null&&!yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gs(t,e,i)):(Vt&&r&&C0(e),e.flags|=1,or(t,e,n,i),e.child)}function W1(t,e,n,r,i){if(xr(n)){var s=!0;lh(e)}else s=!1;if(pl(e,i),e.stateNode===null)Yd(t,e),t5(e,n,r),_m(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=ei(d):(d=xr(n)?Ga:tr.current,d=wl(e,d));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==d)&&M1(e,a,r,d),Bs=!1;var v=e.memoizedState;a.state=v,fh(e,r,a,i),l=e.memoizedState,o!==r||v!==l||wr.current||Bs?(typeof g=="function"&&(bm(e,n,g,r),l=e.memoizedState),(o=Bs||F1(e,n,o,r,v,l,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=d,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Ry(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:gi(e.type,o),a.props=d,m=e.pendingProps,v=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=ei(l):(l=xr(n)?Ga:tr.current,l=wl(e,l));var p=n.getDerivedStateFromProps;(g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==m||v!==l)&&M1(e,a,r,l),Bs=!1,v=e.memoizedState,a.state=v,fh(e,r,a,i);var S=e.memoizedState;o!==m||v!==S||wr.current||Bs?(typeof p=="function"&&(bm(e,n,p,r),S=e.memoizedState),(d=Bs||F1(e,n,d,r,v,S,l)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,S,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,S,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),a.props=r,a.state=S,a.context=l,r=d):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return km(t,e,n,r,s,i)}function km(t,e,n,r,i,s){a5(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&E1(e,n,!1),gs(t,e,s);r=e.stateNode,L4.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=bl(e,t.child,null,s),e.child=bl(e,null,o,s)):or(t,e,o,s),e.memoizedState=r.state,i&&E1(e,n,!0),e.child}function o5(t){var e=t.stateNode;e.pendingContext?P1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&P1(t,e.context,!1),M0(t,e.containerInfo)}function H1(t,e,n,r,i){return xl(),L0(i),e.flags|=256,or(t,e,n,r),e.child}var jm={dehydrated:null,treeContext:null,retryLane:0};function Am(t){return{baseLanes:t,cachePool:null,transitions:null}}function l5(t,e,n){var r=e.pendingProps,i=Jt.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Bt(Jt,i&1),t===null)return wm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Hh(a,r,0,null),t=$a(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Am(n),e.memoizedState=jm,t):V0(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return I4(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ra(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=ra(o,s):(s=$a(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Am(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=jm,r}return s=t.child,t=s.sibling,r=ra(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function V0(t,e){return e=Hh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kd(t,e,n,r){return r!==null&&L0(r),bl(e,t.child,null,n),t=V0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function I4(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=wp(Error(ze(422))),kd(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hh({mode:"visible",children:r.children},i,0,null),s=$a(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bl(e,t.child,null,a),e.child.memoizedState=Am(a),e.memoizedState=jm,s);if(!(e.mode&1))return kd(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(ze(419)),r=wp(s,r,void 0),kd(t,e,a,r)}if(o=(a&t.childLanes)!==0,yr||o){if(r=Rn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ms(t,i),Ni(r,t,i,-1))}return X0(),r=wp(Error(ze(421))),kd(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=V4.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rr=Zs(i.nextSibling),Dr=e,Vt=!0,_i=null,t!==null&&(Jr[Qr++]=us,Jr[Qr++]=cs,Jr[Qr++]=Ya,us=t.id,cs=t.overflow,Ya=e),e=V0(e,r.children),e.flags|=4096,e)}function V1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xm(t.return,e,n)}function xp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function u5(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(or(t,e,r.children,n),r=Jt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&V1(t,n,e);else if(t.tag===19)V1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Bt(Jt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ph(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ph(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xp(e,!0,n,null,s);break;case"together":xp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ja|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ze(153));if(e.child!==null){for(t=e.child,n=ra(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ra(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function R4(t,e,n){switch(e.tag){case 3:o5(e),xl();break;case 5:Oy(e);break;case 1:xr(e.type)&&lh(e);break;case 4:M0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Bt(dh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Bt(Jt,Jt.current&1),e.flags|=128,null):n&e.child.childLanes?l5(t,e,n):(Bt(Jt,Jt.current&1),t=gs(t,e,n),t!==null?t.sibling:null);Bt(Jt,Jt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return u5(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Bt(Jt,Jt.current),r)break;return null;case 22:case 23:return e.lanes=0,s5(t,e,n)}return gs(t,e,n)}var c5,Pm,d5,h5;c5=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pm=function(){};d5=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fa(Wi.current);var s=null;switch(n){case"input":i=Jp(t,i),r=Jp(t,r),s=[];break;case"select":i=Zt({},i,{value:void 0}),r=Zt({},r,{value:void 0}),s=[];break;case"textarea":i=Zp(t,i),r=Zp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ah)}tm(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var o=i[d];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(zu.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(o=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&l!==o&&(l!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(zu.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&$t("scroll",t),s||o===l||(s=[])):(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};h5=function(t,e,n,r){n!==r&&(e.flags|=4)};function fu(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function O4(t,e,n){var r=e.pendingProps;switch(T0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(e),null;case 1:return xr(e.type)&&oh(),Yn(e),null;case 3:return r=e.stateNode,_l(),Wt(wr),Wt(tr),B0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_i!==null&&(Dm(_i),_i=null))),Pm(t,e),Yn(e),null;case 5:z0(e);var i=Fa(Qu.current);if(n=e.type,t!==null&&e.stateNode!=null)d5(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ze(166));return Yn(e),null}if(t=Fa(Wi.current),Sd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[zi]=e,r[Ku]=s,t=(e.mode&1)!==0,n){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(i=0;i<bu.length;i++)$t(bu[i],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":t1(r,s),$t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$t("invalid",r);break;case"textarea":r1(r,s),$t("invalid",r)}tm(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&_d(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&_d(r.textContent,o,t),i=["children",""+o]):zu.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&$t("scroll",r)}switch(n){case"input":pd(r),n1(r,s,!0);break;case"textarea":pd(r),i1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ah)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=B2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[zi]=e,t[Ku]=r,c5(t,e,!1,!1),e.stateNode=t;e:{switch(a=nm(n,r),n){case"dialog":$t("cancel",t),$t("close",t),i=r;break;case"iframe":case"object":case"embed":$t("load",t),i=r;break;case"video":case"audio":for(i=0;i<bu.length;i++)$t(bu[i],t);i=r;break;case"source":$t("error",t),i=r;break;case"img":case"image":case"link":$t("error",t),$t("load",t),i=r;break;case"details":$t("toggle",t),i=r;break;case"input":t1(t,r),i=Jp(t,r),$t("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Zt({},r,{value:void 0}),$t("invalid",t);break;case"textarea":r1(t,r),i=Zp(t,r),$t("invalid",t);break;default:i=r}tm(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?q2(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&U2(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Bu(t,l):typeof l=="number"&&Bu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$t("scroll",t):l!=null&&g0(t,s,l,a))}switch(n){case"input":pd(t),n1(t,r,!1);break;case"textarea":pd(t),i1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+aa(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?cl(t,!!r.multiple,s,!1):r.defaultValue!=null&&cl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ah)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yn(e),null;case 6:if(t&&e.stateNode!=null)h5(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ze(166));if(n=Fa(Qu.current),Fa(Wi.current),Sd(e)){if(r=e.stateNode,n=e.memoizedProps,r[zi]=e,(s=r.nodeValue!==n)&&(t=Dr,t!==null))switch(t.tag){case 3:_d(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_d(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zi]=e,e.stateNode=r}return Yn(e),null;case 13:if(Wt(Jt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&Rr!==null&&e.mode&1&&!(e.flags&128))Cy(),xl(),e.flags|=98560,s=!1;else if(s=Sd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ze(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ze(317));s[zi]=e}else xl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yn(e),s=!1}else _i!==null&&(Dm(_i),_i=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Jt.current&1?En===0&&(En=3):X0())),e.updateQueue!==null&&(e.flags|=4),Yn(e),null);case 4:return _l(),Pm(t,e),t===null&&Gu(e.stateNode.containerInfo),Yn(e),null;case 10:return O0(e.type._context),Yn(e),null;case 17:return xr(e.type)&&oh(),Yn(e),null;case 19:if(Wt(Jt),s=e.memoizedState,s===null)return Yn(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)fu(s,!1);else{if(En!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ph(t),a!==null){for(e.flags|=128,fu(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Bt(Jt,Jt.current&1|2),e.child}t=t.sibling}s.tail!==null&&cn()>Nl&&(e.flags|=128,r=!0,fu(s,!1),e.lanes=4194304)}else{if(!r)if(t=ph(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Vt)return Yn(e),null}else 2*cn()-s.renderingStartTime>Nl&&n!==1073741824&&(e.flags|=128,r=!0,fu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=cn(),e.sibling=null,n=Jt.current,Bt(Jt,r?n&1|2:n&1),e):(Yn(e),null);case 22:case 23:return Q0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tr&1073741824&&(Yn(e),e.subtreeFlags&6&&(e.flags|=8192)):Yn(e),null;case 24:return null;case 25:return null}throw Error(ze(156,e.tag))}function D4(t,e){switch(T0(e),e.tag){case 1:return xr(e.type)&&oh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _l(),Wt(wr),Wt(tr),B0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return z0(e),null;case 13:if(Wt(Jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ze(340));xl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wt(Jt),null;case 4:return _l(),null;case 10:return O0(e.type._context),null;case 22:case 23:return Q0(),null;case 24:return null;default:return null}}var jd=!1,Zn=!1,F4=typeof WeakSet=="function"?WeakSet:Set,Je=null;function ol(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){sn(t,e,r)}else n.current=null}function Em(t,e,n){try{n()}catch(r){sn(t,e,r)}}var G1=!1;function M4(t,e){if(hm=rh,t=vy(),E0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,d=0,g=0,m=t,v=null;t:for(;;){for(var p;m!==n||i!==0&&m.nodeType!==3||(o=a+i),m!==s||r!==0&&m.nodeType!==3||(l=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(p=m.firstChild)!==null;)v=m,m=p;for(;;){if(m===t)break t;if(v===n&&++d===i&&(o=a),v===s&&++g===r&&(l=a),(p=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(fm={focusedElem:t,selectionRange:n},rh=!1,Je=e;Je!==null;)if(e=Je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Je=t;else for(;Je!==null;){e=Je;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var _=S.memoizedProps,j=S.memoizedState,x=e.stateNode,f=x.getSnapshotBeforeUpdate(e.elementType===e.type?_:gi(e.type,_),j);x.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ze(163))}}catch(N){sn(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}return S=G1,G1=!1,S}function Eu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Em(e,n,s)}i=i.next}while(i!==r)}}function qh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function f5(t){var e=t.alternate;e!==null&&(t.alternate=null,f5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zi],delete e[Ku],delete e[gm],delete e[x4],delete e[b4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function p5(t){return t.tag===5||t.tag===3||t.tag===4}function Y1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||p5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ah));else if(r!==4&&(t=t.child,t!==null))for(Tm(t,e,n),t=t.sibling;t!==null;)Tm(t,e,n),t=t.sibling}function Lm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lm(t,e,n),t=t.sibling;t!==null;)Lm(t,e,n),t=t.sibling}var Bn=null,xi=!1;function Rs(t,e,n){for(n=n.child;n!==null;)m5(t,e,n),n=n.sibling}function m5(t,e,n){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(Oh,n)}catch{}switch(n.tag){case 5:Zn||ol(n,e);case 6:var r=Bn,i=xi;Bn=null,Rs(t,e,n),Bn=r,xi=i,Bn!==null&&(xi?(t=Bn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bn.removeChild(n.stateNode));break;case 18:Bn!==null&&(xi?(t=Bn,n=n.stateNode,t.nodeType===8?fp(t.parentNode,n):t.nodeType===1&&fp(t,n),Wu(t)):fp(Bn,n.stateNode));break;case 4:r=Bn,i=xi,Bn=n.stateNode.containerInfo,xi=!0,Rs(t,e,n),Bn=r,xi=i;break;case 0:case 11:case 14:case 15:if(!Zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Em(n,e,a),i=i.next}while(i!==r)}Rs(t,e,n);break;case 1:if(!Zn&&(ol(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){sn(n,e,o)}Rs(t,e,n);break;case 21:Rs(t,e,n);break;case 22:n.mode&1?(Zn=(r=Zn)||n.memoizedState!==null,Rs(t,e,n),Zn=r):Rs(t,e,n);break;default:Rs(t,e,n)}}function K1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new F4),e.forEach(function(r){var i=G4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function hi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Bn=o.stateNode,xi=!1;break e;case 3:Bn=o.stateNode.containerInfo,xi=!0;break e;case 4:Bn=o.stateNode.containerInfo,xi=!0;break e}o=o.return}if(Bn===null)throw Error(ze(160));m5(s,a,i),Bn=null,xi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(d){sn(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)g5(e,t),e=e.sibling}function g5(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hi(e,t),Di(t),r&4){try{Eu(3,t,t.return),qh(3,t)}catch(_){sn(t,t.return,_)}try{Eu(5,t,t.return)}catch(_){sn(t,t.return,_)}}break;case 1:hi(e,t),Di(t),r&512&&n!==null&&ol(n,n.return);break;case 5:if(hi(e,t),Di(t),r&512&&n!==null&&ol(n,n.return),t.flags&32){var i=t.stateNode;try{Bu(i,"")}catch(_){sn(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&M2(i,s),nm(o,a);var d=nm(o,s);for(a=0;a<l.length;a+=2){var g=l[a],m=l[a+1];g==="style"?q2(i,m):g==="dangerouslySetInnerHTML"?U2(i,m):g==="children"?Bu(i,m):g0(i,g,m,d)}switch(o){case"input":Qp(i,s);break;case"textarea":z2(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?cl(i,!!s.multiple,p,!1):v!==!!s.multiple&&(s.defaultValue!=null?cl(i,!!s.multiple,s.defaultValue,!0):cl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ku]=s}catch(_){sn(t,t.return,_)}}break;case 6:if(hi(e,t),Di(t),r&4){if(t.stateNode===null)throw Error(ze(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){sn(t,t.return,_)}}break;case 3:if(hi(e,t),Di(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wu(e.containerInfo)}catch(_){sn(t,t.return,_)}break;case 4:hi(e,t),Di(t);break;case 13:hi(e,t),Di(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(K0=cn())),r&4&&K1(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Zn=(d=Zn)||g,hi(e,t),Zn=d):hi(e,t),Di(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!g&&t.mode&1)for(Je=t,g=t.child;g!==null;){for(m=Je=g;Je!==null;){switch(v=Je,p=v.child,v.tag){case 0:case 11:case 14:case 15:Eu(4,v,v.return);break;case 1:ol(v,v.return);var S=v.stateNode;if(typeof S.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(_){sn(r,n,_)}}break;case 5:ol(v,v.return);break;case 22:if(v.memoizedState!==null){Q1(m);continue}}p!==null?(p.return=v,Je=p):Q1(m)}g=g.sibling}e:for(g=null,m=t;;){if(m.tag===5){if(g===null){g=m;try{i=m.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=m.stateNode,l=m.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=$2("display",a))}catch(_){sn(t,t.return,_)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(_){sn(t,t.return,_)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:hi(e,t),Di(t),r&4&&K1(t);break;case 21:break;default:hi(e,t),Di(t)}}function Di(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(p5(n)){var r=n;break e}n=n.return}throw Error(ze(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Bu(i,""),r.flags&=-33);var s=Y1(t);Lm(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Y1(t);Tm(t,o,a);break;default:throw Error(ze(161))}}catch(l){sn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function z4(t,e,n){Je=t,v5(t)}function v5(t,e,n){for(var r=(t.mode&1)!==0;Je!==null;){var i=Je,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||jd;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Zn;o=jd;var d=Zn;if(jd=a,(Zn=l)&&!d)for(Je=i;Je!==null;)a=Je,l=a.child,a.tag===22&&a.memoizedState!==null?X1(i):l!==null?(l.return=a,Je=l):X1(i);for(;s!==null;)Je=s,v5(s),s=s.sibling;Je=i,jd=o,Zn=d}J1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Je=s):J1(t)}}function J1(t){for(;Je!==null;){var e=Je;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zn||qh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&R1(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}R1(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var g=d.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&Wu(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ze(163))}Zn||e.flags&512&&Cm(e)}catch(v){sn(e,e.return,v)}}if(e===t){Je=null;break}if(n=e.sibling,n!==null){n.return=e.return,Je=n;break}Je=e.return}}function Q1(t){for(;Je!==null;){var e=Je;if(e===t){Je=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Je=n;break}Je=e.return}}function X1(t){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qh(4,e)}catch(l){sn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){sn(e,i,l)}}var s=e.return;try{Cm(e)}catch(l){sn(e,s,l)}break;case 5:var a=e.return;try{Cm(e)}catch(l){sn(e,a,l)}}}catch(l){sn(e,e.return,l)}if(e===t){Je=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Je=o;break}Je=e.return}}var B4=Math.ceil,vh=vs.ReactCurrentDispatcher,G0=vs.ReactCurrentOwner,Zr=vs.ReactCurrentBatchConfig,Nt=0,Rn=null,_n=null,Un=0,Tr=0,ll=da(0),En=0,tc=null,Ja=0,Wh=0,Y0=0,Cu=null,vr=null,K0=0,Nl=1/0,as=null,yh=!1,Im=null,ta=null,Ad=!1,Gs=null,wh=0,Tu=0,Rm=null,Kd=-1,Jd=0;function ur(){return Nt&6?cn():Kd!==-1?Kd:Kd=cn()}function na(t){return t.mode&1?Nt&2&&Un!==0?Un&-Un:S4.transition!==null?(Jd===0&&(Jd=ty()),Jd):(t=Lt,t!==0||(t=window.event,t=t===void 0?16:ly(t.type)),t):1}function Ni(t,e,n,r){if(50<Tu)throw Tu=0,Rm=null,Error(ze(185));vc(t,n,r),(!(Nt&2)||t!==Rn)&&(t===Rn&&(!(Nt&2)&&(Wh|=n),En===4&&qs(t,Un)),br(t,r),n===1&&Nt===0&&!(e.mode&1)&&(Nl=cn()+500,Bh&&ha()))}function br(t,e){var n=t.callbackNode;Sb(t,e);var r=nh(t,t===Rn?Un:0);if(r===0)n!==null&&o1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&o1(n),e===1)t.tag===0?_4(Z1.bind(null,t)):Ay(Z1.bind(null,t)),y4(function(){!(Nt&6)&&ha()}),n=null;else{switch(ny(r)){case 1:n=b0;break;case 4:n=Z2;break;case 16:n=th;break;case 536870912:n=ey;break;default:n=th}n=k5(n,y5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function y5(t,e){if(Kd=-1,Jd=0,Nt&6)throw Error(ze(327));var n=t.callbackNode;if(ml()&&t.callbackNode!==n)return null;var r=nh(t,t===Rn?Un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xh(t,r);else{e=r;var i=Nt;Nt|=2;var s=x5();(Rn!==t||Un!==e)&&(as=null,Nl=cn()+500,Ua(t,e));do try{q4();break}catch(o){w5(t,o)}while(!0);R0(),vh.current=s,Nt=i,_n!==null?e=0:(Rn=null,Un=0,e=En)}if(e!==0){if(e===2&&(i=om(t),i!==0&&(r=i,e=Om(t,i))),e===1)throw n=tc,Ua(t,0),qs(t,r),br(t,cn()),n;if(e===6)qs(t,r);else{if(i=t.current.alternate,!(r&30)&&!U4(i)&&(e=xh(t,r),e===2&&(s=om(t),s!==0&&(r=s,e=Om(t,s))),e===1))throw n=tc,Ua(t,0),qs(t,r),br(t,cn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ze(345));case 2:Ea(t,vr,as);break;case 3:if(qs(t,r),(r&130023424)===r&&(e=K0+500-cn(),10<e)){if(nh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ur(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=mm(Ea.bind(null,t,vr,as),e);break}Ea(t,vr,as);break;case 4:if(qs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Si(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*B4(r/1960))-r,10<r){t.timeoutHandle=mm(Ea.bind(null,t,vr,as),r);break}Ea(t,vr,as);break;case 5:Ea(t,vr,as);break;default:throw Error(ze(329))}}}return br(t,cn()),t.callbackNode===n?y5.bind(null,t):null}function Om(t,e){var n=Cu;return t.current.memoizedState.isDehydrated&&(Ua(t,e).flags|=256),t=xh(t,e),t!==2&&(e=vr,vr=n,e!==null&&Dm(e)),t}function Dm(t){vr===null?vr=t:vr.push.apply(vr,t)}function U4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ki(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qs(t,e){for(e&=~Y0,e&=~Wh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Si(e),r=1<<n;t[n]=-1,e&=~r}}function Z1(t){if(Nt&6)throw Error(ze(327));ml();var e=nh(t,0);if(!(e&1))return br(t,cn()),null;var n=xh(t,e);if(t.tag!==0&&n===2){var r=om(t);r!==0&&(e=r,n=Om(t,r))}if(n===1)throw n=tc,Ua(t,0),qs(t,e),br(t,cn()),n;if(n===6)throw Error(ze(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ea(t,vr,as),br(t,cn()),null}function J0(t,e){var n=Nt;Nt|=1;try{return t(e)}finally{Nt=n,Nt===0&&(Nl=cn()+500,Bh&&ha())}}function Qa(t){Gs!==null&&Gs.tag===0&&!(Nt&6)&&ml();var e=Nt;Nt|=1;var n=Zr.transition,r=Lt;try{if(Zr.transition=null,Lt=1,t)return t()}finally{Lt=r,Zr.transition=n,Nt=e,!(Nt&6)&&ha()}}function Q0(){Tr=ll.current,Wt(ll)}function Ua(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,v4(n)),_n!==null)for(n=_n.return;n!==null;){var r=n;switch(T0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oh();break;case 3:_l(),Wt(wr),Wt(tr),B0();break;case 5:z0(r);break;case 4:_l();break;case 13:Wt(Jt);break;case 19:Wt(Jt);break;case 10:O0(r.type._context);break;case 22:case 23:Q0()}n=n.return}if(Rn=t,_n=t=ra(t.current,null),Un=Tr=e,En=0,tc=null,Y0=Wh=Ja=0,vr=Cu=null,Da!==null){for(e=0;e<Da.length;e++)if(n=Da[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Da=null}return t}function w5(t,e){do{var n=_n;try{if(R0(),Vd.current=gh,mh){for(var r=Xt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mh=!1}if(Ka=0,In=jn=Xt=null,Pu=!1,Xu=0,G0.current=null,n===null||n.return===null){En=1,tc=e,_n=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=Un,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,g=o,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var p=B1(a);if(p!==null){p.flags&=-257,U1(p,a,o,s,e),p.mode&1&&z1(s,d,e),e=p,l=d;var S=e.updateQueue;if(S===null){var _=new Set;_.add(l),e.updateQueue=_}else S.add(l);break e}else{if(!(e&1)){z1(s,d,e),X0();break e}l=Error(ze(426))}}else if(Vt&&o.mode&1){var j=B1(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),U1(j,a,o,s,e),L0(Sl(l,o));break e}}s=l=Sl(l,o),En!==4&&(En=2),Cu===null?Cu=[s]:Cu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=n5(s,l,e);I1(s,x);break e;case 1:o=l;var f=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ta===null||!ta.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=r5(s,o,e);I1(s,N);break e}}s=s.return}while(s!==null)}_5(n)}catch(D){e=D,_n===n&&n!==null&&(_n=n=n.return);continue}break}while(!0)}function x5(){var t=vh.current;return vh.current=gh,t===null?gh:t}function X0(){(En===0||En===3||En===2)&&(En=4),Rn===null||!(Ja&268435455)&&!(Wh&268435455)||qs(Rn,Un)}function xh(t,e){var n=Nt;Nt|=2;var r=x5();(Rn!==t||Un!==e)&&(as=null,Ua(t,e));do try{$4();break}catch(i){w5(t,i)}while(!0);if(R0(),Nt=n,vh.current=r,_n!==null)throw Error(ze(261));return Rn=null,Un=0,En}function $4(){for(;_n!==null;)b5(_n)}function q4(){for(;_n!==null&&!pb();)b5(_n)}function b5(t){var e=N5(t.alternate,t,Tr);t.memoizedProps=t.pendingProps,e===null?_5(t):_n=e,G0.current=null}function _5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=D4(n,e),n!==null){n.flags&=32767,_n=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{En=6,_n=null;return}}else if(n=O4(n,e,Tr),n!==null){_n=n;return}if(e=e.sibling,e!==null){_n=e;return}_n=e=t}while(e!==null);En===0&&(En=5)}function Ea(t,e,n){var r=Lt,i=Zr.transition;try{Zr.transition=null,Lt=1,W4(t,e,n,r)}finally{Zr.transition=i,Lt=r}return null}function W4(t,e,n,r){do ml();while(Gs!==null);if(Nt&6)throw Error(ze(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ze(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Nb(t,s),t===Rn&&(_n=Rn=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ad||(Ad=!0,k5(th,function(){return ml(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zr.transition,Zr.transition=null;var a=Lt;Lt=1;var o=Nt;Nt|=4,G0.current=null,M4(t,n),g5(n,t),c4(fm),rh=!!hm,fm=hm=null,t.current=n,z4(n),mb(),Nt=o,Lt=a,Zr.transition=s}else t.current=n;if(Ad&&(Ad=!1,Gs=t,wh=i),s=t.pendingLanes,s===0&&(ta=null),yb(n.stateNode),br(t,cn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yh)throw yh=!1,t=Im,Im=null,t;return wh&1&&t.tag!==0&&ml(),s=t.pendingLanes,s&1?t===Rm?Tu++:(Tu=0,Rm=t):Tu=0,ha(),null}function ml(){if(Gs!==null){var t=ny(wh),e=Zr.transition,n=Lt;try{if(Zr.transition=null,Lt=16>t?16:t,Gs===null)var r=!1;else{if(t=Gs,Gs=null,wh=0,Nt&6)throw Error(ze(331));var i=Nt;for(Nt|=4,Je=t.current;Je!==null;){var s=Je,a=s.child;if(Je.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var d=o[l];for(Je=d;Je!==null;){var g=Je;switch(g.tag){case 0:case 11:case 15:Eu(8,g,s)}var m=g.child;if(m!==null)m.return=g,Je=m;else for(;Je!==null;){g=Je;var v=g.sibling,p=g.return;if(f5(g),g===d){Je=null;break}if(v!==null){v.return=p,Je=v;break}Je=p}}}var S=s.alternate;if(S!==null){var _=S.child;if(_!==null){S.child=null;do{var j=_.sibling;_.sibling=null,_=j}while(_!==null)}}Je=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Je=a;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Eu(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Je=x;break e}Je=s.return}}var f=t.current;for(Je=f;Je!==null;){a=Je;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Je=w;else e:for(a=f;Je!==null;){if(o=Je,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:qh(9,o)}}catch(D){sn(o,o.return,D)}if(o===a){Je=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,Je=N;break e}Je=o.return}}if(Nt=i,ha(),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(Oh,t)}catch{}r=!0}return r}finally{Lt=n,Zr.transition=e}}return!1}function ev(t,e,n){e=Sl(n,e),e=n5(t,e,1),t=ea(t,e,1),e=ur(),t!==null&&(vc(t,1,e),br(t,e))}function sn(t,e,n){if(t.tag===3)ev(t,t,n);else for(;e!==null;){if(e.tag===3){ev(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ta===null||!ta.has(r))){t=Sl(n,t),t=r5(e,t,1),e=ea(e,t,1),t=ur(),e!==null&&(vc(e,1,t),br(e,t));break}}e=e.return}}function H4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ur(),t.pingedLanes|=t.suspendedLanes&n,Rn===t&&(Un&n)===n&&(En===4||En===3&&(Un&130023424)===Un&&500>cn()-K0?Ua(t,0):Y0|=n),br(t,e)}function S5(t,e){e===0&&(t.mode&1?(e=vd,vd<<=1,!(vd&130023424)&&(vd=4194304)):e=1);var n=ur();t=ms(t,e),t!==null&&(vc(t,e,n),br(t,n))}function V4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),S5(t,n)}function G4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ze(314))}r!==null&&r.delete(e),S5(t,n)}var N5;N5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wr.current)yr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yr=!1,R4(t,e,n);yr=!!(t.flags&131072)}else yr=!1,Vt&&e.flags&1048576&&Py(e,ch,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yd(t,e),t=e.pendingProps;var i=wl(e,tr.current);pl(e,n),i=$0(null,e,r,t,i,n);var s=q0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xr(r)?(s=!0,lh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,F0(e),i.updater=$h,e.stateNode=i,i._reactInternals=e,_m(e,r,t,n),e=km(null,e,r,!0,s,n)):(e.tag=0,Vt&&s&&C0(e),or(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=K4(r),t=gi(r,t),i){case 0:e=Nm(null,e,r,t,n);break e;case 1:e=W1(null,e,r,t,n);break e;case 11:e=$1(null,e,r,t,n);break e;case 14:e=q1(null,e,r,gi(r.type,t),n);break e}throw Error(ze(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),Nm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),W1(t,e,r,i,n);case 3:e:{if(o5(e),t===null)throw Error(ze(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Ry(t,e),fh(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Sl(Error(ze(423)),e),e=H1(t,e,r,n,i);break e}else if(r!==i){i=Sl(Error(ze(424)),e),e=H1(t,e,r,n,i);break e}else for(Rr=Zs(e.stateNode.containerInfo.firstChild),Dr=e,Vt=!0,_i=null,n=Ly(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xl(),r===i){e=gs(t,e,n);break e}or(t,e,r,n)}e=e.child}return e;case 5:return Oy(e),t===null&&wm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,pm(r,i)?a=null:s!==null&&pm(r,s)&&(e.flags|=32),a5(t,e),or(t,e,a,n),e.child;case 6:return t===null&&wm(e),null;case 13:return l5(t,e,n);case 4:return M0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bl(e,null,r,n):or(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),$1(t,e,r,i,n);case 7:return or(t,e,e.pendingProps,n),e.child;case 8:return or(t,e,e.pendingProps.children,n),e.child;case 12:return or(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Bt(dh,r._currentValue),r._currentValue=a,s!==null)if(ki(s.value,a)){if(s.children===i.children&&!wr.current){e=gs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=hs(-1,n&-n),l.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var g=d.pending;g===null?l.next=l:(l.next=g.next,g.next=l),d.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),xm(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ze(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),xm(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}or(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pl(e,n),i=ei(i),r=r(i),e.flags|=1,or(t,e,r,n),e.child;case 14:return r=e.type,i=gi(r,e.pendingProps),i=gi(r.type,i),q1(t,e,r,i,n);case 15:return i5(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),Yd(t,e),e.tag=1,xr(r)?(t=!0,lh(e)):t=!1,pl(e,n),t5(e,r,i),_m(e,r,i,n),km(null,e,r,!0,t,n);case 19:return u5(t,e,n);case 22:return s5(t,e,n)}throw Error(ze(156,e.tag))};function k5(t,e){return X2(t,e)}function Y4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(t,e,n,r){return new Y4(t,e,n,r)}function Z0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function K4(t){if(typeof t=="function")return Z0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===y0)return 11;if(t===w0)return 14}return 2}function ra(t,e){var n=t.alternate;return n===null?(n=Xr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qd(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Z0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Xo:return $a(n.children,i,s,e);case v0:a=8,i|=8;break;case Vp:return t=Xr(12,n,e,i|2),t.elementType=Vp,t.lanes=s,t;case Gp:return t=Xr(13,n,e,i),t.elementType=Gp,t.lanes=s,t;case Yp:return t=Xr(19,n,e,i),t.elementType=Yp,t.lanes=s,t;case O2:return Hh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case I2:a=10;break e;case R2:a=9;break e;case y0:a=11;break e;case w0:a=14;break e;case zs:a=16,r=null;break e}throw Error(ze(130,t==null?t:typeof t,""))}return e=Xr(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $a(t,e,n,r){return t=Xr(7,t,r,e),t.lanes=n,t}function Hh(t,e,n,r){return t=Xr(22,t,r,e),t.elementType=O2,t.lanes=n,t.stateNode={isHidden:!1},t}function bp(t,e,n){return t=Xr(6,t,null,e),t.lanes=n,t}function _p(t,e,n){return e=Xr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function J4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=np(0),this.expirationTimes=np(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=np(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function eg(t,e,n,r,i,s,a,o,l){return t=new J4(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},F0(s),t}function Q4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function j5(t){if(!t)return oa;t=t._reactInternals;e:{if(to(t)!==t||t.tag!==1)throw Error(ze(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ze(171))}if(t.tag===1){var n=t.type;if(xr(n))return jy(t,n,e)}return e}function A5(t,e,n,r,i,s,a,o,l){return t=eg(n,r,!0,t,i,s,a,o,l),t.context=j5(null),n=t.current,r=ur(),i=na(n),s=hs(r,i),s.callback=e??null,ea(n,s,i),t.current.lanes=i,vc(t,i,r),br(t,r),t}function Vh(t,e,n,r){var i=e.current,s=ur(),a=na(i);return n=j5(n),e.context===null?e.context=n:e.pendingContext=n,e=hs(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ea(i,e,a),t!==null&&(Ni(t,i,a,s),Hd(t,i,a)),a}function bh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tg(t,e){tv(t,e),(t=t.alternate)&&tv(t,e)}function X4(){return null}var P5=typeof reportError=="function"?reportError:function(t){console.error(t)};function ng(t){this._internalRoot=t}Gh.prototype.render=ng.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ze(409));Vh(t,e,null,null)};Gh.prototype.unmount=ng.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qa(function(){Vh(null,t,null,null)}),e[ps]=null}};function Gh(t){this._internalRoot=t}Gh.prototype.unstable_scheduleHydration=function(t){if(t){var e=sy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$s.length&&e!==0&&e<$s[n].priority;n++);$s.splice(n,0,t),n===0&&oy(t)}};function rg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nv(){}function Z4(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=bh(a);s.call(d)}}var a=A5(e,r,t,0,null,!1,!1,"",nv);return t._reactRootContainer=a,t[ps]=a.current,Gu(t.nodeType===8?t.parentNode:t),Qa(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var d=bh(l);o.call(d)}}var l=eg(t,0,!1,null,null,!1,!1,"",nv);return t._reactRootContainer=l,t[ps]=l.current,Gu(t.nodeType===8?t.parentNode:t),Qa(function(){Vh(e,l,n,r)}),l}function Kh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=bh(a);o.call(l)}}Vh(e,a,t,i)}else a=Z4(n,e,t,i,r);return bh(a)}ry=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xu(e.pendingLanes);n!==0&&(_0(e,n|1),br(e,cn()),!(Nt&6)&&(Nl=cn()+500,ha()))}break;case 13:Qa(function(){var r=ms(t,1);if(r!==null){var i=ur();Ni(r,t,1,i)}}),tg(t,1)}};S0=function(t){if(t.tag===13){var e=ms(t,134217728);if(e!==null){var n=ur();Ni(e,t,134217728,n)}tg(t,134217728)}};iy=function(t){if(t.tag===13){var e=na(t),n=ms(t,e);if(n!==null){var r=ur();Ni(n,t,e,r)}tg(t,e)}};sy=function(){return Lt};ay=function(t,e){var n=Lt;try{return Lt=t,e()}finally{Lt=n}};im=function(t,e,n){switch(e){case"input":if(Qp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zh(r);if(!i)throw Error(ze(90));F2(r),Qp(r,i)}}}break;case"textarea":z2(t,n);break;case"select":e=n.value,e!=null&&cl(t,!!n.multiple,e,!1)}};V2=J0;G2=Qa;var e3={usingClientEntryPoint:!1,Events:[wc,nl,zh,W2,H2,J0]},pu={findFiberByHostInstance:Oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t3={bundleType:pu.bundleType,version:pu.version,rendererPackageName:pu.rendererPackageName,rendererConfig:pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=J2(t),t===null?null:t.stateNode},findFiberByHostInstance:pu.findFiberByHostInstance||X4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pd.isDisabled&&Pd.supportsFiber)try{Oh=Pd.inject(t3),qi=Pd}catch{}}zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e3;zr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rg(e))throw Error(ze(200));return Q4(t,e,null,n)};zr.createRoot=function(t,e){if(!rg(t))throw Error(ze(299));var n=!1,r="",i=P5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=eg(t,1,!1,null,null,n,!1,r,i),t[ps]=e.current,Gu(t.nodeType===8?t.parentNode:t),new ng(e)};zr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ze(188)):(t=Object.keys(t).join(","),Error(ze(268,t)));return t=J2(e),t=t===null?null:t.stateNode,t};zr.flushSync=function(t){return Qa(t)};zr.hydrate=function(t,e,n){if(!Yh(e))throw Error(ze(200));return Kh(null,t,e,!0,n)};zr.hydrateRoot=function(t,e,n){if(!rg(t))throw Error(ze(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=P5;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=A5(e,null,t,1,n??null,i,!1,s,a),t[ps]=e.current,Gu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gh(e)};zr.render=function(t,e,n){if(!Yh(e))throw Error(ze(200));return Kh(null,t,e,!1,n)};zr.unmountComponentAtNode=function(t){if(!Yh(t))throw Error(ze(40));return t._reactRootContainer?(Qa(function(){Kh(null,null,t,!1,function(){t._reactRootContainer=null,t[ps]=null})}),!0):!1};zr.unstable_batchedUpdates=J0;zr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yh(n))throw Error(ze(200));if(t==null||t._reactInternals===void 0)throw Error(ze(38));return Kh(t,e,n,!1,r)};zr.version="18.3.1-next-f1338f8080-20240426";function E5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E5)}catch(t){console.error(t)}}E5(),E2.exports=zr;var ig=E2.exports,C5,rv=ig;C5=rv.createRoot,rv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nc.apply(this,arguments)}var Ys;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ys||(Ys={}));const iv="popstate";function n3(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return Fm("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:_h(i)}return i3(e,n,null,t)}function pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function T5(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r3(){return Math.random().toString(36).substr(2,8)}function sv(t,e){return{usr:t.state,key:t.key,idx:e}}function Fm(t,e,n,r){return n===void 0&&(n=null),nc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Pl(e):e,{state:n,key:e&&e.key||r||r3()})}function _h(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Pl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function i3(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Ys.Pop,l=null,d=g();d==null&&(d=0,a.replaceState(nc({},a.state,{idx:d}),""));function g(){return(a.state||{idx:null}).idx}function m(){o=Ys.Pop;let j=g(),x=j==null?null:j-d;d=j,l&&l({action:o,location:_.location,delta:x})}function v(j,x){o=Ys.Push;let f=Fm(_.location,j,x);d=g()+1;let w=sv(f,d),N=_.createHref(f);try{a.pushState(w,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(N)}s&&l&&l({action:o,location:_.location,delta:1})}function p(j,x){o=Ys.Replace;let f=Fm(_.location,j,x);d=g();let w=sv(f,d),N=_.createHref(f);a.replaceState(w,"",N),s&&l&&l({action:o,location:_.location,delta:0})}function S(j){let x=i.location.origin!=="null"?i.location.origin:i.location.href,f=typeof j=="string"?j:_h(j);return f=f.replace(/ $/,"%20"),pn(x,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,x)}let _={get action(){return o},get location(){return t(i,a)},listen(j){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(iv,m),l=j,()=>{i.removeEventListener(iv,m),l=null}},createHref(j){return e(i,j)},createURL:S,encodeLocation(j){let x=S(j);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:v,replace:p,go(j){return a.go(j)}};return _}var av;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(av||(av={}));function s3(t,e,n){return n===void 0&&(n="/"),a3(t,e,n,!1)}function a3(t,e,n,r){let i=typeof e=="string"?Pl(e):e,s=sg(i.pathname||"/",n);if(s==null)return null;let a=L5(t);o3(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let d=y3(s);o=g3(a[l],d,r)}return o}function L5(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(pn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let d=ia([r,l.relativePath]),g=n.concat(l);s.children&&s.children.length>0&&(pn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),L5(s.children,e,g,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:p3(d,s.index),routesMeta:g})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of I5(s.path))i(s,a,l)}),e}function I5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=I5(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function o3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:m3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const l3=/^:[\w-]+$/,u3=3,c3=2,d3=1,h3=10,f3=-2,ov=t=>t==="*";function p3(t,e){let n=t.split("/"),r=n.length;return n.some(ov)&&(r+=f3),e&&(r+=c3),n.filter(i=>!ov(i)).reduce((i,s)=>i+(l3.test(s)?u3:s===""?d3:h3),r)}function m3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function g3(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],d=o===r.length-1,g=s==="/"?e:e.slice(s.length)||"/",m=lv({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},g),v=l.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=lv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},g)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:ia([s,m.pathname]),pathnameBase:_3(ia([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=ia([s,m.pathnameBase]))}return a}function lv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=v3(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((d,g,m)=>{let{paramName:v,isOptional:p}=g;if(v==="*"){let _=o[m]||"";a=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const S=o[m];return p&&!S?d[v]=void 0:d[v]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function v3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),T5(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function y3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return T5(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function sg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function w3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Pl(t):t;return{pathname:n?n.startsWith("/")?n:x3(n,e):e,search:S3(r),hash:N3(i)}}function x3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Sp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function b3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ag(t,e){let n=b3(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function og(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Pl(t):(i=nc({},t),pn(!i.pathname||!i.pathname.includes("?"),Sp("?","pathname","search",i)),pn(!i.pathname||!i.pathname.includes("#"),Sp("#","pathname","hash",i)),pn(!i.search||!i.search.includes("#"),Sp("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}o=m>=0?e[m]:"/"}let l=w3(i,o),d=a&&a!=="/"&&a.endsWith("/"),g=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(d||g)&&(l.pathname+="/"),l}const ia=t=>t.join("/").replace(/\/\/+/g,"/"),_3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),S3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,N3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function k3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const R5=["post","put","patch","delete"];new Set(R5);const j3=["get",...R5];new Set(j3);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rc.apply(this,arguments)}const lg=he.createContext(null),A3=he.createContext(null),fa=he.createContext(null),Jh=he.createContext(null),Gi=he.createContext({outlet:null,matches:[],isDataRoute:!1}),O5=he.createContext(null);function P3(t,e){let{relative:n}=e===void 0?{}:e;El()||pn(!1);let{basename:r,navigator:i}=he.useContext(fa),{hash:s,pathname:a,search:o}=F5(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:ia([r,a])),i.createHref({pathname:l,search:o,hash:s})}function El(){return he.useContext(Jh)!=null}function ys(){return El()||pn(!1),he.useContext(Jh).location}function D5(t){he.useContext(fa).static||he.useLayoutEffect(t)}function ni(){let{isDataRoute:t}=he.useContext(Gi);return t?q3():E3()}function E3(){El()||pn(!1);let t=he.useContext(lg),{basename:e,future:n,navigator:r}=he.useContext(fa),{matches:i}=he.useContext(Gi),{pathname:s}=ys(),a=JSON.stringify(ag(i,n.v7_relativeSplatPath)),o=he.useRef(!1);return D5(()=>{o.current=!0}),he.useCallback(function(d,g){if(g===void 0&&(g={}),!o.current)return;if(typeof d=="number"){r.go(d);return}let m=og(d,JSON.parse(a),s,g.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ia([e,m.pathname])),(g.replace?r.replace:r.push)(m,g.state,g)},[e,r,a,s,t])}const C3=he.createContext(null);function T3(t){let e=he.useContext(Gi).outlet;return e&&he.createElement(C3.Provider,{value:t},e)}function ug(){let{matches:t}=he.useContext(Gi),e=t[t.length-1];return e?e.params:{}}function F5(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=he.useContext(fa),{matches:i}=he.useContext(Gi),{pathname:s}=ys(),a=JSON.stringify(ag(i,r.v7_relativeSplatPath));return he.useMemo(()=>og(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function L3(t,e){return I3(t,e)}function I3(t,e,n,r){El()||pn(!1);let{navigator:i}=he.useContext(fa),{matches:s}=he.useContext(Gi),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let d=ys(),g;if(e){var m;let j=typeof e=="string"?Pl(e):e;l==="/"||(m=j.pathname)!=null&&m.startsWith(l)||pn(!1),g=j}else g=d;let v=g.pathname||"/",p=v;if(l!=="/"){let j=l.replace(/^\//,"").split("/");p="/"+v.replace(/^\//,"").split("/").slice(j.length).join("/")}let S=s3(t,{pathname:p}),_=M3(S&&S.map(j=>Object.assign({},j,{params:Object.assign({},o,j.params),pathname:ia([l,i.encodeLocation?i.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?l:ia([l,i.encodeLocation?i.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),s,n,r);return e&&_?he.createElement(Jh.Provider,{value:{location:rc({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Ys.Pop}},_):_}function R3(){let t=$3(),e=k3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},e),n?he.createElement("pre",{style:i},n):null,null)}const O3=he.createElement(R3,null);class D3 extends he.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?he.createElement(Gi.Provider,{value:this.props.routeContext},he.createElement(O5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function F3(t){let{routeContext:e,match:n,children:r}=t,i=he.useContext(lg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),he.createElement(Gi.Provider,{value:e},r)}function M3(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let g=a.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);g>=0||pn(!1),a=a.slice(0,Math.min(a.length,g+1))}let l=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<a.length;g++){let m=a[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=g),m.route.id){let{loaderData:v,errors:p}=n,S=m.route.loader&&v[m.route.id]===void 0&&(!p||p[m.route.id]===void 0);if(m.route.lazy||S){l=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((g,m,v)=>{let p,S=!1,_=null,j=null;n&&(p=o&&m.route.id?o[m.route.id]:void 0,_=m.route.errorElement||O3,l&&(d<0&&v===0?(S=!0,j=null):d===v&&(S=!0,j=m.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,v+1)),f=()=>{let w;return p?w=_:S?w=j:m.route.Component?w=he.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=g,he.createElement(F3,{match:m,routeContext:{outlet:g,matches:x,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?he.createElement(D3,{location:n.location,revalidation:n.revalidation,component:_,error:p,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}var M5=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(M5||{}),Sh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Sh||{});function z3(t){let e=he.useContext(lg);return e||pn(!1),e}function B3(t){let e=he.useContext(A3);return e||pn(!1),e}function U3(t){let e=he.useContext(Gi);return e||pn(!1),e}function z5(t){let e=U3(),n=e.matches[e.matches.length-1];return n.route.id||pn(!1),n.route.id}function $3(){var t;let e=he.useContext(O5),n=B3(Sh.UseRouteError),r=z5(Sh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function q3(){let{router:t}=z3(M5.UseNavigateStable),e=z5(Sh.UseNavigateStable),n=he.useRef(!1);return D5(()=>{n.current=!0}),he.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,rc({fromRouteId:e},s)))},[t,e])}function W3(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function H3(t){let{to:e,replace:n,state:r,relative:i}=t;El()||pn(!1);let{future:s,static:a}=he.useContext(fa),{matches:o}=he.useContext(Gi),{pathname:l}=ys(),d=ni(),g=og(e,ag(o,s.v7_relativeSplatPath),l,i==="path"),m=JSON.stringify(g);return he.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:i}),[d,m,i,n,r]),null}function V3(t){return T3(t.context)}function xn(t){pn(!1)}function G3(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ys.Pop,navigator:s,static:a=!1,future:o}=t;El()&&pn(!1);let l=e.replace(/^\/*/,"/"),d=he.useMemo(()=>({basename:l,navigator:s,static:a,future:rc({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=Pl(r));let{pathname:g="/",search:m="",hash:v="",state:p=null,key:S="default"}=r,_=he.useMemo(()=>{let j=sg(g,l);return j==null?null:{location:{pathname:j,search:m,hash:v,state:p,key:S},navigationType:i}},[l,g,m,v,p,S,i]);return _==null?null:he.createElement(fa.Provider,{value:d},he.createElement(Jh.Provider,{children:n,value:_}))}function Y3(t){let{children:e,location:n}=t;return L3(Mm(e),n)}new Promise(()=>{});function Mm(t,e){e===void 0&&(e=[]);let n=[];return he.Children.forEach(t,(r,i)=>{if(!he.isValidElement(r))return;let s=[...e,i];if(r.type===he.Fragment){n.push.apply(n,Mm(r.props.children,s));return}r.type!==xn&&pn(!1),!r.props.index||!r.props.children||pn(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Mm(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zm(){return zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zm.apply(this,arguments)}function K3(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function J3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Q3(t,e){return t.button===0&&(!e||e==="_self")&&!J3(t)}const X3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Z3="6";try{window.__reactRouterVersion=Z3}catch{}const e_="startTransition",uv=Hx[e_];function t_(t){let{basename:e,children:n,future:r,window:i}=t,s=he.useRef();s.current==null&&(s.current=n3({window:i,v5Compat:!0}));let a=s.current,[o,l]=he.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},g=he.useCallback(m=>{d&&uv?uv(()=>l(m)):l(m)},[l,d]);return he.useLayoutEffect(()=>a.listen(g),[a,g]),he.useEffect(()=>W3(r),[r]),he.createElement(G3,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const n_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pn=he.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:d,preventScrollReset:g,viewTransition:m}=e,v=K3(e,X3),{basename:p}=he.useContext(fa),S,_=!1;if(typeof d=="string"&&r_.test(d)&&(S=d,n_))try{let w=new URL(window.location.href),N=d.startsWith("//")?new URL(w.protocol+d):new URL(d),D=sg(N.pathname,p);N.origin===w.origin&&D!=null?d=D+N.search+N.hash:_=!0}catch{}let j=P3(d,{relative:i}),x=i_(d,{replace:a,state:o,target:l,preventScrollReset:g,relative:i,viewTransition:m});function f(w){r&&r(w),w.defaultPrevented||x(w)}return he.createElement("a",zm({},v,{href:S||j,onClick:_||s?r:f,ref:n,target:l}))});var cv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cv||(cv={}));var dv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dv||(dv={}));function i_(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=ni(),d=ys(),g=F5(t,{relative:a});return he.useCallback(m=>{if(Q3(m,n)){m.preventDefault();let v=r!==void 0?r:_h(d)===_h(g);l(t,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[d,l,g,r,i,n,t,s,a,o])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),yt=(t,e)=>{const n=he.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...d},g)=>he.createElement("svg",{ref:g,...s_,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${a_(t)}`,o].join(" "),...d},[...e.map(([m,v])=>he.createElement(m,v)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=yt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=yt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=yt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=yt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=yt("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=yt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=yt("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=yt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=yt("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=yt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=yt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=yt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=yt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=yt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=yt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=yt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=yt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=yt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=yt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=yt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=yt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=yt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=yt("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=yt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=yt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=yt("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=yt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=yt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=yt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=yt("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=yt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=yt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=yt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=yt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=yt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=yt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=yt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=yt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=yt("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=yt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var K5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(K5);var w_=K5.exports;const lr=u0(w_);function ef(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function x_(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(g){try{d(r.next(g))}catch(m){a(m)}}function l(g){try{d(r.throw(g))}catch(m){a(m)}}function d(g){g.done?s(g.value):i(g.value).then(o,l)}d((r=r.apply(t,e||[])).next())})}const b_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class hg extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class __ extends hg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pv extends hg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mv extends hg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Bm||(Bm={}));class S_{constructor(e,{headers:n={},customFetch:r,region:i=Bm.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=b_(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return x_(this,arguments,void 0,function*(n,r={}){var i;let s,a;try{const{headers:o,method:l,body:d,signal:g,timeout:m}=r;let v={},{region:p}=r;p||(p=this.region);const S=new URL(`${this.url}/${n}`);p&&p!=="any"&&(v["x-region"]=p,S.searchParams.set("forceFunctionRegion",p));let _;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",_=d):typeof d=="string"?(v["Content-Type"]="text/plain",_=d):typeof FormData<"u"&&d instanceof FormData?_=d:(v["Content-Type"]="application/json",_=JSON.stringify(d)):_=d;let j=g;m&&(a=new AbortController,s=setTimeout(()=>a.abort(),m),g?(j=a.signal,g.addEventListener("abort",()=>a.abort())):j=a.signal);const x=yield this.fetch(S.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),o),body:_,signal:j}).catch(D=>{throw new __(D)}),f=x.headers.get("x-relay-error");if(f&&f==="true")throw new pv(x);if(!x.ok)throw new mv(x);let w=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),N;return w==="application/json"?N=yield x.json():w==="application/octet-stream"||w==="application/pdf"?N=yield x.blob():w==="text/event-stream"?N=x:w==="multipart/form-data"?N=yield x.formData():N=yield x.text(),{data:N,error:null,response:x}}catch(o){return{data:null,error:o,response:o instanceof mv||o instanceof pv?o.context:void 0}}finally{s&&clearTimeout(s)}})}}var N_=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},k_=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let a=null,o=null,l=null,d=s.status,g=s.statusText;if(s.ok){var m,v;if(n.method!=="HEAD"){var p;const x=await s.text();x===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?o=x:o=JSON.parse(x))}const _=(m=n.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),j=(v=s.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");_&&j&&j.length>1&&(l=parseInt(j[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,d=406,g="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var S;const _=await s.text();try{a=JSON.parse(_),Array.isArray(a)&&s.status===404&&(o=[],a=null,d=200,g="OK")}catch{s.status===404&&_===""?(d=204,g="No Content"):a={message:_}}if(a&&n.isMaybeSingle&&(!(a==null||(S=a.details)===null||S===void 0)&&S.includes("0 rows"))&&(a=null,d=200,g="OK"),a&&n.shouldThrowOnError)throw new N_(a)}return{error:a,data:o,count:l,status:d,statusText:g}});return this.shouldThrowOnError||(i=i.catch(s=>{var a;let o="";const l=s==null?void 0:s.cause;if(l){var d,g,m,v;const S=(d=l==null?void 0:l.message)!==null&&d!==void 0?d:"",_=(g=l==null?void 0:l.code)!==null&&g!==void 0?g:"";o=`${(m=s==null?void 0:s.name)!==null&&m!==void 0?m:"FetchError"}: ${s==null?void 0:s.message}`,o+=`

Caused by: ${(v=l==null?void 0:l.name)!==null&&v!==void 0?v:"Error"}: ${S}`,_&&(o+=` (${_})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var p;o=(p=s==null?void 0:s.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},j_=class extends k_{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var a;const o=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const gv=new RegExp("[,()]");var Vo=class extends j_{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&gv.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&gv.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},A_=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Vo({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((a,o)=>a.concat(Object.keys(o)),[]);if(s.length>0){const a=[...new Set(s)].map(o=>`"${o}"`);this.url.searchParams.set("columns",a.join(","))}}return new Vo({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){const l=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new Vo({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Vo({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Vo({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},P_=class J5{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new A_(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new J5(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let d;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([m,v])=>v!==void 0).map(([m,v])=>[m,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([m,v])=>{l.searchParams.append(m,v)})):(o="POST",d=n);const g=new Headers(this.headers);return s&&g.set("Prefer",`count=${s}`),new Vo({method:o,url:l,headers:g,schema:this.schemaName,body:d,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class E_{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const C_="2.89.0",T_=`realtime-js/${C_}`,Q5="1.0.0",L_="2.0.0",vv=Q5,Um=1e4,I_=1e3,R_=100;var Us;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Us||(Us={}));var kn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(kn||(kn={}));var bi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(bi||(bi={}));var $m;(function(t){t.websocket="websocket"})($m||($m={}));var Ia;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ia||(Ia={}));class O_{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,s;const a=e.topic,o=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",d=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(g).length===0?"":JSON.stringify(g);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+d.length+m.length,p=new ArrayBuffer(this.HEADER_LENGTH+v);let S=new DataView(p),_=0;S.setUint8(_++,this.KINDS.userBroadcastPush),S.setUint8(_++,l.length),S.setUint8(_++,o.length),S.setUint8(_++,a.length),S.setUint8(_++,d.length),S.setUint8(_++,m.length),S.setUint8(_++,n),Array.from(l,x=>S.setUint8(_++,x.charCodeAt(0))),Array.from(o,x=>S.setUint8(_++,x.charCodeAt(0))),Array.from(a,x=>S.setUint8(_++,x.charCodeAt(0))),Array.from(d,x=>S.setUint8(_++,x.charCodeAt(0))),Array.from(m,x=>S.setUint8(_++,x.charCodeAt(0)));var j=new Uint8Array(p.byteLength+r.byteLength);return j.set(new Uint8Array(p),0),j.set(new Uint8Array(r),p.byteLength),j.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,a,o,l]=r;return n({join_ref:i,ref:s,topic:a,event:o,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),a=n.getUint8(3),o=n.getUint8(4);let l=this.HEADER_LENGTH+4;const d=r.decode(e.slice(l,l+i));l=l+i;const g=r.decode(e.slice(l,l+s));l=l+s;const m=r.decode(e.slice(l,l+a));l=l+a;const v=e.slice(l,e.byteLength),p=o===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,S={type:this.BROADCAST_EVENT,event:g,payload:p};return a>0&&(S.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class X5{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var zt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(zt||(zt={}));const yv=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=D_(a,t,e,i),s),{}):{}},D_=(t,e,n,r)=>{const i=e.find(o=>o.name===t),s=i==null?void 0:i.type,a=n[t];return s&&!r.includes(s)?Z5(s,a):qm(a)},Z5=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return B_(e,n)}switch(t){case zt.bool:return F_(e);case zt.float4:case zt.float8:case zt.int2:case zt.int4:case zt.int8:case zt.numeric:case zt.oid:return M_(e);case zt.json:case zt.jsonb:return z_(e);case zt.timestamp:return U_(e);case zt.abstime:case zt.date:case zt.daterange:case zt.int4range:case zt.int8range:case zt.money:case zt.reltime:case zt.text:case zt.time:case zt.timestamptz:case zt.timetz:case zt.tsrange:case zt.tstzrange:return qm(e);default:return qm(e)}},qm=t=>t,F_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},M_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},z_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},B_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>Z5(e,o))}return t},U_=t=>typeof t=="string"?t.replace(" ","T"):t,ew=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class kp{constructor(e,n,r={},i=Um){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(wv||(wv={}));class Lu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lu.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Lu.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Lu.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(s,(d,g)=>{a[d]||(l[d]=g)}),this.map(a,(d,g)=>{const m=s[d];if(m){const v=g.map(j=>j.presence_ref),p=m.map(j=>j.presence_ref),S=g.filter(j=>p.indexOf(j.presence_ref)<0),_=m.filter(j=>v.indexOf(j.presence_ref)<0);S.length>0&&(o[d]=S),_.length>0&&(l[d]=_)}else o[d]=g}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var d;const g=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(l),g.length>0){const m=e[o].map(p=>p.presence_ref),v=g.filter(p=>m.indexOf(p.presence_ref)<0);e[o].unshift(...v)}r(o,g,l)}),this.map(a,(o,l)=>{let d=e[o];if(!d)return;const g=l.map(m=>m.presence_ref);d=d.filter(m=>g.indexOf(m.presence_ref)<0),e[o]=d,i(o,d,l),d.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(xv||(xv={}));var Iu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Iu||(Iu={}));var os;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(os||(os={}));class ul{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=kn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new kp(this,bi.join,this.params,this.timeout),this.rejoinTimer=new X5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bi.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Lu(this),this.broadcastEndpointURL=ew(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==kn.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[Iu.PRESENCE]&&this.bindings[Iu.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,m={},v={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:g}),postgres_changes:d,private:l};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(os.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(os.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(os.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,j=(S=_==null?void 0:_.length)!==null&&S!==void 0?S:0,x=[];for(let f=0;f<j;f++){const w=_[f],{filter:{event:N,schema:D,table:E,filter:L}}=w,I=p&&p[f];if(I&&I.event===N&&ul.isFilterValueEqual(I.schema,D)&&ul.isFilterValueEqual(I.table,E)&&ul.isFilterValueEqual(I.filter,L))x.push(Object.assign(Object.assign({},w),{id:I.id}));else{this.unsubscribe(),this.state=kn.errored,e==null||e(os.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(os.SUBSCRIBED);return}}).receive("error",p=>{this.state=kn.errored,e==null||e(os.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(os.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===kn.joined&&e===Iu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const d=await o.json();l=d.error||d.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=kn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new kp(this,bi.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new kp(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>R_){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:d,join:g}=bi;if(r&&[o,l,d,g].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var S,_,j;return((S=p.filter)===null||S===void 0?void 0:S.event)==="*"||((j=(_=p.filter)===null||_===void 0?void 0:_.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===a}).map(p=>p.callback(v,r)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var S,_,j,x,f,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const N=p.id,D=(S=p.filter)===null||S===void 0?void 0:S.event;return N&&((_=n.ids)===null||_===void 0?void 0:_.includes(N))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const N=(f=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return N==="*"||N===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:_,table:j,commit_timestamp:x,type:f,errors:w}=S;v=Object.assign(Object.assign({},{schema:_,table:j,commit_timestamp:x,eventType:f,new:{},old:{},errors:w}),this._getPayloadRecords(S))}p.callback(v,r)})}_isClosed(){return this.state===kn.closed}_isJoined(){return this.state===kn.joined}_isJoining(){return this.state===kn.joining}_isLeaving(){return this.state===kn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&ul.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(bi.close,{},e)}_onError(e){this._on(bi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=yv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=yv(e.columns,e.old_record)),n}}const jp=()=>{},Ed={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$_=[1e3,2e3,5e3,1e4],q_=1e4,W_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class H_{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Um,this.transport=null,this.heartbeatIntervalMs=Ed.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jp,this.ref=0,this.reconnectTimer=null,this.vsn=vv,this.logger=jp,this.conn=null,this.sendBuffer=[],this.serializer=new O_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${$m.websocket}`,this.httpEndpoint=ew(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=E_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Us.connecting:return Ia.Connecting;case Us.open:return Ia.Open;case Us.closing:return Ia.Closing;default:return Ia.Closed}}isConnected(){return this.connectionState()===Ia.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new ul(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(I_,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ed.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${o}`.trim(),s),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Us.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Us.open||this.conn.readyState===Us.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(bi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([W_],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:T_};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(bi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new X5(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ed.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,a,o,l,d,g,m,v,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Um,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Ed.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:jp,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:vv,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:S=>$_[S-1]||q_,this.vsn){case Q5:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:(S,_)=>_(JSON.stringify(S)),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:(S,_)=>_(JSON.parse(S));break;case L_:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var oc=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function V_(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function G_(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Y_(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:a}){const o=V_(t.baseUrl,r,i),l=await G_(t.auth),d=await e(o,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),g=await d.text(),m=(d.headers.get("content-type")||"").includes("application/json"),v=m&&g?JSON.parse(g):g;if(!d.ok){const p=m?v:void 0,S=p==null?void 0:p.error;throw new oc((S==null?void 0:S.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:p})}return{status:d.status,headers:d.headers,data:v}}}}function Cd(t){return t.join("")}var K_=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Cd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Cd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Cd(t.namespace)}`}),!0}catch(e){if(e instanceof oc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof oc&&n.status===409)return;throw n}}};function Oo(t){return t.join("")}var J_=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Oo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Oo(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Oo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Oo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Oo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Oo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof oc&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof oc&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Q_=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Y_({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new K_(this.client,e),this.tableOps=new J_(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},tf=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Kt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var X_=class extends tf{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Wm=class extends tf{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const fg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Z_=()=>Response,Hm=t=>{if(Array.isArray(t))return t.map(n=>Hm(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Hm(r)}),e},eS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},tS=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function lc(t){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(t)}function nS(t,e){if(lc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rS(t){var e=nS(t,"string");return lc(e)=="symbol"?e:e+""}function iS(t,e,n){return(e=rS(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bv(Object(n),!0).forEach(function(r){iS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Ap=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},sS=async(t,e,n)=>{t instanceof await Z_()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,s=(r==null?void 0:r.statusCode)||i+"";e(new X_(Ap(r),i,s))}).catch(r=>{e(new Wm(Ap(r),r))}):e(new Wm(Ap(t),t))},aS=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(eS(r)?(i.headers=ot({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),ot(ot({},i),n))};async function bc(t,e,n,r,i,s){return new Promise((a,o)=>{t(n,aS(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>sS(l,o,r))})}async function uc(t,e,n,r){return bc(t,"GET",e,n,r)}async function yi(t,e,n,r,i){return bc(t,"POST",e,r,i,n)}async function Vm(t,e,n,r,i){return bc(t,"PUT",e,r,i,n)}async function oS(t,e,n,r){return bc(t,"HEAD",e,ot(ot({},n),{},{noResolveJson:!0}),r)}async function pg(t,e,n,r,i){return bc(t,"DELETE",e,r,i,n)}var lS=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Kt(e))return{data:null,error:e};throw e}}};let tw;tw=Symbol.toStringTag;var uS=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[tw]="BlobDownloadBuilder",this.promise=null}asStream(){return new lS(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Kt(e))return{data:null,error:e};throw e}}};const cS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_v={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var dS=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=fg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const a=ot(ot({},_v),r);let o=ot(ot({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(o=ot(ot({},o),r.headers));const d=i._removeEmptyFolders(e),g=i._getFinalPath(d),m=await(t=="PUT"?Vm:yi)(i.fetch,`${i.url}/object/${g}`,s,ot({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Kt(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),a=i._getFinalPath(s),o=new URL(i.url+`/object/upload/sign/${a}`);o.searchParams.set("token",e);try{let l;const d=ot({upsert:_v.upsert},r),g=ot(ot({},i.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",d.cacheControl)):(l=n,g["cache-control"]=`max-age=${d.cacheControl}`,g["content-type"]=d.contentType),{data:{path:s,fullPath:(await Vm(i.fetch,o.toString(),l,{headers:g})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Kt(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=ot({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await yi(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+s.url),o=a.searchParams.get("token");if(!o)throw new tf("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Kt(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await yi(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Kt(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await yi(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Kt(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await yi(r.fetch,`${r.url}/object/sign/${i}`,ot({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Kt(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await yi(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>ot(ot({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Kt(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),a=()=>uc(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new uS(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:Hm(await uc(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Kt(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await oS(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Kt(r)&&r instanceof Wm){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&r.push(a);let o=r.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}async remove(t){var e=this;try{return{data:await pg(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=ot(ot(ot({},cS),e),{},{prefix:t||""});return{data:await yi(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Kt(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=ot({},t);return{data:await yi(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Kt(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const nw="2.89.0",rw={"X-Client-Info":`storage-js/${nw}`};var hS=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=ot(ot({},rw),e),this.fetch=fg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await uc(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await uc(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await yi(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Kt(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await Vm(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Kt(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await yi(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await pg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},fS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ot(ot({},rw),e),this.fetch=fg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await yi(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await uc(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await pg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!tS(t))throw new tf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Q_({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const a=i[s];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(i,o),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const mg={"X-Client-Info":`storage-js/${nw}`,"Content-Type":"application/json"};var iw=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Lr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Pp=class extends iw{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},pS=class extends iw{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const gg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Sv=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gS=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const a=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";e(new Pp(Sv(s),r,a))}).catch(()=>{const s=r+"";e(new Pp(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new Pp(i.statusText||`HTTP ${r} error`,r,s))}}else e(new pS(Sv(t),t))},vS=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(mS(r)?(i.headers=ot({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,ot(ot({},i),n)):i};async function yS(t,e,n,r,i,s){return new Promise((a,o)=>{t(n,vS(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const d=l.headers.get("content-type");return!d||!d.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>gS(l,o,r))})}async function Ir(t,e,n,r,i){return yS(t,"POST",e,r,i,n)}var wS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ot(ot({},mg),e),this.fetch=gg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Ir(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await Ir(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await Ir(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await Ir(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}},xS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ot(ot({},mg),e),this.fetch=gg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ir(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await Ir(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Ir(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await Ir(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ir(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}},bS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ot(ot({},mg),e),this.fetch=gg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Ir(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Ir(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await Ir(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Ir(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}},_S=class extends bS{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new SS(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},SS=class extends wS{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ot(ot({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ot(ot({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new NS(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},NS=class extends xS{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ot(ot({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ot(ot({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ot(ot({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ot(ot({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ot(ot({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},kS=class extends hS{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new dS(this.url,this.headers,t,this.fetch)}get vectors(){return new _S(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fS(this.url+"/iceberg",this.headers,this.fetch)}};const sw="2.89.0",Go=30*1e3,Gm=3,Ep=Gm*Go,jS="http://localhost:9999",AS="supabase.auth.token",PS={"X-Client-Info":`gotrue-js/${sw}`},Ym="X-Supabase-Api-Version",aw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ES=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,CS=10*60*1e3;class cc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function et(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class TS extends cc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function LS(t){return et(t)&&t.name==="AuthApiError"}class Ra extends cc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ws extends cc{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Cr extends ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IS(t){return et(t)&&t.name==="AuthSessionMissingError"}class Do extends ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Td extends ws{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ld extends ws{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function RS(t){return et(t)&&t.name==="AuthImplicitGrantRedirectError"}class Nv extends ws{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class OS extends ws{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Km extends ws{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Cp(t){return et(t)&&t.name==="AuthRetryableFetchError"}class kv extends ws{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Jm extends ws{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ph="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jv=` 	
\r=`.split(""),DS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<jv.length;e+=1)t[jv[e].charCodeAt(0)]=-2;for(let e=0;e<Ph.length;e+=1)t[Ph[e].charCodeAt(0)]=e;return t})();function Av(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ph[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ph[r]),e.queuedBits-=6}}function ow(t,e,n){const r=DS[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Pv(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{zS(a,r,n)};for(let a=0;a<t.length;a+=1)ow(t.charCodeAt(a),i,s);return e.join("")}function FS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function MS(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}FS(r,e)}}function zS(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function gl(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)ow(t.charCodeAt(i),n,r);return new Uint8Array(e)}function BS(t){const e=[];return MS(t,n=>e.push(n)),new Uint8Array(e)}function Ma(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Av(i,n,r)),Av(null,n,r),e.join("")}function US(t){return Math.round(Date.now()/1e3)+t}function $S(){return Symbol("auth-callback")}const zn=()=>typeof window<"u"&&typeof document<"u",ka={tested:!1,writable:!1},lw=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ka.tested)return ka.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ka.tested=!0,ka.writable=!0}catch{ka.tested=!0,ka.writable=!1}return ka.writable};function qS(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const uw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),WS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Yo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ja=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Fn=async(t,e)=>{await t.removeItem(e)};class nf{constructor(){this.promise=new nf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}nf.promiseConstructor=Promise;function Tp(t){const e=t.split(".");if(e.length!==3)throw new Jm("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ES.test(e[r]))throw new Jm("JWT not in base64url format");return{header:JSON.parse(Pv(e[0])),payload:JSON.parse(Pv(e[1])),signature:gl(e[2]),raw:{header:e[0],payload:e[1]}}}async function HS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function VS(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function GS(t){return("0"+t.toString(16)).substr(-2)}function YS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,GS).join("")}async function KS(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function JS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await KS(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fo(t,e,n=!1){const r=YS();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Yo(t,`${e}-code-verifier`,i);const s=await JS(r);return[s,r===s?"plain":"s256"]}const QS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function XS(t){const e=t.headers.get(Ym);if(!e||!e.match(QS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ZS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function eN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mo(t){if(!tN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lp(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nN(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Ev(t){return JSON.parse(JSON.stringify(t))}const Ca=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),rN=[502,503,504];async function Cv(t){var e;if(!WS(t))throw new Km(Ca(t),0);if(rN.includes(t.status))throw new Km(Ca(t),t.status);let n;try{n=await t.json()}catch(s){throw new Ra(Ca(s),s)}let r;const i=XS(t);if(i&&i.getTime()>=aw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new kv(Ca(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Cr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new kv(Ca(n),t.status,n.weak_password.reasons);throw new TS(Ca(n),t.status||500,r)}const iN=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function at(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Ym]||(s[Ym]=aw["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await sN(t,e,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function sN(t,e,n,r,i,s){const a=iN(e,r,i,s);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new Km(Ca(l),0)}if(o.ok||await Cv(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await Cv(l)}}function mi(t){var e;let n=null;lN(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=US(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Tv(t){const e=mi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ws(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function aN(t){return{data:t,error:null}}function oN(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,a=ef(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Lv(t){return t}function lN(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ip=["global","local","others"];class uN{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=uw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Ip[0]){if(Ip.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ip.join(", ")}`);try{return await at(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(et(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await at(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ws})}catch(r){if(et(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=ef(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await at(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:oN,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(et(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await at(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ws})}catch(n){if(et(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,a,o,l;try{const d={nextPage:null,lastPage:0,total:0},g=await at(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Lv});if(g.error)throw g.error;const m=await g.json(),v=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=g.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(S.split(";")[1].split("=")[1]);d[`${j}Page`]=_}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(et(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Mo(e);try{return await at(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ws})}catch(n){if(et(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Mo(e);try{return await at(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ws})}catch(r){if(et(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Mo(e);try{return await at(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ws})}catch(r){if(et(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Mo(e.userId);try{const{data:n,error:r}=await at(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(et(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Mo(e.userId),Mo(e.id);try{return{data:await at(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,a,o,l;try{const d={nextPage:null,lastPage:0,total:0},g=await at(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Lv});if(g.error)throw g.error;const m=await g.json(),v=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=g.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(S.split(";")[1].split("=")[1]);d[`${j}Page`]=_}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(et(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await at(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(et(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await at(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(et(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await at(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(et(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await at(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await at(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(et(n))return{data:null,error:n};throw n}}}function Iv(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const zo={debug:!!(globalThis&&lw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class cN extends cw{}async function dN(t,e,n){zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),zo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new cN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(zo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function hN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function dw(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function fN(t){return parseInt(t,16)}function pN(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function mN(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:d,scheme:g,uri:m,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=dw(t.address),S=g?`${g}://${r}`:r,_=t.statement?`${t.statement}
`:"",j=`${S} wants you to sign in with your Ethereum account:
${p}

${_}`;let x=`URI: ${m}
Version: ${v}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),l&&(x+=`
Request ID: ${l}`),d){let f=`
Resources:`;for(const w of d){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);f+=`
- ${w}`}x+=f}return`${j}
${x}`}class bn extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Eh extends bn{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function gN({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new bn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new bn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new bn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new bn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new bn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new bn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new bn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(hw(a)){if(s.rp.id!==a)return new bn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new bn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new bn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function vN({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new bn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(hw(r)){if(n.rpId!==r)return new bn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new bn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class yN{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const wN=new yN;function xN(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=ef(t,["challenge","user","excludeCredentials"]),s=gl(e).buffer,a=Object.assign(Object.assign({},n),{id:gl(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const d=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},d),{id:gl(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function bN(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=ef(t,["challenge","allowCredentials"]),i=gl(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:gl(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function _N(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ma(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ma(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function SN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ma(new Uint8Array(i.authenticatorData)),clientDataJSON:Ma(new Uint8Array(i.clientDataJSON)),signature:Ma(new Uint8Array(i.signature)),userHandle:i.userHandle?Ma(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hw(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Rv(){var t,e;return!!(zn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function NN(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Eh("Browser returned unexpected credential type",e)}:{data:null,error:new Eh("Empty credential response",e)}}catch(e){return{data:null,error:gN({error:e,options:t})}}}async function kN(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Eh("Browser returned unexpected credential type",e)}:{data:null,error:new Eh("Empty credential response",e)}}catch(e){return{data:null,error:vN({error:e,options:t})}}}const jN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},AN={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ch(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(e(a)){const o=r[s];e(o)?r[s]=Ch(o,a):r[s]=Ch(a)}else r[s]=a}return r}function PN(t,e){return Ch(jN,t,e||{})}function EN(t,e){return Ch(AN,t,e||{})}class CN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:o};const l=i??wN.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=PN(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:g,error:m}=await NN({publicKey:d,signal:l});return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:m}}case"request":{const d=EN(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:g,error:m}=await kN(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:l}));return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:m}}}}catch(a){return et(a)?{data:null,error:a}:{data:null,error:new Ra("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new cc("rpId is required for WebAuthn authentication")};try{if(!Rv())return{data:null,error:new Ra("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return et(a)?{data:null,error:a}:{data:null,error:new Ra("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new cc("rpId is required for WebAuthn registration")};try{if(!Rv())return{data:null,error:new Ra("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(g=>{var m;return(m=g.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:o};const{data:l,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:d}}catch(a){return et(a)?{data:null,error:a}:{data:null,error:new Ra("Unexpected error in register",a)}}}}hN();const TN={url:jS,storageKey:AS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:PS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ov(t,e,n){return await n()}const Bo={};class dc{get jwks(){var e,n;return(n=(e=Bo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Bo[this.storageKey]=Object.assign(Object.assign({},Bo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Bo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Bo[this.storageKey]=Object.assign(Object.assign({},Bo[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},TN),e);if(this.storageKey=s.storageKey,this.instanceID=(n=dc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,dc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&zn()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new uN({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=uw(s.fetch),this.lock=s.lock||Ov,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&zn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=dN:this.lock=Ov,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new CN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:lw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Iv(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Iv(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${sw}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(zn()&&(n=qS(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),zn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),RS(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return et(n)?this._returnResult({error:n}):this._returnResult({error:new Ra("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:mi}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:d,session:l},error:null})}catch(s){if(et(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:g,password:m,options:v}=e;let p=null,S=null;this.flowType==="pkce"&&([p,S]=await Fo(this.storage,this.storageKey)),s=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:m,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:p,code_challenge_method:S},xform:mi})}else if("phone"in e){const{phone:g,password:m,options:v}=e;s=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:m,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:mi})}else throw new Td("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return await Fn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:d,session:l},error:null})}catch(s){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),et(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:o}=e;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Tv})}else if("phone"in e){const{phone:s,password:a,options:o}=e;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Tv})}else throw new Td("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Do;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(et(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,a,o,l,d,g,m,v;let p,S;if("message"in e)p=e.message,S=e.signature;else{const{chain:_,wallet:j,statement:x,options:f}=e;let w;if(zn())if(typeof j=="object")w=j;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")w=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=j}const N=new URL((n=f==null?void 0:f.url)!==null&&n!==void 0?n:window.location.href),D=await w.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=dw(D[0]);let L=(r=f==null?void 0:f.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!L){const Y=await w.request({method:"eth_chainId"});L=fN(Y)}const I={domain:N.host,address:E,statement:x,uri:N.href,version:"1",chainId:L,nonce:(i=f==null?void 0:f.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=f==null?void 0:f.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=f==null?void 0:f.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=f==null?void 0:f.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(d=f==null?void 0:f.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(g=f==null?void 0:f.signInWithEthereum)===null||g===void 0?void 0:g.resources};p=mN(I),S=await w.request({method:"personal_sign",params:[pN(p),E]})}try{const{data:_,error:j}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:S},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:mi});if(j)throw j;if(!_||!_.session||!_.user){const x=new Do;return this._returnResult({data:{user:null,session:null},error:x})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:j})}catch(_){if(et(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var n,r,i,s,a,o,l,d,g,m,v,p;let S,_;if("message"in e)S=e.message,_=e.signature;else{const{chain:j,wallet:x,statement:f,options:w}=e;let N;if(zn())if(typeof x=="object")N=x;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))N=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=x}const D=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const E=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),f?{statement:f}:null));let L;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")L=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)L=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)S=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),_=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${D.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((m=(g=w==null?void 0:w.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||m===void 0)&&m.length?["Resources",...w.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const E=await N.signMessage(new TextEncoder().encode(S),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=E}}try{const{data:j,error:x}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Ma(_)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:mi});if(x)throw x;if(!j||!j.session||!j.user){const f=new Do;return this._returnResult({data:{user:null,session:null},error:f})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:x})}catch(j){if(et(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(e){const n=await ja(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new OS;const{data:s,error:a}=await at(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:mi});if(await Fn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new Do;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),et(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=e,o=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:mi}),{data:l,error:d}=o;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l||!l.session||!l.user){const g=new Do;return this._returnResult({data:{user:null,session:null},error:g})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:d})}catch(n){if(et(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,a;try{if("email"in e){const{email:o,options:l}=e;let d=null,g=null;this.flowType==="pkce"&&([d,g]=await Fo(this.storage,this.storageKey));const{error:m}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:g},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:o,options:l}=e,{data:d,error:g}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:g})}throw new Td("You must provide either an email or phone number.")}catch(o){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),et(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await at(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:mi});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,d=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:d,session:l},error:null})}catch(i){if(et(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Fo(this.storage,this.storageKey));const d=await at(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:aN});return!((s=d.data)===null||s===void 0)&&s.url&&zn()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(o){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),et(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Cr;const{error:i}=await at(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(et(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await at(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:o}=await at(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new Td("You must provide either an email or phone number and a type")}catch(n){if(et(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ja(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ep:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await ja(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Lp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=nN(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ws}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cr}:await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ws})})}catch(n){if(et(n))return IS(n)&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Cr;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Fo(this.storage,this.storageKey));const{data:d,error:g}=await at(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Ws});if(g)throw g;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),et(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Cr;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=Tp(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(et(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Cr;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(et(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!zn())throw new Ld("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ld(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Nv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ld("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Nv("No code detected.");const{data:f,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:d}=e;if(!s||!o||!a||!d)throw new Ld("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(o);let v=g+m;l&&(v=parseInt(l));const p=v-g;p*1e3<=Go&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${m}s`);const S=v-m;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,g);const{data:_,error:j}=await this._getUser(s);if(j)throw j;const x={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:v,refresh_token:a,token_type:d,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:e.type},error:null})}catch(r){if(et(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ja(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(LS(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=$S(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Fo(this.storage,this.storageKey,!0));try{return await at(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),et(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,d,g;const{data:m,error:v}=s;if(v)throw v;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await at(this.fetch,"GET",p,{headers:this.headers,jwt:(g=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return zn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(et(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:o,token:l,access_token:d,nonce:g}=e,m=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:d,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:mi}),{data:v,error:p}=m;return p?this._returnResult({data:{user:null,session:null},error:p}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Do}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:p}))}catch(i){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),et(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await at(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await VS(async i=>(i>0&&await HS(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await at(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:mi})),(i,s)=>{const a=200*Math.pow(2,i);return s&&Cp(s)&&Date.now()+a-r<Go})}catch(r){if(this._debug(n,"error",r),et(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),zn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ja(this.storage,this.storageKey);if(i&&this.userStorage){let a=await ja(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Yo(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Lp()}else if(i&&!i.user&&!i.user){const a=await ja(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Fn(this.storage,this.storageKey+"-user"),await Yo(this.storage,this.storageKey,i)):i.user=Lp()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ep;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Ep}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Cp(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Cr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new nf;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Cr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),et(s)){const a={data:null,error:s};return Cp(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Fn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Yo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Ev(i);await Yo(this.storage,this.storageKey,s)}else{const i=Ev(n);await Yo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Fn(this.storage,this.storageKey),await Fn(this.storage,this.storageKey+"-code-verifier"),await Fn(this.storage,this.storageKey+"-user"),this.userStorage&&await Fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Go);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Go);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Go}ms, refresh threshold is ${Gm} ticks`),i<=Gm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof cw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Fo(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await at(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:d}=await at(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?_N(e.webauthn.credential_response):SN(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await at(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await at(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:xN(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:bN(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Tp(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const d=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await at(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Cr})})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Cr});const a=await at(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&zn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(et(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Cr});const a=await at(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&zn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(et(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await at(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Cr})})}catch(e){if(et(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await at(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Cr})})}catch(n){if(et(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+CS>i)return r;const{data:s,error:a}=await at(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:S}=await this.getSession();if(S||!p.session)return this._returnResult({data:null,error:S});r=p.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=Tp(r);n!=null&&n.allowExpired||ZS(s.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:a},error:null}}const g=eN(i.alg),m=await crypto.subtle.importKey("jwk",d,g,!0,["verify"]);if(!await crypto.subtle.verify(g,m,a,BS(`${o}.${l}`)))throw new Jm("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(et(r))return this._returnResult({data:null,error:r});throw r}}}dc.nextInstanceID={};const LN=dc,IN="2.89.0";let _u="";typeof Deno<"u"?_u="deno":typeof document<"u"?_u="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_u="react-native":_u="node";const RN={"X-Client-Info":`supabase-js-${_u}/${IN}`},ON={headers:RN},DN={schema:"public"},FN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},MN={};function hc(t){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(t)}function zN(t,e){if(hc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BN(t){var e=zN(t,"string");return hc(e)=="symbol"?e:e+""}function UN(t,e,n){return(e=BN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dv(Object(n),!0).forEach(function(r){UN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const $N=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),qN=()=>Headers,WN=(t,e,n)=>{const r=$N(n),i=qN();return async(s,a)=>{var o;const l=(o=await e())!==null&&o!==void 0?o:t;let d=new i(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(s,rn(rn({},a),{},{headers:d}))}};function HN(t){return t.endsWith("/")?t:t+"/"}function VN(t,e){var n,r;const{db:i,auth:s,realtime:a,global:o}=t,{db:l,auth:d,realtime:g,global:m}=e,v={db:rn(rn({},l),i),auth:rn(rn({},d),s),realtime:rn(rn({},g),a),storage:{},global:rn(rn(rn({},m),o),{},{headers:rn(rn({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function GN(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(HN(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var YN=class extends LN{constructor(t){super(t)}},KN=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=GN(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const a=`sb-${s.hostname.split(".")[0]}-auth-token`,o={db:DN,realtime:MN,auth:rn(rn({},FN),{},{storageKey:a}),global:ON},l=VN(n??{},o);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(g,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=l.auth)!==null&&d!==void 0?d:{},this.headers,l.global.fetch)}this.fetch=WN(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(rn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new P_(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new kS(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new S_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:a,lock:o,debug:l,throwOnError:d},g,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new YN({url:this.authUrl.href,headers:rn(rn({},v),g),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:o,debug:l,throwOnError:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new H_(this.realtimeUrl.href,rn(rn({},t),{},{params:rn(rn({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const JN=(t,e,n)=>new KN(t,e,n);function QN(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}QN()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const XN="https://fwctdtyteesfcstncwez.supabase.co",ZN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ3Y3RkdHl0ZWVzZmNzdG5jd2V6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzNDQyNjAsImV4cCI6MjA4MTkyMDI2MH0.KoasyQfV9mX3GzXuTn4aqLVwoLOyECjy3J7bNjq7an8",lt=JN(XN,ZN),fw=he.createContext(void 0),e6=({children:t})=>{const[e,n]=he.useState(null),[r,i]=he.useState(null),[s,a]=he.useState(!0);he.useEffect(()=>{let _=!0;(async()=>{try{const{data:{session:f}}=await lt.auth.getSession();if(!_)return;f&&(await o(f.user),i(f))}catch(f){console.error("Error initializing auth:",f)}finally{_&&a(!1)}})();const{data:{subscription:x}}=lt.auth.onAuthStateChange((f,w)=>{_&&(async()=>(i(w),w!=null&&w.user?await o(w.user):n(null)))()});return()=>{_=!1,x.unsubscribe()}},[]);const o=async _=>{try{const{data:j,error:x}=await lt.from("user_profiles").select("id, person_id, is_admin").eq("id",_.id).maybeSingle();if(x){console.error("Error loading user profile:",x);return}j&&n({id:j.id,personId:j.person_id,isAdmin:j.is_admin,email:_.email||""})}catch(j){console.error("Error loading user profile:",j)}},S={user:e,loading:s,session:r,signUp:async(_,j,x)=>{try{const{data:f,error:w}=await lt.auth.signUp({email:_,password:j});if(w)return{error:w};if(f.user){const{error:N}=await lt.from("user_profiles").insert({id:f.user.id,person_id:x||null,is_admin:!1});if(N)return console.error("Error creating user profile:",N),{error:new Error("Failed to create user profile")}}return{error:null}}catch(f){return{error:f}}},signIn:async(_,j)=>{try{const{error:x}=await lt.auth.signInWithPassword({email:_,password:j});return x?{error:x}:{error:null}}catch(x){return{error:x}}},signOut:async()=>{try{await lt.auth.signOut(),n(null),i(null)}catch(_){console.error("Error signing out:",_)}},resetPassword:async _=>{try{const{error:j}=await lt.auth.resetPasswordForEmail(_,{redirectTo:`${window.location.origin}/reset-password`});return j?{error:j}:{error:null}}catch(j){return{error:j}}},updatePassword:async _=>{try{const{error:j}=await lt.auth.updateUser({password:_});return j?{error:j}:{error:null}}catch(j){return{error:j}}},checkIsAdmin:()=>(e==null?void 0:e.isAdmin)||!1};return c.jsx(fw.Provider,{value:S,children:t})},Cl=()=>{const t=he.useContext(fw);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},t6=({message:t,type:e,onClose:n,duration:r=5e3})=>{he.useEffect(()=>{const a=setTimeout(()=>{n()},r);return()=>clearTimeout(a)},[r,n]);const i={success:c.jsx(d_,{className:"h-5 w-5 text-green-400"}),error:c.jsx(o_,{className:"h-5 w-5 text-red-400"}),info:c.jsx(vi,{className:"h-5 w-5 text-blue-400"})},s={success:"bg-green-50 text-green-800 border-green-200",error:"bg-red-50 text-red-800 border-red-200",info:"bg-blue-50 text-blue-800 border-blue-200"};return ig.createPortal(c.jsx("div",{className:"fixed top-4 right-4 z-50 animate-fade-in",children:c.jsx("div",{className:`rounded-lg border p-4 shadow-lg ${s[e]}`,children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:i[e]}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm font-medium",children:t})}),c.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:c.jsxs("button",{type:"button",className:"inline-flex rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:n,children:[c.jsx("span",{className:"sr-only",children:"Chiudi"}),c.jsx(Zh,{className:"h-5 w-5"})]})})]})})}),document.body)},pw=he.createContext(void 0),n6=({children:t})=>{const[e,n]=he.useState(null),r=(i,s)=>{n({message:i,type:s})};return c.jsxs(pw.Provider,{value:{showToast:r},children:[t,e&&c.jsx(t6,{message:e.message,type:e.type,onClose:()=>n(null)})]})},no=()=>{const t=he.useContext(pw);if(t===void 0)throw new Error("useToast must be used within a ToastProvider");return t},r6=()=>{const[t,e]=he.useState(!1),n=ys(),r=ni(),{user:i,signOut:s}=Cl(),{showToast:a}=no(),o=v=>n.pathname===v,l=()=>{e(!t)},d=()=>{e(!1)},g=async()=>{try{await s(),a("Disconnesso con successo","success"),r("/login"),e(!1)}catch(v){console.error("Errore durante il logout:",v),a("Errore durante la disconnessione","error")}},m=[{path:"/",label:"Home",icon:c.jsx(q5,{size:20})},{path:"/persone",label:"Persone",icon:c.jsx(G5,{size:20})},{path:"/tragitti",label:"Trasferte",icon:c.jsx(W5,{size:20})},{path:"/percorsi",label:"Percorsi",icon:c.jsx(ac,{size:20})},{path:"/destinazioni-abituali",label:"Destinazioni",icon:c.jsx(Ah,{size:20})},{path:"/spese",label:"Spese",icon:c.jsx(sc,{size:20})},{path:"/alloggi",label:"Alloggi",icon:c.jsx(Nh,{size:20})},{path:"/report",label:"Report",icon:c.jsx(U5,{size:20})}];return c.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[c.jsx("header",{className:"bg-teal-700 text-white shadow-md",children:c.jsx("div",{className:"container mx-auto px-4 py-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"ITFV Rimborsi Spese"}),c.jsxs(Pn,{to:"/tragitti/nuovo",className:"hidden lg:flex items-center space-x-2 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2.5 px-5 rounded-lg shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(Fr,{size:20}),c.jsx("span",{children:"Nuova Trasferta"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs(Pn,{to:"/tragitti/nuovo",className:"lg:hidden flex items-center space-x-1 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2 px-3 rounded-lg shadow-lg transition-all",children:[c.jsx(Fr,{size:18}),c.jsx("span",{className:"hidden sm:inline",children:"Nuovo"})]}),c.jsx("button",{className:"md:hidden p-2 hover:bg-teal-600 rounded-lg transition-colors",onClick:l,"aria-label":t?"Chiudi menu":"Apri menu",children:t?c.jsx(Zh,{size:24}):c.jsx(g_,{size:24})}),c.jsxs("nav",{className:"hidden md:flex items-center space-x-4",children:[m.map(v=>c.jsxs(Pn,{to:v.path,className:lr("flex items-center space-x-1 py-2 px-3 rounded-md transition-colors text-sm",{"bg-teal-600 text-white":o(v.path),"hover:bg-teal-600/60":!o(v.path)}),children:[v.icon,c.jsx("span",{children:v.label})]},v.path)),i&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-white text-sm px-2 border-l border-teal-500 ml-2",children:i.email}),c.jsxs("button",{onClick:g,className:"flex items-center space-x-1 py-2 px-3 rounded-md transition-colors hover:bg-teal-600/60 text-sm",children:[c.jsx(hv,{size:18}),c.jsx("span",{children:"Logout"})]})]})]})]})]})})}),t&&c.jsx("div",{className:"md:hidden bg-white shadow-lg absolute top-20 right-0 left-0 z-50 transition-all",children:c.jsxs("nav",{className:"flex flex-col p-4",children:[c.jsxs(Pn,{to:"/tragitti/nuovo",className:"flex items-center justify-center space-x-3 py-4 px-4 mb-4 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-bold text-lg shadow-lg transition-all",onClick:d,children:[c.jsx(Fr,{size:24}),c.jsx("span",{children:"Nuova Trasferta"})]}),c.jsx("div",{className:"border-t border-gray-200 mb-2"}),m.map(v=>c.jsxs(Pn,{to:v.path,className:lr("flex items-center space-x-3 py-3 px-4 rounded-md transition-colors",{"bg-teal-100 text-teal-800":o(v.path),"hover:bg-gray-100":!o(v.path)}),onClick:d,children:[v.icon,c.jsx("span",{className:"font-medium",children:v.label})]},v.path)),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-t border-gray-200 my-2"}),c.jsx("div",{className:"py-2 px-4 text-sm text-gray-600",children:i.email}),c.jsxs("button",{onClick:g,className:"flex items-center space-x-3 py-3 px-4 rounded-md transition-colors text-red-600 hover:bg-red-50 font-medium",children:[c.jsx(hv,{size:20}),c.jsx("span",{children:"Logout"})]})]})]})}),c.jsx("main",{className:"flex-grow container mx-auto px-4 py-6",children:c.jsx(V3,{})}),c.jsx("footer",{className:"bg-gray-800 text-white py-4",children:c.jsxs("div",{className:"container mx-auto px-4 text-center text-sm",children:[c.jsxs("p",{children:[" ",new Date().getFullYear()," Istituto Veneto di Terapia Familiare"]}),c.jsx("p",{className:"mt-1",children:"Via della Quercia 2/B, Treviso"})]})})]})},i6=({children:t})=>{const{user:e,loading:n}=Cl(),r=ys();return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Caricamento..."})]})}):e?c.jsx(c.Fragment,{children:t}):c.jsx(H3,{to:"/login",state:{from:r},replace:!0})},mn=({children:t,title:e,footer:n,className:r,contentClassName:i})=>c.jsxs("div",{className:lr("bg-white rounded-lg shadow-md overflow-hidden",r),children:[e&&c.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e})}),c.jsx("div",{className:lr("p-6",i),children:t}),n&&c.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200",children:n})]});function ji(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Xa(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const mw=6048e5,s6=864e5;let a6={};function rf(){return a6}function Za(t,e){var o,l,d,g;const n=rf(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((g=(d=n.locale)==null?void 0:d.options)==null?void 0:g.weekStartsOn)??0,i=ji(t),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Th(t){return Za(t,{weekStartsOn:1})}function gw(t){const e=ji(t),n=e.getFullYear(),r=Xa(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Th(r),s=Xa(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=Th(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function Fv(t){const e=ji(t);return e.setHours(0,0,0,0),e}function Mv(t){const e=ji(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function o6(t,e){const n=Fv(t),r=Fv(e),i=+n-Mv(n),s=+r-Mv(r);return Math.round((i-s)/s6)}function l6(t){const e=gw(t),n=Xa(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Th(n)}function u6(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function c6(t){if(!u6(t)&&typeof t!="number")return!1;const e=ji(t);return!isNaN(Number(e))}function d6(t){const e=ji(t),n=Xa(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const h6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},f6=(t,e,n)=>{let r;const i=h6[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function vl(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const p6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},m6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},g6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},v6={date:vl({formats:p6,defaultWidth:"full"}),time:vl({formats:m6,defaultWidth:"full"}),dateTime:vl({formats:g6,defaultWidth:"full"})},y6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},w6=(t,e,n,r)=>y6[t];function Bi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const x6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},b6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},S6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},N6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},k6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},j6=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},A6={ordinalNumber:j6,era:Bi({values:x6,defaultWidth:"wide"}),quarter:Bi({values:b6,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Bi({values:_6,defaultWidth:"wide"}),day:Bi({values:S6,defaultWidth:"wide"}),dayPeriod:Bi({values:N6,defaultWidth:"wide",formattingValues:k6,defaultFormattingWidth:"wide"})};function Ui(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?E6(o,m=>m.test(a)):P6(o,m=>m.test(a));let d;d=t.valueCallback?t.valueCallback(l):l,d=n.valueCallback?n.valueCallback(d):d;const g=e.slice(a.length);return{value:d,rest:g}}}function P6(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function E6(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function vw(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const C6=/^(\d+)(th|st|nd|rd)?/i,T6=/\d+/i,L6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},I6={any:[/^b/i,/^(a|c)/i]},R6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},O6={any:[/1/i,/2/i,/3/i,/4/i]},D6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},F6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},M6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},z6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},B6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},U6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$6={ordinalNumber:vw({matchPattern:C6,parsePattern:T6,valueCallback:t=>parseInt(t,10)}),era:Ui({matchPatterns:L6,defaultMatchWidth:"wide",parsePatterns:I6,defaultParseWidth:"any"}),quarter:Ui({matchPatterns:R6,defaultMatchWidth:"wide",parsePatterns:O6,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ui({matchPatterns:D6,defaultMatchWidth:"wide",parsePatterns:F6,defaultParseWidth:"any"}),day:Ui({matchPatterns:M6,defaultMatchWidth:"wide",parsePatterns:z6,defaultParseWidth:"any"}),dayPeriod:Ui({matchPatterns:B6,defaultMatchWidth:"any",parsePatterns:U6,defaultParseWidth:"any"})},q6={code:"en-US",formatDistance:f6,formatLong:v6,formatRelative:w6,localize:A6,match:$6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function W6(t){const e=ji(t);return o6(e,d6(e))+1}function H6(t){const e=ji(t),n=+Th(e)-+l6(e);return Math.round(n/mw)+1}function yw(t,e){var g,m,v,p;const n=ji(t),r=n.getFullYear(),i=rf(),s=(e==null?void 0:e.firstWeekContainsDate)??((m=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(v=i.locale)==null?void 0:v.options)==null?void 0:p.firstWeekContainsDate)??1,a=Xa(t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Za(a,e),l=Xa(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const d=Za(l,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function V6(t,e){var o,l,d,g;const n=rf(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(d=n.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??1,i=yw(t,e),s=Xa(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Za(s,e)}function G6(t,e){const n=ji(t),r=+Za(n,e)-+V6(n,e);return Math.round(r/mw)+1}function Ct(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Os={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ct(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ct(n+1,2)},d(t,e){return Ct(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ct(t.getHours()%12||12,e.length)},H(t,e){return Ct(t.getHours(),e.length)},m(t,e){return Ct(t.getMinutes(),e.length)},s(t,e){return Ct(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ct(i,e.length)}},Uo={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zv={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Os.y(t,e)},Y:function(t,e,n,r){const i=yw(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Ct(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Ct(s,e.length)},R:function(t,e){const n=gw(t);return Ct(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ct(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ct(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ct(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Os.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ct(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=G6(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Ct(i,e.length)},I:function(t,e,n){const r=H6(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ct(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Os.d(t,e)},D:function(t,e,n){const r=W6(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ct(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ct(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ct(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ct(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Uo.noon:r===0?i=Uo.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Uo.evening:r>=12?i=Uo.afternoon:r>=4?i=Uo.morning:i=Uo.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Os.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Os.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ct(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ct(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Os.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Os.s(t,e)},S:function(t,e){return Os.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Uv(r);case"XXXX":case"XX":return Ta(r);case"XXXXX":case"XXX":default:return Ta(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Uv(r);case"xxxx":case"xx":return Ta(r);case"xxxxx":case"xxx":default:return Ta(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Bv(r,":");case"OOOO":default:return"GMT"+Ta(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Bv(r,":");case"zzzz":default:return"GMT"+Ta(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Ct(r,e.length)},T:function(t,e,n){const r=t.getTime();return Ct(r,e.length)}};function Bv(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Ct(s,2)}function Uv(t,e){return t%60===0?(t>0?"-":"+")+Ct(Math.abs(t)/60,2):Ta(t,e)}function Ta(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Ct(Math.trunc(r/60),2),s=Ct(r%60,2);return n+i+e+s}const $v=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ww=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Y6=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return $v(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",$v(r,e)).replace("{{time}}",ww(i,e))},K6={p:ww,P:Y6},J6=/^D+$/,Q6=/^Y+$/,X6=["D","DD","YY","YYYY"];function Z6(t){return J6.test(t)}function ek(t){return Q6.test(t)}function tk(t,e,n){const r=nk(t,e,n);if(console.warn(r),X6.includes(t))throw new RangeError(r)}function nk(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const rk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ik=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sk=/^'([^]*?)'?$/,ak=/''/g,ok=/[a-zA-Z]/;function lk(t,e,n){var g,m,v,p,S,_,j,x;const r=rf(),i=(n==null?void 0:n.locale)??r.locale??q6,s=(n==null?void 0:n.firstWeekContainsDate)??((m=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(v=r.locale)==null?void 0:v.options)==null?void 0:p.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((_=(S=n==null?void 0:n.locale)==null?void 0:S.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((x=(j=r.locale)==null?void 0:j.options)==null?void 0:x.weekStartsOn)??0,o=ji(t);if(!c6(o))throw new RangeError("Invalid time value");let l=e.match(ik).map(f=>{const w=f[0];if(w==="p"||w==="P"){const N=K6[w];return N(f,i.formatLong)}return f}).join("").match(rk).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const w=f[0];if(w==="'")return{isToken:!1,value:uk(f)};if(zv[w])return{isToken:!0,value:f};if(w.match(ok))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:f}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const d={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(f=>{if(!f.isToken)return f.value;const w=f.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&ek(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Z6(w))&&tk(w,e,String(t));const N=zv[w[0]];return N(o,w,i.localize,d)}).join("")}function uk(t){const e=t.match(sk);return e?e[1].replace(ak,"'"):t}function qv(t,e,n){const r=Za(t,n),i=Za(e,n);return+r==+i}const ck={lessThanXSeconds:{one:"meno di un secondo",other:"meno di {{count}} secondi"},xSeconds:{one:"un secondo",other:"{{count}} secondi"},halfAMinute:"alcuni secondi",lessThanXMinutes:{one:"meno di un minuto",other:"meno di {{count}} minuti"},xMinutes:{one:"un minuto",other:"{{count}} minuti"},aboutXHours:{one:"circa un'ora",other:"circa {{count}} ore"},xHours:{one:"un'ora",other:"{{count}} ore"},xDays:{one:"un giorno",other:"{{count}} giorni"},aboutXWeeks:{one:"circa una settimana",other:"circa {{count}} settimane"},xWeeks:{one:"una settimana",other:"{{count}} settimane"},aboutXMonths:{one:"circa un mese",other:"circa {{count}} mesi"},xMonths:{one:"un mese",other:"{{count}} mesi"},aboutXYears:{one:"circa un anno",other:"circa {{count}} anni"},xYears:{one:"un anno",other:"{{count}} anni"},overXYears:{one:"pi di un anno",other:"pi di {{count}} anni"},almostXYears:{one:"quasi un anno",other:"quasi {{count}} anni"}},dk=(t,e,n)=>{let r;const i=ck[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"tra "+r:r+" fa":r},hk={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},fk={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},pk={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},mk={date:vl({formats:hk,defaultWidth:"full"}),time:vl({formats:fk,defaultWidth:"full"}),dateTime:vl({formats:pk,defaultWidth:"full"})},vg=["domenica","luned","marted","mercoled","gioved","venerd","sabato"];function gk(t){switch(t){case 0:return"'domenica scorsa alle' p";default:return"'"+vg[t]+" scorso alle' p"}}function Wv(t){return"'"+vg[t]+" alle' p"}function vk(t){switch(t){case 0:return"'domenica prossima alle' p";default:return"'"+vg[t]+" prossimo alle' p"}}const yk={lastWeek:(t,e,n)=>{const r=t.getDay();return qv(t,e,n)?Wv(r):gk(r)},yesterday:"'ieri alle' p",today:"'oggi alle' p",tomorrow:"'domani alle' p",nextWeek:(t,e,n)=>{const r=t.getDay();return qv(t,e,n)?Wv(r):vk(r)},other:"P"},wk=(t,e,n,r)=>{const i=yk[t];return typeof i=="function"?i(e,n,r):i},xk={narrow:["aC","dC"],abbreviated:["a.C.","d.C."],wide:["avanti Cristo","dopo Cristo"]},bk={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},_k={narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],abbreviated:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],wide:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},Sk={narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],abbreviated:["dom","lun","mar","mer","gio","ven","sab"],wide:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},Nk={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"}},kk={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"}},jk=(t,e)=>{const n=Number(t);return String(n)},Ak={ordinalNumber:jk,era:Bi({values:xk,defaultWidth:"wide"}),quarter:Bi({values:bk,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Bi({values:_k,defaultWidth:"wide"}),day:Bi({values:Sk,defaultWidth:"wide"}),dayPeriod:Bi({values:Nk,defaultWidth:"wide",formattingValues:kk,defaultFormattingWidth:"wide"})},Pk=/^(\d+)()?/i,Ek=/\d+/i,Ck={narrow:/^(aC|dC)/i,abbreviated:/^(a\.?\s?C\.?|a\.?\s?e\.?\s?v\.?|d\.?\s?C\.?|e\.?\s?v\.?)/i,wide:/^(avanti Cristo|avanti Era Volgare|dopo Cristo|Era Volgare)/i},Tk={any:[/^a/i,/^(d|e)/i]},Lk={narrow:/^[1234]/i,abbreviated:/^t[1234]/i,wide:/^[1234]()? trimestre/i},Ik={any:[/1/i,/2/i,/3/i,/4/i]},Rk={narrow:/^[gfmalsond]/i,abbreviated:/^(gen|feb|mar|apr|mag|giu|lug|ago|set|ott|nov|dic)/i,wide:/^(gennaio|febbraio|marzo|aprile|maggio|giugno|luglio|agosto|settembre|ottobre|novembre|dicembre)/i},Ok={narrow:[/^g/i,/^f/i,/^m/i,/^a/i,/^m/i,/^g/i,/^l/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ge/i,/^f/i,/^mar/i,/^ap/i,/^mag/i,/^gi/i,/^l/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},Dk={narrow:/^[dlmgvs]/i,short:/^(do|lu|ma|me|gi|ve|sa)/i,abbreviated:/^(dom|lun|mar|mer|gio|ven|sab)/i,wide:/^(domenica|luned[i|]|marted[i|]|mercoled[i|]|gioved[i|]|venerd[i|]|sabato)/i},Fk={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^g/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^me/i,/^g/i,/^v/i,/^s/i]},Mk={narrow:/^(a|m\.|p|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i,any:/^([ap]\.?\s?m\.?|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i},zk={any:{am:/^a/i,pm:/^p/i,midnight:/^mezza/i,noon:/^mezzo/i,morning:/mattina/i,afternoon:/pomeriggio/i,evening:/sera/i,night:/notte/i}},Bk={ordinalNumber:vw({matchPattern:Pk,parsePattern:Ek,valueCallback:t=>parseInt(t,10)}),era:Ui({matchPatterns:Ck,defaultMatchWidth:"wide",parsePatterns:Tk,defaultParseWidth:"any"}),quarter:Ui({matchPatterns:Lk,defaultMatchWidth:"wide",parsePatterns:Ik,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ui({matchPatterns:Rk,defaultMatchWidth:"wide",parsePatterns:Ok,defaultParseWidth:"any"}),day:Ui({matchPatterns:Dk,defaultMatchWidth:"wide",parsePatterns:Fk,defaultParseWidth:"any"}),dayPeriod:Ui({matchPatterns:Mk,defaultMatchWidth:"any",parsePatterns:zk,defaultParseWidth:"any"})},Uk={code:"it",formatDistance:dk,formatLong:mk,formatRelative:wk,localize:Ak,match:Bk,options:{weekStartsOn:1,firstWeekContainsDate:4}},xw=he.createContext(void 0),$k=({children:t})=>{const[e,n]=he.useState({people:[],vehicles:[],trips:[],savedRoutes:[],tollBooths:[],tripExpenses:[],accommodations:[],favoriteDestinations:[]}),[r,i]=he.useState(!0);he.useEffect(()=>{s()},[]);const s=async()=>{try{i(!0);const[P,H,Q,ie,be,_e,Ae,ke,Ke,ve]=await Promise.all([lt.from("people").select("*").order("created_at",{ascending:!1}),lt.from("vehicles").select("*").order("created_at",{ascending:!1}),lt.from("trips").select("*").order("date",{ascending:!1}),lt.from("saved_routes").select("*").order("created_at",{ascending:!1}),lt.from("route_distances").select("*"),lt.from("toll_booths").select("*").order("usage_count",{ascending:!1}),lt.from("trip_meals").select("*"),lt.from("trip_expenses").select("*").order("date",{ascending:!1}),lt.from("accommodations").select("*").order("date_from",{ascending:!1}),lt.from("favorite_destinations").select("*").order("name",{ascending:!0})]),se=(P.data||[]).map(C=>({id:C.id,name:C.name,surname:C.surname||"",isDocente:C.is_docente||!1,isAmministratore:C.is_amministratore||!1,isDipendente:C.is_dipendente||!1})),Ze=(H.data||[]).map(C=>({id:C.id,personId:C.person_id,make:C.make||"",model:C.model,plate:C.plate||C.license_plate,reimbursementRate:parseFloat(C.reimbursement_rate)})),We=new Map;(Ae.data||[]).forEach(C=>{We.has(C.trip_id)||We.set(C.trip_id,[]),We.get(C.trip_id).push({id:C.id,tripId:C.trip_id,mealType:C.meal_type,amount:parseFloat(C.amount)})});const Oe=(Q.data||[]).map(C=>({id:C.id,date:C.date,personId:C.person_id,vehicleId:C.vehicle_id,tripRole:C.trip_role,origin:C.origin,destination:C.destination,distance:parseFloat(C.distance),purpose:C.purpose||"",isRoundTrip:C.is_round_trip||!1,savedRouteId:C.saved_route_id,selectedDistanceId:C.selected_distance_id,hasToll:C.has_toll||!1,tollEntryStation:C.toll_entry_station,tollExitStation:C.toll_exit_station,tollAmount:C.toll_amount?parseFloat(C.toll_amount):void 0,returnTollEntryStation:C.return_toll_entry_station,returnTollExitStation:C.return_toll_exit_station,returnTollAmount:C.return_toll_amount?parseFloat(C.return_toll_amount):void 0,hasMeal:C.has_meal||!1,mealType:C.meal_type,mealAmount:C.meal_amount?parseFloat(C.meal_amount):void 0,meals:We.get(C.id)||[]})),Me=new Map;(be.data||[]).forEach(C=>{Me.has(C.route_id)||Me.set(C.route_id,[]),Me.get(C.route_id).push({id:C.id,label:C.label,distance:parseFloat(C.distance),tollEntryStation:C.toll_entry_station,tollExitStation:C.toll_exit_station,tollAmount:C.toll_amount?parseFloat(C.toll_amount):void 0})});const Be=(ie.data||[]).map(C=>({id:C.id,name:C.name,origin:C.origin,destination:C.destination,distances:Me.get(C.id)||[]})),Pe=(_e.data||[]).map(C=>({id:C.id,entryStation:C.entry_station,exitStation:C.exit_station,amount:parseFloat(C.amount),usageCount:C.usage_count,lastUsed:C.last_used,createdAt:C.created_at,updatedAt:C.updated_at})),Re=(ke.data||[]).map(C=>({id:C.id,personId:C.person_id,tripId:C.trip_id||void 0,date:C.date,expenseType:C.expense_type,description:C.description||"",fromLocation:C.from_location||"",toLocation:C.to_location||"",amount:parseFloat(C.amount),notes:C.notes||"",createdAt:C.created_at})),He=(Ke.data||[]).map(C=>({id:C.id,personId:C.person_id,dateFrom:C.date_from,dateTo:C.date_to,location:C.location||"",amount:parseFloat(C.amount),notes:C.notes||"",createdAt:C.created_at})),oe=(ve.data||[]).map(C=>({id:C.id,name:C.name,address:C.address,defaultDistance:parseFloat(C.default_distance),createdAt:C.created_at,updatedAt:C.updated_at}));n({people:se,vehicles:Ze,trips:Oe,savedRoutes:Be,tollBooths:Pe,tripExpenses:Re,accommodations:He,favoriteDestinations:oe})}catch(P){console.error("Error loading data:",P)}finally{i(!1)}},a=async P=>{const{data:H,error:Q}=await lt.from("people").insert([{name:P.name,surname:P.surname,is_docente:P.isDocente,is_amministratore:P.isAmministratore,is_dipendente:P.isDipendente}]).select().single();if(Q)throw Q;n(ie=>({...ie,people:[{id:H.id,name:H.name,surname:H.surname,isDocente:H.is_docente||!1,isAmministratore:H.is_amministratore||!1,isDipendente:H.is_dipendente||!1},...ie.people]}))},o=async P=>{const{error:H}=await lt.from("people").update({name:P.name,surname:P.surname,is_docente:P.isDocente,is_amministratore:P.isAmministratore,is_dipendente:P.isDipendente}).eq("id",P.id);if(H)throw H;n(Q=>({...Q,people:Q.people.map(ie=>ie.id===P.id?P:ie)}))},l=async P=>{const{error:H}=await lt.from("people").delete().eq("id",P);if(H)throw H;n(Q=>({...Q,people:Q.people.filter(ie=>ie.id!==P),vehicles:Q.vehicles.filter(ie=>ie.personId!==P),trips:Q.trips.filter(ie=>ie.personId!==P),tripExpenses:Q.tripExpenses.filter(ie=>ie.personId!==P),accommodations:Q.accommodations.filter(ie=>ie.personId!==P)}))},d=async P=>{const{data:H,error:Q}=await lt.from("vehicles").insert([{person_id:P.personId,make:P.make,model:P.model,plate:P.plate,license_plate:P.plate,reimbursement_rate:P.reimbursementRate}]).select().single();if(Q)throw Q;n(ie=>({...ie,vehicles:[{id:H.id,personId:H.person_id,make:H.make,model:H.model,plate:H.plate,reimbursementRate:parseFloat(H.reimbursement_rate)},...ie.vehicles]}))},g=async P=>{const{error:H}=await lt.from("vehicles").update({person_id:P.personId,make:P.make,model:P.model,plate:P.plate,license_plate:P.plate,reimbursement_rate:P.reimbursementRate}).eq("id",P.id);if(H)throw H;n(Q=>({...Q,vehicles:Q.vehicles.map(ie=>ie.id===P.id?P:ie)}))},m=async P=>{const{error:H}=await lt.from("vehicles").delete().eq("id",P);if(H)throw H;n(Q=>({...Q,vehicles:Q.vehicles.filter(ie=>ie.id!==P),trips:Q.trips.filter(ie=>ie.vehicleId!==P)}))},v=async(P,H)=>{const{data:Q,error:ie}=await lt.from("trips").insert([{person_id:P.personId,vehicle_id:P.vehicleId,trip_role:P.tripRole,saved_route_id:P.savedRouteId,selected_distance_id:P.selectedDistanceId,date:P.date,origin:P.origin,destination:P.destination,distance:P.distance,purpose:P.purpose,is_round_trip:P.isRoundTrip,has_toll:P.hasToll||!1,toll_entry_station:P.tollEntryStation,toll_exit_station:P.tollExitStation,toll_amount:P.tollAmount,return_toll_entry_station:P.returnTollEntryStation,return_toll_exit_station:P.returnTollExitStation,return_toll_amount:P.returnTollAmount,has_meal:H&&H.length>0||P.hasMeal||!1,meal_type:P.mealType,meal_amount:P.mealAmount}]).select().single();if(ie)throw ie;let be=[];if(H&&H.length>0){const{data:_e,error:Ae}=await lt.from("trip_meals").insert(H.map(ke=>({trip_id:Q.id,meal_type:ke.mealType,amount:ke.amount}))).select();if(Ae)throw Ae;be=(_e||[]).map(ke=>({id:ke.id,tripId:ke.trip_id,mealType:ke.meal_type,amount:parseFloat(ke.amount)}))}P.hasToll&&P.tollEntryStation&&P.tollExitStation&&P.tollAmount&&await T(P.tollEntryStation,P.tollExitStation,P.tollAmount),P.isRoundTrip&&P.returnTollEntryStation&&P.returnTollExitStation&&P.returnTollAmount&&await T(P.returnTollEntryStation,P.returnTollExitStation,P.returnTollAmount),n(_e=>({..._e,trips:[{id:Q.id,date:Q.date,personId:Q.person_id,vehicleId:Q.vehicle_id,tripRole:Q.trip_role,origin:Q.origin,destination:Q.destination,distance:parseFloat(Q.distance),purpose:Q.purpose,isRoundTrip:Q.is_round_trip,savedRouteId:Q.saved_route_id,selectedDistanceId:Q.selected_distance_id,hasToll:Q.has_toll||!1,tollEntryStation:Q.toll_entry_station,tollExitStation:Q.toll_exit_station,tollAmount:Q.toll_amount?parseFloat(Q.toll_amount):void 0,returnTollEntryStation:Q.return_toll_entry_station,returnTollExitStation:Q.return_toll_exit_station,returnTollAmount:Q.return_toll_amount?parseFloat(Q.return_toll_amount):void 0,hasMeal:Q.has_meal||!1,mealType:Q.meal_type,mealAmount:Q.meal_amount?parseFloat(Q.meal_amount):void 0,meals:be},..._e.trips]}))},p=async(P,H)=>{const{error:Q}=await lt.from("trips").update({person_id:P.personId,vehicle_id:P.vehicleId,trip_role:P.tripRole,saved_route_id:P.savedRouteId,selected_distance_id:P.selectedDistanceId,date:P.date,origin:P.origin,destination:P.destination,distance:P.distance,purpose:P.purpose,is_round_trip:P.isRoundTrip,has_toll:P.hasToll||!1,toll_entry_station:P.tollEntryStation,toll_exit_station:P.tollExitStation,toll_amount:P.tollAmount,return_toll_entry_station:P.returnTollEntryStation,return_toll_exit_station:P.returnTollExitStation,return_toll_amount:P.returnTollAmount,has_meal:H&&H.length>0||P.hasMeal||!1,meal_type:P.mealType,meal_amount:P.mealAmount}).eq("id",P.id);if(Q)throw Q;let ie=P.meals||[];if(H!==void 0)if(await lt.from("trip_meals").delete().eq("trip_id",P.id),H.length>0){const{data:be,error:_e}=await lt.from("trip_meals").insert(H.map(Ae=>({trip_id:P.id,meal_type:Ae.mealType,amount:Ae.amount}))).select();if(_e)throw _e;ie=(be||[]).map(Ae=>({id:Ae.id,tripId:Ae.trip_id,mealType:Ae.meal_type,amount:parseFloat(Ae.amount)}))}else ie=[];P.hasToll&&P.tollEntryStation&&P.tollExitStation&&P.tollAmount&&await T(P.tollEntryStation,P.tollExitStation,P.tollAmount),P.isRoundTrip&&P.returnTollEntryStation&&P.returnTollExitStation&&P.returnTollAmount&&await T(P.returnTollEntryStation,P.returnTollExitStation,P.returnTollAmount),n(be=>({...be,trips:be.trips.map(_e=>_e.id===P.id?{...P,meals:ie}:_e)}))},S=async P=>{const{error:H}=await lt.from("trips").delete().eq("id",P);if(H)throw H;n(Q=>({...Q,trips:Q.trips.filter(ie=>ie.id!==P)}))},_=async P=>{const{data:H,error:Q}=await lt.from("saved_routes").insert([{name:P.name,origin:P.origin,destination:P.destination}]).select().single();if(Q)throw Q;const ie={id:H.id,name:H.name,origin:H.origin,destination:H.destination,distances:[]};if(P.distances&&P.distances.length>0){const be=P.distances.map(ke=>({route_id:H.id,label:ke.label,distance:ke.distance,toll_entry_station:ke.tollEntryStation,toll_exit_station:ke.tollExitStation,toll_amount:ke.tollAmount})),{data:_e,error:Ae}=await lt.from("route_distances").insert(be).select();if(Ae)throw Ae;ie.distances=(_e||[]).map(ke=>({id:ke.id,label:ke.label,distance:parseFloat(ke.distance),tollEntryStation:ke.toll_entry_station,tollExitStation:ke.toll_exit_station,tollAmount:ke.toll_amount?parseFloat(ke.toll_amount):void 0}))}n(be=>({...be,savedRoutes:[ie,...be.savedRoutes]}))},j=async P=>{const{error:H}=await lt.from("saved_routes").update({name:P.name,origin:P.origin,destination:P.destination}).eq("id",P.id);if(H)throw H;n(Q=>({...Q,savedRoutes:Q.savedRoutes.map(ie=>ie.id===P.id?P:ie)}))},x=async P=>{const{error:H}=await lt.from("saved_routes").delete().eq("id",P);if(H)throw H;n(Q=>({...Q,savedRoutes:Q.savedRoutes.filter(ie=>ie.id!==P)}))},f=async(P,H)=>{const{data:Q,error:ie}=await lt.from("route_distances").insert([{route_id:P,label:H.label,distance:H.distance,toll_entry_station:H.tollEntryStation,toll_exit_station:H.tollExitStation,toll_amount:H.tollAmount}]).select().single();if(ie)throw ie;const be={id:Q.id,label:Q.label,distance:parseFloat(Q.distance),tollEntryStation:Q.toll_entry_station,tollExitStation:Q.toll_exit_station,tollAmount:Q.toll_amount?parseFloat(Q.toll_amount):void 0};n(_e=>({..._e,savedRoutes:_e.savedRoutes.map(Ae=>Ae.id===P?{...Ae,distances:[...Ae.distances,be]}:Ae)}))},w=async(P,H)=>{const{error:Q}=await lt.from("route_distances").update({label:H.label,distance:H.distance,toll_entry_station:H.tollEntryStation,toll_exit_station:H.tollExitStation,toll_amount:H.tollAmount}).eq("id",H.id);if(Q)throw Q;n(ie=>({...ie,savedRoutes:ie.savedRoutes.map(be=>be.id===P?{...be,distances:be.distances.map(_e=>_e.id===H.id?H:_e)}:be)}))},N=async(P,H)=>{const{error:Q}=await lt.from("route_distances").delete().eq("id",H);if(Q)throw Q;n(ie=>({...ie,savedRoutes:ie.savedRoutes.map(be=>be.id===P?{...be,distances:be.distances.filter(_e=>_e.id!==H)}:be)}))},D=async P=>{const{data:H,error:Q}=await lt.from("trip_expenses").insert([{person_id:P.personId,trip_id:P.tripId||null,date:P.date,expense_type:P.expenseType,description:P.description,from_location:P.fromLocation,to_location:P.toLocation,amount:P.amount,notes:P.notes}]).select().single();if(Q)throw Q;n(ie=>({...ie,tripExpenses:[{id:H.id,personId:H.person_id,tripId:H.trip_id||void 0,date:H.date,expenseType:H.expense_type,description:H.description||"",fromLocation:H.from_location||"",toLocation:H.to_location||"",amount:parseFloat(H.amount),notes:H.notes||"",createdAt:H.created_at},...ie.tripExpenses]}))},E=async P=>{const{error:H}=await lt.from("trip_expenses").update({person_id:P.personId,date:P.date,expense_type:P.expenseType,description:P.description,from_location:P.fromLocation,to_location:P.toLocation,amount:P.amount,notes:P.notes}).eq("id",P.id);if(H)throw H;n(Q=>({...Q,tripExpenses:Q.tripExpenses.map(ie=>ie.id===P.id?P:ie)}))},L=async P=>{const{error:H}=await lt.from("trip_expenses").delete().eq("id",P);if(H)throw H;n(Q=>({...Q,tripExpenses:Q.tripExpenses.filter(ie=>ie.id!==P)}))},I=async P=>{const{data:H,error:Q}=await lt.from("accommodations").insert([{person_id:P.personId,date_from:P.dateFrom,date_to:P.dateTo,location:P.location,amount:P.amount,notes:P.notes}]).select().single();if(Q)throw Q;n(ie=>({...ie,accommodations:[{id:H.id,personId:H.person_id,dateFrom:H.date_from,dateTo:H.date_to,location:H.location||"",amount:parseFloat(H.amount),notes:H.notes||"",createdAt:H.created_at},...ie.accommodations]}))},Y=async P=>{const{error:H}=await lt.from("accommodations").update({person_id:P.personId,date_from:P.dateFrom,date_to:P.dateTo,location:P.location,amount:P.amount,notes:P.notes}).eq("id",P.id);if(H)throw H;n(Q=>({...Q,accommodations:Q.accommodations.map(ie=>ie.id===P.id?P:ie)}))},ee=async P=>{const{error:H}=await lt.from("accommodations").delete().eq("id",P);if(H)throw H;n(Q=>({...Q,accommodations:Q.accommodations.filter(ie=>ie.id!==P)}))},R=async P=>{const{data:H,error:Q}=await lt.from("favorite_destinations").insert([{name:P.name,address:P.address,default_distance:P.defaultDistance}]).select().single();if(Q)throw Q;n(ie=>({...ie,favoriteDestinations:[...ie.favoriteDestinations,{id:H.id,name:H.name,address:H.address,defaultDistance:parseFloat(H.default_distance),createdAt:H.created_at,updatedAt:H.updated_at}].sort((be,_e)=>be.name.localeCompare(_e.name))}))},A=async P=>{const{error:H}=await lt.from("favorite_destinations").update({name:P.name,address:P.address,default_distance:P.defaultDistance,updated_at:new Date().toISOString()}).eq("id",P.id);if(H)throw H;n(Q=>({...Q,favoriteDestinations:Q.favoriteDestinations.map(ie=>ie.id===P.id?P:ie).sort((ie,be)=>ie.name.localeCompare(be.name))}))},V=async P=>{const{error:H}=await lt.from("favorite_destinations").delete().eq("id",P);if(H)throw H;n(Q=>({...Q,favoriteDestinations:Q.favoriteDestinations.filter(ie=>ie.id!==P)}))},K=(P,H,Q,ie)=>{if(!e.people.find(Re=>Re.id===P))return null;const _e=new Date(H);_e.setHours(0,0,0,0);const Ae=new Date(Q);Ae.setHours(23,59,59,999);const ke=Re=>{const He=new Date(Re);return He>=_e&&He<=Ae},Ke=e.trips.filter(Re=>Re.personId===P&&ke(Re.date)),ve=e.tripExpenses.filter(Re=>Re.personId===P&&ke(Re.date)),se=e.accommodations.filter(Re=>{const He=new Date(Re.dateFrom),oe=new Date(Re.dateTo);return Re.personId===P&&He<=Ae&&oe>=_e});let Ze=0,We=0,Oe=0,Me=0;Ke.forEach(Re=>{const He=e.vehicles.find(oe=>oe.id===Re.vehicleId);if(He){const oe=Re.isRoundTrip?Re.distance*2:Re.distance;Ze+=oe,We+=oe*He.reimbursementRate}Re.hasToll&&Re.tollAmount&&(Oe+=Re.isRoundTrip?Re.tollAmount*2:Re.tollAmount),Re.isRoundTrip&&Re.returnTollAmount&&(Oe+=Re.returnTollAmount),Re.meals&&Re.meals.length>0?Re.meals.forEach(oe=>{Me+=oe.amount}):Re.hasMeal&&Re.mealAmount&&(Me+=Re.mealAmount)});const Be=ve.reduce((Re,He)=>Re+He.amount,0),Pe=se.reduce((Re,He)=>Re+He.amount,0);return Ke.length===0&&ve.length===0&&se.length===0?null:{dateFrom:_e,dateTo:Ae,periodLabel:ie,personId:P,trips:Ke,totalDistance:Ze,totalReimbursement:We,totalTollFees:Oe,totalMealReimbursement:Me,expenses:ve,totalExpenses:Be,accommodations:se,totalAccommodations:Pe}},re=P=>e.people.find(H=>H.id===P),W=P=>e.vehicles.find(H=>H.id===P),X=P=>e.vehicles.filter(H=>H.personId===P),G=P=>e.savedRoutes.find(H=>H.id===P),U=(P,H)=>{var Q;return(Q=G(P))==null?void 0:Q.distances.find(ie=>ie.id===H)},ae=(P,H)=>e.tollBooths.find(Q=>Q.entryStation.toLowerCase()===P.toLowerCase()&&Q.exitStation.toLowerCase()===H.toLowerCase()),pe=async P=>{const H=P.toLowerCase(),Q=new Set;return e.tollBooths.forEach(ie=>{ie.entryStation.toLowerCase().includes(H)&&Q.add(ie.entryStation),ie.exitStation.toLowerCase().includes(H)&&Q.add(ie.exitStation)}),Array.from(Q).sort((ie,be)=>{const _e=e.tollBooths.filter(ke=>ke.entryStation===ie||ke.exitStation===ie).reduce((ke,Ke)=>ke+Ke.usageCount,0);return e.tollBooths.filter(ke=>ke.entryStation===be||ke.exitStation===be).reduce((ke,Ke)=>ke+Ke.usageCount,0)-_e})},T=async(P,H,Q)=>{if(!P.trim()||!H.trim()||Q<=0)return;const ie=ae(P,H);if(ie){const{data:be,error:_e}=await lt.from("toll_booths").update({amount:Q,usage_count:ie.usageCount+1,last_used:new Date().toISOString()}).eq("id",ie.id).select().single();if(_e){console.error("Error updating toll booth:",_e);return}n(Ae=>({...Ae,tollBooths:Ae.tollBooths.map(ke=>ke.id===ie.id?{...ke,amount:parseFloat(be.amount),usageCount:be.usage_count,lastUsed:be.last_used,updatedAt:be.updated_at}:ke)}))}else{const{data:be,error:_e}=await lt.from("toll_booths").insert([{entry_station:P,exit_station:H,amount:Q,usage_count:1,last_used:new Date().toISOString()}]).select().single();if(_e){console.error("Error creating toll booth:",_e);return}n(Ae=>({...Ae,tollBooths:[{id:be.id,entryStation:be.entry_station,exitStation:be.exit_station,amount:parseFloat(be.amount),usageCount:be.usage_count,lastUsed:be.last_used,createdAt:be.created_at,updatedAt:be.updated_at},...Ae.tollBooths]}))}},ne={state:e,addPerson:a,updatePerson:o,deletePerson:l,addVehicle:d,updateVehicle:g,deleteVehicle:m,addTrip:v,updateTrip:p,deleteTrip:S,addSavedRoute:_,updateSavedRoute:j,deleteSavedRoute:x,addRouteDistance:f,updateRouteDistance:w,deleteRouteDistance:N,addTripExpense:D,updateTripExpense:E,deleteTripExpense:L,addAccommodation:I,updateAccommodation:Y,deleteAccommodation:ee,addFavoriteDestination:R,updateFavoriteDestination:A,deleteFavoriteDestination:V,generateMonthlyReport:(P,H,Q)=>{if(!e.people.find(Pe=>Pe.id===P))return null;const be=new Date(Q,H,1),_e=new Date(Q,H+1,0),Ae=Pe=>{const Re=new Date(Pe);return Re>=be&&Re<=_e},ke=e.trips.filter(Pe=>Pe.personId===P&&Ae(Pe.date)),Ke=e.tripExpenses.filter(Pe=>Pe.personId===P&&Ae(Pe.date)),ve=e.accommodations.filter(Pe=>{const Re=new Date(Pe.dateFrom),He=new Date(Pe.dateTo);return Pe.personId===P&&Re<=_e&&He>=be});let se=0,Ze=0,We=0,Oe=0;ke.forEach(Pe=>{const Re=e.vehicles.find(He=>He.id===Pe.vehicleId);if(Re){const He=Pe.isRoundTrip?Pe.distance*2:Pe.distance;se+=He,Ze+=He*Re.reimbursementRate}Pe.hasToll&&Pe.tollAmount&&(We+=Pe.isRoundTrip?Pe.tollAmount*2:Pe.tollAmount),Pe.meals&&Pe.meals.length>0?Pe.meals.forEach(He=>{Oe+=He.amount}):Pe.hasMeal&&Pe.mealAmount&&(Oe+=Pe.mealAmount)});const Me=Ke.reduce((Pe,Re)=>Pe+Re.amount,0),Be=ve.reduce((Pe,Re)=>Pe+Re.amount,0);return ke.length===0&&Ke.length===0&&ve.length===0?null:{month:H,year:Q,personId:P,trips:ke,totalDistance:se,totalReimbursement:Ze,totalTollFees:We,totalMealReimbursement:Oe,expenses:Ke,totalExpenses:Me,accommodations:ve,totalAccommodations:Be}},generatePeriodReport:K,getPerson:re,getVehicle:W,getVehiclesForPerson:X,getSavedRoute:G,getRouteDistance:U,getTollBooth:ae,searchTollStations:pe,handleTollBoothOnTripSave:T,formatDate:P=>lk(new Date(P),"dd MMMM yyyy",{locale:Uk}),loading:r};return c.jsx(xw.Provider,{value:ne,children:t})},ri=()=>{const t=he.useContext(xw);if(t===void 0)throw new Error("useAppContext must be used within an AppProvider");return t},qk=()=>{const{state:t}=ri(),e=new Date().getMonth(),n=new Date().getFullYear(),r=t.trips.filter(s=>{const a=new Date(s.date);return a.getMonth()===e&&a.getFullYear()===n}),i=[{title:"Persone",value:t.people.length,icon:c.jsx(G5,{className:"h-8 w-8 text-blue-500"}),link:"/persone",color:"bg-blue-100"},{title:"Trasferte Totali",value:t.trips.length,icon:c.jsx(W5,{className:"h-8 w-8 text-purple-500"}),link:"/tragitti",color:"bg-purple-100"},{title:"Trasferte Questo Mese",value:r.length,icon:c.jsx(U5,{className:"h-8 w-8 text-amber-500"}),link:"/report",color:"bg-amber-100"},{title:"Percorsi Salvati",value:t.savedRoutes.length,icon:c.jsx(ac,{className:"h-8 w-8 text-rose-500"}),link:"/percorsi",color:"bg-rose-100"}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Gestione Rimborsi Spese di Trasferta"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Istituto Veneto di Terapia Familiare"})]}),c.jsx(Pn,{to:"/tragitti/nuovo",className:"block group",children:c.jsx("div",{className:"bg-gradient-to-r from-amber-400 to-amber-500 hover:from-amber-500 hover:to-amber-600 text-white rounded-xl shadow-xl p-8 transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl",children:c.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[c.jsxs("div",{className:"flex items-center space-x-6",children:[c.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-5 rounded-2xl",children:c.jsx(Fr,{size:48,className:"text-white"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Nuova Trasferta"}),c.jsx("p",{className:"text-amber-50 text-lg",children:"Registra una nuova trasferta con chilometri, pedaggi e vitto"})]})]}),c.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-full group-hover:bg-white/30 transition-colors",children:c.jsx(u_,{size:32,className:"text-white"})})]})})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map(s=>c.jsx(Pn,{to:s.link,className:"transition-transform hover:scale-105",children:c.jsx(mn,{className:"h-full hover:shadow-lg transition-shadow",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`${s.color} p-4 rounded-lg mr-4`,children:s.icon}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s.title}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.value})]})]})})},s.title))}),c.jsxs(mn,{title:"Benvenuto nell'applicazione",children:[c.jsx("p",{className:"text-gray-600 mb-4",children:"Questa applicazione ti permette di gestire i rimborsi spese di trasferta (chilometri, pedaggi e vitto) per il personale dell'Istituto Veneto di Terapia Familiare."}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Funzionalit:"}),c.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[c.jsx("li",{children:"Gestione unificata di persone e veicoli"}),c.jsx("li",{children:"Tracciamento trasferte con calcolo automatico dei rimborsi"}),c.jsx("li",{children:"Supporto per chilometri, pedaggi autostradali e vitto"}),c.jsx("li",{children:"Percorsi salvati con opzioni multiple di distanza"}),c.jsx("li",{children:"Selezione automatica del veicolo per persona"}),c.jsx("li",{children:"Generazione di report mensili dettagliati"})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Per iniziare:"}),c.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[c.jsxs("li",{children:["Aggiungi il personale e i loro veicoli in ",c.jsx(Pn,{to:"/persone",className:"text-teal-600 hover:underline",children:"Persone"})]}),c.jsxs("li",{children:["Crea percorsi frequenti in ",c.jsx(Pn,{to:"/percorsi",className:"text-teal-600 hover:underline",children:"Percorsi Salvati"})]}),c.jsxs("li",{children:["Registra le trasferte in ",c.jsx(Pn,{to:"/tragitti",className:"text-teal-600 hover:underline",children:"Trasferte"})]}),c.jsxs("li",{children:["Genera report mensili nella sezione ",c.jsx(Pn,{to:"/report",className:"text-teal-600 hover:underline",children:"Report"})]})]})]})]})]}),c.jsx(mn,{title:"Novit - Gestione Completa Trasferte",children:c.jsxs("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-teal-800 mb-2",children:" Rimborsi completi"}),c.jsx("p",{className:"text-teal-700 text-sm mb-3",children:"Ora puoi gestire tutte le spese di trasferta in un'unica soluzione: chilometri, pedaggi autostradali e rimborsi vitto (pranzo/cena)."}),c.jsx("h4",{className:"font-semibold text-teal-800 mb-2",children:" Veicoli integrati"}),c.jsx("p",{className:"text-teal-700 text-sm mb-3",children:"Gestisci i veicoli direttamente dalla pagina di ogni persona. Il veicolo viene automaticamente selezionato durante l'inserimento della trasferta."}),c.jsx("h4",{className:"font-semibold text-teal-800 mb-2",children:" Percorsi con opzioni multiple"}),c.jsx("p",{className:"text-teal-700 text-sm",children:"I percorsi salvati supportano pi opzioni di distanza (strada normale, autostrada, ecc.) con pedaggi preimpostati."})]})})]})},st=({children:t,variant:e="primary",size:n="md",icon:r,iconPosition:i="left",fullWidth:s=!1,className:a,disabled:o,confirmMessage:l,onClick:d,...g})=>{const m=_=>{l&&!window.confirm(l)||d==null||d(_)},v={primary:"bg-teal-600 hover:bg-teal-700 text-white",secondary:"bg-gray-600 hover:bg-gray-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",warning:"bg-amber-500 hover:bg-amber-600 text-white",info:"bg-blue-600 hover:bg-blue-700 text-white"},p={sm:"text-xs py-1 px-2 rounded",md:"text-sm py-2 px-4 rounded-md",lg:"text-base py-3 px-6 rounded-lg"},S=lr("font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-opacity-50 inline-flex items-center justify-center",v[e],p[n],{"opacity-60 cursor-not-allowed":o,"w-full":s,"focus:ring-teal-400":e==="primary","focus:ring-gray-400":e==="secondary","focus:ring-green-400":e==="success","focus:ring-red-400":e==="danger","focus:ring-amber-400":e==="warning","focus:ring-blue-400":e==="info"},a);return c.jsxs("button",{className:S,disabled:o,onClick:m,...g,children:[r&&i==="left"&&c.jsx("span",{className:"mr-2",children:r}),t,r&&i==="right"&&c.jsx("span",{className:"ml-2",children:r})]})};function fc({columns:t,data:e,keyExtractor:n,onRowClick:r,className:i,emptyMessage:s="Nessun dato disponibile"}){return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:lr("min-w-full divide-y divide-gray-200",i),children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:t.map(a=>c.jsx("th",{scope:"col",className:lr("px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",a.className),children:a.header},a.key))})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length>0?e.map(a=>c.jsx("tr",{className:lr({"hover:bg-gray-50 cursor-pointer":r}),onClick:r?()=>r(a):void 0,children:t.map(o=>c.jsx("td",{className:lr("px-6 py-4 text-sm text-gray-500",o.className),children:o.render?o.render(a):a[o.key]},`${n(a)}-${o.key}`))},n(a))):c.jsx("tr",{children:c.jsx("td",{colSpan:t.length,className:"px-6 py-4 text-sm text-gray-500 text-center",children:s})})})]})})}const Wk=()=>{const{state:t,deletePerson:e}=ri(),n=ni(),[r,i]=he.useState(""),s=l=>{window.confirm("Sei sicuro di voler eliminare questa persona? Verranno eliminati anche tutti i veicoli e i tragitti associati.")&&e(l)},a=t.people.filter(l=>l.name.toLowerCase().includes(r.toLowerCase())||l.surname.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes("docent")&&l.isDocente||r.toLowerCase().includes("amministrat")&&l.isAmministratore||r.toLowerCase().includes("dipendent")&&l.isDipendente),o=[{key:"name",header:"Nome",render:l=>c.jsxs("span",{className:"font-medium text-gray-900",children:[l.name," ",l.surname]})},{key:"roles",header:"Ruoli",render:l=>c.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.isDocente&&c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800",children:"Docente"}),l.isAmministratore&&c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Amministratore"}),l.isDipendente&&c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Dipendente"})]})},{key:"vehicles",header:"Veicoli",render:l=>{const d=t.vehicles.filter(g=>g.personId===l.id).length;return c.jsx("span",{children:d})}},{key:"actions",header:"Azioni",className:"text-right w-32",render:l=>c.jsxs("div",{className:"flex flex-col items-stretch space-y-2",children:[c.jsx(st,{variant:"info",size:"sm",icon:c.jsx(Xh,{size:16}),onClick:d=>{d.stopPropagation(),n(`/persone/${l.id}`)},className:"w-full",children:"Modifica"}),c.jsx(st,{variant:"danger",size:"sm",icon:c.jsx(Vi,{size:16}),onClick:d=>{d.stopPropagation(),s(l.id)},className:"w-full",children:"Elimina"})]})}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestione Persone"}),c.jsx(Pn,{to:"/persone/nuovo",children:c.jsx(st,{variant:"primary",icon:c.jsx(V5,{size:18}),children:"Aggiungi Persona"})})]}),c.jsxs(mn,{children:[c.jsxs("div",{className:"mb-4 relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(dg,{size:18,className:"text-gray-400"})}),c.jsx("input",{type:"text",placeholder:"Cerca per nome, cognome o ruolo...",className:"pl-10 shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border-gray-300 rounded-md",value:r,onChange:l=>i(l.target.value)})]}),c.jsx(fc,{columns:o,data:a,keyExtractor:l=>l.id,onRowClick:l=>n(`/persone/${l.id}`),emptyMessage:r?"Nessuna persona trovata con questi criteri di ricerca":"Nessuna persona aggiunta. Clicca su 'Aggiungi Persona' per iniziare."})]})]})},pt=({label:t,error:e,fullWidth:n=!0,className:r,id:i,...s})=>c.jsxs("div",{className:lr("mb-4",{"w-full":n}),children:[t&&c.jsx("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),c.jsx("input",{id:i,className:lr("shadow-sm rounded-md border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm",{"border-red-300":e},r),...s}),e&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:e})]}),Hv=()=>{const{id:t}=ug(),e=ni(),{state:n,addPerson:r,updatePerson:i,addVehicle:s,updateVehicle:a,deleteVehicle:o,getVehiclesForPerson:l}=ri(),{showToast:d}=no(),g=!!t,m=g?n.people.find(U=>U.id===t):null,v=g?l(t):[],[p,S]=he.useState({name:"",surname:"",isDocente:!1,isAmministratore:!1,isDipendente:!1}),[_,j]=he.useState({make:"",model:"",plate:"",reimbursementRate:"0.35"}),[x,f]=he.useState({}),[w,N]=he.useState({}),[D,E]=he.useState(!1),[L,I]=he.useState(null);he.useEffect(()=>{m&&S({name:m.name,surname:m.surname,isDocente:m.isDocente,isAmministratore:m.isAmministratore,isDipendente:m.isDipendente})},[m]);const Y=()=>{const U={};return p.name.trim()||(U.name="Il nome  obbligatorio"),p.surname.trim()||(U.surname="Il cognome  obbligatorio"),!p.isDocente&&!p.isAmministratore&&!p.isDipendente&&(U.roles="Seleziona almeno un ruolo"),f(U),Object.keys(U).length===0},ee=()=>{const U={};_.make.trim()||(U.make="La marca  obbligatoria"),_.model.trim()||(U.model="Il modello  obbligatorio"),_.plate.trim()?n.vehicles.find(T=>T.plate.toLowerCase()===_.plate.toLowerCase()&&T.id!==L)&&(U.plate="Questa targa  gi registrata per un altro veicolo"):U.plate="La targa  obbligatoria";const ae=parseFloat(_.reimbursementRate);return(isNaN(ae)||ae<=0)&&(U.reimbursementRate="La tariffa deve essere un numero positivo"),N(U),Object.keys(U).length===0},R=U=>{const{name:ae,value:pe,type:T}=U.target,$=U.target.checked;S(J=>({...J,[ae]:T==="checkbox"?$:pe}))},A=U=>{const{name:ae,value:pe}=U.target;j(T=>({...T,[ae]:pe}))},V=async U=>{if(U.preventDefault(),!Y())return;const ae={name:p.name,surname:p.surname,isDocente:p.isDocente,isAmministratore:p.isAmministratore,isDipendente:p.isDipendente};try{g&&m?(await i({id:m.id,...ae}),d("Persona aggiornata con successo","success")):(await r(ae),d("Persona aggiunta con successo","success"),e("/persone"))}catch(pe){console.error("Errore durante il salvataggio della persona:",pe),d("Errore durante il salvataggio della persona","error")}},K=()=>{E(!0),I(null),j({make:"",model:"",plate:"",reimbursementRate:"0.35"}),N({})},re=U=>{E(!0),I(U.id),j({make:U.make,model:U.model,plate:U.plate,reimbursementRate:U.reimbursementRate.toString()}),N({})},W=async U=>{if(U.preventDefault(),!ee())return;if(!m&&!g){d("Salva prima la persona per aggiungere un veicolo","error");return}const ae={personId:(m==null?void 0:m.id)||"",make:_.make,model:_.model,plate:_.plate,reimbursementRate:parseFloat(_.reimbursementRate)};try{L?(await a({id:L,...ae}),d("Veicolo aggiornato con successo","success")):(await s(ae),d("Veicolo aggiunto con successo","success")),E(!1),I(null),j({make:"",model:"",plate:"",reimbursementRate:"0.35"})}catch(pe){console.error("Errore durante il salvataggio del veicolo:",pe),d("Errore durante il salvataggio del veicolo","error")}},X=async U=>{if(window.confirm("Sei sicuro di voler eliminare questo veicolo? Verranno eliminati anche tutti i tragitti associati."))try{await o(U),d("Veicolo eliminato con successo","success")}catch(ae){console.error("Errore durante l'eliminazione del veicolo:",ae),d("Errore durante l'eliminazione del veicolo","error")}},G=()=>{E(!1),I(null),j({make:"",model:"",plate:"",reimbursementRate:"0.35"}),N({})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(st,{variant:"secondary",icon:c.jsx(ic,{size:18}),onClick:()=>e("/persone"),children:"Torna all'elenco"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:g?"Modifica Persona":"Aggiungi Persona"})]}),c.jsx(mn,{title:"Informazioni Personali",children:c.jsxs("form",{onSubmit:V,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(pt,{id:"name",name:"name",label:"Nome",value:p.name,onChange:R,error:x.name,required:!0}),c.jsx(pt,{id:"surname",name:"surname",label:"Cognome",value:p.surname,onChange:R,error:x.surname,required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ruoli ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"isDocente",checked:p.isDocente,onChange:R,className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Docente"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"isAmministratore",checked:p.isAmministratore,onChange:R,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Amministratore"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"isDipendente",checked:p.isDipendente,onChange:R,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Dipendente"})]})]}),x.roles&&c.jsx("p",{className:"mt-2 text-sm text-red-600",children:x.roles})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(st,{type:"submit",variant:"primary",icon:c.jsx(jh,{size:18}),children:g?"Salva Modifiche":"Aggiungi Persona"})})]})}),g&&m&&c.jsxs(mn,{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(mu,{className:"h-5 w-5 text-teal-600"}),c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Veicoli di ",m.name," ",m.surname]})]}),!D&&c.jsx(st,{variant:"primary",size:"sm",icon:c.jsx(Fr,{size:16}),onClick:K,children:"Aggiungi Veicolo"})]}),D&&c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[c.jsx("h3",{className:"text-md font-medium text-blue-900 mb-4",children:L?"Modifica Veicolo":"Nuovo Veicolo"}),c.jsxs("form",{onSubmit:W,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(pt,{id:"make",name:"make",label:"Marca",value:_.make,onChange:A,error:w.make,required:!0}),c.jsx(pt,{id:"model",name:"model",label:"Modello",value:_.model,onChange:A,error:w.model,required:!0})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(pt,{id:"plate",name:"plate",label:"Targa",value:_.plate,onChange:A,error:w.plate,required:!0}),c.jsx(pt,{id:"reimbursementRate",name:"reimbursementRate",label:"Tariffa (/km)",type:"number",step:"0.01",min:"0.01",value:_.reimbursementRate,onChange:A,error:w.reimbursementRate,required:!0})]}),c.jsxs("div",{className:"flex justify-end space-x-2",children:[c.jsx(st,{type:"button",variant:"secondary",onClick:G,children:"Annulla"}),c.jsx(st,{type:"submit",variant:"primary",icon:c.jsx(jh,{size:18}),children:L?"Salva Modifiche":"Aggiungi Veicolo"})]})]})]}),c.jsx("div",{className:"space-y-3",children:v.length>0?v.map(U=>c.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex-grow",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(mu,{className:"h-5 w-5 text-gray-400"}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-md font-medium text-gray-900",children:[U.make," ",U.model]}),c.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:U.plate}),c.jsxs("span",{className:"font-medium text-teal-600",children:[U.reimbursementRate.toFixed(2)," /km"]})]})]})]})}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(st,{variant:"info",size:"sm",icon:c.jsx(Xh,{size:14}),onClick:()=>re(U),disabled:D,children:"Modifica"}),c.jsx(st,{variant:"danger",size:"sm",icon:c.jsx(Vi,{size:14}),onClick:()=>X(U.id),disabled:D,children:"Elimina"})]})]})},U.id)):c.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx(mu,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun veicolo registrato"}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["Aggiungi un veicolo per ",m.name," ",m.surname," per iniziare a tracciare i rimborsi chilometrici."]}),!D&&c.jsx(st,{variant:"primary",icon:c.jsx(Fr,{size:18}),onClick:K,children:"Aggiungi Primo Veicolo"})]})}),v.length>0&&c.jsx("div",{className:"mt-4 p-3 bg-teal-50 border border-teal-200 rounded-md",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(mu,{className:"h-5 w-5 text-teal-500"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-teal-800",children:"Gestione Semplificata"}),c.jsxs("p",{className:"text-sm text-teal-700 mt-1",children:["Ora quando crei un nuovo tragitto, il veicolo di ",m.name," verr selezionato automaticamente. Questo semplifica il processo e riduce gli errori di inserimento."]})]})]})})]}),!g&&c.jsx(mn,{children:c.jsxs("div",{className:"text-center py-6",children:[c.jsx(mu,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Gestione Veicoli"}),c.jsx("p",{className:"text-gray-600",children:"Dopo aver salvato la persona, potrai aggiungere e gestire i suoi veicoli direttamente da questa pagina."})]})})]})},Qt=({label:t,options:e,error:n,fullWidth:r=!0,className:i,id:s,...a})=>c.jsxs("div",{className:lr("mb-4",{"w-full":r}),children:[t&&c.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),c.jsxs("select",{id:s,className:lr("shadow-sm rounded-md border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm",{"border-red-300":n},i),...a,children:[c.jsx("option",{value:"",children:"Seleziona..."}),e.map(o=>c.jsx("option",{value:o.value,children:o.label},o.value))]}),n&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:n})]}),Hk=()=>{const{state:t,deleteTrip:e,getPerson:n,getVehicle:r,formatDate:i}=ri(),s=ni(),[a,o]=he.useState(""),[l,d]=he.useState(""),[g,m]=he.useState(""),v=f=>{window.confirm("Sei sicuro di voler eliminare questa trasferta?")&&e(f)},p=f=>{s("/tragitti/nuovo",{state:{duplicateTrip:f}})},_=[...t.trips.filter(f=>{const w=n(f.personId),N=r(f.vehicleId),D=new Date(f.date),E=a.toLowerCase(),L=w&&`${w.name} ${w.surname}`.toLowerCase().includes(E)||N&&`${N.make} ${N.model}`.toLowerCase().includes(E)||f.origin.toLowerCase().includes(E)||f.destination.toLowerCase().includes(E)||f.purpose.toLowerCase().includes(E),I=!l||f.personId===l,Y=g.split("-"),ee=!g||D.getMonth()===parseInt(Y[1])-1&&D.getFullYear()===parseInt(Y[0]);return L&&I&&ee})].sort((f,w)=>new Date(w.date).getTime()-new Date(f.date).getTime()),j=()=>{const f=[],w=new Date;for(let N=0;N<12;N++){const D=new Date(w.getFullYear(),w.getMonth()-N,1),E=`${D.getFullYear()}-${(D.getMonth()+1).toString().padStart(2,"0")}`,L=`${D.toLocaleString("it-IT",{month:"long"})} ${D.getFullYear()}`;f.push({value:E,label:L})}return f},x=[{key:"date",header:"Data",className:"w-32",render:f=>c.jsx("span",{className:"whitespace-nowrap",children:i(f.date)})},{key:"person",header:"Persona",className:"w-40",render:f=>{const w=n(f.personId);return w?c.jsxs("span",{className:"font-medium text-gray-900 whitespace-nowrap",children:[w.name," ",w.surname]}):c.jsx("span",{className:"text-red-500 whitespace-nowrap",children:"Persona non trovata"})}},{key:"vehicle",header:"Veicolo",className:"w-48",render:f=>{const w=r(f.vehicleId);return w?c.jsxs("span",{className:"whitespace-nowrap",children:[w.make," ",w.model," (",w.plate,")"]}):c.jsx("span",{className:"text-red-500 whitespace-nowrap",children:"Veicolo non trovato"})}},{key:"route",header:"Percorso",className:"max-w-md",render:f=>c.jsxs("span",{className:"block break-words",children:[f.origin,"  ",f.destination,f.isRoundTrip&&c.jsx("span",{className:"ml-1 text-teal-600",children:"(A/R)"})]})},{key:"distance",header:"Km",className:"w-24",render:f=>{const w=f.isRoundTrip?f.distance*2:f.distance;return c.jsxs("span",{className:"whitespace-nowrap",children:[w.toFixed(1)," km"]})}},{key:"toll",header:"Pedaggio",className:"w-32",render:f=>{if(f.hasToll&&f.tollAmount){const w=f.isRoundTrip?f.tollAmount*2:f.tollAmount;return c.jsxs("div",{className:"flex items-center space-x-1 whitespace-nowrap",children:[c.jsx(B5,{size:14,className:"text-amber-600"}),c.jsxs("span",{className:"text-amber-700 font-medium",children:[w.toFixed(2)," "]})]})}return c.jsx("span",{className:"text-gray-400 text-sm whitespace-nowrap",children:"-"})}},{key:"actions",header:"Azioni",className:"text-right w-32",render:f=>c.jsxs("div",{className:"flex flex-col items-stretch space-y-2",children:[c.jsx(st,{variant:"info",size:"sm",icon:c.jsx(Xh,{size:16}),onClick:w=>{w.stopPropagation(),s(`/tragitti/${f.id}`)},className:"w-full",children:"Modifica"}),c.jsx(st,{variant:"secondary",size:"sm",icon:c.jsx($5,{size:16}),onClick:w=>{w.stopPropagation(),p(f)},className:"w-full",children:"Duplica"}),c.jsx(st,{variant:"danger",size:"sm",icon:c.jsx(Vi,{size:16}),onClick:w=>{w.stopPropagation(),v(f.id)},className:"w-full",children:"Elimina"})]})}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Trasferte"}),c.jsx(Pn,{to:"/tragitti/nuovo",children:c.jsx(st,{variant:"primary",icon:c.jsx(H5,{size:18}),children:"Nuova Trasferta"})})]}),c.jsxs(mn,{children:[c.jsxs("div",{className:"mb-4 relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(dg,{size:18,className:"text-gray-400"})}),c.jsx("input",{type:"text",placeholder:"Cerca trasferte...",className:"pl-10 shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border-gray-300 rounded-md",value:a,onChange:f=>o(f.target.value)})]}),c.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Qt,{id:"personFilter",label:"Filtra per persona",options:t.people.map(f=>({value:f.id,label:`${f.name} ${f.surname}`})),value:l,onChange:f=>d(f.target.value)}),c.jsx(Qt,{id:"monthFilter",label:"Filtra per mese",options:j(),value:g,onChange:f=>m(f.target.value)})]}),c.jsx(fc,{columns:x,data:_,keyExtractor:f=>f.id,onRowClick:f=>s(`/tragitti/${f.id}`),emptyMessage:a||l||g?"Nessuna trasferta trovata con questi filtri":"Nessuna trasferta registrata. Clicca su 'Nuova Trasferta' per iniziare."})]})]})};function Vk(t,e){const[n,r]=he.useState(t);return he.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}const Id=({id:t,name:e,label:n,value:r,onChange:i,onSelect:s,getSuggestions:a,placeholder:o,error:l,required:d=!1,disabled:g=!1})=>{const[m,v]=he.useState([]),[p,S]=he.useState(!1),[_,j]=he.useState(-1),[x,f]=he.useState(!1),w=Vk(r,300),N=he.useRef(null);he.useEffect(()=>{(async()=>{if(w.trim().length<2){v([]),S(!1);return}f(!0);try{const I=await a(w);v(I),S(I.length>0),j(-1)}catch(I){console.error("Error fetching suggestions:",I),v([]),S(!1)}finally{f(!1)}})()},[w,a]),he.useEffect(()=>{const L=I=>{N.current&&!N.current.contains(I.target)&&S(!1)};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[]);const D=L=>{if(p)switch(L.key){case"ArrowDown":L.preventDefault(),j(I=>I<m.length-1?I+1:I);break;case"ArrowUp":L.preventDefault(),j(I=>I>0?I-1:-1);break;case"Enter":L.preventDefault(),_>=0&&_<m.length&&E(m[_].value);break;case"Escape":L.preventDefault(),S(!1),j(-1);break}},E=L=>{i({target:{name:e,value:L,type:"text"}}),s&&s(L),S(!1),j(-1)};return c.jsxs("div",{ref:N,className:"relative",children:[c.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1",children:[n,d&&c.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",id:t,name:e,value:r,onChange:i,onKeyDown:D,onFocus:()=>{m.length>0&&r.trim().length>=2&&S(!0)},placeholder:o,disabled:g,required:d,className:lr("shadow-sm block w-full sm:text-sm rounded-md",{"border-red-300 focus:ring-red-500 focus:border-red-500":l,"border-gray-300 focus:ring-primary-500 focus:border-primary-500":!l,"bg-gray-100 cursor-not-allowed":g})}),x&&c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:c.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary-500 border-t-transparent rounded-full"})})]}),l&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:l}),p&&m.length>0&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:m.map((L,I)=>c.jsx("button",{type:"button",onClick:()=>E(L.value),className:lr("w-full text-left px-4 py-2 hover:bg-primary-50 focus:bg-primary-50 focus:outline-none",{"bg-primary-100":I===_}),children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-900",children:L.value}),L.usageCount!==void 0&&L.usageCount>0&&c.jsxs("span",{className:"text-xs text-gray-500",children:["usato ",L.usageCount," ",L.usageCount===1?"volta":"volte"]})]})},I))})]})},Gk=(t,e)=>{if(!t.trim()||!e.trim())throw new Error("Both origin and destination addresses are required");const n=encodeURIComponent(t.trim()),r=encodeURIComponent(e.trim()),i=`https://www.google.it/maps/dir/${n}/${r}`;window.open(i,"_blank","noopener,noreferrer")},bw=async(t,e)=>{throw Gk(t,e),new Error(`Google Maps  stato aperto in una nuova scheda. Segui questi passaggi:

1. Verifica che il percorso mostrato sia corretto
2. Trova la distanza in chilometri (km) sotto il tempo di percorrenza
3. Torna a questa pagina e inserisci manualmente la distanza nel campo "Distanza (km)"
4. Se ci sono pi percorsi, scegli quello che intendi utilizzare per il rimborso`)},ds={treno:"Biglietto ferroviario",supplemento_treno:"Supplemento ferroviario",aereo:"Biglietto aereo",mezzi_pubblici:"Biglietti mezzi pubblici",taxi:"Taxi",parcheggio:"Parcheggio",altro:"Altro"},za=[{id:"treviso",name:"Sede Treviso",address:"Via della Quercia 2/B, 31100 Treviso"},{id:"marcon",name:"Sede Marcon",address:"Viale della Stazione 3, 30020 Marcon"},{id:"vicenza",name:"Sede Vicenza",address:"Via Pola 30, Torri di Quartesolo, Vicenza"}],Aa=za[0],Rd={ragioneSociale:"ISTITUTO VENETO DI TERAPIA FAMILIARE S.R.L.",partitaIva:"02034280269",codiceFiscale:"02034280269",rea:"184910"},Vv=()=>{var Pe,Re,He,oe;const{id:t}=ug(),e=ni(),n=ys(),{state:r,addTrip:i,updateTrip:s,addTripExpense:a,deleteTripExpense:o,getPerson:l,getVehicle:d,getVehiclesForPerson:g,getSavedRoute:m,getTollBooth:v,searchTollStations:p}=ri(),S=!!t,_=S?r.trips.find(C=>C.id===t):null,j=!!((Pe=n.state)!=null&&Pe.duplicateTrip),x=j?n.state.duplicateTrip:null,[f,w]=he.useState({date:new Date().toISOString().split("T")[0],personId:"",vehicleId:"",tripRole:"docente",origin:Aa.address,destination:"",distance:"",purpose:"",isRoundTrip:!1,savedRouteId:"",selectedDistanceId:"",selectedOfficeId:Aa.id,useCustomOrigin:!1,useCustomDestination:!1,hasToll:!1,tollEntryStation:"",tollExitStation:"",tollAmount:"",hasReturnToll:!1,returnTollEntryStation:"",returnTollExitStation:"",returnTollAmount:"",meals:[],travelExpenses:[]}),[N,D]=he.useState({}),[E,L]=he.useState([]),[I,Y]=he.useState([]),[ee,R]=he.useState(null),[A,V]=he.useState(null),[K,re]=he.useState([]),[W,X]=he.useState(null),[G,U]=he.useState(null);he.useEffect(()=>{if(_){const C=_.savedRouteId?m(_.savedRouteId):null,ge=l(_.personId),je=za.find(Ce=>Ce.address===_.origin),Ee=(ge==null?void 0:ge.homeAddress)||Aa.address;_.personId&&(T(_.personId),$(_.personId)),_.savedRouteId&&J(_.savedRouteId),w({date:new Date(_.date).toISOString().split("T")[0],personId:_.personId,vehicleId:_.vehicleId,tripRole:_.tripRole||"docente",origin:_.origin,destination:_.destination,distance:_.distance.toString(),purpose:_.purpose,isRoundTrip:_.isRoundTrip,savedRouteId:_.savedRouteId||"",selectedDistanceId:_.selectedDistanceId||"",selectedOfficeId:je?je.id:Aa.id,useCustomOrigin:!je&&_.origin!==Ee,useCustomDestination:!C,hasToll:_.hasToll||!1,tollEntryStation:_.tollEntryStation||"",tollExitStation:_.tollExitStation||"",tollAmount:_.tollAmount?_.tollAmount.toString():"",hasReturnToll:!!(_.returnTollEntryStation||_.returnTollExitStation),returnTollEntryStation:_.returnTollEntryStation||"",returnTollExitStation:_.returnTollExitStation||"",returnTollAmount:_.returnTollAmount?_.returnTollAmount.toString():"",meals:P(_),travelExpenses:ne(_.id)})}},[_]),he.useEffect(()=>{f.personId&&E.length>0?(!f.vehicleId||!E.some(C=>C.value===f.vehicleId))&&w(C=>({...C,vehicleId:E[0].value})):f.personId||w(C=>({...C,vehicleId:""}))},[f.personId,E]),he.useEffect(()=>{if(j&&x){const C=l(x.personId);x.personId&&(T(x.personId),$(x.personId)),x.savedRouteId&&J(x.savedRouteId),w({date:new Date().toISOString().split("T")[0],personId:x.personId,vehicleId:x.vehicleId,tripRole:x.tripRole||"docente",origin:x.origin,destination:x.destination,distance:x.distance.toString(),purpose:x.purpose,isRoundTrip:x.isRoundTrip,savedRouteId:x.savedRouteId||"",selectedDistanceId:x.selectedDistanceId||"",useCustomOrigin:C?x.origin!==C.homeAddress:!1,useCustomDestination:!x.savedRouteId,hasToll:x.hasToll||!1,tollEntryStation:x.tollEntryStation||"",tollExitStation:x.tollExitStation||"",tollAmount:x.tollAmount?x.tollAmount.toString():"",hasReturnToll:!!(x.returnTollEntryStation||x.returnTollExitStation),returnTollEntryStation:x.returnTollEntryStation||"",returnTollExitStation:x.returnTollExitStation||"",returnTollAmount:x.returnTollAmount?x.returnTollAmount.toString():"",meals:P(x),travelExpenses:[]})}},[j]),he.useEffect(()=>{if(f.hasToll&&f.tollEntryStation&&f.tollExitStation){const C=v(f.tollEntryStation,f.tollExitStation);C?(X({amount:C.amount,usageCount:C.usageCount}),(!f.tollAmount||f.tollAmount==="")&&w(ge=>({...ge,tollAmount:C.amount.toString()}))):X(null)}else X(null)},[f.tollEntryStation,f.tollExitStation,f.hasToll]),he.useEffect(()=>{if(f.hasReturnToll&&f.returnTollEntryStation&&f.returnTollExitStation){const C=v(f.returnTollEntryStation,f.returnTollExitStation);C?(U({amount:C.amount,usageCount:C.usageCount}),(!f.returnTollAmount||f.returnTollAmount==="")&&w(ge=>({...ge,returnTollAmount:C.amount.toString()}))):U(null)}else U(null)},[f.returnTollEntryStation,f.returnTollExitStation,f.hasReturnToll]),he.useEffect(()=>{ae(),pe()},[f.distance,f.vehicleId,f.isRoundTrip,f.tollAmount,f.hasToll,f.returnTollAmount,f.hasReturnToll,f.meals]);const ae=()=>{if(!f.vehicleId||!f.distance){R(null);return}const C=d(f.vehicleId);if(!C){R(null);return}const ge=parseFloat(f.distance);if(isNaN(ge)){R(null);return}const Ee=(f.isRoundTrip?ge*2:ge)*C.reimbursementRate;R(Ee)},pe=()=>{if(!f.hasToll||!f.tollAmount){V(null);return}const C=parseFloat(f.tollAmount);if(isNaN(C)){V(null);return}let ge=C;if(f.isRoundTrip)if(f.hasReturnToll&&f.returnTollAmount){const je=parseFloat(f.returnTollAmount);ge+=isNaN(je)?C:je}else ge+=C;V(ge)},T=C=>{const ge=g(C);L(ge.map(je=>({value:je.id,label:`${je.make} ${je.model} (${je.plate}) - ${je.reimbursementRate.toFixed(2)} /km`})))},$=C=>{const ge=l(C);if(!ge){Y([]);return}const je=[];ge.isDocente&&je.push({value:"docente",label:"Docente"}),ge.isAmministratore&&je.push({value:"amministratore",label:"Amministratore"}),ge.isDipendente&&je.push({value:"dipendente",label:"Dipendente"}),Y(je),je.length>0&&!je.some(Ee=>Ee.value===f.tripRole)&&w(Ee=>({...Ee,tripRole:je[0].value}))},J=C=>{const ge=m(C);re(ge?ge.distances.map(je=>({value:je.id,label:`${je.label} (${je.distance.toFixed(1)} km)`})):[])},ne=C=>r.tripExpenses.filter(ge=>ge.tripId===C).map(ge=>({expenseType:ge.expenseType,fromLocation:ge.fromLocation,toLocation:ge.toLocation,description:ge.description,amount:ge.amount.toString()})),P=C=>C.meals&&C.meals.length>0?C.meals.map(ge=>({mealType:ge.mealType,amount:ge.amount.toString()})):C.hasMeal&&C.mealAmount?[{mealType:C.mealType||"pranzo",amount:C.mealAmount.toString()}]:[],H=()=>{const ge=f.meals.map(je=>je.mealType).includes("pranzo")?"cena":"pranzo";w(je=>({...je,meals:[...je.meals,{mealType:ge,amount:""}]}))},Q=C=>{w(ge=>({...ge,meals:ge.meals.filter((je,Ee)=>Ee!==C)}))},ie=(C,ge,je)=>{w(Ee=>({...Ee,meals:Ee.meals.map((Ce,xe)=>xe===C?{...Ce,[ge]:je}:Ce)}))},be=()=>{w(C=>({...C,travelExpenses:[...C.travelExpenses,{expenseType:"taxi",fromLocation:"",toLocation:"",description:"",amount:""}]}))},_e=C=>{w(ge=>({...ge,travelExpenses:ge.travelExpenses.filter((je,Ee)=>Ee!==C)}))},Ae=(C,ge,je)=>{w(Ee=>({...Ee,travelExpenses:Ee.travelExpenses.map((Ce,xe)=>xe===C?{...Ce,[ge]:je}:Ce)}))},ke=C=>C==="treno"||C==="supplemento_treno"||C==="aereo"||C==="mezzi_pubblici",Ke=()=>{const C={};f.date||(C.date="La data  obbligatoria"),f.personId||(C.personId="La persona  obbligatoria"),f.vehicleId||(C.vehicleId="Il veicolo  obbligatorio"),f.tripRole||(C.tripRole="Il ruolo  obbligatorio"),f.origin.trim()||(C.origin="L'indirizzo di origine  obbligatorio"),f.destination.trim()||(C.destination="L'indirizzo di destinazione  obbligatorio");const ge=parseFloat(f.distance);return(isNaN(ge)||ge<=0)&&(C.distance="La distanza deve essere un numero positivo"),f.purpose.trim()||(C.purpose="Lo scopo della trasferta  obbligatorio"),D(C),Object.keys(C).length===0},ve=C=>{const{name:ge,value:je,type:Ee}=C.target;if(ge==="personId"&&je){T(je),$(je);const Ce=l(je);if(Ce&&Ce.homeAddress&&!f.useCustomOrigin){w(xe=>({...xe,personId:je,origin:Ce.homeAddress||Aa.address}));return}}if(Ee==="checkbox"){const Ce=C.target.checked;if(ge==="useCustomOrigin"&&!Ce){const xe=f.personId?l(f.personId):null,Xe=za.find(Gt=>Gt.id===f.selectedOfficeId)||Aa,mt=(xe==null?void 0:xe.homeAddress)||Xe.address;w(Gt=>({...Gt,[ge]:Ce,origin:mt}))}else ge==="useCustomDestination"?(w(xe=>({...xe,[ge]:Ce,savedRouteId:"",selectedDistanceId:"",destination:"",distance:""})),re([])):w(xe=>({...xe,[ge]:Ce}))}else if(ge==="selectedOfficeId"){const Ce=za.find(xe=>xe.id===je)||Aa;w(xe=>({...xe,selectedOfficeId:je,origin:Ce.address}))}else w(Ce=>({...Ce,[ge]:je}))},se=C=>{const ge=C.target.value,je=m(f.savedRouteId);if(je&&ge){const Ee=je.distances.find(Ce=>Ce.id===ge);if(Ee){const Ce=!!(Ee.tollEntryStation||Ee.tollExitStation||Ee.tollAmount);w(xe=>({...xe,selectedDistanceId:ge,distance:Ee.distance.toString(),hasToll:Ce,tollEntryStation:Ee.tollEntryStation||"",tollExitStation:Ee.tollExitStation||"",tollAmount:Ee.tollAmount?Ee.tollAmount.toString():""}))}}else w(Ee=>({...Ee,selectedDistanceId:"",distance:"",hasToll:!1,tollEntryStation:"",tollExitStation:"",tollAmount:""}))},Ze=async C=>(await p(C)).map(je=>({value:je})),We=()=>{try{bw(f.origin,f.destination)}catch(C){C instanceof Error&&alert(C.message)}},Oe=async C=>{if(C.preventDefault(),!Ke())return;const ge=f.meals.filter(Ce=>Ce.amount&&parseFloat(Ce.amount)>0).map(Ce=>({mealType:Ce.mealType,amount:parseFloat(Ce.amount)})),je={date:f.date,personId:f.personId,vehicleId:f.vehicleId,tripRole:f.tripRole,origin:f.origin,destination:f.destination,distance:parseFloat(f.distance),purpose:f.purpose,isRoundTrip:f.isRoundTrip,savedRouteId:f.savedRouteId||void 0,selectedDistanceId:f.selectedDistanceId||void 0,hasToll:f.hasToll,tollEntryStation:f.hasToll?f.tollEntryStation:void 0,tollExitStation:f.hasToll?f.tollExitStation:void 0,tollAmount:f.hasToll&&f.tollAmount?parseFloat(f.tollAmount):void 0,returnTollEntryStation:f.hasToll&&f.isRoundTrip&&f.hasReturnToll?f.returnTollEntryStation:void 0,returnTollExitStation:f.hasToll&&f.isRoundTrip&&f.hasReturnToll?f.returnTollExitStation:void 0,returnTollAmount:f.hasToll&&f.isRoundTrip&&f.hasReturnToll&&f.returnTollAmount?parseFloat(f.returnTollAmount):void 0},Ee=f.travelExpenses.filter(Ce=>Ce.amount&&parseFloat(Ce.amount)>0);if(S&&_){await s({id:_.id,...je},ge);const Ce=r.tripExpenses.filter(xe=>xe.tripId===_.id);for(const xe of Ce)await o(xe.id);for(const xe of Ee)await a({personId:f.personId,tripId:_.id,date:f.date,expenseType:xe.expenseType,description:xe.description,fromLocation:xe.fromLocation,toLocation:xe.toLocation,amount:parseFloat(xe.amount),notes:""})}else{await i(je,ge);const Ce=r.trips[0];if(Ce&&Ee.length>0)for(const xe of Ee)await a({personId:f.personId,tripId:Ce.id,date:f.date,expenseType:xe.expenseType,description:xe.description,fromLocation:xe.fromLocation,toLocation:xe.toLocation,amount:parseFloat(xe.amount),notes:""})}e("/tragitti")},Me=f.origin.trim()&&f.destination.trim(),Be=E.length>0;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(st,{variant:"secondary",icon:c.jsx(ic,{size:18}),onClick:()=>e("/tragitti"),children:"Torna all'elenco"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:S?"Modifica Trasferta":j?"Duplica Trasferta":"Nuova Trasferta"})]}),j&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx($5,{className:"h-5 w-5 text-blue-500 mr-3 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"Creazione da duplicato"}),c.jsx("p",{className:"text-sm text-blue-700",children:"Stai creando una nuova trasferta basata su una esistente. La data  stata aggiornata a oggi. Modifica i dati necessari e salva per creare la nuova trasferta."})]})]})}),c.jsx(mn,{children:c.jsxs("form",{onSubmit:Oe,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(pt,{id:"date",name:"date",label:"Data",type:"date",value:f.date,onChange:ve,error:N.date,required:!0}),c.jsx(Qt,{id:"personId",name:"personId",label:"Persona",options:r.people.map(C=>{const ge=[];return C.isDocente&&ge.push("D"),C.isAmministratore&&ge.push("A"),C.isDipendente&&ge.push("Dip"),{value:C.id,label:`${C.name} ${C.surname} (${ge.join(", ")})`}}),value:f.personId,onChange:ve,error:N.personId,required:!0})]}),f.personId&&I.length>0&&c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[c.jsx(Qt,{id:"tripRole",name:"tripRole",label:"In qualit di",options:I,value:f.tripRole,onChange:ve,error:N.tripRole,required:!0}),c.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Seleziona il ruolo in cui ",(Re=r.people.find(C=>C.id===f.personId))==null?void 0:Re.name," ha svolto questa trasferta"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Qt,{id:"vehicleId",name:"vehicleId",label:"Veicolo",options:E,value:f.vehicleId,onChange:ve,error:N.vehicleId,required:!0,disabled:!f.personId}),f.personId&&!Be&&c.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(vi,{className:"h-5 w-5 text-amber-500 mr-2 mt-0.5 flex-shrink-0"}),c.jsx("div",{children:c.jsxs("p",{className:"text-sm text-amber-800",children:["Nessun veicolo registrato per questa persona."," ",c.jsx("a",{href:"/veicoli/nuovo",className:"font-medium underline hover:text-amber-900",target:"_blank",rel:"noopener noreferrer",children:"Aggiungi un veicolo"})," ","prima di continuare."]})})]})}),f.vehicleId&&c.jsx("div",{className:"bg-teal-50 border border-teal-200 rounded-md p-3",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(vi,{className:"h-4 w-4 text-teal-500 mr-2"}),c.jsxs("span",{className:"text-sm text-teal-700",children:["Veicolo selezionato automaticamente per"," ",(He=r.people.find(C=>C.id===f.personId))==null?void 0:He.name," ",(oe=r.people.find(C=>C.id===f.personId))==null?void 0:oe.surname]})]})})]}),c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-4",children:[c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx(q5,{className:"h-5 w-5 text-blue-500 mr-2"}),c.jsx("span",{className:"font-medium text-blue-800",children:"Sede di Partenza"})]}),!f.useCustomOrigin&&c.jsx("div",{className:"mb-3 space-y-2",children:za.map(C=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"selectedOfficeId",value:C.id,checked:f.selectedOfficeId===C.id,onChange:ve,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),c.jsxs("span",{className:"text-sm text-blue-800",children:[c.jsx("span",{className:"font-medium",children:C.name}),c.jsxs("span",{className:"text-blue-600 ml-1",children:[" ",C.address]})]})]},C.id))}),c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx("input",{id:"useCustomOrigin",name:"useCustomOrigin",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:f.useCustomOrigin,onChange:ve}),c.jsx("label",{htmlFor:"useCustomOrigin",className:"ml-2 block text-sm text-blue-700",children:"Usa un indirizzo di partenza personalizzato"})]}),f.useCustomOrigin&&c.jsx(pt,{id:"origin",name:"origin",value:f.origin,onChange:ve,error:N.origin,placeholder:"Inserisci l'indirizzo di partenza",required:!0})]}),c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-4",children:[c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx(Qh,{className:"h-5 w-5 text-blue-500 mr-2"}),c.jsx("span",{className:"font-medium text-blue-800",children:"Indirizzo di Destinazione"})]}),r.favoriteDestinations.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(Ah,{className:"h-4 w-4 text-amber-500 mr-1.5"}),c.jsx("span",{className:"text-xs font-medium text-blue-700 uppercase tracking-wide",children:"Destinazioni abituali"})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:r.favoriteDestinations.map(C=>{const ge=f.destination===C.address&&f.useCustomDestination;return c.jsxs("button",{type:"button",onClick:()=>{w(je=>({...je,destination:C.address,distance:String(C.defaultDistance),useCustomDestination:!0,savedRouteId:"",selectedDistanceId:""})),N.destination&&D(je=>({...je,destination:void 0}))},className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium border transition-all duration-150 ${ge?"bg-amber-500 border-amber-500 text-white shadow-sm":"bg-white border-amber-200 text-amber-800 hover:bg-amber-50 hover:border-amber-400"}`,title:C.address,children:[c.jsx("span",{children:C.name}),c.jsxs("span",{className:`ml-1.5 text-xs ${ge?"text-amber-100":"text-amber-500"}`,children:[C.defaultDistance," km"]})]},C.id)})})]}),c.jsxs("div",{className:"space-y-3",children:[r.savedRoutes.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(ac,{className:"h-4 w-4 text-blue-500 mr-1.5"}),c.jsx("span",{className:"text-xs font-medium text-blue-700 uppercase tracking-wide",children:"Percorsi salvati"})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:r.savedRoutes.map(C=>{const ge=f.savedRouteId===C.id&&!f.useCustomDestination;return c.jsx("button",{type:"button",onClick:()=>{w(je=>({...je,savedRouteId:C.id,destination:C.destination,useCustomDestination:!1,selectedDistanceId:""})),J(C.id),N.destination&&D(je=>({...je,destination:void 0}))},className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium border transition-all duration-150 ${ge?"bg-blue-500 border-blue-500 text-white shadow-sm":"bg-white border-blue-200 text-blue-800 hover:bg-blue-50 hover:border-blue-400"}`,children:c.jsx("span",{children:C.name})},C.id)})})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{id:"useCustomDestination",name:"useCustomDestination",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:f.useCustomDestination,onChange:ve}),c.jsx("label",{htmlFor:"useCustomDestination",className:"ml-2 block text-sm text-blue-700",children:"Inserisci manualmente l'indirizzo di destinazione"})]}),f.useCustomDestination&&c.jsx(pt,{id:"destination",name:"destination",value:f.destination,onChange:ve,error:N.destination,placeholder:"Inserisci l'indirizzo di destinazione",required:!0})]})]}),f.savedRouteId&&!f.useCustomDestination&&K.length>0&&c.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-100 mb-4",children:[c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx(ac,{className:"h-5 w-5 text-teal-500 mr-2"}),c.jsx("span",{className:"font-medium text-teal-800",children:"Opzioni di Percorso"})]}),c.jsx(Qt,{id:"selectedDistanceId",name:"selectedDistanceId",label:"Seleziona il tipo di percorso",options:K,value:f.selectedDistanceId,onChange:se,required:!0}),c.jsx("p",{className:"text-xs text-teal-600 mt-1",children:"Scegli l'opzione di percorso che intendi utilizzare (es. strada normale, autostrada)"})]}),(f.useCustomDestination||!f.selectedDistanceId&&f.savedRouteId)&&c.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 mb-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(vi,{className:"h-5 w-5 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Calcolo Distanza con Google Maps"}),c.jsx("p",{className:"text-sm text-green-700 mb-3",children:"Clicca il pulsante qui sotto per aprire Google Maps con il percorso tra gli indirizzi inseriti. Potrai vedere la distanza esatta e inserirla manualmente nel campo sottostante."}),c.jsx(st,{type:"button",variant:"success",size:"sm",icon:c.jsx(kh,{size:16}),onClick:We,disabled:!Me,children:"Apri Google Maps"}),!Me&&c.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Inserisci prima gli indirizzi di origine e destinazione"})]})]})}),c.jsx(pt,{id:"distance",name:"distance",label:"Distanza (km)",type:"number",step:"0.1",min:"0.1",value:f.distance,onChange:ve,error:N.distance,placeholder:f.selectedDistanceId?"Distanza selezionata automaticamente":"Inserisci la distanza da Google Maps",required:!0,disabled:!!f.selectedDistanceId}),c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("input",{id:"isRoundTrip",name:"isRoundTrip",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:f.isRoundTrip,onChange:ve}),c.jsx("label",{htmlFor:"isRoundTrip",className:"ml-2 block text-sm text-gray-900",children:"Viaggio di andata e ritorno (A/R)"})]}),c.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-100 mb-4",children:[c.jsx("div",{className:"mb-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{id:"hasToll",name:"hasToll",type:"checkbox",className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded",checked:f.hasToll,onChange:ve}),c.jsx("label",{htmlFor:"hasToll",className:"text-sm font-medium text-amber-900",children:"Questa trasferta include pedaggi autostradali"})]})}),f.hasToll&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"p-3 bg-amber-100 rounded-md border border-amber-200",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(vi,{className:"h-4 w-4 text-amber-600 mr-2 mt-0.5 flex-shrink-0"}),c.jsx("div",{className:"flex-grow",children:c.jsxs("p",{className:"text-xs text-amber-800",children:["I dati del pedaggio possono essere modificati per questo viaggio specifico."," ",c.jsxs("a",{href:"https://www.infoviaggiando.it/pedaggi",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-amber-900 inline-flex items-center",children:["Consulta qui gli importi aggiornati",c.jsx(kh,{size:12,className:"ml-1"})]})]})})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx(Id,{id:"tollEntryStation",name:"tollEntryStation",label:"Casello di Entrata",value:f.tollEntryStation,onChange:ve,getSuggestions:Ze,placeholder:"es. Treviso"}),c.jsx(Id,{id:"tollExitStation",name:"tollExitStation",label:"Casello di Uscita",value:f.tollExitStation,onChange:ve,getSuggestions:Ze,placeholder:"es. Vicenza"}),c.jsxs("div",{children:[c.jsx(pt,{id:"tollAmount",name:"tollAmount",label:"Importo Pedaggio ()",type:"number",step:"0.10",min:"0",value:f.tollAmount,onChange:ve,placeholder:"es. 3.50"}),W&&c.jsxs("div",{className:"mt-1 flex items-center text-xs text-green-600",children:[c.jsx(vi,{className:"h-3 w-3 mr-1"}),c.jsxs("span",{children:["Importo salvato: ",W.amount.toFixed(2),"  (usato ",W.usageCount," ",W.usageCount===1?"volta":"volte",")"]})]}),!W&&f.tollEntryStation&&f.tollExitStation&&c.jsxs("div",{className:"mt-1 flex items-center text-xs text-blue-600",children:[c.jsx(vi,{className:"h-3 w-3 mr-1"}),c.jsx("span",{children:"Nuova combinazione caselli"})]})]})]})]})]}),f.hasToll&&f.isRoundTrip&&c.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-100 mb-4",children:[c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{id:"hasReturnToll",name:"hasReturnToll",type:"checkbox",className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded",checked:f.hasReturnToll,onChange:ve}),c.jsx("label",{htmlFor:"hasReturnToll",className:"text-sm font-medium text-amber-900",children:"Il ritorno ha caselli diversi dall'andata"})]}),c.jsx("p",{className:"text-xs text-amber-700 mt-1 ml-6",children:"Se non spuntato, il pedaggio del ritorno sar uguale all'andata"})]}),f.hasReturnToll&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:"text-xs font-medium text-amber-800",children:"Caselli del ritorno"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx(Id,{id:"returnTollEntryStation",name:"returnTollEntryStation",label:"Casello Entrata Ritorno",value:f.returnTollEntryStation,onChange:ve,getSuggestions:Ze,placeholder:"es. Vicenza"}),c.jsx(Id,{id:"returnTollExitStation",name:"returnTollExitStation",label:"Casello Uscita Ritorno",value:f.returnTollExitStation,onChange:ve,getSuggestions:Ze,placeholder:"es. Treviso"}),c.jsxs("div",{children:[c.jsx(pt,{id:"returnTollAmount",name:"returnTollAmount",label:"Importo Pedaggio Ritorno ()",type:"number",step:"0.10",min:"0",value:f.returnTollAmount,onChange:ve,placeholder:"es. 3.50"}),G&&c.jsxs("div",{className:"mt-1 flex items-center text-xs text-green-600",children:[c.jsx(vi,{className:"h-3 w-3 mr-1"}),c.jsxs("span",{children:["Importo salvato: ",G.amount.toFixed(2),"  (usato ",G.usageCount," ",G.usageCount===1?"volta":"volte",")"]})]}),!G&&f.returnTollEntryStation&&f.returnTollExitStation&&c.jsxs("div",{className:"mt-1 flex items-center text-xs text-blue-600",children:[c.jsx(vi,{className:"h-3 w-3 mr-1"}),c.jsx("span",{children:"Nuova combinazione caselli"})]})]})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(sc,{className:"h-5 w-5 text-gray-600"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Spese di Trasporto"}),c.jsx("span",{className:"text-xs text-gray-500",children:"(treno, aereo, taxi, bus, parcheggio, altro)"})]}),c.jsx(st,{type:"button",variant:"secondary",size:"sm",icon:c.jsx(Fr,{size:14}),onClick:be,children:"Aggiungi spesa"})]}),f.travelExpenses.length===0&&c.jsx("p",{className:"text-sm text-gray-500 italic",children:'Nessuna spesa aggiunta. Clicca "Aggiungi spesa" per inserire treno, aereo, taxi, parcheggio, ecc.'}),f.travelExpenses.length>0&&c.jsx("div",{className:"space-y-3",children:f.travelExpenses.map((C,ge)=>c.jsxs("div",{className:"bg-white rounded-md p-3 border border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex-1 mr-3",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Tipo di spesa"}),c.jsx("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm",value:C.expenseType,onChange:je=>Ae(ge,"expenseType",je.target.value),children:Object.keys(ds).map(je=>c.jsx("option",{value:je,children:ds[je]},je))})]}),c.jsxs("div",{className:"w-28",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Importo ()"}),c.jsx("input",{type:"number",step:"0.01",min:"0",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm",value:C.amount,onChange:je=>Ae(ge,"amount",je.target.value),placeholder:"0.00"})]}),c.jsx("button",{type:"button",className:"ml-2 mt-5 p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",onClick:()=>_e(ge),children:c.jsx(Vi,{size:16})})]}),ke(C.expenseType)&&c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Da"}),c.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm",value:C.fromLocation,onChange:je=>Ae(ge,"fromLocation",je.target.value),placeholder:"es. Treviso"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"A"}),c.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm",value:C.toLocation,onChange:je=>Ae(ge,"toLocation",je.target.value),placeholder:"es. Milano"})]})]}),(C.expenseType==="taxi"||C.expenseType==="parcheggio"||C.expenseType==="altro")&&c.jsxs("div",{className:"mt-1",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Descrizione"}),c.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm",value:C.description,onChange:je=>Ae(ge,"description",je.target.value),placeholder:C.expenseType==="altro"?"Specificare...":"Dettagli opzionali"})]})]},ge))})]}),c.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Y5,{className:"h-5 w-5 text-green-600"}),c.jsx("span",{className:"text-sm font-medium text-green-900",children:"Rimborso Pasti"})]}),c.jsx(st,{type:"button",variant:"secondary",size:"sm",icon:c.jsx(Fr,{size:14}),onClick:H,disabled:f.meals.length>=2,children:"Aggiungi pasto"})]}),f.meals.length===0&&c.jsx("p",{className:"text-sm text-green-700 italic",children:'Nessun pasto aggiunto. Clicca "Aggiungi pasto" per inserire pranzo o cena.'}),f.meals.length>0&&c.jsx("div",{className:"space-y-3",children:f.meals.map((C,ge)=>{var Ce;const je=(Ce=f.meals.find((xe,Xe)=>Xe!==ge))==null?void 0:Ce.mealType,Ee=[{value:"pranzo",label:"Pranzo"},{value:"cena",label:"Cena"}].filter(xe=>xe.value===C.mealType||xe.value!==je);return c.jsxs("div",{className:"flex items-end gap-3 bg-white rounded-md p-3 border border-green-200",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Tipo di pasto"}),c.jsx("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm",value:C.mealType,onChange:xe=>ie(ge,"mealType",xe.target.value),children:Ee.map(xe=>c.jsx("option",{value:xe.value,children:xe.label},xe.value))})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Importo ()"}),c.jsx("input",{type:"number",step:"0.01",min:"0",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm",value:C.amount,onChange:xe=>ie(ge,"amount",xe.target.value),placeholder:"es. 15.00"})]}),c.jsx("button",{type:"button",className:"mb-0.5 p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",onClick:()=>Q(ge),children:c.jsx(Vi,{size:16})})]},ge)})})]}),ee!==null&&c.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(c_,{className:"h-5 w-5 text-primary-500 mr-3 mt-1"}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("h3",{className:"text-sm font-medium text-primary-800 mb-2",children:"Riepilogo Spese di Trasferta"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-primary-700",children:"Rimborso Chilometrico:"}),c.jsxs("span",{className:"text-lg font-semibold text-primary-900",children:[ee.toFixed(2)," "]})]}),c.jsxs("p",{className:"text-xs text-primary-600",children:["(",f.isRoundTrip?parseFloat(f.distance)*2:f.distance," km totali)"]}),A!==null&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"border-t border-primary-200 pt-2 flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-primary-700",children:"Pedaggi Autostradali:"}),c.jsxs("span",{className:"text-lg font-semibold text-primary-900",children:[A.toFixed(2)," "]})]}),f.tollEntryStation&&f.tollExitStation&&c.jsxs("p",{className:"text-xs text-primary-600",children:[f.tollEntryStation,"  ",f.tollExitStation,f.isRoundTrip&&" (A/R)"]})]}),f.meals.filter(C=>C.amount&&parseFloat(C.amount)>0).map((C,ge)=>c.jsx("div",{children:c.jsxs("div",{className:"border-t border-primary-200 pt-2 flex justify-between items-center",children:[c.jsxs("span",{className:"text-sm text-primary-700",children:["Rimborso ",C.mealType==="pranzo"?"Pranzo":"Cena",":"]}),c.jsxs("span",{className:"text-lg font-semibold text-primary-900",children:[parseFloat(C.amount).toFixed(2)," "]})]})},ge)),f.travelExpenses.filter(C=>C.amount&&parseFloat(C.amount)>0).map((C,ge)=>c.jsx("div",{children:c.jsxs("div",{className:"border-t border-primary-200 pt-2 flex justify-between items-center",children:[c.jsxs("span",{className:"text-sm text-primary-700",children:[ds[C.expenseType],":"]}),c.jsxs("span",{className:"text-lg font-semibold text-primary-900",children:[parseFloat(C.amount).toFixed(2)," "]})]})},ge)),c.jsxs("div",{className:"border-t-2 border-primary-300 pt-2 mt-2 flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-medium text-primary-800",children:"Totale Generale:"}),c.jsxs("span",{className:"text-xl font-bold text-primary-900",children:[(ee+(A||0)+f.meals.reduce((C,ge)=>C+(ge.amount&&parseFloat(ge.amount)>0?parseFloat(ge.amount):0),0)+f.travelExpenses.reduce((C,ge)=>C+(ge.amount&&parseFloat(ge.amount)>0?parseFloat(ge.amount):0),0)).toFixed(2)," "]})]})]})]})]})}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"purpose",className:"block text-sm font-medium text-gray-700 mb-1",children:"Scopo della trasferta"}),c.jsx("textarea",{id:"purpose",name:"purpose",rows:3,className:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md",value:f.purpose,onChange:ve,placeholder:"Descrivi lo scopo della trasferta",required:!0}),N.purpose&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.purpose})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(st,{type:"submit",variant:"primary",icon:c.jsx(jh,{size:18}),disabled:!Be&&f.personId,children:S?"Salva Modifiche":"Registra Trasferta"})})]})})]})},Yk="modulepreload",Kk=function(t){return"/"+t},Gv={},Qm=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Kk(l),l in Gv)return;Gv[l]=!0;const d=l.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${g}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Yk,d||(m.as="script"),m.crossOrigin="",m.href=l,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((v,p)=>{m.addEventListener("load",v),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Tt(t){"@babel/helpers - typeof";return Tt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(t)}var er=Uint8Array,Or=Uint16Array,yg=Int32Array,sf=new er([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),af=new er([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xm=new er([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_w=function(t,e){for(var n=new Or(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new yg(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},Sw=_w(sf,2),Nw=Sw.b,Zm=Sw.r;Nw[28]=258,Zm[258]=28;var kw=_w(af,0),Jk=kw.b,Yv=kw.r,e0=new Or(32768);for(var qt=0;qt<32768;++qt){var Ds=(qt&43690)>>1|(qt&21845)<<1;Ds=(Ds&52428)>>2|(Ds&13107)<<2,Ds=(Ds&61680)>>4|(Ds&3855)<<4,e0[qt]=((Ds&65280)>>8|(Ds&255)<<8)>>1}var Hi=function(t,e,n){for(var r=t.length,i=0,s=new Or(e);i<r;++i)t[i]&&++s[t[i]-1];var a=new Or(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(n){o=new Or(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var d=i<<4|t[i],g=e-t[i],m=a[t[i]-1]++<<g,v=m|(1<<g)-1;m<=v;++m)o[e0[m]>>l]=d}else for(o=new Or(r),i=0;i<r;++i)t[i]&&(o[i]=e0[a[t[i]-1]++]>>15-t[i]);return o},la=new er(288);for(var qt=0;qt<144;++qt)la[qt]=8;for(var qt=144;qt<256;++qt)la[qt]=9;for(var qt=256;qt<280;++qt)la[qt]=7;for(var qt=280;qt<288;++qt)la[qt]=8;var pc=new er(32);for(var qt=0;qt<32;++qt)pc[qt]=5;var Qk=Hi(la,9,0),Xk=Hi(la,9,1),Zk=Hi(pc,5,0),ej=Hi(pc,5,1),Rp=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},fi=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Op=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},wg=function(t){return(t+7)/8|0},jw=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new er(t.subarray(e,n))},tj=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],wi=function(t,e,n){var r=new Error(e||tj[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,wi),!n)throw r;return r},nj=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new er(0);var a=!n,o=a||e.i!=2,l=e.i;a&&(n=new er(i*3));var d=function(_e){var Ae=n.length;if(_e>Ae){var ke=new er(Math.max(Ae*2,_e));ke.set(n),n=ke}},g=e.f||0,m=e.p||0,v=e.b||0,p=e.l,S=e.d,_=e.m,j=e.n,x=i*8;do{if(!p){g=fi(t,m,1);var f=fi(t,m+1,3);if(m+=3,f)if(f==1)p=Xk,S=ej,_=9,j=5;else if(f==2){var E=fi(t,m,31)+257,L=fi(t,m+10,15)+4,I=E+fi(t,m+5,31)+1;m+=14;for(var Y=new er(I),ee=new er(19),R=0;R<L;++R)ee[Xm[R]]=fi(t,m+R*3,7);m+=L*3;for(var A=Rp(ee),V=(1<<A)-1,K=Hi(ee,A,1),R=0;R<I;){var re=K[fi(t,m,V)];m+=re&15;var w=re>>4;if(w<16)Y[R++]=w;else{var W=0,X=0;for(w==16?(X=3+fi(t,m,3),m+=2,W=Y[R-1]):w==17?(X=3+fi(t,m,7),m+=3):w==18&&(X=11+fi(t,m,127),m+=7);X--;)Y[R++]=W}}var G=Y.subarray(0,E),U=Y.subarray(E);_=Rp(G),j=Rp(U),p=Hi(G,_,1),S=Hi(U,j,1)}else wi(1);else{var w=wg(m)+4,N=t[w-4]|t[w-3]<<8,D=w+N;if(D>i){l&&wi(0);break}o&&d(v+N),n.set(t.subarray(w,D),v),e.b=v+=N,e.p=m=D*8,e.f=g;continue}if(m>x){l&&wi(0);break}}o&&d(v+131072);for(var ae=(1<<_)-1,pe=(1<<j)-1,T=m;;T=m){var W=p[Op(t,m)&ae],$=W>>4;if(m+=W&15,m>x){l&&wi(0);break}if(W||wi(2),$<256)n[v++]=$;else if($==256){T=m,p=null;break}else{var J=$-254;if($>264){var R=$-257,ne=sf[R];J=fi(t,m,(1<<ne)-1)+Nw[R],m+=ne}var P=S[Op(t,m)&pe],H=P>>4;P||wi(3),m+=P&15;var U=Jk[H];if(H>3){var ne=af[H];U+=Op(t,m)&(1<<ne)-1,m+=ne}if(m>x){l&&wi(0);break}o&&d(v+131072);var Q=v+J;if(v<U){var ie=s-U,be=Math.min(U,Q);for(ie+v<0&&wi(3);v<be;++v)n[v]=r[ie+v]}for(;v<Q;++v)n[v]=n[v-U]}}e.l=p,e.p=T,e.b=v,e.f=g,p&&(g=1,e.m=_,e.d=S,e.n=j)}while(!g);return v!=n.length&&a?jw(n,0,v):n.subarray(0,v)},ss=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},gu=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Dp=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:Pw,l:0};if(i==1){var a=new er(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(D,E){return D.f-E.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],d=0,g=1,m=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};g!=i-1;)o=n[n[d].f<n[m].f?d++:m++],l=n[d!=g&&n[d].f<n[m].f?d++:m++],n[g++]={s:-1,f:o.f+l.f,l:o,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var p=new Or(v+1),S=t0(n[g-1],p,0);if(S>e){var r=0,_=0,j=S-e,x=1<<j;for(s.sort(function(E,L){return p[L.s]-p[E.s]||E.f-L.f});r<i;++r){var f=s[r].s;if(p[f]>e)_+=x-(1<<S-p[f]),p[f]=e;else break}for(_>>=j;_>0;){var w=s[r].s;p[w]<e?_-=1<<e-p[w]++-1:++r}for(;r>=0&&_;--r){var N=s[r].s;p[N]==e&&(--p[N],++_)}S=e}return{t:new er(p),l:S}},t0=function(t,e,n){return t.s==-1?Math.max(t0(t.l,e,n+1),t0(t.r,e,n+1)):e[t.s]=n},Kv=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Or(++e),r=0,i=t[0],s=1,a=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:n.subarray(0,r),n:e}},vu=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Aw=function(t,e,n){var r=n.length,i=wg(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},Jv=function(t,e,n,r,i,s,a,o,l,d,g){ss(e,g++,n),++i[256];for(var m=Dp(i,15),v=m.t,p=m.l,S=Dp(s,15),_=S.t,j=S.l,x=Kv(v),f=x.c,w=x.n,N=Kv(_),D=N.c,E=N.n,L=new Or(19),I=0;I<f.length;++I)++L[f[I]&31];for(var I=0;I<D.length;++I)++L[D[I]&31];for(var Y=Dp(L,7),ee=Y.t,R=Y.l,A=19;A>4&&!ee[Xm[A-1]];--A);var V=d+5<<3,K=vu(i,la)+vu(s,pc)+a,re=vu(i,v)+vu(s,_)+a+14+3*A+vu(L,ee)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&V<=K&&V<=re)return Aw(e,g,t.subarray(l,l+d));var W,X,G,U;if(ss(e,g,1+(re<K)),g+=2,re<K){W=Hi(v,p,0),X=v,G=Hi(_,j,0),U=_;var ae=Hi(ee,R,0);ss(e,g,w-257),ss(e,g+5,E-1),ss(e,g+10,A-4),g+=14;for(var I=0;I<A;++I)ss(e,g+3*I,ee[Xm[I]]);g+=3*A;for(var pe=[f,D],T=0;T<2;++T)for(var $=pe[T],I=0;I<$.length;++I){var J=$[I]&31;ss(e,g,ae[J]),g+=ee[J],J>15&&(ss(e,g,$[I]>>5&127),g+=$[I]>>12)}}else W=Qk,X=la,G=Zk,U=pc;for(var I=0;I<o;++I){var ne=r[I];if(ne>255){var J=ne>>18&31;gu(e,g,W[J+257]),g+=X[J+257],J>7&&(ss(e,g,ne>>23&31),g+=sf[J]);var P=ne&31;gu(e,g,G[P]),g+=U[P],P>3&&(gu(e,g,ne>>5&8191),g+=af[P])}else gu(e,g,W[ne]),g+=X[ne]}return gu(e,g,W[256]),g+X[256]},rj=new yg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Pw=new er(0),ij=function(t,e,n,r,i,s){var a=s.z||t.length,o=new er(r+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(r,o.length-i),d=s.l,g=(s.r||0)&7;if(e){g&&(l[0]=s.r>>3);for(var m=rj[e-1],v=m>>13,p=m&8191,S=(1<<n)-1,_=s.p||new Or(32768),j=s.h||new Or(S+1),x=Math.ceil(n/3),f=2*x,w=function(Ke){return(t[Ke]^t[Ke+1]<<x^t[Ke+2]<<f)&S},N=new yg(25e3),D=new Or(288),E=new Or(32),L=0,I=0,Y=s.i||0,ee=0,R=s.w||0,A=0;Y+2<a;++Y){var V=w(Y),K=Y&32767,re=j[V];if(_[K]=re,j[V]=K,R<=Y){var W=a-Y;if((L>7e3||ee>24576)&&(W>423||!d)){g=Jv(t,l,0,N,D,E,I,ee,A,Y-A,g),ee=L=I=0,A=Y;for(var X=0;X<286;++X)D[X]=0;for(var X=0;X<30;++X)E[X]=0}var G=2,U=0,ae=p,pe=K-re&32767;if(W>2&&V==w(Y-pe))for(var T=Math.min(v,W)-1,$=Math.min(32767,Y),J=Math.min(258,W);pe<=$&&--ae&&K!=re;){if(t[Y+G]==t[Y+G-pe]){for(var ne=0;ne<J&&t[Y+ne]==t[Y+ne-pe];++ne);if(ne>G){if(G=ne,U=pe,ne>T)break;for(var P=Math.min(pe,ne-2),H=0,X=0;X<P;++X){var Q=Y-pe+X&32767,ie=_[Q],be=Q-ie&32767;be>H&&(H=be,re=Q)}}}K=re,re=_[K],pe+=K-re&32767}if(U){N[ee++]=268435456|Zm[G]<<18|Yv[U];var _e=Zm[G]&31,Ae=Yv[U]&31;I+=sf[_e]+af[Ae],++D[257+_e],++E[Ae],R=Y+G,++L}else N[ee++]=t[Y],++D[t[Y]]}}for(Y=Math.max(Y,R);Y<a;++Y)N[ee++]=t[Y],++D[t[Y]];g=Jv(t,l,d,N,D,E,I,ee,A,Y-A,g),d||(s.r=g&7|l[g/8|0]<<3,g-=7,s.h=j,s.p=_,s.i=Y,s.w=R)}else{for(var Y=s.w||0;Y<a+d;Y+=65535){var ke=Y+65535;ke>=a&&(l[g/8|0]=d,ke=a),g=Aw(l,g+1,t.subarray(Y,ke))}s.i=a}return jw(o,0,r+wg(g)+i)},Ew=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},sj=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new er(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return ij(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},Cw=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},aj=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=Ew();i.p(e.dictionary),Cw(t,2,i.d())}},oj=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&wi(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&wi(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function n0(t,e){e||(e={});var n=Ew();n.p(t);var r=sj(t,e,e.dictionary?6:2,4);return aj(r,e),Cw(r,r.length-4,n.d()),r}function lj(t,e){return nj(t.subarray(oj(t,e),-4),{i:2},e,e)}var uj=typeof TextDecoder<"u"&&new TextDecoder,cj=0;try{uj.decode(Pw,{stream:!0}),cj=1}catch{}var ut=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Fp(){ut.console&&typeof ut.console.log=="function"&&ut.console.log.apply(ut.console,arguments)}var Dt={log:Fp,warn:function(t){ut.console&&(typeof ut.console.warn=="function"?ut.console.warn.apply(ut.console,arguments):Fp.call(null,arguments))},error:function(t){ut.console&&(typeof ut.console.error=="function"?ut.console.error.apply(ut.console,arguments):Fp(t))}};function Mp(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){La(r.response,e,n)},r.onerror=function(){Dt.error("could not download file")},r.send()}function Qv(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Od(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ru,r0,La=ut.saveAs||((typeof window>"u"?"undefined":Tt(window))!=="object"||window!==ut?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=ut.URL||ut.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Qv(i.href)?Mp(t,e,n):Od(i,i.target="_blank"):Od(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Od(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Qv(t))Mp(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Od(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Tt(s)!=="object"&&(Dt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Mp(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(ut.HTMLElement)||ut.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Tt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var g=o.result;g=a?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},o.readAsDataURL(t)}else{var l=ut.URL||ut.webkitURL,d=l.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout(function(){l.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Tw(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),"#"+o+l+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function zp(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Kn(n,r,i,s,e[0],7,-680876936),s=Kn(s,n,r,i,e[1],12,-389564586),i=Kn(i,s,n,r,e[2],17,606105819),r=Kn(r,i,s,n,e[3],22,-1044525330),n=Kn(n,r,i,s,e[4],7,-176418897),s=Kn(s,n,r,i,e[5],12,1200080426),i=Kn(i,s,n,r,e[6],17,-1473231341),r=Kn(r,i,s,n,e[7],22,-45705983),n=Kn(n,r,i,s,e[8],7,1770035416),s=Kn(s,n,r,i,e[9],12,-1958414417),i=Kn(i,s,n,r,e[10],17,-42063),r=Kn(r,i,s,n,e[11],22,-1990404162),n=Kn(n,r,i,s,e[12],7,1804603682),s=Kn(s,n,r,i,e[13],12,-40341101),i=Kn(i,s,n,r,e[14],17,-1502002290),n=Jn(n,r=Kn(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Jn(s,n,r,i,e[6],9,-1069501632),i=Jn(i,s,n,r,e[11],14,643717713),r=Jn(r,i,s,n,e[0],20,-373897302),n=Jn(n,r,i,s,e[5],5,-701558691),s=Jn(s,n,r,i,e[10],9,38016083),i=Jn(i,s,n,r,e[15],14,-660478335),r=Jn(r,i,s,n,e[4],20,-405537848),n=Jn(n,r,i,s,e[9],5,568446438),s=Jn(s,n,r,i,e[14],9,-1019803690),i=Jn(i,s,n,r,e[3],14,-187363961),r=Jn(r,i,s,n,e[8],20,1163531501),n=Jn(n,r,i,s,e[13],5,-1444681467),s=Jn(s,n,r,i,e[2],9,-51403784),i=Jn(i,s,n,r,e[7],14,1735328473),n=Qn(n,r=Jn(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Qn(s,n,r,i,e[8],11,-2022574463),i=Qn(i,s,n,r,e[11],16,1839030562),r=Qn(r,i,s,n,e[14],23,-35309556),n=Qn(n,r,i,s,e[1],4,-1530992060),s=Qn(s,n,r,i,e[4],11,1272893353),i=Qn(i,s,n,r,e[7],16,-155497632),r=Qn(r,i,s,n,e[10],23,-1094730640),n=Qn(n,r,i,s,e[13],4,681279174),s=Qn(s,n,r,i,e[0],11,-358537222),i=Qn(i,s,n,r,e[3],16,-722521979),r=Qn(r,i,s,n,e[6],23,76029189),n=Qn(n,r,i,s,e[9],4,-640364487),s=Qn(s,n,r,i,e[12],11,-421815835),i=Qn(i,s,n,r,e[15],16,530742520),n=Xn(n,r=Qn(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Xn(s,n,r,i,e[7],10,1126891415),i=Xn(i,s,n,r,e[14],15,-1416354905),r=Xn(r,i,s,n,e[5],21,-57434055),n=Xn(n,r,i,s,e[12],6,1700485571),s=Xn(s,n,r,i,e[3],10,-1894986606),i=Xn(i,s,n,r,e[10],15,-1051523),r=Xn(r,i,s,n,e[1],21,-2054922799),n=Xn(n,r,i,s,e[8],6,1873313359),s=Xn(s,n,r,i,e[15],10,-30611744),i=Xn(i,s,n,r,e[6],15,-1560198380),r=Xn(r,i,s,n,e[13],21,1309151649),n=Xn(n,r,i,s,e[4],6,-145523070),s=Xn(s,n,r,i,e[11],10,-1120210379),i=Xn(i,s,n,r,e[2],15,718787259),r=Xn(r,i,s,n,e[9],21,-343485551),t[0]=Ks(n,t[0]),t[1]=Ks(r,t[1]),t[2]=Ks(i,t[2]),t[3]=Ks(s,t[3])}function of(t,e,n,r,i,s){return e=Ks(Ks(e,t),Ks(r,s)),Ks(e<<i|e>>>32-i,n)}function Kn(t,e,n,r,i,s,a){return of(e&n|~e&r,t,e,i,s,a)}function Jn(t,e,n,r,i,s,a){return of(e&r|n&~r,t,e,i,s,a)}function Qn(t,e,n,r,i,s,a){return of(e^n^r,t,e,i,s,a)}function Xn(t,e,n,r,i,s,a){return of(n^(e|~r),t,e,i,s,a)}function Lw(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)zp(r,dj(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(zp(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,zp(r,i),r}function dj(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Ru=ut.atob.bind(ut),r0=ut.btoa.bind(ut);var Xv="0123456789abcdef".split("");function hj(t){for(var e="",n=0;n<4;n++)e+=Xv[t>>8*n+4&15]+Xv[t>>8*n&15];return e}function fj(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function i0(t){return Lw(t).map(fj).join("")}var pj=function(t){for(var e=0;e<t.length;e++)t[e]=hj(t[e]);return t.join("")}(Lw("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ks(t,e){if(pj){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function s0(t,e){var n,r,i,s;if(t!==n){for(var a=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var d=0;for(l=0;l<256;l++){var g=o[l];d=(d+g+a.charCodeAt(l))%256,o[l]=o[d],o[d]=g}n=t,r=o}else o=r;var m=e.length,v=0,p=0,S="";for(l=0;l<m;l++)p=(p+(g=o[v=(v+1)%256]))%256,o[v]=o[p],o[p]=g,a=o[(o[v]+o[p])%256],S+=String.fromCharCode(e.charCodeAt(l)^a);return S}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Zv={print:4,modify:8,copy:16,"annot-forms":32};function Ko(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(Zv.perm!==void 0)throw new Error("Invalid permission: "+o);i+=Zv[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=i0(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=s0(this.encryptionKey,this.padding)}function Jo(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function e2(t){if(Tt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var a=e[n][s];try{a[0].apply(t,r)}catch(o){ut.console&&Dt.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function mc(t){if(!(this instanceof mc))return new mc(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Iw(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Hs(t,e,n,r,i){if(!(this instanceof Hs))return new Hs(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Iw.call(this,r,i)}function Ba(t,e,n,r,i){if(!(this instanceof Ba))return new Ba(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Iw.call(this,r,i)}function it(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,d="S",g=null;Tt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(g=t.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),d=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,v={},p={internal:{},__private__:{}};p.__private__.PubSub=e2;var S="1.3",_=p.__private__.getPdfVersion=function(){return S};p.__private__.setPdfVersion=function(y){S=y};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return j};var x=p.__private__.getPageFormat=function(y){return j[y]};i=i||"a4";var f={COMPAT:"compat",ADVANCED:"advanced"},w=f.COMPAT;function N(){this.saveGraphicsState(),se(new nt(xe,0,0,-xe,0,_s()*xe).toString()+" cm"),this.setFontSize(this.getFontSize()/xe),d="n",w=f.ADVANCED}function D(){this.restoreGraphicsState(),d="S",w=f.COMPAT}var E=p.__private__.combineFontStyleAndFontWeight=function(y,F){if(y=="bold"&&F=="normal"||y=="bold"&&F==400||y=="normal"&&F=="italic"||y=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(y=F==400||F==="normal"?y==="italic"?"italic":"normal":F!=700&&F!=="bold"||y!=="normal"?(F==700?"bold":F)+""+y:"bold"),y};p.advancedAPI=function(y){var F=w===f.COMPAT;return F&&N.call(this),typeof y!="function"||(y(this),F&&D.call(this)),this},p.compatAPI=function(y){var F=w===f.ADVANCED;return F&&D.call(this),typeof y!="function"||(y(this),F&&N.call(this)),this},p.isAdvancedAPI=function(){return w===f.ADVANCED};var L,I=function(y){if(w!==f.ADVANCED)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Y=p.roundToPrecision=p.__private__.roundToPrecision=function(y,F){var te=e||F;if(isNaN(y)||isNaN(te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(te).replace(/0+$/,"")};L=p.hpf=p.__private__.hpf=typeof l=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(y,l)}:l==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(y,16)};var ee=p.f2=p.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return Y(y,2)},R=p.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return Y(y,3)},A=p.scale=p.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return w===f.COMPAT?y*xe:w===f.ADVANCED?y:void 0},V=function(y){return w===f.COMPAT?_s()-y:w===f.ADVANCED?y:void 0},K=function(y){return A(V(y))};p.__private__.setPrecision=p.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(e=parseInt(y,10))};var re,W="00000000000000000000000000000000",X=p.__private__.getFileId=function(){return W},G=p.__private__.setFileId=function(y){return W=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Hn=new Ko(g.userPermissions,g.userPassword,g.ownerPassword,W)),W};p.setFileId=function(y){return G(y),this},p.getFileId=function(){return X()};var U=p.__private__.convertDateToPDFDate=function(y){var F=y.getTimezoneOffset(),te=F<0?"+":"-",le=Math.floor(Math.abs(F/60)),me=Math.abs(F%60),Ne=[te,J(le),"'",J(me),"'"].join("");return["D:",y.getFullYear(),J(y.getMonth()+1),J(y.getDate()),J(y.getHours()),J(y.getMinutes()),J(y.getSeconds()),Ne].join("")},ae=p.__private__.convertPDFDateToDate=function(y){var F=parseInt(y.substr(2,4),10),te=parseInt(y.substr(6,2),10)-1,le=parseInt(y.substr(8,2),10),me=parseInt(y.substr(10,2),10),Ne=parseInt(y.substr(12,2),10),Fe=parseInt(y.substr(14,2),10);return new Date(F,te,le,me,Ne,Fe,0)},pe=p.__private__.setCreationDate=function(y){var F;if(y===void 0&&(y=new Date),y instanceof Date)F=U(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=y}return re=F},T=p.__private__.getCreationDate=function(y){var F=re;return y==="jsDate"&&(F=ae(re)),F};p.setCreationDate=function(y){return pe(y),this},p.getCreationDate=function(y){return T(y)};var $,J=p.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},ne=p.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},P=0,H=[],Q=[],ie=0,be=[],_e=[],Ae=!1,ke=Q,Ke=function(){P=0,ie=0,Q=[],H=[],be=[],Ki=gn(),ii=gn()};p.__private__.setCustomOutputDestination=function(y){Ae=!0,ke=y};var ve=function(y){Ae||(ke=y)};p.__private__.resetCustomOutputDestination=function(){Ae=!1,ke=Q};var se=p.__private__.out=function(y){return y=y.toString(),ie+=y.length+1,ke.push(y),ke},Ze=p.__private__.write=function(y){return se(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},We=p.__private__.getArrayBuffer=function(y){for(var F=y.length,te=new ArrayBuffer(F),le=new Uint8Array(te);F--;)le[F]=y.charCodeAt(F);return te},Oe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Oe};var Me=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(y){return Me=w===f.ADVANCED?y/xe:y,this};var Be,Pe=p.__private__.getFontSize=p.getFontSize=function(){return w===f.COMPAT?Me:Me*xe},Re=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(y){return Re=y,this},p.__private__.getR2L=p.getR2L=function(){return Re};var He,oe=p.__private__.setZoomMode=function(y){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))Be=y;else if(isNaN(y)){if(F.indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');Be=y}else Be=parseInt(y,10)};p.__private__.getZoomMode=function(){return Be};var C,ge=p.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');He=y};p.__private__.getPageMode=function(){return He};var je=p.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');C=y};p.__private__.getLayoutMode=function(){return C},p.__private__.setDisplayMode=p.setDisplayMode=function(y,F,te){return oe(y),je(F),ge(te),this};var Ee={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(y){if(Object.keys(Ee).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ee[y]},p.__private__.getDocumentProperties=function(){return Ee},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(y){for(var F in Ee)Ee.hasOwnProperty(F)&&y[F]&&(Ee[F]=y[F]);return this},p.__private__.setDocumentProperty=function(y,F){if(Object.keys(Ee).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ee[y]=F};var Ce,xe,Xe,mt,Gt,kt={},Rt={},Sr=[],Ue={},Ei={},Ut={},Nr={},an=null,wt=0,Ge=[],ct=new e2(p),At=t.hotfixes||[],Ht={},nr={},rr=[],nt=function y(F,te,le,me,Ne,Fe){if(!(this instanceof y))return new y(F,te,le,me,Ne,Fe);isNaN(F)&&(F=1),isNaN(te)&&(te=0),isNaN(le)&&(le=0),isNaN(me)&&(me=1),isNaN(Ne)&&(Ne=0),isNaN(Fe)&&(Fe=0),this._matrix=[F,te,le,me,Ne,Fe]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(y)},nt.prototype.multiply=function(y){var F=y.sx*this.sx+y.shy*this.shx,te=y.sx*this.shy+y.shy*this.sy,le=y.shx*this.sx+y.sy*this.shx,me=y.shx*this.shy+y.sy*this.sy,Ne=y.tx*this.sx+y.ty*this.shx+this.tx,Fe=y.tx*this.shy+y.ty*this.sy+this.ty;return new nt(F,te,le,me,Ne,Fe)},nt.prototype.decompose=function(){var y=this.sx,F=this.shy,te=this.shx,le=this.sy,me=this.tx,Ne=this.ty,Fe=Math.sqrt(y*y+F*F),Ve=(y/=Fe)*te+(F/=Fe)*le;te-=y*Ve,le-=F*Ve;var tt=Math.sqrt(te*te+le*le);return Ve/=tt,y*(le/=tt)<F*(te/=tt)&&(y=-y,F=-F,Ve=-Ve,Fe=-Fe),{scale:new nt(Fe,0,0,tt,0,0),translate:new nt(1,0,0,1,me,Ne),rotate:new nt(y,F,-F,y,0,0),skew:new nt(1,0,Ve,1,0,0)}},nt.prototype.toString=function(y){return this.join(" ")},nt.prototype.inversed=function(){var y=this.sx,F=this.shy,te=this.shx,le=this.sy,me=this.tx,Ne=this.ty,Fe=1/(y*le-F*te),Ve=le*Fe,tt=-F*Fe,gt=-te*Fe,ht=y*Fe;return new nt(Ve,tt,gt,ht,-Ve*me-gt*Ne,-tt*me-ht*Ne)},nt.prototype.applyToPoint=function(y){var F=y.x*this.sx+y.y*this.shx+this.tx,te=y.x*this.shy+y.y*this.sy+this.ty;return new yo(F,te)},nt.prototype.applyToRectangle=function(y){var F=this.applyToPoint(y),te=this.applyToPoint(new yo(y.x+y.w,y.y+y.h));return new Ul(F.x,F.y,te.x-F.x,te.y-F.y)},nt.prototype.clone=function(){var y=this.sx,F=this.shy,te=this.shx,le=this.sy,me=this.tx,Ne=this.ty;return new nt(y,F,te,le,me,Ne)},p.Matrix=nt;var qn=p.matrixMult=function(y,F){return F.multiply(y)},Ur=new nt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ur;var Wn=function(y,F){if(!Ei[y]){var te=(F instanceof Hs?"Sh":"P")+(Object.keys(Ue).length+1).toString(10);F.id=te,Ei[y]=te,Ue[te]=F,ct.publish("addPattern",F)}};p.ShadingPattern=Hs,p.TilingPattern=Ba,p.addShadingPattern=function(y,F){return I("addShadingPattern()"),Wn(y,F),this},p.beginTilingPattern=function(y){I("beginTilingPattern()"),Bc(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},p.endTilingPattern=function(y,F){I("endTilingPattern()"),F.stream=_e[$].join(`
`),Wn(y,F),ct.publish("endTilingPattern",F),rr.pop().restore()};var Sn=p.__private__.newObject=function(){var y=gn();return kr(y,!0),y},gn=p.__private__.newObjectDeferred=function(){return P++,H[P]=function(){return ie},P},kr=function(y,F){return F=typeof F=="boolean"&&F,H[y]=ie,F&&se(y+" 0 obj"),y},io=p.__private__.newAdditionalObject=function(){var y={objId:gn(),content:""};return be.push(y),y},Ki=gn(),ii=gn(),si=p.__private__.decodeColorString=function(y){var F=y.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var te=parseFloat(F[0]);F=[te,te,te,"r"]}for(var le="#",me=0;me<3;me++)le+=("0"+Math.floor(255*parseFloat(F[me])).toString(16)).slice(-2);return le},ai=p.__private__.encodeColorString=function(y){var F;typeof y=="string"&&(y={ch1:y});var te=y.ch1,le=y.ch2,me=y.ch3,Ne=y.ch4,Fe=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof te=="string"&&te.charAt(0)!=="#"){var Ve=new Tw(te);if(Ve.ok)te=Ve.toHex();else if(!/^\d*\.?\d*$/.test(te))throw new Error('Invalid color "'+te+'" passed to jsPDF.encodeColorString.')}if(typeof te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(te)&&(te="#"+te[1]+te[1]+te[2]+te[2]+te[3]+te[3]),typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te)){var tt=parseInt(te.substr(1),16);te=tt>>16&255,le=tt>>8&255,me=255&tt}if(le===void 0||Ne===void 0&&te===le&&le===me)if(typeof te=="string")F=te+" "+Fe[0];else switch(y.precision){case 2:F=ee(te/255)+" "+Fe[0];break;case 3:default:F=R(te/255)+" "+Fe[0]}else if(Ne===void 0||Tt(Ne)==="object"){if(Ne&&!isNaN(Ne.a)&&Ne.a===0)return F=["1.","1.","1.",Fe[1]].join(" ");if(typeof te=="string")F=[te,le,me,Fe[1]].join(" ");else switch(y.precision){case 2:F=[ee(te/255),ee(le/255),ee(me/255),Fe[1]].join(" ");break;default:case 3:F=[R(te/255),R(le/255),R(me/255),Fe[1]].join(" ")}}else if(typeof te=="string")F=[te,le,me,Ne,Fe[2]].join(" ");else switch(y.precision){case 2:F=[ee(te),ee(le),ee(me),ee(Ne),Fe[2]].join(" ");break;case 3:default:F=[R(te),R(le),R(me),R(Ne),Fe[2]].join(" ")}return F},Ci=p.__private__.getFilters=function(){return a},$r=p.__private__.putStream=function(y){var F=(y=y||{}).data||"",te=y.filters||Ci(),le=y.alreadyAppliedFilters||[],me=y.addLength1||!1,Ne=F.length,Fe=y.objectId,Ve=function(Vn){return Vn};if(g!==null&&Fe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(Ve=Hn.encryptor(Fe,0));var tt={};te===!0&&(te=["FlateEncode"]);var gt=y.additionalKeyValues||[],ht=(tt=it.API.processDataByFilters!==void 0?it.API.processDataByFilters(F,te):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(le)?le.join(" "):le.toString());if(tt.data.length!==0&&(gt.push({key:"Length",value:tt.data.length}),me===!0&&gt.push({key:"Length1",value:Ne})),ht.length!=0)if(ht.split("/").length-1==1)gt.push({key:"Filter",value:ht});else{gt.push({key:"Filter",value:"["+ht+"]"});for(var _t=0;_t<gt.length;_t+=1)if(gt[_t].key==="DecodeParms"){for(var Yt=[],en=0;en<tt.reverseChain.split("/").length-1;en+=1)Yt.push("null");Yt.push(gt[_t].value),gt[_t].value="["+Yt.join(" ")+"]"}}se("<<");for(var vn=0;vn<gt.length;vn++)se("/"+gt[vn].key+" "+gt[vn].value);se(">>"),tt.data.length!==0&&(se("stream"),se(Ve(tt.data)),se("endstream"))},Ti=p.__private__.putPage=function(y){var F=y.number,te=y.data,le=y.objId,me=y.contentsObjId;kr(le,!0),se("<</Type /Page"),se("/Parent "+y.rootDictionaryObjId+" 0 R"),se("/Resources "+y.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(L(y.mediaBox.bottomLeftX))+" "+parseFloat(L(y.mediaBox.bottomLeftY))+" "+L(y.mediaBox.topRightX)+" "+L(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&se("/CropBox ["+L(y.cropBox.bottomLeftX)+" "+L(y.cropBox.bottomLeftY)+" "+L(y.cropBox.topRightX)+" "+L(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&se("/BleedBox ["+L(y.bleedBox.bottomLeftX)+" "+L(y.bleedBox.bottomLeftY)+" "+L(y.bleedBox.topRightX)+" "+L(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&se("/TrimBox ["+L(y.trimBox.bottomLeftX)+" "+L(y.trimBox.bottomLeftY)+" "+L(y.trimBox.topRightX)+" "+L(y.trimBox.topRightY)+"]"),y.artBox!==null&&se("/ArtBox ["+L(y.artBox.bottomLeftX)+" "+L(y.artBox.bottomLeftY)+" "+L(y.artBox.topRightX)+" "+L(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&se("/UserUnit "+y.userUnit),ct.publish("putPage",{objId:le,pageContext:Ge[F],pageNumber:F,page:te}),se("/Contents "+me+" 0 R"),se(">>"),se("endobj");var Ne=te.join(`
`);return w===f.ADVANCED&&(Ne+=`
Q`),kr(me,!0),$r({data:Ne,filters:Ci(),objectId:me}),se("endobj"),le},pa=p.__private__.putPages=function(){var y,F,te=[];for(y=1;y<=wt;y++)Ge[y].objId=gn(),Ge[y].contentsObjId=gn();for(y=1;y<=wt;y++)te.push(Ti({number:y,data:_e[y],objId:Ge[y].objId,contentsObjId:Ge[y].contentsObjId,mediaBox:Ge[y].mediaBox,cropBox:Ge[y].cropBox,bleedBox:Ge[y].bleedBox,trimBox:Ge[y].trimBox,artBox:Ge[y].artBox,userUnit:Ge[y].userUnit,rootDictionaryObjId:Ki,resourceDictionaryObjId:ii}));kr(Ki,!0),se("<</Type /Pages");var le="/Kids [";for(F=0;F<wt;F++)le+=te[F]+" 0 R ";se(le+"]"),se("/Count "+wt),se(">>"),se("endobj"),ct.publish("postPutPages")},so=function(y){ct.publish("putFont",{font:y,out:se,newObject:Sn,putStream:$r}),y.isAlreadyPutted!==!0&&(y.objectNumber=Sn(),se("<<"),se("/Type /Font"),se("/BaseFont /"+Jo(y.postScriptName)),se("/Subtype /Type1"),typeof y.encoding=="string"&&se("/Encoding /"+y.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},ao=function(){for(var y in kt)kt.hasOwnProperty(y)&&(m===!1||m===!0&&v.hasOwnProperty(y))&&so(kt[y])},oo=function(y){y.objectNumber=Sn();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[L(y.x),L(y.y),L(y.x+y.width),L(y.y+y.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var te=y.pages[1].join(`
`);$r({data:te,additionalKeyValues:F,objectId:y.objectNumber}),se("endobj")},lo=function(){for(var y in Ht)Ht.hasOwnProperty(y)&&oo(Ht[y])},_c=function(y,F){var te,le=[],me=1/(F-1);for(te=0;te<1;te+=me)le.push(te);if(le.push(1),y[0].offset!=0){var Ne={offset:0,color:y[0].color};y.unshift(Ne)}if(y[y.length-1].offset!=1){var Fe={offset:1,color:y[y.length-1].color};y.push(Fe)}for(var Ve="",tt=0,gt=0;gt<le.length;gt++){for(te=le[gt];te>y[tt+1].offset;)tt++;var ht=y[tt].offset,_t=(te-ht)/(y[tt+1].offset-ht),Yt=y[tt].color,en=y[tt+1].color;Ve+=ne(Math.round((1-_t)*Yt[0]+_t*en[0]).toString(16))+ne(Math.round((1-_t)*Yt[1]+_t*en[1]).toString(16))+ne(Math.round((1-_t)*Yt[2]+_t*en[2]).toString(16))}return Ve.trim()},lf=function(y,F){F||(F=21);var te=Sn(),le=_c(y.colors,F),me=[];me.push({key:"FunctionType",value:"0"}),me.push({key:"Domain",value:"[0.0 1.0]"}),me.push({key:"Size",value:"["+F+"]"}),me.push({key:"BitsPerSample",value:"8"}),me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$r({data:le,additionalKeyValues:me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:te}),se("endobj"),y.objectNumber=Sn(),se("<< /ShadingType "+y.type),se("/ColorSpace /DeviceRGB");var Ne="/Coords ["+L(parseFloat(y.coords[0]))+" "+L(parseFloat(y.coords[1]))+" ";y.type===2?Ne+=L(parseFloat(y.coords[2]))+" "+L(parseFloat(y.coords[3])):Ne+=L(parseFloat(y.coords[2]))+" "+L(parseFloat(y.coords[3]))+" "+L(parseFloat(y.coords[4]))+" "+L(parseFloat(y.coords[5])),se(Ne+="]"),y.matrix&&se("/Matrix ["+y.matrix.toString()+"]"),se("/Function "+te+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},uf=function(y,F){var te=gn(),le=Sn();F.push({resourcesOid:te,objectOid:le}),y.objectNumber=le;var me=[];me.push({key:"Type",value:"/Pattern"}),me.push({key:"PatternType",value:"1"}),me.push({key:"PaintType",value:"1"}),me.push({key:"TilingType",value:"1"}),me.push({key:"BBox",value:"["+y.boundingBox.map(L).join(" ")+"]"}),me.push({key:"XStep",value:L(y.xStep)}),me.push({key:"YStep",value:L(y.yStep)}),me.push({key:"Resources",value:te+" 0 R"}),y.matrix&&me.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),$r({data:y.stream,additionalKeyValues:me,objectId:y.objectNumber}),se("endobj")},uo=function(y){var F;for(F in Ue)Ue.hasOwnProperty(F)&&(Ue[F]instanceof Hs?lf(Ue[F]):Ue[F]instanceof Ba&&uf(Ue[F],y))},Sc=function(y){for(var F in y.objectNumber=Sn(),se("<<"),y)switch(F){case"opacity":se("/ca "+ee(y[F]));break;case"stroke-opacity":se("/CA "+ee(y[F]))}se(">>"),se("endobj")},cf=function(){var y;for(y in Ut)Ut.hasOwnProperty(y)&&Sc(Ut[y])},Tl=function(){for(var y in se("/XObject <<"),Ht)Ht.hasOwnProperty(y)&&Ht[y].objectNumber>=0&&se("/"+y+" "+Ht[y].objectNumber+" 0 R");ct.publish("putXobjectDict"),se(">>")},df=function(){Hn.oid=Sn(),se("<<"),se("/Filter /Standard"),se("/V "+Hn.v),se("/R "+Hn.r),se("/U <"+Hn.toHexString(Hn.U)+">"),se("/O <"+Hn.toHexString(Hn.O)+">"),se("/P "+Hn.P),se(">>"),se("endobj")},Nc=function(){for(var y in se("/Font <<"),kt)kt.hasOwnProperty(y)&&(m===!1||m===!0&&v.hasOwnProperty(y))&&se("/"+y+" "+kt[y].objectNumber+" 0 R");se(">>")},hf=function(){if(Object.keys(Ue).length>0){for(var y in se("/Shading <<"),Ue)Ue.hasOwnProperty(y)&&Ue[y]instanceof Hs&&Ue[y].objectNumber>=0&&se("/"+y+" "+Ue[y].objectNumber+" 0 R");ct.publish("putShadingPatternDict"),se(">>")}},co=function(y){if(Object.keys(Ue).length>0){for(var F in se("/Pattern <<"),Ue)Ue.hasOwnProperty(F)&&Ue[F]instanceof p.TilingPattern&&Ue[F].objectNumber>=0&&Ue[F].objectNumber<y&&se("/"+F+" "+Ue[F].objectNumber+" 0 R");ct.publish("putTilingPatternDict"),se(">>")}},ff=function(){if(Object.keys(Ut).length>0){var y;for(y in se("/ExtGState <<"),Ut)Ut.hasOwnProperty(y)&&Ut[y].objectNumber>=0&&se("/"+y+" "+Ut[y].objectNumber+" 0 R");ct.publish("putGStateDict"),se(">>")}},on=function(y){kr(y.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Nc(),hf(),co(y.objectOid),ff(),Tl(),se(">>"),se("endobj")},kc=function(){var y=[];ao(),cf(),lo(),uo(y),ct.publish("putResources"),y.forEach(on),on({resourcesOid:ii,objectOid:Number.MAX_SAFE_INTEGER}),ct.publish("postPutResources")},jc=function(){ct.publish("putAdditionalObjects");for(var y=0;y<be.length;y++){var F=be[y];kr(F.objId,!0),se(F.content),se("endobj")}ct.publish("postPutAdditionalObjects")},Ac=function(y){Rt[y.fontName]=Rt[y.fontName]||{},Rt[y.fontName][y.fontStyle]=y.id},Ll=function(y,F,te,le,me){var Ne={id:"F"+(Object.keys(kt).length+1).toString(10),postScriptName:y,fontName:F,fontStyle:te,encoding:le,isStandardFont:me||!1,metadata:{}};return ct.publish("addFont",{font:Ne,instance:this}),kt[Ne.id]=Ne,Ac(Ne),Ne.id},pf=function(y){for(var F=0,te=Oe.length;F<te;F++){var le=Ll.call(this,y[F][0],y[F][1],y[F][2],Oe[F][3],!0);m===!1&&(v[le]=!0);var me=y[F][0].split("-");Ac({id:le,fontName:me[0],fontStyle:me[1]||""})}ct.publish("addFonts",{fonts:kt,dictionary:Rt})},oi=function(y){return y.foo=function(){try{return y.apply(this,arguments)}catch(le){var F=le.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var te="Error in function "+F.split(`
`)[0].split("<")[0]+": "+le.message;if(!ut.console)throw new Error(te);ut.console.error(te,le),ut.alert&&alert(te)}},y.foo.bar=y,y.foo},ho=function(y,F){var te,le,me,Ne,Fe,Ve,tt,gt,ht;if(me=(F=F||{}).sourceEncoding||"Unicode",Fe=F.outputEncoding,(F.autoencode||Fe)&&kt[Ce].metadata&&kt[Ce].metadata[me]&&kt[Ce].metadata[me].encoding&&(Ne=kt[Ce].metadata[me].encoding,!Fe&&kt[Ce].encoding&&(Fe=kt[Ce].encoding),!Fe&&Ne.codePages&&(Fe=Ne.codePages[0]),typeof Fe=="string"&&(Fe=Ne[Fe]),Fe)){for(tt=!1,Ve=[],te=0,le=y.length;te<le;te++)(gt=Fe[y.charCodeAt(te)])?Ve.push(String.fromCharCode(gt)):Ve.push(y[te]),Ve[te].charCodeAt(0)>>8&&(tt=!0);y=Ve.join("")}for(te=y.length;tt===void 0&&te!==0;)y.charCodeAt(te-1)>>8&&(tt=!0),te--;if(!tt)return y;for(Ve=F.noBOM?[]:[254,255],te=0,le=y.length;te<le;te++){if((ht=(gt=y.charCodeAt(te))>>8)>>8)throw new Error("Character at position "+te+" of string '"+y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ve.push(ht),Ve.push(gt-(ht<<8))}return String.fromCharCode.apply(void 0,Ve)},hr=p.__private__.pdfEscape=p.pdfEscape=function(y,F){return ho(y,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Il=p.__private__.beginPage=function(y){_e[++wt]=[],Ge[wt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},Ec(wt),ve(_e[$])},Pc=function(y,F){var te,le,me;switch(n=F||n,typeof y=="string"&&(te=x(y.toLowerCase()),Array.isArray(te)&&(le=te[0],me=te[1])),Array.isArray(y)&&(le=y[0]*xe,me=y[1]*xe),isNaN(le)&&(le=i[0],me=i[1]),(le>14400||me>14400)&&(Dt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),le=Math.min(14400,le),me=Math.min(14400,me)),i=[le,me],n.substr(0,1)){case"l":me>le&&(i=[me,le]);break;case"p":le>me&&(i=[me,le])}Il(i),Oc(Fl),se(li),zl!==0&&se(zl+" J"),Bl!==0&&se(Bl+" j"),ct.publish("addPage",{pageNumber:wt})},mf=function(y){y>0&&y<=wt&&(_e.splice(y,1),Ge.splice(y,1),wt--,$>wt&&($=wt),this.setPage($))},Ec=function(y){y>0&&y<=wt&&($=y)},gf=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return _e.length-1},Cc=function(y,F,te){var le,me=void 0;return te=te||{},y=y!==void 0?y:kt[Ce].fontName,F=F!==void 0?F:kt[Ce].fontStyle,le=y.toLowerCase(),Rt[le]!==void 0&&Rt[le][F]!==void 0?me=Rt[le][F]:Rt[y]!==void 0&&Rt[y][F]!==void 0?me=Rt[y][F]:te.disableWarning===!1&&Dt.warn("Unable to look up font label for font '"+y+"', '"+F+"'. Refer to getFontList() for available fonts."),me||te.noFallback||(me=Rt.times[F])==null&&(me=Rt.times.normal),me},vf=p.__private__.putInfo=function(){var y=Sn(),F=function(le){return le};for(var te in g!==null&&(F=Hn.encryptor(y,0)),se("<<"),se("/Producer ("+hr(F("jsPDF "+it.version))+")"),Ee)Ee.hasOwnProperty(te)&&Ee[te]&&se("/"+te.substr(0,1).toUpperCase()+te.substr(1)+" ("+hr(F(Ee[te]))+")");se("/CreationDate ("+hr(F(re))+")"),se(">>"),se("endobj")},Rl=p.__private__.putCatalog=function(y){var F=(y=y||{}).rootDictionaryObjId||Ki;switch(Sn(),se("<<"),se("/Type /Catalog"),se("/Pages "+F+" 0 R"),Be||(Be="fullwidth"),Be){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var te=""+Be;te.substr(te.length-1)==="%"&&(Be=parseInt(Be)/100),typeof Be=="number"&&se("/OpenAction [3 0 R /XYZ null null "+ee(Be)+"]")}switch(C||(C="continuous"),C){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}He&&se("/PageMode /"+He),ct.publish("putCatalog"),se(">>"),se("endobj")},yf=p.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(P+1)),se("/Root "+P+" 0 R"),se("/Info "+(P-1)+" 0 R"),g!==null&&se("/Encrypt "+Hn.oid+" 0 R"),se("/ID [ <"+W+"> <"+W+"> ]"),se(">>")},wf=p.__private__.putHeader=function(){se("%PDF-"+S),se("%")},xf=p.__private__.putXRef=function(){var y="0000000000";se("xref"),se("0 "+(P+1)),se("0000000000 65535 f ");for(var F=1;F<=P;F++)typeof H[F]=="function"?se((y+H[F]()).slice(-10)+" 00000 n "):H[F]!==void 0?se((y+H[F]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},Ji=p.__private__.buildDocument=function(){Ke(),ve(Q),ct.publish("buildDocument"),wf(),pa(),jc(),kc(),g!==null&&df(),vf(),Rl();var y=ie;return xf(),yf(),se("startxref"),se(""+y),se("%%EOF"),ve(_e[$]),Q.join(`
`)},fo=p.__private__.getBlob=function(y){return new Blob([We(y)],{type:"application/pdf"})},po=p.output=p.__private__.output=oi(function(y,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",y){case void 0:return Ji();case"save":p.save(F.filename);break;case"arraybuffer":return We(Ji());case"blob":return fo(Ji());case"bloburi":case"bloburl":if(ut.URL!==void 0&&typeof ut.URL.createObjectURL=="function")return ut.URL&&ut.URL.createObjectURL(fo(Ji()))||void 0;Dt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var te="",le=Ji();try{te=r0(le)}catch{te=r0(unescape(encodeURIComponent(le)))}return"data:application/pdf;filename="+F.filename+";base64,"+te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ut)==="[object Window]"){var me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(me=F.pdfObjectUrl,Ne="");var Fe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+me+'"'+Ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",Ve=ut.open();return Ve!==null&&Ve.document.write(Fe),Ve}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ut)==="[object Window]"){var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',gt=ut.open();if(gt!==null){gt.document.write(tt);var ht=this;gt.document.documentElement.querySelector("#pdfViewer").onload=function(){gt.document.title=F.filename,gt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ht.output("bloburl"))}}return gt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ut)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',Yt=ut.open();if(Yt!==null&&(Yt.document.write(_t),Yt.document.title=F.filename),Yt||typeof safari>"u")return Yt;break;case"datauri":case"dataurl":return ut.document.location.href=this.output("datauristring",F);default:return null}}),Tc=function(y){return Array.isArray(At)===!0&&At.indexOf(y)>-1};switch(r){case"pt":xe=1;break;case"mm":xe=72/25.4;break;case"cm":xe=72/2.54;break;case"in":xe=72;break;case"px":xe=Tc("px_scaling")==1?.75:96/72;break;case"pc":case"em":xe=12;break;case"ex":xe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);xe=r}var Hn=null;pe(),G();var bf=function(y){return g!==null?Hn.encryptor(y,0):function(F){return F}},Lc=p.__private__.getPageInfo=p.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ge[y].objId,pageNumber:y,pageContext:Ge[y]}},dt=p.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in Ge)if(Ge[F].objId===y)break;return Lc(F)},_f=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ge[$].objId,pageNumber:$,pageContext:Ge[$]}};p.addPage=function(){return Pc.apply(this,arguments),this},p.setPage=function(){return Ec.apply(this,arguments),ve.call(this,_e[$]),this},p.insertPage=function(y){return this.addPage(),this.movePage($,y),this},p.movePage=function(y,F){var te,le;if(y>F){te=_e[y],le=Ge[y];for(var me=y;me>F;me--)_e[me]=_e[me-1],Ge[me]=Ge[me-1];_e[F]=te,Ge[F]=le,this.setPage(F)}else if(y<F){te=_e[y],le=Ge[y];for(var Ne=y;Ne<F;Ne++)_e[Ne]=_e[Ne+1],Ge[Ne]=Ge[Ne+1];_e[F]=te,Ge[F]=le,this.setPage(F)}return this},p.deletePage=function(){return mf.apply(this,arguments),this},p.__private__.text=p.text=function(y,F,te,le,me){var Ne,Fe,Ve,tt,gt,ht,_t,Yt,en,vn=(le=le||{}).scope||this;if(typeof y=="number"&&typeof F=="number"&&(typeof te=="string"||Array.isArray(te))){var Vn=te;te=F,F=y,y=Vn}if(arguments[3]instanceof nt?(I("The transform parameter of text() with a Matrix value"),en=me):(Ve=arguments[4],tt=arguments[5],Tt(_t=arguments[3])==="object"&&_t!==null||(typeof Ve=="string"&&(tt=Ve,Ve=null),typeof _t=="string"&&(tt=_t,_t=null),typeof _t=="number"&&(Ve=_t,_t=null),le={flags:_t,angle:Ve,align:tt})),isNaN(F)||isNaN(te)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return vn;var Cn="",ui=!1,jr=typeof le.lineHeightFactor=="number"?le.lineHeightFactor:ga,Ri=vn.internal.scaleFactor;function Uc(Ft){return Ft=Ft.split("	").join(Array(le.TabLen||9).join(" ")),hr(Ft,_t)}function Hl(Ft){for(var Mt,un=Ft.concat(),Nn=[],ts=un.length;ts--;)typeof(Mt=un.shift())=="string"?Nn.push(Mt):Array.isArray(Ft)&&(Mt.length===1||Mt[1]===void 0&&Mt[2]===void 0)?Nn.push(Mt[0]):Nn.push([Mt[0],Mt[1],Mt[2]]);return Nn}function Vl(Ft,Mt){var un;if(typeof Ft=="string")un=Mt(Ft)[0];else if(Array.isArray(Ft)){for(var Nn,ts,eu=Ft.concat(),Eo=[],Vc=eu.length;Vc--;)typeof(Nn=eu.shift())=="string"?Eo.push(Mt(Nn)[0]):Array.isArray(Nn)&&typeof Nn[0]=="string"&&(ts=Mt(Nn[0],Nn[1],Nn[2]),Eo.push([ts[0],ts[1],ts[2]]));un=Eo}return un}var xo=!1,Gl=!0;if(typeof y=="string")xo=!0;else if(Array.isArray(y)){var Yl=y.concat();Fe=[];for(var bo,On=Yl.length;On--;)(typeof(bo=Yl.shift())!="string"||Array.isArray(bo)&&typeof bo[0]!="string")&&(Gl=!1);xo=Gl}if(xo===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var _o=Me/vn.internal.scaleFactor,So=_o*(jr-1);switch(le.baseline){case"bottom":te-=So;break;case"top":te+=_o-So;break;case"hanging":te+=_o-2*So;break;case"middle":te+=_o/2-So}if((ht=le.maxWidth||0)>0&&(typeof y=="string"?y=vn.splitTextToSize(y,ht):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(Ft,Mt){return Ft.concat(vn.splitTextToSize(Mt,ht))},[]))),Ne={text:y,x:F,y:te,options:le,mutex:{pdfEscape:hr,activeFontKey:Ce,fonts:kt,activeFontSize:Me}},ct.publish("preProcessText",Ne),y=Ne.text,Ve=(le=Ne.options).angle,!(en instanceof nt)&&Ve&&typeof Ve=="number"){Ve*=Math.PI/180,le.rotationDirection===0&&(Ve=-Ve),w===f.ADVANCED&&(Ve=-Ve);var No=Math.cos(Ve),Kl=Math.sin(Ve);en=new nt(No,Kl,-Kl,No,0,0)}else Ve&&Ve instanceof nt&&(en=Ve);w!==f.ADVANCED||en||(en=Ur),(gt=le.charSpace||vo)!==void 0&&(Cn+=L(A(gt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yt=le.horizontalScale)!==void 0&&(Cn+=L(100*Yt)+` Tz
`),le.lang;var fr=-1,Lf=le.renderingMode!==void 0?le.renderingMode:le.stroke,Jl=vn.internal.getCurrentPageInfo().pageContext;switch(Lf){case 0:case!1:case"fill":fr=0;break;case 1:case!0:case"stroke":fr=1;break;case 2:case"fillThenStroke":fr=2;break;case 3:case"invisible":fr=3;break;case 4:case"fillAndAddForClipping":fr=4;break;case 5:case"strokeAndAddPathForClipping":fr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":fr=6;break;case 7:case"addToPathForClipping":fr=7}var $c=Jl.usedRenderingMode!==void 0?Jl.usedRenderingMode:-1;fr!==-1?Cn+=fr+` Tr
`:$c!==-1&&(Cn+=`0 Tr
`),fr!==-1&&(Jl.usedRenderingMode=fr),tt=le.align||"left";var qr,ko=Me*jr,qc=vn.internal.pageSize.getWidth(),Wc=kt[Ce];gt=le.charSpace||vo,ht=le.maxWidth||0,_t=Object.assign({autoencode:!0,noBOM:!0},le.flags);var Ss=[],wa=function(Ft){return vn.getStringUnitWidth(Ft,{font:Wc,charSpace:gt,fontSize:Me,doKerning:!1})*Me/Ri};if(Object.prototype.toString.call(y)==="[object Array]"){var pr;Fe=Hl(y),tt!=="left"&&(qr=Fe.map(wa));var ir,Ns=0;if(tt==="right"){F-=qr[0],y=[],On=Fe.length;for(var Xi=0;Xi<On;Xi++)Xi===0?(ir=Ii(F),pr=Qi(te)):(ir=A(Ns-qr[Xi]),pr=-ko),y.push([Fe[Xi],ir,pr]),Ns=qr[Xi]}else if(tt==="center"){F-=qr[0]/2,y=[],On=Fe.length;for(var Zi=0;Zi<On;Zi++)Zi===0?(ir=Ii(F),pr=Qi(te)):(ir=A((Ns-qr[Zi])/2),pr=-ko),y.push([Fe[Zi],ir,pr]),Ns=qr[Zi]}else if(tt==="left"){y=[],On=Fe.length;for(var jo=0;jo<On;jo++)y.push(Fe[jo])}else if(tt==="justify"&&Wc.encoding==="Identity-H"){y=[],On=Fe.length,ht=ht!==0?ht:qc;for(var es=0,ln=0;ln<On;ln++)if(pr=ln===0?Qi(te):-ko,ir=ln===0?Ii(F):es,ln<On-1){var Ql=A((ht-qr[ln])/(Fe[ln].split(" ").length-1)),sr=Fe[ln].split(" ");y.push([sr[0]+" ",ir,pr]),es=0;for(var Wr=1;Wr<sr.length;Wr++){var Ao=(wa(sr[Wr-1]+" "+sr[Wr])-wa(sr[Wr]))*Ri+Ql;Wr==sr.length-1?y.push([sr[Wr],Ao,0]):y.push([sr[Wr]+" ",Ao,0]),es-=Ao}}else y.push([Fe[ln],ir,pr]);y.push(["",es,0])}else{if(tt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],On=Fe.length,ht=ht!==0?ht:qc,ln=0;ln<On;ln++)pr=ln===0?Qi(te):-ko,ir=ln===0?Ii(F):0,ln<On-1?Ss.push(L(A((ht-qr[ln])/(Fe[ln].split(" ").length-1)))):Ss.push(0),y.push([Fe[ln],ir,pr])}}var Hc=typeof le.R2L=="boolean"?le.R2L:Re;Hc===!0&&(y=Vl(y,function(Ft,Mt,un){return[Ft.split("").reverse().join(""),Mt,un]})),Ne={text:y,x:F,y:te,options:le,mutex:{pdfEscape:hr,activeFontKey:Ce,fonts:kt,activeFontSize:Me}},ct.publish("postProcessText",Ne),y=Ne.text,ui=Ne.mutex.isHex||!1;var Xl=kt[Ce].encoding;Xl!=="WinAnsiEncoding"&&Xl!=="StandardEncoding"||(y=Vl(y,function(Ft,Mt,un){return[Uc(Ft),Mt,un]})),Fe=Hl(y),y=[];for(var xa,ba,ks,_a=0,Po=1,Sa=Array.isArray(Fe[0])?Po:_a,js="",Zl=function(Ft,Mt,un){var Nn="";return un instanceof nt?(un=typeof le.angle=="number"?qn(un,new nt(1,0,0,1,Ft,Mt)):qn(new nt(1,0,0,1,Ft,Mt),un),w===f.ADVANCED&&(un=qn(new nt(1,0,0,-1,0,0),un)),Nn=un.join(" ")+` Tm
`):Nn=L(Ft)+" "+L(Mt)+` Td
`,Nn},Hr=0;Hr<Fe.length;Hr++){switch(js="",Sa){case Po:ks=(ui?"<":"(")+Fe[Hr][0]+(ui?">":")"),xa=parseFloat(Fe[Hr][1]),ba=parseFloat(Fe[Hr][2]);break;case _a:ks=(ui?"<":"(")+Fe[Hr]+(ui?">":")"),xa=Ii(F),ba=Qi(te)}Ss!==void 0&&Ss[Hr]!==void 0&&(js=Ss[Hr]+` Tw
`),Hr===0?y.push(js+Zl(xa,ba,en)+ks):Sa===_a?y.push(js+ks):Sa===Po&&y.push(js+Zl(xa,ba,en)+ks)}y=Sa===_a?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var Vr=`BT
/`;return Vr+=Ce+" "+Me+` Tf
`,Vr+=L(Me*jr)+` TL
`,Vr+=va+`
`,Vr+=Cn,Vr+=y,se(Vr+="ET"),v[Ce]=!0,vn};var Sf=p.__private__.clip=p.clip=function(y){return se(y==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Sf("evenodd")},p.__private__.discardPath=p.discardPath=function(){return se("n"),this};var Li=p.__private__.isValidStyle=function(y){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(F=!0),F};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(y){return Li(y)&&(d=y),this};var Ic=p.__private__.getStyle=p.getStyle=function(y){var F=d;switch(y){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=y}return F},Rc=p.close=function(){return se("h"),this};p.stroke=function(){return se("S"),this},p.fill=function(y){return mo("f",y),this},p.fillEvenOdd=function(y){return mo("f*",y),this},p.fillStroke=function(y){return mo("B",y),this},p.fillStrokeEvenOdd=function(y){return mo("B*",y),this};var mo=function(y,F){Tt(F)==="object"?kf(F,y):se(y)},Ol=function(y){y===null||w===f.ADVANCED&&y===void 0||(y=Ic(y),se(y))};function Nf(y,F,te,le,me){var Ne=new Ba(F||this.boundingBox,te||this.xStep,le||this.yStep,this.gState,me||this.matrix);Ne.stream=this.stream;var Fe=y+"$$"+this.cloneIndex+++"$$";return Wn(Fe,Ne),Ne}var kf=function(y,F){var te=Ei[y.key],le=Ue[te];if(le instanceof Hs)se("q"),se(jf(F)),le.gState&&p.setGState(le.gState),se(y.matrix.toString()+" cm"),se("/"+te+" sh"),se("Q");else if(le instanceof Ba){var me=new nt(1,0,0,-1,0,_s());y.matrix&&(me=me.multiply(y.matrix||Ur),te=Nf.call(le,y.key,y.boundingBox,y.xStep,y.yStep,me).id),se("q"),se("/Pattern cs"),se("/"+te+" scn"),le.gState&&p.setGState(le.gState),se(F),se("Q")}},jf=function(y){switch(y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Dl=p.moveTo=function(y,F){return se(L(A(y))+" "+L(K(F))+" m"),this},ma=p.lineTo=function(y,F){return se(L(A(y))+" "+L(K(F))+" l"),this},xs=p.curveTo=function(y,F,te,le,me,Ne){return se([L(A(y)),L(K(F)),L(A(te)),L(K(le)),L(A(me)),L(K(Ne)),"c"].join(" ")),this};p.__private__.line=p.line=function(y,F,te,le,me){if(isNaN(y)||isNaN(F)||isNaN(te)||isNaN(le)||!Li(me))throw new Error("Invalid arguments passed to jsPDF.line");return w===f.COMPAT?this.lines([[te-y,le-F]],y,F,[1,1],me||"S"):this.lines([[te-y,le-F]],y,F,[1,1]).stroke()},p.__private__.lines=p.lines=function(y,F,te,le,me,Ne){var Fe,Ve,tt,gt,ht,_t,Yt,en,vn,Vn,Cn,ui;if(typeof y=="number"&&(ui=te,te=F,F=y,y=ui),le=le||[1,1],Ne=Ne||!1,isNaN(F)||isNaN(te)||!Array.isArray(y)||!Array.isArray(le)||!Li(me)||typeof Ne!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Dl(F,te),Fe=le[0],Ve=le[1],gt=y.length,Vn=F,Cn=te,tt=0;tt<gt;tt++)(ht=y[tt]).length===2?(Vn=ht[0]*Fe+Vn,Cn=ht[1]*Ve+Cn,ma(Vn,Cn)):(_t=ht[0]*Fe+Vn,Yt=ht[1]*Ve+Cn,en=ht[2]*Fe+Vn,vn=ht[3]*Ve+Cn,Vn=ht[4]*Fe+Vn,Cn=ht[5]*Ve+Cn,xs(_t,Yt,en,vn,Vn,Cn));return Ne&&Rc(),Ol(me),this},p.path=function(y){for(var F=0;F<y.length;F++){var te=y[F],le=te.c;switch(te.op){case"m":Dl(le[0],le[1]);break;case"l":ma(le[0],le[1]);break;case"c":xs.apply(this,le);break;case"h":Rc()}}return this},p.__private__.rect=p.rect=function(y,F,te,le,me){if(isNaN(y)||isNaN(F)||isNaN(te)||isNaN(le)||!Li(me))throw new Error("Invalid arguments passed to jsPDF.rect");return w===f.COMPAT&&(le=-le),se([L(A(y)),L(K(F)),L(A(te)),L(A(le)),"re"].join(" ")),Ol(me),this},p.__private__.triangle=p.triangle=function(y,F,te,le,me,Ne,Fe){if(isNaN(y)||isNaN(F)||isNaN(te)||isNaN(le)||isNaN(me)||isNaN(Ne)||!Li(Fe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[te-y,le-F],[me-te,Ne-le],[y-me,F-Ne]],y,F,[1,1],Fe,!0),this},p.__private__.roundedRect=p.roundedRect=function(y,F,te,le,me,Ne,Fe){if(isNaN(y)||isNaN(F)||isNaN(te)||isNaN(le)||isNaN(me)||isNaN(Ne)||!Li(Fe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ve=4/3*(Math.SQRT2-1);return me=Math.min(me,.5*te),Ne=Math.min(Ne,.5*le),this.lines([[te-2*me,0],[me*Ve,0,me,Ne-Ne*Ve,me,Ne],[0,le-2*Ne],[0,Ne*Ve,-me*Ve,Ne,-me,Ne],[2*me-te,0],[-me*Ve,0,-me,-Ne*Ve,-me,-Ne],[0,2*Ne-le],[0,-Ne*Ve,me*Ve,-Ne,me,-Ne]],y+me,F,[1,1],Fe,!0),this},p.__private__.ellipse=p.ellipse=function(y,F,te,le,me){if(isNaN(y)||isNaN(F)||isNaN(te)||isNaN(le)||!Li(me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ne=4/3*(Math.SQRT2-1)*te,Fe=4/3*(Math.SQRT2-1)*le;return Dl(y+te,F),xs(y+te,F-Fe,y+Ne,F-le,y,F-le),xs(y-Ne,F-le,y-te,F-Fe,y-te,F),xs(y-te,F+Fe,y-Ne,F+le,y,F+le),xs(y+Ne,F+le,y+te,F+Fe,y+te,F),Ol(me),this},p.__private__.circle=p.circle=function(y,F,te,le){if(isNaN(y)||isNaN(F)||isNaN(te)||!Li(le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,F,te,te,le)},p.setFont=function(y,F,te){return te&&(F=E(F,te)),Ce=Cc(y,F,{disableWarning:!1}),this};var Af=p.__private__.getFont=p.getFont=function(){return kt[Cc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var y,F,te={};for(y in Rt)if(Rt.hasOwnProperty(y))for(F in te[y]=[],Rt[y])Rt[y].hasOwnProperty(F)&&te[y].push(F);return te},p.addFont=function(y,F,te,le,me){var Ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ne.indexOf(arguments[3])!==-1?me=arguments[3]:arguments[3]&&Ne.indexOf(arguments[3])==-1&&(te=E(te,le)),me=me||"Identity-H",Ll.call(this,y,F,te,me)};var ga,Fl=t.lineWidth||.200025,go=p.__private__.getLineWidth=p.getLineWidth=function(){return Fl},Oc=p.__private__.setLineWidth=p.setLineWidth=function(y){return Fl=y,se(L(A(y))+" w"),this};p.__private__.setLineDash=it.API.setLineDash=it.API.setLineDashPattern=function(y,F){if(y=y||[],F=F||0,isNaN(F)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(te){return L(A(te))}).join(" "),F=L(A(F)),se("["+y+"] "+F+" d"),this};var Dc=p.__private__.getLineHeight=p.getLineHeight=function(){return Me*ga};p.__private__.getLineHeight=p.getLineHeight=function(){return Me*ga};var Fc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(ga=y),this},Mc=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return ga};Fc(t.lineHeight);var Ii=p.__private__.getHorizontalCoordinate=function(y){return A(y)},Qi=p.__private__.getVerticalCoordinate=function(y){return w===f.ADVANCED?y:Ge[$].mediaBox.topRightY-Ge[$].mediaBox.bottomLeftY-A(y)},Pf=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(y){return L(Ii(y))},bs=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(y){return L(Qi(y))},li=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return si(li)},p.__private__.setStrokeColor=p.setDrawColor=function(y,F,te,le){return li=ai({ch1:y,ch2:F,ch3:te,ch4:le,pdfColorType:"draw",precision:2}),se(li),this};var Ml=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return si(Ml)},p.__private__.setFillColor=p.setFillColor=function(y,F,te,le){return Ml=ai({ch1:y,ch2:F,ch3:te,ch4:le,pdfColorType:"fill",precision:2}),se(Ml),this};var va=t.textColor||"0 g",Ef=p.__private__.getTextColor=p.getTextColor=function(){return si(va)};p.__private__.setTextColor=p.setTextColor=function(y,F,te,le){return va=ai({ch1:y,ch2:F,ch3:te,ch4:le,pdfColorType:"text",precision:3}),this};var vo=t.charSpace,Cf=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(vo||0)};p.__private__.setCharSpace=p.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return vo=y,this};var zl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(y){var F=p.CapJoinStyles[y];if(F===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zl=F,se(F+" J"),this};var Bl=0;p.__private__.setLineJoin=p.setLineJoin=function(y){var F=p.CapJoinStyles[y];if(F===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bl=F,se(F+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(L(A(y))+" M"),this},p.GState=mc,p.setGState=function(y){(y=typeof y=="string"?Ut[Nr[y]]:zc(null,y)).equals(an)||(se("/"+y.id+" gs"),an=y)};var zc=function(y,F){if(!y||!Nr[y]){var te=!1;for(var le in Ut)if(Ut.hasOwnProperty(le)&&Ut[le].equals(F)){te=!0;break}if(te)F=Ut[le];else{var me="GS"+(Object.keys(Ut).length+1).toString(10);Ut[me]=F,F.id=me}return y&&(Nr[y]=F.id),ct.publish("addGState",F),F}};p.addGState=function(y,F){return zc(y,F),this},p.saveGraphicsState=function(){return se("q"),Sr.push({key:Ce,size:Me,color:va}),this},p.restoreGraphicsState=function(){se("Q");var y=Sr.pop();return Ce=y.key,Me=y.size,va=y.color,an=null,this},p.setCurrentTransformationMatrix=function(y){return se(y.toString()+" cm"),this},p.comment=function(y){return se("#"+y),this};var yo=function(y,F){var te=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return te},set:function(Ne){isNaN(Ne)||(te=parseFloat(Ne))}});var le=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return le},set:function(Ne){isNaN(Ne)||(le=parseFloat(Ne))}});var me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return me},set:function(Ne){me=Ne.toString()}}),this},Ul=function(y,F,te,le){yo.call(this,y,F),this.type="rect";var me=te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return me},set:function(Fe){isNaN(Fe)||(me=parseFloat(Fe))}});var Ne=le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ne},set:function(Fe){isNaN(Fe)||(Ne=parseFloat(Fe))}}),this},$l=function(){this.page=wt,this.currentPage=$,this.pages=_e.slice(0),this.pagesContext=Ge.slice(0),this.x=Xe,this.y=mt,this.matrix=Gt,this.width=ya($),this.height=_s($),this.outputDestination=ke,this.id="",this.objectNumber=-1};$l.prototype.restore=function(){wt=this.page,$=this.currentPage,Ge=this.pagesContext,_e=this.pages,Xe=this.x,mt=this.y,Gt=this.matrix,ql($,this.width),Wl($,this.height),ke=this.outputDestination};var Bc=function(y,F,te,le,me){rr.push(new $l),wt=$=0,_e=[],Xe=y,mt=F,Gt=me,Il([te,le])},Tf=function(y){if(nr[y])rr.pop().restore();else{var F=new $l,te="Xo"+(Object.keys(Ht).length+1).toString(10);F.id=te,nr[y]=te,Ht[te]=F,ct.publish("addFormObject",F),rr.pop().restore()}};for(var wo in p.beginFormObject=function(y,F,te,le,me){return Bc(y,F,te,le,me),this},p.endFormObject=function(y){return Tf(y),this},p.doFormObject=function(y,F){var te=Ht[nr[y]];return se("q"),se(F.toString()+" cm"),se("/"+te.id+" Do"),se("Q"),this},p.getFormObject=function(y){var F=Ht[nr[y]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},p.save=function(y,F){return y=y||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(La(fo(Ji()),y),typeof La.unload=="function"&&ut.setTimeout&&setTimeout(La.unload,911),this):new Promise(function(te,le){try{var me=La(fo(Ji()),y);typeof La.unload=="function"&&ut.setTimeout&&setTimeout(La.unload,911),te(me)}catch(Ne){le(Ne.message)}})},it.API)it.API.hasOwnProperty(wo)&&(wo==="events"&&it.API.events.length?function(y,F){var te,le,me;for(me=F.length-1;me!==-1;me--)te=F[me][0],le=F[me][1],y.subscribe.apply(y,[te].concat(typeof le=="function"?[le]:le))}(ct,it.API.events):p[wo]=it.API[wo]);var ya=p.getPageWidth=function(y){return(Ge[y=y||$].mediaBox.topRightX-Ge[y].mediaBox.bottomLeftX)/xe},ql=p.setPageWidth=function(y,F){Ge[y].mediaBox.topRightX=F*xe+Ge[y].mediaBox.bottomLeftX},_s=p.getPageHeight=function(y){return(Ge[y=y||$].mediaBox.topRightY-Ge[y].mediaBox.bottomLeftY)/xe},Wl=p.setPageHeight=function(y,F){Ge[y].mediaBox.topRightY=F*xe+Ge[y].mediaBox.bottomLeftY};return p.internal={pdfEscape:hr,getStyle:Ic,getFont:Af,getFontSize:Pe,getCharSpace:Cf,getTextColor:Ef,getLineHeight:Dc,getLineHeightFactor:Mc,getLineWidth:go,write:Ze,getHorizontalCoordinate:Ii,getVerticalCoordinate:Qi,getCoordinateString:Pf,getVerticalCoordinateString:bs,collections:{},newObject:Sn,newAdditionalObject:io,newObjectDeferred:gn,newObjectDeferredBegin:kr,getFilters:Ci,putStream:$r,events:ct,scaleFactor:xe,pageSize:{getWidth:function(){return ya($)},setWidth:function(y){ql($,y)},getHeight:function(){return _s($)},setHeight:function(y){Wl($,y)}},encryptionOptions:g,encryption:Hn,getEncryptor:bf,output:po,getNumberOfPages:gf,pages:_e,out:se,f2:ee,f3:R,getPageInfo:Lc,getPageInfoByObjId:dt,getCurrentPageInfo:_f,getPDFVersion:_,Point:yo,Rectangle:Ul,Matrix:nt,hasHotfix:Tc},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ya($)},set:function(y){ql($,y)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return _s($)},set:function(y){Wl($,y)},enumerable:!0,configurable:!0}),pf.call(p,Oe),Ce="F1",Pc(i,n),ct.publish("initialized"),p}Ko.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ko.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ko.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Ko.prototype.processOwnerPassword=function(t,e){return s0(i0(e).substr(0,5),t)},Ko.prototype.encryptor=function(t,e){var n=i0(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return s0(n,r)}},mc.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Tt(t)!==Tt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},it.API={events:[]},it.version="2.5.2";var nn=it.API,xg=1,ro=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$o=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ft=function(t){return t.toFixed(2)},Fs=function(t){return t.toFixed(5)};nn.__acroform__={};var _r=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},t2=function(t){return t*xg},Fi=function(t){var e=new Ow,n=Qe.internal.getHeight(t)||0,r=Qe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(ft(r)),Number(ft(n))],e},mj=nn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},gj=nn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},vj=nn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},dn=nn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return vj(t,e-1)},hn=nn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return mj(t,e-1)},fn=nn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return gj(t,e-1)},yj=nn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(s)||0,[Number(ft(l.lowerLeft_X)),Number(ft(l.lowerLeft_Y)),Number(ft(l.upperRight_X)),Number(ft(l.upperRight_Y))]},wj=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=a0(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+ft(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Fi(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},a0=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var s=n,a=Qe.internal.getHeight(t)||0;a=a<0?-a:a;var o=Qe.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(R,A,V){if(R+1<i.length){var K=A+" "+i[R+1][0];return Dd(K,t,V).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var d,g,m=Dd("3",t,s).height,v=t.multiline?a-s:(a-m)/2,p=v+=2,S=0,_=0,j=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Dd(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var x="",f=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var N=!1;if(i[w].length!==1&&j!==i[w].length-1){if((m+2)*(f+2)+2>a)continue e;x+=i[w][j],N=!0,_=w,w--}else{x=(x+=i[w][j]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var D=parseInt(w),E=l(D,x,s),L=w>=i.length-1;if(E&&!L){x+=" ",j=0;continue}if(E||L){if(L)_=D;else if(t.multiline&&(m+2)*(f+2)+2>a)continue e}else{if(!t.multiline||(m+2)*(f+2)+2>a)continue e;_=D}}for(var I="",Y=S;Y<=_;Y++){var ee=i[Y];if(t.multiline){if(Y===_){I+=ee[j]+" ",j=(j+1)%ee.length;continue}if(Y===S){I+=ee[ee.length-1]+" ";continue}}I+=ee[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,g=Dd(I,t,s).width,t.textAlign){case"right":d=o-g-2;break;case"center":d=(o-g)/2;break;case"left":default:d=2}e+=ft(d)+" "+ft(p)+` Td
`,e+="("+ro(I)+`) Tj
`,e+=-ft(d)+` 0 Td
`,p=-(s+2),g=0,S=N?_:_+1,f++,x=""}break}return r.text=e,r.fontSize=s,r},Dd=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},xj={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},bj=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},_j=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Tt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},Sj=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ai.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(xj)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xg=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Dw,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&bj(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],d=o.Rect;if(o.Rect&&(o.Rect=yj(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Qe.createDefaultAppearanceStream(o),Tt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var g=wj(o);l.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(o.appearanceStreamContent){var m="";for(var v in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(v)){var p=o.appearanceStreamContent[v];if(m+="/"+v+" ",m+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var S=p[a];typeof S=="function"&&(S=S.call(i,o)),m+="/"+a+" "+S+" ",i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S)}}else typeof(S=p)=="function"&&(S=S.call(i,o)),m+="/"+a+" "+S,i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S);m+=">>"}l.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&_j(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Rw=nn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Tt(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+ro(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Bp=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+ro(r(t))+")"},$i=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};$i.prototype.toString=function(){return this.objId+" 0 R"},$i.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},$i.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:Rw(i,this.objId,this.scope)}):i instanceof $i?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Ow=function(){$i.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};_r(Ow,$i);var Dw=function(){$i.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+ro(n(t))+")"}},set:function(n){t=n}})};_r(Dw,$i);var Ai=function t(){$i.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!dn(e,3)},set:function(x){x?this.F=hn(e,3):this.F=fn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Lh)return;s="FieldObject"+t.FieldNum++}var x=function(f){return f};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+ro(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/xg:d},set:function(x){d=x}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(x){g=x}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof Lh||this instanceof sa))return Bp(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=x}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof An?v:Bp(v,this.objId,this.scope)},set:function(x){x=x.toString(),v=this instanceof An?x:x.substr(0,1)==="("?$o(x.substr(1,x.length-2)):$o(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof An?$o(v.substr(1,v.length-1)):v},set:function(x){x=x.toString(),v=this instanceof An?"/"+x:x}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof An?p:Bp(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=this instanceof An?x:x.substr(0,1)==="("?$o(x.substr(1,x.length-2)):$o(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof An?$o(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof An?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(x){x=!!x,_=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(x){S=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,1)},set:function(x){x?this.Ff=hn(this.Ff,1):this.Ff=fn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,2)},set:function(x){x?this.Ff=hn(this.Ff,2):this.Ff=fn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,3)},set:function(x){x?this.Ff=hn(this.Ff,3):this.Ff=fn(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');j=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(j){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};_r(Ai,$i);var qa=function(){Ai.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Rw(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,d=[];l=a.exec(s);)d.push(l[o]);return d}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,18)},set:function(n){n?this.Ff=hn(this.Ff,18):this.Ff=fn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=hn(this.Ff,19):this.Ff=fn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,20)},set:function(n){n?(this.Ff=hn(this.Ff,20),e.sort()):this.Ff=fn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,22)},set:function(n){n?this.Ff=hn(this.Ff,22):this.Ff=fn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(n){n?this.Ff=hn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,27)},set:function(n){n?this.Ff=hn(this.Ff,27):this.Ff=fn(this.Ff,27)}}),this.hasAppearanceStream=!1};_r(qa,Ai);var Wa=function(){qa.call(this),this.fontName="helvetica",this.combo=!1};_r(Wa,qa);var Ha=function(){Wa.call(this),this.combo=!0};_r(Ha,Wa);var Ou=function(){Ha.call(this),this.edit=!0};_r(Ou,Ha);var An=function(){Ai.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,15)},set:function(n){n?this.Ff=hn(this.Ff,15):this.Ff=fn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,16)},set:function(n){n?this.Ff=hn(this.Ff,16):this.Ff=fn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,17)},set:function(n){n?this.Ff=hn(this.Ff,17):this.Ff=fn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(n){n?this.Ff=hn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+ro(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Tt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};_r(An,Ai);var Du=function(){An.call(this),this.pushButton=!0};_r(Du,An);var Va=function(){An.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};_r(Va,An);var Lh=function(){var t,e;Ai.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+ro(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Tt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_r(Lh,Ai),Va.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Va.prototype.createOption=function(t){var e=new Lh;return e.Parent=this,e.optionName=t,this.Kids.push(e),Nj.call(this.scope,e),e};var Fu=function(){An.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qe.CheckBox.createAppearanceStream()};_r(Fu,An);var sa=function(){Ai.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,13)},set:function(e){e?this.Ff=hn(this.Ff,13):this.Ff=fn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,21)},set:function(e){e?this.Ff=hn(this.Ff,21):this.Ff=fn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(e){e?this.Ff=hn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,24)},set:function(e){e?this.Ff=hn(this.Ff,24):this.Ff=fn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,25)},set:function(e){e?this.Ff=hn(this.Ff,25):this.Ff=fn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(e){e?this.Ff=hn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_r(sa,Ai);var Mu=function(){sa.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,14)},set:function(t){t?this.Ff=hn(this.Ff,14):this.Ff=fn(this.Ff,14)}}),this.password=!0};_r(Mu,sa);var Qe={CheckBox:{createAppearanceStream:function(){return{N:{On:Qe.CheckBox.YesNormal},D:{On:Qe.CheckBox.YesPushDown,Off:Qe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=a0(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+ft(Qe.internal.getWidth(t))+" "+ft(Qe.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ft(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Fi(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Qe.internal.getHeight(t),a=Qe.internal.getWidth(t),o=a0(t,t.caption);return i.push("1 g"),i.push("0 0 "+ft(a)+" "+ft(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ft(a-1)+" "+ft(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+ft(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ft(Qe.internal.getWidth(t))+" "+ft(Qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Qe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Qe.RadioButton.Circle.YesNormal,e.D[t]=Qe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Fi(t);e.scope=t.scope;var n=[],r=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Qe.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Fs(Qe.internal.getWidth(t)/2)+" "+Fs(Qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=[],r=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Qe.internal.Bezier_C).toFixed(5)),a=Number((r*Qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Fs(Qe.internal.getWidth(t)/2)+" "+Fs(Qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Fs(Qe.internal.getWidth(t)/2)+" "+Fs(Qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=[],r=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Fs(Qe.internal.getWidth(t)/2)+" "+Fs(Qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Qe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Qe.RadioButton.Cross.YesNormal,e.D[t]=Qe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Fi(t);e.scope=t.scope;var n=[],r=Qe.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+ft(Qe.internal.getWidth(t)-2)+" "+ft(Qe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(ft(r.x1.x)+" "+ft(r.x1.y)+" m"),n.push(ft(r.x2.x)+" "+ft(r.x2.y)+" l"),n.push(ft(r.x4.x)+" "+ft(r.x4.y)+" m"),n.push(ft(r.x3.x)+" "+ft(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=Qe.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+ft(Qe.internal.getWidth(t))+" "+ft(Qe.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ft(Qe.internal.getWidth(t)-2)+" "+ft(Qe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ft(n.x1.x)+" "+ft(n.x1.y)+" m"),r.push(ft(n.x2.x)+" "+ft(n.x2.y)+" l"),r.push(ft(n.x4.x)+" "+ft(n.x4.y)+" m"),r.push(ft(n.x3.x)+" "+ft(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ft(Qe.internal.getWidth(t))+" "+ft(Qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Qe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Qe.internal.getWidth(t),n=Qe.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Qe.internal.getWidth=function(t){var e=0;return Tt(t)==="object"&&(e=t2(t.Rect[2])),e},Qe.internal.getHeight=function(t){var e=0;return Tt(t)==="object"&&(e=t2(t.Rect[3])),e};var Nj=nn.addField=function(t){if(Sj(this,t),!(t instanceof Ai))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};nn.AcroFormChoiceField=qa,nn.AcroFormListBox=Wa,nn.AcroFormComboBox=Ha,nn.AcroFormEditBox=Ou,nn.AcroFormButton=An,nn.AcroFormPushButton=Du,nn.AcroFormRadioButton=Va,nn.AcroFormCheckBox=Fu,nn.AcroFormTextField=sa,nn.AcroFormPasswordField=Mu,nn.AcroFormAppearance=Qe,nn.AcroForm={ChoiceField:qa,ListBox:Wa,ComboBox:Ha,EditBox:Ou,Button:An,PushButton:Du,RadioButton:Va,CheckBox:Fu,TextField:sa,PasswordField:Mu,Appearance:Qe},it.AcroForm={ChoiceField:qa,ListBox:Wa,ComboBox:Ha,EditBox:Ou,Button:An,PushButton:Du,RadioButton:Va,CheckBox:Fu,TextField:sa,PasswordField:Mu,Appearance:Qe};var kj=it.AcroForm;function Fw(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(R,A){var V,K,re,W,X,G=e;if((A=A||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(E(R))for(X in n)for(re=n[X],V=0;V<re.length;V+=1){for(W=!0,K=0;K<re[V].length;K+=1)if(re[V][K]!==void 0&&re[V][K]!==R[K]){W=!1;break}if(W===!0){G=X;break}}else for(X in n)for(re=n[X],V=0;V<re.length;V+=1){for(W=!0,K=0;K<re[V].length;K+=1)if(re[V][K]!==void 0&&re[V][K]!==R.charCodeAt(K)){W=!1;break}if(W===!0){G=X;break}}return G===e&&A!==e&&(G=A),G},i=function R(A){for(var V=this.internal.write,K=this.internal.putStream,re=(0,this.internal.getFilters)();re.indexOf("FlateEncode")!==-1;)re.splice(re.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:A.width}),W.push({key:"Height",value:A.height}),A.colorSpace===j.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===j.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var X="",G=0,U=A.transparency.length;G<U;G++)X+=A.transparency[G]+" "+A.transparency[G]+" ";W.push({key:"Mask",value:"["+X+"]"})}A.sMask!==void 0&&W.push({key:"SMask",value:A.objectId+1+" 0 R"});var ae=A.filter!==void 0?["/"+A.filter]:void 0;if(K({data:A.data,additionalKeyValues:W,alreadyAppliedFilters:ae,objectId:A.objectId}),V("endobj"),"sMask"in A&&A.sMask!==void 0){var pe="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,T={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:pe,data:A.sMask};"filter"in A&&(T.filter=A.filter),R.call(this,T)}if(A.colorSpace===j.INDEXED){var $=this.internal.newObject();K({data:I(new Uint8Array(A.palette)),objectId:$}),V("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var A in R)i.call(this,R[A])},a=function(){var R,A=this.internal.collections.addImage_images,V=this.internal.write;for(var K in A)V("/I"+(R=A[K]).index,R.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var R=this.internal.collections.addImage_images;return o.call(this),R},d=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(R){return typeof t["process"+R.toUpperCase()]=="function"},m=function(R){return Tt(R)==="object"&&R.nodeType===1},v=function(R,A){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var V=""+R.getAttribute("src");if(V.indexOf("data:image/")===0)return Ru(unescape(V).split("base64,").pop());var K=t.loadFile(V,!0);if(K!==void 0)return K}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var re;switch(A){case"PNG":re="image/png";break;case"WEBP":re="image/webp";break;case"JPEG":case"JPG":default:re="image/jpeg"}return Ru(R.toDataURL(re,1).split("base64,").pop())}},p=function(R){var A=this.internal.collections.addImage_images;if(A){for(var V in A)if(R===A[V].alias)return A[V]}},S=function(R,A,V){return R||A||(R=-96,A=-96),R<0&&(R=-1*V.width*72/R/this.internal.scaleFactor),A<0&&(A=-1*V.height*72/A/this.internal.scaleFactor),R===0&&(R=A*V.width/V.height),A===0&&(A=R*V.height/V.width),[R,A]},_=function(R,A,V,K,re,W){var X=S.call(this,V,K,re),G=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,ae=l.call(this);if(V=X[0],K=X[1],ae[re.index]=re,W){W*=Math.PI/180;var pe=Math.cos(W),T=Math.sin(W),$=function(ne){return ne.toFixed(4)},J=[$(pe),$(T),$(-1*T),$(pe),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,G(R),U(A+K),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([G(V),"0","0",G(K),"0","0","cm"].join(" "))):this.internal.write([G(V),"0","0",G(K),G(R),U(A+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+re.index+" Do"),this.internal.write("Q")},j=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},f=t.__addimage__.sHashCode=function(R){var A,V,K=0;if(typeof R=="string")for(V=R.length,A=0;A<V;A++)K=(K<<5)-K+R.charCodeAt(A),K|=0;else if(E(R))for(V=R.byteLength/2,A=0;A<V;A++)K=(K<<5)-K+R[A],K|=0;return K},w=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var A=!0;return R.length===0&&(A=!1),R.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(A=!1),A},N=t.__addimage__.extractImageFromDataUrl=function(R){var A=(R=R||"").split("base64,"),V=null;if(A.length===2){var K=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(K)&&(V={mimeType:K[1],charset:K[2],data:A[1]})}return V},D=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return D()&&R instanceof ArrayBuffer};var E=t.__addimage__.isArrayBufferView=function(R){return D()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},L=t.__addimage__.binaryStringToUint8Array=function(R){for(var A=R.length,V=new Uint8Array(A),K=0;K<A;K++)V[K]=R.charCodeAt(K);return V},I=t.__addimage__.arrayBufferToBinaryString=function(R){for(var A="",V=E(R)?R:new Uint8Array(R),K=0;K<V.length;K+=8192)A+=String.fromCharCode.apply(null,V.subarray(K,K+8192));return A};t.addImage=function(){var R,A,V,K,re,W,X,G,U;if(typeof arguments[1]=="number"?(A=e,V=arguments[1],K=arguments[2],re=arguments[3],W=arguments[4],X=arguments[5],G=arguments[6],U=arguments[7]):(A=arguments[1],V=arguments[2],K=arguments[3],re=arguments[4],W=arguments[5],X=arguments[6],G=arguments[7],U=arguments[8]),Tt(R=arguments[0])==="object"&&!m(R)&&"imageData"in R){var ae=R;R=ae.imageData,A=ae.format||A||e,V=ae.x||V||0,K=ae.y||K||0,re=ae.w||ae.width||re,W=ae.h||ae.height||W,X=ae.alias||X,G=ae.compression||G,U=ae.rotation||ae.angle||U}var pe=this.internal.getFilters();if(G===void 0&&pe.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(V)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var T=Y.call(this,R,A,X,G);return _.call(this,V,K,re,W,T,U),this};var Y=function(R,A,V,K){var re,W,X;if(typeof R=="string"&&r(R)===e){R=unescape(R);var G=ee(R,!1);(G!==""||(G=t.loadFile(R,!0))!==void 0)&&(R=G)}if(m(R)&&(R=v(R,A)),A=r(R,A),!g(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((X=V)==null||X.length===0)&&(V=function(U){return typeof U=="string"||E(U)?f(U):E(U.data)?f(U.data):null}(R)),(re=p.call(this,V))||(D()&&(R instanceof Uint8Array||A==="RGBA"||(W=R,R=L(R))),re=this["process"+A.toUpperCase()](R,d.call(this),V,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in t.image_compression?U:x.NONE}(K),W)),!re)throw new Error("An unknown error occurred whilst processing the image.");return re},ee=t.__addimage__.convertBase64ToBinaryString=function(R,A){var V;A=typeof A!="boolean"||A;var K,re="";if(typeof R=="string"){K=(V=N(R))!==null?V.data:R;try{re=Ru(K)}catch(W){if(A)throw w(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return re};t.getImageProperties=function(R){var A,V,K="";if(m(R)&&(R=v(R)),typeof R=="string"&&r(R)===e&&((K=ee(R,!1))===""&&(K=t.loadFile(R)||""),R=K),V=r(R),!g(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!D()||R instanceof Uint8Array||(R=L(R)),!(A=this["process"+V.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=V,A}})(it.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};it.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,g=!1,m=0;m<d.length&&!g;m++)switch((r=d[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var v=0;v<d.length;v++){r=d[v];var p=this.internal.pdfEscape,S=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(_.objId),f=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+p(x(r.contents))+")",s+=" /Popup "+j.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(x(f))+") >>",_.content=s;var w=_.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+w,r.open&&(s+=" /Open true"),s+=" >>",j.content=s,this.internal.write(_.objId,"0 R",j.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(S(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var D=this.annotations._nameMap[r.options.name];r.options.pageNumber=D.page,r.options.top=D.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(S(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var E=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+E+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:d(r),w:l(n+i),h:d(r+s)},options:a,type:"link"})},t.textWithLink=function(n,r,i,s){var a,o,l=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var g=this.splitTextToSize(n,o).length;a=Math.ceil(d*g)}else o=l,a=d;return this.text(n,r,i,s),i+=.2*d,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-d,o,a,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(it.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},o=t.__arabicParser__.isArabicEndLetter=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(_){return a(_)&&i.indexOf(_.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=3};var g=t.__arabicParser__.arabicLetterHasMedialForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(_){var j=0,x=n,f="",w=0;for(j=0;j<_.length;j+=1)x[_.charCodeAt(j)]!==void 0?(w++,typeof(x=x[_.charCodeAt(j)])=="number"&&(f+=String.fromCharCode(x),x=n,w=0),j===_.length-1&&(x=n,f+=_.charAt(j-(w-1)),j-=w-1,w=0)):(x=n,f+=_.charAt(j-w),j-=w,w=0);return f};t.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(_,j,x){return a(_)?s(_)===!1?-1:!d(_)||!a(j)&&!a(x)||!a(x)&&o(j)||o(_)&&!a(j)||o(_)&&l(j)||o(_)&&o(j)?0:g(_)&&a(j)&&!o(j)&&a(x)&&d(x)?3:o(_)||!a(x)?1:2:-1},p=function(_){var j=0,x=0,f=0,w="",N="",D="",E=(_=_||"").split("\\s+"),L=[];for(j=0;j<E.length;j+=1){for(L.push(""),x=0;x<E[j].length;x+=1)w=E[j][x],N=E[j][x-1],D=E[j][x+1],a(w)?(f=v(w,N,D),L[j]+=f!==-1?String.fromCharCode(e[w.charCodeAt(0)][f]):w):L[j]+=w;L[j]=m(L[j])}return L.join(" ")},S=t.__arabicParser__.processArabic=t.processArabic=function(){var _,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(j)){var f=0;for(x=[],f=0;f<j.length;f+=1)Array.isArray(j[f])?x.push([p(j[f][0]),j[f][1],j[f][2]]):x.push([p(j[f])]);_=x}else _=p(j);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};t.events.push(["preProcessText",S])}(it.API),it.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(it.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(_){v=_}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(_){S=_}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,d){r.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),v=d.scaleFactor||this.internal.scaleFactor,p=0,S=0,_=0,j=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=d.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(w,N){return w.concat(j.splitTextToSize(N,x))},[])):l=Array.isArray(l)?l:[l];for(var f=0;f<l.length;f++)p<(_=this.getStringUnitWidth(l[f],{font:m})*g)&&(p=_);return p!==0&&(S=l.length),{w:p/=v,h:Math.max((S*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===l.lineNumber?(l.x=(d.x||0)+(d.width||0),l.y=d.y||0):d.y+d.height+l.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=m.top,p&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=d.y+d.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-g,l.y+g,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+g,{align:"center",baseline:"top",maxWidth:l.width-g-g}):this.text(l.text,l.x+g,l.y+g,{align:"left",baseline:"top",maxWidth:l.width-g-g})),this.internal.__cell__.lastCell=l,this};t.table=function(l,d,g,m,v){if(r.call(this),!g)throw new Error("No data for PDF table.");var p,S,_,j,x=[],f=[],w=[],N={},D={},E=[],L=[],I=(v=v||{}).autoSize||!1,Y=v.printHeaders!==!1,ee=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,R=v.margins||Object.assign({width:this.getPageWidth()},e),A=typeof v.padding=="number"?v.padding:3,V=v.headerBackgroundColor||"#c8c8c8",K=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=Y,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=ee,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=K,this.setFontSize(ee),m==null)f=x=Object.keys(g[0]),w=x.map(function(){return"left"});else if(Array.isArray(m)&&Tt(m[0])==="object")for(x=m.map(function(ae){return ae.name}),f=m.map(function(ae){return ae.prompt||ae.name||""}),w=m.map(function(ae){return ae.align||"left"}),p=0;p<m.length;p+=1)D[m[p].name]=m[p].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(f=x=m,w=x.map(function(){return"left"}));if(I||Array.isArray(m)&&typeof m[0]=="string")for(p=0;p<x.length;p+=1){for(N[j=x[p]]=g.map(function(ae){return ae[j]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(f[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=N[j],this.setFont(void 0,"normal"),_=0;_<S.length;_+=1)E.push(this.getTextDimensions(S[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[j]=Math.max.apply(null,E)+A+A,E=[]}if(Y){var re={};for(p=0;p<x.length;p+=1)re[x[p]]={},re[x[p]].text=f[p],re[x[p]].align=w[p];var W=o.call(this,re,D);L=x.map(function(ae){return new s(l,d,D[ae],W,re[ae].text,void 0,re[ae].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var X=m.reduce(function(ae,pe){return ae[pe.name]=pe.align,ae},{});for(p=0;p<g.length;p+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:p,data:g[p]},this);var G=o.call(this,g[p],D);for(_=0;_<x.length;_+=1){var U=g[p][x[_]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:p,col:_,data:U},this),a.call(this,new s(l,d,D[x[_]],G,U,p+2,X[x[_]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=d,this};var o=function(l,d){var g=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(p){var S=l[p];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,d[p]-g-g)},this).map(function(p){return this.getLineHeightFactor()*p.length*m/v+g+g},this).reduce(function(p,S){return Math.max(p,S)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){g=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,v.push(g)),g.lineNumber=l;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,g),this.setTextColor(S)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(it.API);var Mw={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},zw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],o0=Fw(zw),Bw=[100,200,300,400,500,600,700,800,900],jj=Fw(Bw);function l0(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return Mw[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof o0[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function n2(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Aj={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},r2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function i2(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Pj(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Aj,n.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=l0(e[o])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){a=t[s.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+i2(s)+"' and default family '"+r+"'.");if(a=function(l,d){if(d[l])return d[l];var g=o0[l],m=g<=o0.normal?-1:1,v=n2(d,zw,g,m);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,a),a=function(l,d){if(d[l])return d[l];for(var g=Mw[l],m=0;m<g.length;++m)if(d[g[m]])return d[g[m]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,d){if(d[l])return d[l];if(l===400&&d[500])return d[500];if(l===500&&d[400])return d[400];var g=jj[l],m=n2(d,Bw,g,l<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+l);return m}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+i2(s)+"'.");return a}function s2(t){return t.trimLeft()}function Ej(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Cj(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Fd,a2,o2,Up=["times"];(function(t){var e,n,r,i,s,a,o,l,d,g=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new l,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new a,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new a,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,d=new g}]);var m=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=T;Object.defineProperty(this,"pdf",{get:function(){return $}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(ve){J=!!ve}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(ve){ne=!!ve}});var P=0;Object.defineProperty(this,"posX",{get:function(){return P},set:function(ve){isNaN(ve)||(P=ve)}});var H=0;Object.defineProperty(this,"posY",{get:function(){return H},set:function(ve){isNaN(ve)||(H=ve)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ve){var se;typeof ve=="number"?se=[ve,ve,ve,ve]:((se=new Array(4))[0]=ve[0],se[1]=ve.length>=2?ve[1]:se[0],se[2]=ve.length>=3?ve[2]:se[0],se[3]=ve.length>=4?ve[3]:se[1]),d.margin=se}});var Q=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Q},set:function(ve){Q=ve}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(ve){ie=ve}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(ve){be=ve}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ve){ve instanceof g&&(d=ve)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ve){d.path=ve}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(ve){_e=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var se;se=v(ve),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var se=v(ve);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var Ae=null;function ke(ve,se){if(Ae===null){var Ze=function(We){var Oe=[];return Object.keys(We).forEach(function(Me){We[Me].forEach(function(Be){var Pe=null;switch(Be){case"bold":Pe={family:Me,weight:"bold"};break;case"italic":Pe={family:Me,style:"italic"};break;case"bolditalic":Pe={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":Pe={family:Me}}Pe!==null&&(Pe.ref={name:Me,style:Be},Oe.push(Pe))})}),Oe}(ve.getFontList());Ae=function(We){for(var Oe={},Me=0;Me<We.length;++Me){var Be=l0(We[Me]),Pe=Be.family,Re=Be.stretch,He=Be.style,oe=Be.weight;Oe[Pe]=Oe[Pe]||{},Oe[Pe][Re]=Oe[Pe][Re]||{},Oe[Pe][Re][He]=Oe[Pe][Re][He]||{},Oe[Pe][Re][He][oe]=Be}return Oe}(Ze.concat(se))}return Ae}var Ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ke},set:function(ve){Ae=null,Ke=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var se;if(this.ctx.font=ve,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var Ze=se[1],We=(se[2],se[3]),Oe=se[4],Me=(se[5],se[6]),Be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Oe)[2];Oe=Math.floor(Be==="px"?parseFloat(Oe)*this.pdf.internal.scaleFactor:Be==="em"?parseFloat(Oe)*this.pdf.getFontSize():parseFloat(Oe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Oe);var Pe=function(Ee){var Ce,xe,Xe=[],mt=Ee.trim();if(mt==="")return Up;if(mt in r2)return[r2[mt]];for(;mt!=="";){switch(xe=null,Ce=(mt=s2(mt)).charAt(0)){case'"':case"'":xe=Ej(mt.substring(1),Ce);break;default:xe=Cj(mt)}if(xe===null||(Xe.push(xe[0]),(mt=s2(xe[1]))!==""&&mt.charAt(0)!==","))return Up;mt=mt.replace(/^,/,"")}return Xe}(Me);if(this.fontFaces){var Re=Pj(ke(this.pdf,this.fontFaces),Pe.map(function(Ee){return{family:Ee,stretch:"normal",weight:We,style:Ze}}));this.pdf.setFont(Re.ref.name,Re.ref.style)}else{var He="";(We==="bold"||parseInt(We,10)>=700||Ze==="bold")&&(He="bold"),Ze==="italic"&&(He+="italic"),He.length===0&&(He="normal");for(var oe="",C={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ge=0;ge<Pe.length;ge++){if(this.pdf.internal.getFont(Pe[ge],He,{noFallback:!0,disableWarning:!0})!==void 0){oe=Pe[ge];break}if(He==="bolditalic"&&this.pdf.internal.getFont(Pe[ge],"bold",{noFallback:!0,disableWarning:!0})!==void 0)oe=Pe[ge],He="bold";else if(this.pdf.internal.getFont(Pe[ge],"normal",{noFallback:!0,disableWarning:!0})!==void 0){oe=Pe[ge],He="normal";break}}if(oe===""){for(var je=0;je<Pe.length;je++)if(C[Pe[je]]){oe=C[Pe[je]];break}}oe=oe===""?"Times":oe,this.pdf.setFont(oe,He)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};m.prototype.setLineDash=function(T){this.lineDash=T},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){N.call(this,"fill",!1)},m.prototype.stroke=function(){N.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(T,$){if(isNaN(T)||isNaN($))throw Dt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new a(T,$));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new a(T,$)},m.prototype.closePath=function(){var T=new a(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&Tt(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){T=new a(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(T.x,T.y)},m.prototype.lineTo=function(T,$){if(isNaN(T)||isNaN($))throw Dt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new a(T,$));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},m.prototype.quadraticCurveTo=function(T,$,J,ne){if(isNaN(J)||isNaN(ne)||isNaN(T)||isNaN($))throw Dt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var P=this.ctx.transform.applyToPoint(new a(J,ne)),H=this.ctx.transform.applyToPoint(new a(T,$));this.path.push({type:"qct",x1:H.x,y1:H.y,x:P.x,y:P.y}),this.ctx.lastPoint=new a(P.x,P.y)},m.prototype.bezierCurveTo=function(T,$,J,ne,P,H){if(isNaN(P)||isNaN(H)||isNaN(T)||isNaN($)||isNaN(J)||isNaN(ne))throw Dt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Q=this.ctx.transform.applyToPoint(new a(P,H)),ie=this.ctx.transform.applyToPoint(new a(T,$)),be=this.ctx.transform.applyToPoint(new a(J,ne));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:be.x,y2:be.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(Q.x,Q.y)},m.prototype.arc=function(T,$,J,ne,P,H){if(isNaN(T)||isNaN($)||isNaN(J)||isNaN(ne)||isNaN(P))throw Dt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(H=!!H,!this.ctx.transform.isIdentity){var Q=this.ctx.transform.applyToPoint(new a(T,$));T=Q.x,$=Q.y;var ie=this.ctx.transform.applyToPoint(new a(0,J)),be=this.ctx.transform.applyToPoint(new a(0,0));J=Math.sqrt(Math.pow(ie.x-be.x,2)+Math.pow(ie.y-be.y,2))}Math.abs(P-ne)>=2*Math.PI&&(ne=0,P=2*Math.PI),this.path.push({type:"arc",x:T,y:$,radius:J,startAngle:ne,endAngle:P,counterclockwise:H})},m.prototype.arcTo=function(T,$,J,ne,P){throw new Error("arcTo not implemented.")},m.prototype.rect=function(T,$,J,ne){if(isNaN(T)||isNaN($)||isNaN(J)||isNaN(ne))throw Dt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,$),this.lineTo(T+J,$),this.lineTo(T+J,$+ne),this.lineTo(T,$+ne),this.lineTo(T,$),this.lineTo(T+J,$),this.lineTo(T,$)},m.prototype.fillRect=function(T,$,J,ne){if(isNaN(T)||isNaN($)||isNaN(J)||isNaN(ne))throw Dt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var P={};this.lineCap!=="butt"&&(P.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(P.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,$,J,ne),this.fill(),P.hasOwnProperty("lineCap")&&(this.lineCap=P.lineCap),P.hasOwnProperty("lineJoin")&&(this.lineJoin=P.lineJoin)}},m.prototype.strokeRect=function(T,$,J,ne){if(isNaN(T)||isNaN($)||isNaN(J)||isNaN(ne))throw Dt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(T,$,J,ne),this.stroke())},m.prototype.clearRect=function(T,$,J,ne){if(isNaN(T)||isNaN($)||isNaN(J)||isNaN(ne))throw Dt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,$,J,ne))},m.prototype.save=function(T){T=typeof T!="boolean"||T;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage($),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},m.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage($),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(T){var $,J,ne,P;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))$=0,J=0,ne=0,P=0;else{var H=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(H!==null)$=parseInt(H[1]),J=parseInt(H[2]),ne=parseInt(H[3]),P=1;else if((H=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)$=parseInt(H[1]),J=parseInt(H[2]),ne=parseInt(H[3]),P=parseFloat(H[4]);else{if(P=1,typeof T=="string"&&T.charAt(0)!=="#"){var Q=new Tw(T);T=Q.ok?Q.toHex():"#000000"}T.length===4?($=T.substring(1,2),$+=$,J=T.substring(2,3),J+=J,ne=T.substring(3,4),ne+=ne):($=T.substring(1,3),J=T.substring(3,5),ne=T.substring(5,7)),$=parseInt($,16),J=parseInt(J,16),ne=parseInt(ne,16)}}return{r:$,g:J,b:ne,a:P,style:T}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(T,$,J,ne){if(isNaN($)||isNaN(J)||typeof T!="string")throw Dt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!p.call(this)){var P=G(this.ctx.transform.rotation),H=this.ctx.transform.scaleX;A.call(this,{text:T,x:$,y:J,scale:H,angle:P,align:this.textAlign,maxWidth:ne})}},m.prototype.strokeText=function(T,$,J,ne){if(isNaN($)||isNaN(J)||typeof T!="string")throw Dt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){ne=isNaN(ne)?void 0:ne;var P=G(this.ctx.transform.rotation),H=this.ctx.transform.scaleX;A.call(this,{text:T,x:$,y:J,scale:H,renderingMode:"stroke",angle:P,align:this.textAlign,maxWidth:ne})}},m.prototype.measureText=function(T){if(typeof T!="string")throw Dt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,J=this.pdf.internal.scaleFactor,ne=$.internal.getFontSize(),P=$.getStringUnitWidth(T)*ne/$.internal.scaleFactor,H=function(Q){var ie=(Q=Q||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this};return new H({width:P*=Math.round(96*J/72*1e4)/1e4})},m.prototype.scale=function(T,$){if(isNaN(T)||isNaN($))throw Dt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(T,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},m.prototype.rotate=function(T){if(isNaN(T))throw Dt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new l(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply($)},m.prototype.translate=function(T,$){if(isNaN(T)||isNaN($))throw Dt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,T,$);this.ctx.transform=this.ctx.transform.multiply(J)},m.prototype.transform=function(T,$,J,ne,P,H){if(isNaN(T)||isNaN($)||isNaN(J)||isNaN(ne)||isNaN(P)||isNaN(H))throw Dt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Q=new l(T,$,J,ne,P,H);this.ctx.transform=this.ctx.transform.multiply(Q)},m.prototype.setTransform=function(T,$,J,ne,P,H){T=isNaN(T)?1:T,$=isNaN($)?0:$,J=isNaN(J)?0:J,ne=isNaN(ne)?1:ne,P=isNaN(P)?0:P,H=isNaN(H)?0:H,this.ctx.transform=new l(T,$,J,ne,P,H)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(T,$,J,ne,P,H,Q,ie,be){var _e=this.pdf.getImageProperties(T),Ae=1,ke=1,Ke=1,ve=1;ne!==void 0&&ie!==void 0&&(Ke=ie/ne,ve=be/P,Ae=_e.width/ne*ie/ne,ke=_e.height/P*be/P),H===void 0&&(H=$,Q=J,$=0,J=0),ne!==void 0&&ie===void 0&&(ie=ne,be=P),ne===void 0&&ie===void 0&&(ie=_e.width,be=_e.height);for(var se,Ze=this.ctx.transform.decompose(),We=G(Ze.rotate.shx),Oe=new l,Me=(Oe=(Oe=(Oe=Oe.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new o(H-$*Ke,Q-J*ve,ne*Ae,P*ke)),Be=j.call(this,Me),Pe=[],Re=0;Re<Be.length;Re+=1)Pe.indexOf(Be[Re])===-1&&Pe.push(Be[Re]);if(w(Pe),this.autoPaging)for(var He=Pe[0],oe=Pe[Pe.length-1],C=He;C<oe+1;C++){this.pdf.setPage(C);var ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],je=C===1?this.posY+this.margin[0]:this.margin[0],Ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ce=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xe=C===1?0:Ee+(C-2)*Ce;if(this.ctx.clip_path.length!==0){var Xe=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=f(se,this.posX+this.margin[3],-xe+je+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=Xe}var mt=JSON.parse(JSON.stringify(Me));mt=f([mt],this.posX+this.margin[3],-xe+je+this.ctx.prevPageLastElemOffset)[0];var Gt=(C>He||C<oe)&&_.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ge,Ce,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,We),Gt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,We)};var j=function(T,$,J){var ne=[];$=$||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var P=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":ne.push(Math.floor((T.y+P)/J)+1);break;case"arc":ne.push(Math.floor((T.y+P-T.radius)/J)+1),ne.push(Math.floor((T.y+P+T.radius)/J)+1);break;case"qct":var H=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);ne.push(Math.floor((H.y+P)/J)+1),ne.push(Math.floor((H.y+H.h+P)/J)+1);break;case"bct":var Q=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);ne.push(Math.floor((Q.y+P)/J)+1),ne.push(Math.floor((Q.y+Q.h+P)/J)+1);break;case"rect":ne.push(Math.floor((T.y+P)/J)+1),ne.push(Math.floor((T.y+T.h+P)/J)+1)}for(var ie=0;ie<ne.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<ne[ie];)x.call(this);return ne},x=function(){var T=this.fillStyle,$=this.strokeStyle,J=this.font,ne=this.lineCap,P=this.lineWidth,H=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=$,this.font=J,this.lineCap=ne,this.lineWidth=P,this.lineJoin=H},f=function(T,$,J){for(var ne=0;ne<T.length;ne++)switch(T[ne].type){case"bct":T[ne].x2+=$,T[ne].y2+=J;case"qct":T[ne].x1+=$,T[ne].y1+=J;case"mt":case"lt":case"arc":default:T[ne].x+=$,T[ne].y+=J}return T},w=function(T){return T.sort(function($,J){return $-J})},N=function(T,$){for(var J,ne,P=this.fillStyle,H=this.strokeStyle,Q=this.lineCap,ie=this.lineWidth,be=Math.abs(ie*this.ctx.transform.scaleX),_e=this.lineJoin,Ae=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),Ke=[],ve=0;ve<ke.length;ve++)if(ke[ve].x!==void 0)for(var se=j.call(this,ke[ve]),Ze=0;Ze<se.length;Ze+=1)Ke.indexOf(se[Ze])===-1&&Ke.push(se[Ze]);for(var We=0;We<Ke.length;We++)for(;this.pdf.internal.getNumberOfPages()<Ke[We];)x.call(this);if(w(Ke),this.autoPaging)for(var Oe=Ke[0],Me=Ke[Ke.length-1],Be=Oe;Be<Me+1;Be++){this.pdf.setPage(Be),this.fillStyle=P,this.strokeStyle=H,this.lineCap=Q,this.lineWidth=be,this.lineJoin=_e;var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Re=Be===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],oe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],C=Be===1?0:He+(Be-2)*oe;if(this.ctx.clip_path.length!==0){var ge=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=f(J,this.posX+this.margin[3],-C+Re+this.ctx.prevPageLastElemOffset),D.call(this,T,!0),this.path=ge}if(ne=JSON.parse(JSON.stringify(Ae)),this.path=f(ne,this.posX+this.margin[3],-C+Re+this.ctx.prevPageLastElemOffset),$===!1||Be===0){var je=(Be>Oe||Be<Me)&&_.call(this);je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,oe,null).clip().discardPath()),D.call(this,T,$),je&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=be,D.call(this,T,$),this.lineWidth=ie;this.path=Ae},D=function(T,$){if((T!=="stroke"||$||!S.call(this))&&(T==="stroke"||$||!p.call(this))){for(var J,ne,P=[],H=this.path,Q=0;Q<H.length;Q++){var ie=H[Q];switch(ie.type){case"begin":P.push({begin:!0});break;case"close":P.push({close:!0});break;case"mt":P.push({start:ie,deltas:[],abs:[]});break;case"lt":var be=P.length;if(H[Q-1]&&!isNaN(H[Q-1].x)&&(J=[ie.x-H[Q-1].x,ie.y-H[Q-1].y],be>0)){for(;be>=0;be--)if(P[be-1].close!==!0&&P[be-1].begin!==!0){P[be-1].deltas.push(J),P[be-1].abs.push(ie);break}}break;case"bct":J=[ie.x1-H[Q-1].x,ie.y1-H[Q-1].y,ie.x2-H[Q-1].x,ie.y2-H[Q-1].y,ie.x-H[Q-1].x,ie.y-H[Q-1].y],P[P.length-1].deltas.push(J);break;case"qct":var _e=H[Q-1].x+2/3*(ie.x1-H[Q-1].x),Ae=H[Q-1].y+2/3*(ie.y1-H[Q-1].y),ke=ie.x+2/3*(ie.x1-ie.x),Ke=ie.y+2/3*(ie.y1-ie.y),ve=ie.x,se=ie.y;J=[_e-H[Q-1].x,Ae-H[Q-1].y,ke-H[Q-1].x,Ke-H[Q-1].y,ve-H[Q-1].x,se-H[Q-1].y],P[P.length-1].deltas.push(J);break;case"arc":P.push({deltas:[],abs:[],arc:!0}),Array.isArray(P[P.length-1].abs)&&P[P.length-1].abs.push(ie)}}ne=$?null:T==="stroke"?"stroke":"fill";for(var Ze=!1,We=0;We<P.length;We++)if(P[We].arc)for(var Oe=P[We].abs,Me=0;Me<Oe.length;Me++){var Be=Oe[Me];Be.type==="arc"?I.call(this,Be.x,Be.y,Be.radius,Be.startAngle,Be.endAngle,Be.counterclockwise,void 0,$,!Ze):V.call(this,Be.x,Be.y),Ze=!0}else if(P[We].close===!0)this.pdf.internal.out("h"),Ze=!1;else if(P[We].begin!==!0){var Pe=P[We].start.x,Re=P[We].start.y;K.call(this,P[We].deltas,Pe,Re),Ze=!0}ne&&Y.call(this,ne),$&&ee.call(this)}},E=function(T){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-J;case"top":return T+$-J;case"hanging":return T+$-2*J;case"middle":return T+$/2-J;case"ideographic":return T;case"alphabetic":default:return T}},L=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function($,J){this.colorStops.push([$,J])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(T,$,J,ne,P,H,Q,ie,be){for(var _e=W.call(this,J,ne,P,H),Ae=0;Ae<_e.length;Ae++){var ke=_e[Ae];Ae===0&&(be?R.call(this,ke.x1+T,ke.y1+$):V.call(this,ke.x1+T,ke.y1+$)),re.call(this,T,$,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}ie?ee.call(this):Y.call(this,Q)},Y=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ee=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(T,$){this.pdf.internal.out(n(T)+" "+r($)+" m")},A=function(T){var $;switch(T.align){case"right":case"end":$="right";break;case"center":$="center";break;case"left":case"start":default:$="left"}var J=this.pdf.getTextDimensions(T.text),ne=E.call(this,T.y),P=L.call(this,ne)-J.h,H=this.ctx.transform.applyToPoint(new a(T.x,ne)),Q=this.ctx.transform.decompose(),ie=new l;ie=(ie=(ie=ie.multiply(Q.translate)).multiply(Q.skew)).multiply(Q.scale);for(var be,_e,Ae,ke=this.ctx.transform.applyToRectangle(new o(T.x,ne,J.w,J.h)),Ke=ie.applyToRectangle(new o(T.x,P,J.w,J.h)),ve=j.call(this,Ke),se=[],Ze=0;Ze<ve.length;Ze+=1)se.indexOf(ve[Ze])===-1&&se.push(ve[Ze]);if(w(se),this.autoPaging)for(var We=se[0],Oe=se[se.length-1],Me=We;Me<Oe+1;Me++){this.pdf.setPage(Me);var Be=Me===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[2],He=Re-this.margin[0],oe=this.pdf.internal.pageSize.width-this.margin[1],C=oe-this.margin[3],ge=Me===1?0:Pe+(Me-2)*He;if(this.ctx.clip_path.length!==0){var je=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=f(be,this.posX+this.margin[3],-1*ge+Be),D.call(this,"fill",!0),this.path=je}var Ee=f([JSON.parse(JSON.stringify(Ke))],this.posX+this.margin[3],-ge+Be+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*T.scale),Ae=this.lineWidth,this.lineWidth=Ae*T.scale);var Ce=this.autoPaging!=="text";if(Ce||Ee.y+Ee.h<=Re){if(Ce||Ee.y>=Be&&Ee.x<=oe){var xe=Ce?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||oe-Ee.x)[0],Xe=f([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-ge+Be+this.ctx.prevPageLastElemOffset)[0],mt=Ce&&(Me>We||Me<Oe)&&_.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],C,He,null).clip().discardPath()),this.pdf.text(xe,Xe.x,Xe.y,{angle:T.angle,align:$,renderingMode:T.renderingMode}),mt&&this.pdf.restoreGraphicsState()}}else Ee.y<Re&&(this.ctx.prevPageLastElemOffset+=Re-Ee.y);T.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Ae)}else T.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*T.scale),Ae=this.lineWidth,this.lineWidth=Ae*T.scale),this.pdf.text(T.text,H.x+this.posX,H.y+this.posY,{angle:T.angle,align:$,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Ae)},V=function(T,$,J,ne){J=J||0,ne=ne||0,this.pdf.internal.out(n(T+J)+" "+r($+ne)+" l")},K=function(T,$,J){return this.pdf.lines(T,$,J,null,null)},re=function(T,$,J,ne,P,H,Q,ie){this.pdf.internal.out([e(i(J+T)),e(s(ne+$)),e(i(P+T)),e(s(H+$)),e(i(Q+T)),e(s(ie+$)),"c"].join(" "))},W=function(T,$,J,ne){for(var P=2*Math.PI,H=Math.PI/2;$>J;)$-=P;var Q=Math.abs(J-$);Q<P&&ne&&(Q=P-Q);for(var ie=[],be=ne?-1:1,_e=$;Q>1e-5;){var Ae=_e+be*Math.min(Q,H);ie.push(X.call(this,T,_e,Ae)),Q-=Math.abs(Ae-_e),_e=Ae}return ie},X=function(T,$,J){var ne=(J-$)/2,P=T*Math.cos(ne),H=T*Math.sin(ne),Q=P,ie=-H,be=Q*Q+ie*ie,_e=be+Q*P+ie*H,Ae=4/3*(Math.sqrt(2*be*_e)-_e)/(Q*H-ie*P),ke=Q-Ae*ie,Ke=ie+Ae*Q,ve=ke,se=-Ke,Ze=ne+$,We=Math.cos(Ze),Oe=Math.sin(Ze);return{x1:T*Math.cos($),y1:T*Math.sin($),x2:ke*We-Ke*Oe,y2:ke*Oe+Ke*We,x3:ve*We-se*Oe,y3:ve*Oe+se*We,x4:T*Math.cos(J),y4:T*Math.sin(J)}},G=function(T){return 180*T/Math.PI},U=function(T,$,J,ne,P,H){var Q=T+.5*(J-T),ie=$+.5*(ne-$),be=P+.5*(J-P),_e=H+.5*(ne-H),Ae=Math.min(T,P,Q,be),ke=Math.max(T,P,Q,be),Ke=Math.min($,H,ie,_e),ve=Math.max($,H,ie,_e);return new o(Ae,Ke,ke-Ae,ve-Ke)},ae=function(T,$,J,ne,P,H,Q,ie){var be,_e,Ae,ke,Ke,ve,se,Ze,We,Oe,Me,Be,Pe,Re,He=J-T,oe=ne-$,C=P-J,ge=H-ne,je=Q-P,Ee=ie-H;for(_e=0;_e<41;_e++)We=(se=(Ae=T+(be=_e/40)*He)+be*((Ke=J+be*C)-Ae))+be*(Ke+be*(P+be*je-Ke)-se),Oe=(Ze=(ke=$+be*oe)+be*((ve=ne+be*ge)-ke))+be*(ve+be*(H+be*Ee-ve)-Ze),_e==0?(Me=We,Be=Oe,Pe=We,Re=Oe):(Me=Math.min(Me,We),Be=Math.min(Be,Oe),Pe=Math.max(Pe,We),Re=Math.max(Re,Oe));return new o(Math.round(Me),Math.round(Be),Math.round(Pe-Me),Math.round(Re-Be))},pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,$,J=(T=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:$}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(it.API),function(t){var e=function(s){var a,o,l,d,g,m,v,p,S,_;for(o=[],l=0,d=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;d>l;l+=4)(g=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(m=(g=((g=((g=((g=(g-(_=g%85))/85)-(S=g%85))/85)-(p=g%85))/85)-(v=g%85))/85)%85,o.push(m+33,v+33,p+33,S+33,_+33)):o.push(122);return function(j,x){for(var f=x;f>0;f--)j.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},n=function(s){var a,o,l,d,g,m=String,v="length",p=255,S="charCodeAt",_="slice",j="replace";for(s[_](-2),s=s[_](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),l=[],d=0,g=(s+=a="uuuuu"[_](s[v]%5||5))[v];g>d;d+=5)o=52200625*(s[S](d)-33)+614125*(s[S](d+1)-33)+7225*(s[S](d+2)-33)+85*(s[S](d+3)-33)+(s[S](d+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(x,f){for(var w=f;w>0;w--)x.pop()}(l,a[v]),m.fromCharCode.apply(m,l)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=n0(a)).reduce(function(l,d){return l+String.fromCharCode(d)},"")};t.processDataByFilters=function(s,a){var o=0,l=s||"",d=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:d.reverse().join(" ")}}}(it.API),function(t){t.loadFile=function(e,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,d,g){var m=new XMLHttpRequest,v=0,p=function(S){var _=S.length,j=[],x=String.fromCharCode;for(v=0;v<_;v+=1)j.push(x(255&S.charCodeAt(v)));return j.join("")};if(m.open("GET",l,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?g(p(this.responseText)):g(void 0)}),m.send(null),d&&m.status===200)return p(m.responseText)}(i,s,a)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(it.API),function(t){function e(){return(ut.html2canvas?Promise.resolve(ut.html2canvas):Qm(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(ut.DOMPurify?Promise.resolve(ut.DOMPurify):Qm(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=Tt(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var l=document.createElement(a);for(var d in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[d]=o.style[d];return l},s=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),d=a.convert(Promise.resolve(),l);return d=(d=d.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(d,g){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),v=d.firstChild;v;v=v.nextSibling)g!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||m.appendChild(l(v,g));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,d=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=d,d)for(var v=0;v<d.length;++v){var p=d[v],S=p.src.find(function(_){return _.format==="truetype"});S&&l.addFont(S.url,p.ref.name,p.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),o(this.prop.container,m)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(l,d){return Math.floor(l*d/72*96)}return this.then(function(){(a=a||it.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,l,d){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,l,d){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(d,g){return l.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(m){return l.updateProgress(null,d),m}).then(d,g).then(function(m){return l.updateProgress(1),m})})},s.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),g=l.call(d,a,o);return s.convert(g,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,it.getPageSize=function(a,o,l){if(Tt(a)==="object"){var d=a;a=d.orientation,o=d.unit||o,l=d.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var g,m=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+o}var p,S=0,_=0;if(v.hasOwnProperty(m))S=v[m][1]/g,_=v[m][0]/g;else try{S=l[1],_=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",_>S&&(p=_,_=S,S=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",S>_&&(p=_,_=S,S=p)}return{width:_,height:S,unit:o,k:g,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(l0):null;var l=new s(o);return o.worker?l:l.from(a).doCallback()}}(it.API),it.API.addJS=function(t){return o2=t,this.internal.events.subscribe("postPutResources",function(){Fd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Fd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),a2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+o2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Fd!==void 0&&a2!==void 0&&this.internal.out("/Names <</JavaScript "+Fd+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(s=0;s<d;s++){var m=n.internal.newObject();g.push(m);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<g.length;s++)n.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(it.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,a,o){var l,d=this.decode.DCT_DECODE,g=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(m){for(var v,p=256*m.charCodeAt(4)+m.charCodeAt(5),S=m.length,_={width:0,height:0,numcomponents:1},j=4;j<S;j+=2){if(j+=p,e.indexOf(m.charCodeAt(j+1))!==-1){v=256*m.charCodeAt(j+5)+m.charCodeAt(j+6),_={width:256*m.charCodeAt(j+7)+m.charCodeAt(j+8),height:v,numcomponents:m.charCodeAt(j+9)};break}p=256*m.charCodeAt(j+2)+m.charCodeAt(j+3)}return _}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}g={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:d,index:r,alias:i}}return g}}(it.API);var qo,Md,l2,u2,c2,Tj=function(){var t,e,n;function r(s){var a,o,l,d,g,m,v,p,S,_,j,x,f,w;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),S=(function(){var N,D;for(D=[],N=0;N<4;++N)D.push(String.fromCharCode(this.data[this.pos++]));return D}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),d=this.readUInt16()||100,m.delay=1e3*g/d,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(S==="fdAT"&&(this.pos+=4,a-=4),s=(m!=null?m.data:void 0)||this.imgData,x=0;0<=a?x<a:x>a;0<=a?++x:--x)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((_=l-this.transparency.indexed.length)>0)for(f=0;0<=_?f<_:f>_;0<=_?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":v=(j=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,j.slice(0,v)),this.text[p]=String.fromCharCode.apply(String,j.slice(v+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function g(m,v,p,S){var _,j,x,f,w,N,D,E,L,I,Y,ee,R,A,V,K,re,W,X,G,U,ae=Math.ceil((d.width-m)/p),pe=Math.ceil((d.height-v)/S),T=d.width==ae&&d.height==pe;for(A=a*ae,ee=T?o:new Uint8Array(A*pe),N=s.length,R=0,j=0;R<pe&&l<N;){switch(s[l++]){case 0:for(f=re=0;re<A;f=re+=1)ee[j++]=s[l++];break;case 1:for(f=W=0;W<A;f=W+=1)_=s[l++],w=f<a?0:ee[j-a],ee[j++]=(_+w)%256;break;case 2:for(f=X=0;X<A;f=X+=1)_=s[l++],x=(f-f%a)/a,V=R&&ee[(R-1)*A+x*a+f%a],ee[j++]=(V+_)%256;break;case 3:for(f=G=0;G<A;f=G+=1)_=s[l++],x=(f-f%a)/a,w=f<a?0:ee[j-a],V=R&&ee[(R-1)*A+x*a+f%a],ee[j++]=(_+Math.floor((w+V)/2))%256;break;case 4:for(f=U=0;U<A;f=U+=1)_=s[l++],x=(f-f%a)/a,w=f<a?0:ee[j-a],R===0?V=K=0:(V=ee[(R-1)*A+x*a+f%a],K=x&&ee[(R-1)*A+(x-1)*a+f%a]),D=w+V-K,E=Math.abs(D-w),I=Math.abs(D-V),Y=Math.abs(D-K),L=E<=I&&E<=Y?w:I<=Y?V:K,ee[j++]=(_+L)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!T){var $=((v+R*S)*d.width+m)*a,J=R*A;for(f=0;f<ae;f+=1){for(var ne=0;ne<a;ne+=1)o[$++]=ee[J++];$+=(p-1)*a}}R++}}return s=lj(s),d.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),o},r.prototype.decodePalette=function(){var s,a,o,l,d,g,m,v,p;for(o=this.palette,g=this.transparency.indexed||[],d=new Uint8Array((g.length||0)+o.length),l=0,s=0,a=m=0,v=o.length;m<v;a=m+=3)d[l++]=o[a],d[l++]=o[a+1],d[l++]=o[a+2],d[l++]=(p=g[s++])!=null?p:255;return d},r.prototype.copyToImageData=function(s,a){var o,l,d,g,m,v,p,S,_,j,x;if(l=this.colors,_=null,o=this.hasAlphaChannel,this.palette.length&&(_=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),l=4,o=!0),S=(d=s.data||s).length,m=_||a,g=v=0,l===1)for(;g<S;)p=_?4*a[g/4]:v,j=m[p++],d[g++]=j,d[g++]=j,d[g++]=j,d[g++]=o?m[p++]:255,v=p;else for(;g<S;)p=_?4*a[g/4]:v,d[g++]=m[p++],d[g++]=m[p++],d[g++]=m[p++],d[g++]=o?m[p++]:255,v=p},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(ut)==="[object Window]"){try{e=ut.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,o,l,d,g,m,v,p;if(this.animation){for(p=[],o=g=0,m=(v=this.animation.frames).length;g<m;o=++g)a=v[o],l=s.createImageData(a.width,a.height),d=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,d),a.imageData=l,p.push(a.image=t(l));return p}},r.prototype.renderFrame=function(s,a){var o,l,d;return o=(l=this.animation.frames)[a],d=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var a,o,l,d,g,m,v=this;return o=0,m=this.animation,d=m.numFrames,l=m.frames,g=m.numPlays,(a=function(){var p,S;if(p=o++%d,S=l[p],v.renderFrame(s,p),d>1&&o/d<g)return v.animation._timeout=setTimeout(a,S.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Lj(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<(7&i)+1;t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var d=!0,g=[],m=0,v=null,p=0,S=null;for(this.width=n,this.height=r;d&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,S=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=t[e++];m=t[e++]|t[e++]<<8,v=t[e++],!(1&_)&&(v=null),p=_>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var j=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,f=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,N=t[e++],D=N>>6&1,E=1<<(7&N)+1,L=o,I=l,Y=!1;N>>7&&(Y=!0,L=e,I=E,e+=3*E);var ee=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}g.push({x:j,y:x,width:f,height:w,has_local_palette:Y,palette_offset:L,palette_size:I,data_offset:ee,data_length:e-ee,transparent_index:v,interlaced:!!D,delay:m,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return S},this.frameInfo=function(A){if(A<0||A>=g.length)throw new Error("Frame index out of range.");return g[A]},this.decodeAndBlitFrameBGRA=function(A,V){var K=this.frameInfo(A),re=K.width*K.height,W=new Uint8Array(re);d2(t,K.data_offset,W,re);var X=K.palette_offset,G=K.transparent_index;G===null&&(G=256);var U=K.width,ae=n-U,pe=U,T=4*(K.y*n+K.x),$=4*((K.y+K.height)*n+K.x),J=T,ne=4*ae;K.interlaced===!0&&(ne+=4*n*7);for(var P=8,H=0,Q=W.length;H<Q;++H){var ie=W[H];if(pe===0&&(pe=U,(J+=ne)>=$&&(ne=4*ae+4*n*(P-1),J=T+(U+ae)*(P<<1),P>>=1)),ie===G)J+=4;else{var be=t[X+3*ie],_e=t[X+3*ie+1],Ae=t[X+3*ie+2];V[J++]=Ae,V[J++]=_e,V[J++]=be,V[J++]=255}--pe}},this.decodeAndBlitFrameRGBA=function(A,V){var K=this.frameInfo(A),re=K.width*K.height,W=new Uint8Array(re);d2(t,K.data_offset,W,re);var X=K.palette_offset,G=K.transparent_index;G===null&&(G=256);var U=K.width,ae=n-U,pe=U,T=4*(K.y*n+K.x),$=4*((K.y+K.height)*n+K.x),J=T,ne=4*ae;K.interlaced===!0&&(ne+=4*n*7);for(var P=8,H=0,Q=W.length;H<Q;++H){var ie=W[H];if(pe===0&&(pe=U,(J+=ne)>=$&&(ne=4*ae+4*n*(P-1),J=T+(U+ae)*(P<<1),P>>=1)),ie===G)J+=4;else{var be=t[X+3*ie],_e=t[X+3*ie+1],Ae=t[X+3*ie+2];V[J++]=be,V[J++]=_e,V[J++]=Ae,V[J++]=255}--pe}}}function d2(t,e,n,r){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,d=(1<<l)-1,g=0,m=0,v=0,p=t[e++],S=new Int32Array(4096),_=null;;){for(;g<16&&p!==0;)m|=t[e++]<<g,g+=8,p===1?p=t[e++]:--p;if(g<l)break;var j=m&d;if(m>>=l,g-=l,j!==s){if(j===a)break;for(var x=j<o?j:_,f=0,w=x;w>s;)w=S[w]>>8,++f;var N=w;if(v+f+(x!==j?1:0)>r)return void Dt.log("Warning, gif stream longer than expected.");n[v++]=N;var D=v+=f;for(x!==j&&(n[v++]=N),w=x;f--;)w=S[w],n[--D]=255&w,w>>=8;_!==null&&o<4096&&(S[o++]=_<<8|N,o>=d+1&&l<12&&(++l,d=d<<1|1)),_=j}else o=a+1,d=(1<<(l=i+1))-1,_=null}return v!==r&&Dt.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function $p(t){var e,n,r,i,s,a=Math.floor,o=new Array(64),l=new Array(64),d=new Array(64),g=new Array(64),m=new Array(65535),v=new Array(65535),p=new Array(64),S=new Array(64),_=[],j=0,x=7,f=new Array(64),w=new Array(64),N=new Array(64),D=new Array(256),E=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(T,$){for(var J=0,ne=0,P=new Array,H=1;H<=16;H++){for(var Q=1;Q<=T[H];Q++)P[$[ne]]=[],P[$[ne]][0]=J,P[$[ne]][1]=H,ne++,J++;J*=2}return P}function X(T){for(var $=T[0],J=T[1]-1;J>=0;)$&1<<J&&(j|=1<<x),J--,--x<0&&(j==255?(G(255),G(0)):G(j),x=7,j=0)}function G(T){_.push(T)}function U(T){G(T>>8&255),G(255&T)}function ae(T,$,J,ne,P){for(var H,Q=P[0],ie=P[240],be=function(Oe,Me){var Be,Pe,Re,He,oe,C,ge,je,Ee,Ce,xe=0;for(Ee=0;Ee<8;++Ee){Be=Oe[xe],Pe=Oe[xe+1],Re=Oe[xe+2],He=Oe[xe+3],oe=Oe[xe+4],C=Oe[xe+5],ge=Oe[xe+6];var Xe=Be+(je=Oe[xe+7]),mt=Be-je,Gt=Pe+ge,kt=Pe-ge,Rt=Re+C,Sr=Re-C,Ue=He+oe,Ei=He-oe,Ut=Xe+Ue,Nr=Xe-Ue,an=Gt+Rt,wt=Gt-Rt;Oe[xe]=Ut+an,Oe[xe+4]=Ut-an;var Ge=.707106781*(wt+Nr);Oe[xe+2]=Nr+Ge,Oe[xe+6]=Nr-Ge;var ct=.382683433*((Ut=Ei+Sr)-(wt=kt+mt)),At=.5411961*Ut+ct,Ht=1.306562965*wt+ct,nr=.707106781*(an=Sr+kt),rr=mt+nr,nt=mt-nr;Oe[xe+5]=nt+At,Oe[xe+3]=nt-At,Oe[xe+1]=rr+Ht,Oe[xe+7]=rr-Ht,xe+=8}for(xe=0,Ee=0;Ee<8;++Ee){Be=Oe[xe],Pe=Oe[xe+8],Re=Oe[xe+16],He=Oe[xe+24],oe=Oe[xe+32],C=Oe[xe+40],ge=Oe[xe+48];var qn=Be+(je=Oe[xe+56]),Ur=Be-je,Wn=Pe+ge,Sn=Pe-ge,gn=Re+C,kr=Re-C,io=He+oe,Ki=He-oe,ii=qn+io,si=qn-io,ai=Wn+gn,Ci=Wn-gn;Oe[xe]=ii+ai,Oe[xe+32]=ii-ai;var $r=.707106781*(Ci+si);Oe[xe+16]=si+$r,Oe[xe+48]=si-$r;var Ti=.382683433*((ii=Ki+kr)-(Ci=Sn+Ur)),pa=.5411961*ii+Ti,so=1.306562965*Ci+Ti,ao=.707106781*(ai=kr+Sn),oo=Ur+ao,lo=Ur-ao;Oe[xe+40]=lo+pa,Oe[xe+24]=lo-pa,Oe[xe+8]=oo+so,Oe[xe+56]=oo-so,xe++}for(Ee=0;Ee<64;++Ee)Ce=Oe[Ee]*Me[Ee],p[Ee]=Ce>0?Ce+.5|0:Ce-.5|0;return p}(T,$),_e=0;_e<64;++_e)S[L[_e]]=be[_e];var Ae=S[0]-J;J=S[0],Ae==0?X(ne[0]):(X(ne[v[H=32767+Ae]]),X(m[H]));for(var ke=63;ke>0&&S[ke]==0;)ke--;if(ke==0)return X(Q),J;for(var Ke,ve=1;ve<=ke;){for(var se=ve;S[ve]==0&&ve<=ke;)++ve;var Ze=ve-se;if(Ze>=16){Ke=Ze>>4;for(var We=1;We<=Ke;++We)X(ie);Ze&=15}H=32767+S[ve],X(P[(Ze<<4)+v[H]]),X(m[H]),ve++}return ke!=63&&X(Q),J}function pe(T){T=Math.min(Math.max(T,1),100),s!=T&&(function($){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var P=a((J[ne]*$+50)/100);P=Math.min(Math.max(P,1),255),o[L[ne]]=P}for(var H=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Q=0;Q<64;Q++){var ie=a((H[Q]*$+50)/100);ie=Math.min(Math.max(ie,1),255),l[L[Q]]=ie}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,Ae=0;Ae<8;Ae++)for(var ke=0;ke<8;ke++)d[_e]=1/(o[L[_e]]*be[Ae]*be[ke]*8),g[_e]=1/(l[L[_e]]*be[Ae]*be[ke]*8),_e++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),s=T)}this.encode=function(T,$){$&&pe($),_=new Array,j=0,x=7,U(65496),U(65504),U(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),U(1),U(1),G(0),G(0),function(){U(65499),U(132),G(0);for(var Pe=0;Pe<64;Pe++)G(o[Pe]);G(1);for(var Re=0;Re<64;Re++)G(l[Re])}(),function(Pe,Re){U(65472),U(17),G(8),U(Re),U(Pe),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(T.width,T.height),function(){U(65476),U(418),G(0);for(var Pe=0;Pe<16;Pe++)G(I[Pe+1]);for(var Re=0;Re<=11;Re++)G(Y[Re]);G(16);for(var He=0;He<16;He++)G(ee[He+1]);for(var oe=0;oe<=161;oe++)G(R[oe]);G(1);for(var C=0;C<16;C++)G(A[C+1]);for(var ge=0;ge<=11;ge++)G(V[ge]);G(17);for(var je=0;je<16;je++)G(K[je+1]);for(var Ee=0;Ee<=161;Ee++)G(re[Ee])}(),U(65498),U(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var J=0,ne=0,P=0;j=0,x=7,this.encode.displayName="_encode_";for(var H,Q,ie,be,_e,Ae,ke,Ke,ve,se=T.data,Ze=T.width,We=T.height,Oe=4*Ze,Me=0;Me<We;){for(H=0;H<Oe;){for(_e=Oe*Me+H,ke=-1,Ke=0,ve=0;ve<64;ve++)Ae=_e+(Ke=ve>>3)*Oe+(ke=4*(7&ve)),Me+Ke>=We&&(Ae-=Oe*(Me+1+Ke-We)),H+ke>=Oe&&(Ae-=H+ke-Oe+4),Q=se[Ae++],ie=se[Ae++],be=se[Ae++],f[ve]=(E[Q]+E[ie+256>>0]+E[be+512>>0]>>16)-128,w[ve]=(E[Q+768>>0]+E[ie+1024>>0]+E[be+1280>>0]>>16)-128,N[ve]=(E[Q+1280>>0]+E[ie+1536>>0]+E[be+1792>>0]>>16)-128;J=ae(f,d,J,e,r),ne=ae(w,g,ne,n,i),P=ae(N,g,P,n,i),H+=32}Me+=8}if(x>=0){var Be=[];Be[1]=x+1,Be[0]=(1<<x+1)-1,X(Be)}return U(65497),new Uint8Array(_)},t=t||50,function(){for(var T=String.fromCharCode,$=0;$<256;$++)D[$]=T($)}(),e=W(I,Y),n=W(A,V),r=W(ee,R),i=W(K,re),function(){for(var T=1,$=2,J=1;J<=15;J++){for(var ne=T;ne<$;ne++)v[32767+ne]=J,m[32767+ne]=[],m[32767+ne][1]=J,m[32767+ne][0]=ne;for(var P=-($-1);P<=-T;P++)v[32767+P]=J,m[32767+P]=[],m[32767+P][1]=J,m[32767+P][0]=$-1+P;T<<=1,$<<=1}}(),function(){for(var T=0;T<256;T++)E[T]=19595*T,E[T+256>>0]=38470*T,E[T+512>>0]=7471*T+32768,E[T+768>>0]=-11059*T,E[T+1024>>0]=-21709*T,E[T+1280>>0]=32768*T+8421375,E[T+1536>>0]=-27439*T,E[T+1792>>0]=-5329*T}(),pe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function pi(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function h2(t){function e(I){if(!I)throw Error("assert :P")}function n(I,Y,ee){for(var R=0;4>R;R++)if(I[Y+R]!=ee.charCodeAt(R))return!0;return!1}function r(I,Y,ee,R,A){for(var V=0;V<A;V++)I[Y+V]=ee[R+V]}function i(I,Y,ee,R){for(var A=0;A<R;A++)I[Y+A]=ee}function s(I){return new Int32Array(I)}function a(I,Y){for(var ee=[],R=0;R<I;R++)ee.push(new Y);return ee}function o(I,Y){var ee=[];return function R(A,V,K){for(var re=K[V],W=0;W<re&&(A.push(K.length>V+1?[]:new Y),!(K.length<V+1));W++)R(A[W],V+1,K)}(ee,0,I),ee}var l=function(){var I=this;function Y(u,h){for(var b=1<<h-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function ee(u,h,b,k,O){e(!(k%b));do u[h+(k-=b)]=O;while(0<k)}function R(u,h,b,k,O){if(e(2328>=O),512>=O)var M=s(512);else if((M=s(O))==null)return 0;return function(z,B,q,Z,ue,ye){var we,fe,Ie=B,Se=1<<q,ce=s(16),de=s(16);for(e(ue!=0),e(Z!=null),e(z!=null),e(0<q),fe=0;fe<ue;++fe){if(15<Z[fe])return 0;++ce[Z[fe]]}if(ce[0]==ue)return 0;for(de[1]=0,we=1;15>we;++we){if(ce[we]>1<<we)return 0;de[we+1]=de[we]+ce[we]}for(fe=0;fe<ue;++fe)we=Z[fe],0<Z[fe]&&(ye[de[we]++]=fe);if(de[15]==1)return(Z=new A).g=0,Z.value=ye[0],ee(z,Ie,1,Se,Z),Se;var Te,De=-1,Le=Se-1,Ye=0,$e=1,rt=1,qe=1<<q;for(fe=0,we=1,ue=2;we<=q;++we,ue<<=1){if($e+=rt<<=1,0>(rt-=ce[we]))return 0;for(;0<ce[we];--ce[we])(Z=new A).g=we,Z.value=ye[fe++],ee(z,Ie+Ye,ue,qe,Z),Ye=Y(Ye,we)}for(we=q+1,ue=2;15>=we;++we,ue<<=1){if($e+=rt<<=1,0>(rt-=ce[we]))return 0;for(;0<ce[we];--ce[we]){if(Z=new A,(Ye&Le)!=De){for(Ie+=qe,Te=1<<(De=we)-q;15>De&&!(0>=(Te-=ce[De]));)++De,Te<<=1;Se+=qe=1<<(Te=De-q),z[B+(De=Ye&Le)].g=Te+q,z[B+De].value=Ie-B-De}Z.g=we-q,Z.value=ye[fe++],ee(z,Ie+(Ye>>q),ue,qe,Z),Ye=Y(Ye,we)}}return $e!=2*de[15]-1?0:Se}(u,h,b,k,O,M)}function A(){this.value=this.g=0}function V(){this.value=this.g=0}function K(){this.G=a(5,A),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(On,V)}function re(u,h,b,k){e(u!=null),e(h!=null),e(2147483648>k),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=h,u.pa=b,u.Jd=h,u.Yc=b+k,u.Zc=4<=k?b+k-4+1:b,H(u)}function W(u,h){for(var b=0;0<h--;)b|=ie(u,128)<<h;return b}function X(u,h){var b=W(u,h);return Q(u)?-b:b}function G(u,h,b,k){var O,M=0;for(e(u!=null),e(h!=null),e(4294967288>k),u.Sb=k,u.Ra=0,u.u=0,u.h=0,4<k&&(k=4),O=0;O<k;++O)M+=h[b+O]<<8*O;u.Ra=M,u.bb=k,u.oa=h,u.pa=b}function U(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<No-8>>>0,++u.bb,u.u-=8;J(u)&&(u.h=1,u.u=0)}function ae(u,h){if(e(0<=h),!u.h&&h<=So){var b=$(u)&_o[h];return u.u+=h,U(u),b}return u.h=1,u.u=0}function pe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function $(u){return u.Ra>>>(u.u&No-1)>>>0}function J(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>No}function ne(u,h){u.u=h,u.h=J(u)}function P(u){u.u>=Kl&&(e(u.u>=Kl),U(u))}function H(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function Q(u){return W(u,1)}function ie(u,h){var b=u.Ca;0>u.b&&H(u);var k=u.b,O=b*h>>>8,M=(u.I>>>k>O)+0;for(M?(b-=O,u.I-=O+1<<k>>>0):b=O+1,k=b,O=0;256<=k;)O+=8,k>>=8;return k=7^O+fr[k],u.b-=k,u.Ca=(b<<k)-1,M}function be(u,h,b){u[h+0]=b>>24&255,u[h+1]=b>>16&255,u[h+2]=b>>8&255,u[h+3]=b>>0&255}function _e(u,h){return u[h+0]<<0|u[h+1]<<8}function Ae(u,h){return _e(u,h)|u[h+2]<<16}function ke(u,h){return _e(u,h)|_e(u,h+2)<<16}function Ke(u,h){var b=1<<h;return e(u!=null),e(0<h),u.X=s(b),u.X==null?0:(u.Mb=32-h,u.Xa=h,1)}function ve(u,h){e(u!=null),e(h!=null),e(u.Xa==h.Xa),r(h.X,0,u.X,0,1<<h.Xa)}function se(){this.X=[],this.Xa=this.Mb=0}function Ze(u,h,b,k){e(b!=null),e(k!=null);var O=b[0],M=k[0];return O==0&&(O=(u*M+h/2)/h),M==0&&(M=(h*O+u/2)/u),0>=O||0>=M?0:(b[0]=O,k[0]=M,1)}function We(u,h){return u+(1<<h)-1>>>h}function Oe(u,h){return((4278255360&u)+(4278255360&h)>>>0&4278255360)+((16711935&u)+(16711935&h)>>>0&16711935)>>>0}function Me(u,h){I[h]=function(b,k,O,M,z,B,q){var Z;for(Z=0;Z<z;++Z){var ue=I[u](B[q+Z-1],O,M+Z);B[q+Z]=Oe(b[k+Z],ue)}}}function Be(){this.ud=this.hd=this.jd=0}function Pe(u,h){return((4278124286&(u^h))>>>1)+(u&h)>>>0}function Re(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function He(u,h){return Re(u+(u-h+.5>>1))}function oe(u,h,b){return Math.abs(h-b)-Math.abs(u-b)}function C(u,h,b,k,O,M,z){for(k=M[z-1],b=0;b<O;++b)M[z+b]=k=Oe(u[h+b],k)}function ge(u,h,b,k,O){var M;for(M=0;M<b;++M){var z=u[h+M],B=z>>8&255,q=16711935&(q=(q=16711935&z)+((B<<16)+B));k[O+M]=(4278255360&z)+q>>>0}}function je(u,h){h.jd=u>>0&255,h.hd=u>>8&255,h.ud=u>>16&255}function Ee(u,h,b,k,O,M){var z;for(z=0;z<k;++z){var B=h[b+z],q=B>>>8,Z=B,ue=255&(ue=(ue=B>>>16)+((u.jd<<24>>24)*(q<<24>>24)>>>5));Z=255&(Z=(Z=Z+((u.hd<<24>>24)*(q<<24>>24)>>>5))+((u.ud<<24>>24)*(ue<<24>>24)>>>5)),O[M+z]=(4278255360&B)+(ue<<16)+Z}}function Ce(u,h,b,k,O){I[h]=function(M,z,B,q,Z,ue,ye,we,fe){for(q=ye;q<we;++q)for(ye=0;ye<fe;++ye)Z[ue++]=O(B[k(M[z++])])},I[u]=function(M,z,B,q,Z,ue,ye){var we=8>>M.b,fe=M.Ea,Ie=M.K[0],Se=M.w;if(8>we)for(M=(1<<M.b)-1,Se=(1<<we)-1;z<B;++z){var ce,de=0;for(ce=0;ce<fe;++ce)ce&M||(de=k(q[Z++])),ue[ye++]=O(Ie[de&Se]),de>>=we}else I["VP8LMapColor"+b](q,Z,Ie,Se,ue,ye,z,B,fe)}}function xe(u,h,b,k,O){for(b=h+b;h<b;){var M=u[h++];k[O++]=M>>16&255,k[O++]=M>>8&255,k[O++]=M>>0&255}}function Xe(u,h,b,k,O){for(b=h+b;h<b;){var M=u[h++];k[O++]=M>>16&255,k[O++]=M>>8&255,k[O++]=M>>0&255,k[O++]=M>>24&255}}function mt(u,h,b,k,O){for(b=h+b;h<b;){var M=(z=u[h++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;k[O++]=M,k[O++]=z}}function Gt(u,h,b,k,O){for(b=h+b;h<b;){var M=(z=u[h++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;k[O++]=M,k[O++]=z}}function kt(u,h,b,k,O){for(b=h+b;h<b;){var M=u[h++];k[O++]=M>>0&255,k[O++]=M>>8&255,k[O++]=M>>16&255}}function Rt(u,h,b,k,O,M){if(M==0)for(b=h+b;h<b;)be(k,((M=u[h++])[0]>>24|M[1]>>8&65280|M[2]<<8&16711680|M[3]<<24)>>>0),O+=32;else r(k,O,u,h,b)}function Sr(u,h){I[h][0]=I[u+"0"],I[h][1]=I[u+"1"],I[h][2]=I[u+"2"],I[h][3]=I[u+"3"],I[h][4]=I[u+"4"],I[h][5]=I[u+"5"],I[h][6]=I[u+"6"],I[h][7]=I[u+"7"],I[h][8]=I[u+"8"],I[h][9]=I[u+"9"],I[h][10]=I[u+"10"],I[h][11]=I[u+"11"],I[h][12]=I[u+"12"],I[h][13]=I[u+"13"],I[h][14]=I[u+"0"],I[h][15]=I[u+"0"]}function Ue(u){return u==Of||u==Df||u==Xc||u==Ff}function Ei(){this.eb=[],this.size=this.A=this.fb=0}function Ut(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Nr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ei,this.f.kb=new Ut,this.sd=null}function an(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function wt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ge(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function ct(u,h){var b=u.T,k=h.ba.f.RGBA,O=k.eb,M=k.fb+u.ka*k.A,z=Yr[h.ba.S],B=u.y,q=u.O,Z=u.f,ue=u.N,ye=u.ea,we=u.W,fe=h.cc,Ie=h.dc,Se=h.Mc,ce=h.Nc,de=u.ka,Te=u.ka+u.T,De=u.U,Le=De+1>>1;for(de==0?z(B,q,null,null,Z,ue,ye,we,Z,ue,ye,we,O,M,null,null,De):(z(h.ec,h.fc,B,q,fe,Ie,Se,ce,Z,ue,ye,we,O,M-k.A,O,M,De),++b);de+2<Te;de+=2)fe=Z,Ie=ue,Se=ye,ce=we,ue+=u.Rc,we+=u.Rc,M+=2*k.A,z(B,(q+=2*u.fa)-u.fa,B,q,fe,Ie,Se,ce,Z,ue,ye,we,O,M-k.A,O,M,De);return q+=u.fa,u.j+Te<u.o?(r(h.ec,h.fc,B,q,De),r(h.cc,h.dc,Z,ue,Le),r(h.Mc,h.Nc,ye,we,Le),b--):1&Te||z(B,q,null,null,Z,ue,ye,we,Z,ue,ye,we,O,M+k.A,null,null,De),b}function At(u,h,b){var k=u.F,O=[u.J];if(k!=null){var M=u.U,z=h.ba.S,B=z==Qc||z==Xc;h=h.ba.f.RGBA;var q=[0],Z=u.ka;q[0]=u.T,u.Kb&&(Z==0?--q[0]:(--Z,O[0]-=u.width),u.j+u.ka+u.T==u.o&&(q[0]=u.o-u.j-Z));var ue=h.eb;Z=h.fb+Z*h.A,u=Mt(k,O[0],u.width,M,q,ue,Z+(B?0:3),h.A),e(b==q),u&&Ue(z)&&Vr(ue,Z,B,M,q,h.A)}return 0}function Ht(u){var h=u.ma,b=h.ba.S,k=11>b,O=b==Kc||b==Jc||b==Qc||b==Rf||b==12||Ue(b);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Gl(h.Oa,u,O?11:12))return 0;if(O&&Ue(b)&&Fe(),u.da)alert("todo:use_scaling");else{if(k){if(h.Ib=Ge,u.Kb){if(b=u.U+1>>1,h.memory=s(u.U+2*b),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+u.U,h.Mc=h.cc,h.Nc=h.dc+b,h.Ib=ct,Fe()}}else alert("todo:EmitYUV");O&&(h.Jb=At,k&&me())}if(k&&!Tg){for(u=0;256>u;++u)lx[u]=89858*(u-128)+ed>>Zc,dx[u]=-22014*(u-128)+ed,cx[u]=-45773*(u-128),ux[u]=113618*(u-128)+ed>>Zc;for(u=nu;u<Bf;++u)h=76283*(u-16)+ed>>Zc,hx[u-nu]=jr(h,255),fx[u-nu]=jr(h+8>>4,15);Tg=1}return 1}function nr(u){var h=u.ma,b=u.U,k=u.T;return e(!(1&u.ka)),0>=b||0>=k?0:(b=h.Ib(u,h),h.Jb!=null&&h.Jb(u,h,b),h.Dc+=b,1)}function rr(u){u.ma.memory=null}function nt(u,h,b,k){return ae(u,8)!=47?0:(h[0]=ae(u,14)+1,b[0]=ae(u,14)+1,k[0]=ae(u,1),ae(u,3)!=0?0:!u.h)}function qn(u,h){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+ae(h,b)+1}function Ur(u,h){return 120<h?h-120:1<=(b=((b=Yw[h-1])>>4)*u+(8-(15&b)))?b:1;var b}function Wn(u,h,b){var k=$(b),O=u[h+=255&k].g-8;return 0<O&&(ne(b,b.u+8),k=$(b),h+=u[h].value,h+=k&(1<<O)-1),ne(b,b.u+u[h].g),u[h].value}function Sn(u,h,b){return b.g+=u.g,b.value+=u.value<<h>>>0,e(8>=b.g),u.g}function gn(u,h,b){var k=u.xc;return e((h=k==0?0:u.vc[u.md*(b>>k)+(h>>k)])<u.Wb),u.Ya[h]}function kr(u,h,b,k){var O=u.ab,M=u.c*h,z=u.C;h=z+h;var B=b,q=k;for(k=u.Ta,b=u.Ua;0<O--;){var Z=u.gc[O],ue=z,ye=h,we=B,fe=q,Ie=(q=k,B=b,Z.Ea);switch(e(ue<ye),e(ye<=Z.nc),Z.hc){case 2:$c(we,fe,(ye-ue)*Ie,q,B);break;case 0:var Se=ue,ce=ye,de=q,Te=B,De=(qe=Z).Ea;Se==0&&(Lf(we,fe,null,null,1,de,Te),C(we,fe+1,0,0,De-1,de,Te+1),fe+=De,Te+=De,++Se);for(var Le=1<<qe.b,Ye=Le-1,$e=We(De,qe.b),rt=qe.K,qe=qe.w+(Se>>qe.b)*$e;Se<ce;){var jt=rt,Pt=qe,St=1;for(Jl(we,fe,de,Te-De,1,de,Te);St<De;){var bt=(St&~Ye)+Le;bt>De&&(bt=De),(0,Ss[jt[Pt++]>>8&15])(we,fe+ +St,de,Te+St-De,bt-St,de,Te+St),St=bt}fe+=De,Te+=De,++Se&Ye||(qe+=$e)}ye!=Z.nc&&r(q,B-Ie,q,B+(ye-ue-1)*Ie,Ie);break;case 1:for(Ie=we,ce=fe,De=(we=Z.Ea)-(Te=we&~(de=(fe=1<<Z.b)-1)),Se=We(we,Z.b),Le=Z.K,Z=Z.w+(ue>>Z.b)*Se;ue<ye;){for(Ye=Le,$e=Z,rt=new Be,qe=ce+Te,jt=ce+we;ce<qe;)je(Ye[$e++],rt),wa(rt,Ie,ce,fe,q,B),ce+=fe,B+=fe;ce<jt&&(je(Ye[$e++],rt),wa(rt,Ie,ce,De,q,B),ce+=De,B+=De),++ue&de||(Z+=Se)}break;case 3:if(we==q&&fe==B&&0<Z.b){for(ce=q,we=Ie=B+(ye-ue)*Ie-(Te=(ye-ue)*We(Z.Ea,Z.b)),fe=q,de=B,Se=[],Te=(De=Te)-1;0<=Te;--Te)Se[Te]=fe[de+Te];for(Te=De-1;0<=Te;--Te)ce[we+Te]=Se[Te];qr(Z,ue,ye,q,Ie,q,B)}else qr(Z,ue,ye,we,fe,q,B)}B=k,q=b}q!=b&&r(k,b,B,q,M)}function io(u,h){var b=u.V,k=u.Ba+u.c*u.C,O=h-u.C;if(e(h<=u.l.o),e(16>=O),0<O){var M=u.l,z=u.Ta,B=u.Ua,q=M.width;if(kr(u,O,b,k),O=B=[B],e((b=u.C)<(k=h)),e(M.v<M.va),k>M.o&&(k=M.o),b<M.j){var Z=M.j-b;b=M.j,O[0]+=Z*q}if(b>=k?b=0:(O[0]+=4*M.v,M.ka=b-M.j,M.U=M.va-M.v,M.T=k-b,b=1),b){if(B=B[0],11>(b=u.ca).S){var ue=b.f.RGBA,ye=(k=b.S,O=M.U,M=M.T,Z=ue.eb,ue.A),we=M;for(ue=ue.fb+u.Ma*ue.A;0<we--;){var fe=z,Ie=B,Se=O,ce=Z,de=ue;switch(k){case Yc:pr(fe,Ie,Se,ce,de);break;case Kc:ir(fe,Ie,Se,ce,de);break;case Of:ir(fe,Ie,Se,ce,de),Vr(ce,de,0,Se,1,0);break;case bg:Zi(fe,Ie,Se,ce,de);break;case Jc:Rt(fe,Ie,Se,ce,de,1);break;case Df:Rt(fe,Ie,Se,ce,de,1),Vr(ce,de,0,Se,1,0);break;case Qc:Rt(fe,Ie,Se,ce,de,0);break;case Xc:Rt(fe,Ie,Se,ce,de,0),Vr(ce,de,1,Se,1,0);break;case Rf:Ns(fe,Ie,Se,ce,de);break;case Ff:Ns(fe,Ie,Se,ce,de),Ft(ce,de,Se,1,0);break;case _g:Xi(fe,Ie,Se,ce,de);break;default:e(0)}B+=q,ue+=ye}u.Ma+=M}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=b.height)}}u.C=h,e(u.C<=u.i)}function Ki(u){var h;if(0<u.ua)return 0;for(h=0;h<u.Wb;++h){var b=u.Ya[h].G,k=u.Ya[h].H;if(0<b[1][k[1]+0].g||0<b[2][k[2]+0].g||0<b[3][k[3]+0].g)return 0}return 1}function ii(u,h,b,k,O,M){if(u.Z!=0){var z=u.qd,B=u.rd;for(e(Ps[u.Z]!=null);h<b;++h)Ps[u.Z](z,B,k,O,k,O,M),z=k,B=O,O+=M;u.qd=z,u.rd=B}}function si(u,h){var b=u.l.ma,k=b.Z==0||b.Z==1?u.l.j:u.C;if(k=u.C<k?k:u.C,e(h<=u.l.o),h>k){var O=u.l.width,M=b.ca,z=b.tb+O*k,B=u.V,q=u.Ba+u.c*k,Z=u.gc;e(u.ab==1),e(Z[0].hc==3),qc(Z[0],k,h,B,q,M,z),ii(b,k,h,M,z,O)}u.C=u.Ma=h}function ai(u,h,b,k,O,M,z){var B=u.$/k,q=u.$%k,Z=u.m,ue=u.s,ye=b+u.$,we=ye;O=b+k*O;var fe=b+k*M,Ie=280+ue.ua,Se=u.Pb?B:16777216,ce=0<ue.ua?ue.Wa:null,de=ue.wc,Te=ye<fe?gn(ue,q,B):null;e(u.C<M),e(fe<=O);var De=!1;e:for(;;){for(;De||ye<fe;){var Le=0;if(B>=Se){var Ye=ye-b;e((Se=u).Pb),Se.wd=Se.m,Se.xd=Ye,0<Se.s.ua&&ve(Se.s.Wa,Se.s.vb),Se=B+Jw}if(q&de||(Te=gn(ue,q,B)),e(Te!=null),Te.Qb&&(h[ye]=Te.qb,De=!0),!De)if(P(Z),Te.jc){Le=Z,Ye=h;var $e=ye,rt=Te.pd[$(Le)&On-1];e(Te.jc),256>rt.g?(ne(Le,Le.u+rt.g),Ye[$e]=rt.value,Le=0):(ne(Le,Le.u+rt.g-256),e(256<=rt.value),Le=rt.value),Le==0&&(De=!0)}else Le=Wn(Te.G[0],Te.H[0],Z);if(Z.h)break;if(De||256>Le){if(!De)if(Te.nd)h[ye]=(Te.qb|Le<<8)>>>0;else{if(P(Z),De=Wn(Te.G[1],Te.H[1],Z),P(Z),Ye=Wn(Te.G[2],Te.H[2],Z),$e=Wn(Te.G[3],Te.H[3],Z),Z.h)break;h[ye]=($e<<24|De<<16|Le<<8|Ye)>>>0}if(De=!1,++ye,++q>=k&&(q=0,++B,z!=null&&B<=M&&!(B%16)&&z(u,B),ce!=null))for(;we<ye;)Le=h[we++],ce.X[(506832829*Le&4294967295)>>>ce.Mb]=Le}else if(280>Le){if(Le=qn(Le-256,Z),Ye=Wn(Te.G[4],Te.H[4],Z),P(Z),Ye=Ur(k,Ye=qn(Ye,Z)),Z.h)break;if(ye-b<Ye||O-ye<Le)break e;for($e=0;$e<Le;++$e)h[ye+$e]=h[ye+$e-Ye];for(ye+=Le,q+=Le;q>=k;)q-=k,++B,z!=null&&B<=M&&!(B%16)&&z(u,B);if(e(ye<=O),q&de&&(Te=gn(ue,q,B)),ce!=null)for(;we<ye;)Le=h[we++],ce.X[(506832829*Le&4294967295)>>>ce.Mb]=Le}else{if(!(Le<Ie))break e;for(De=Le-280,e(ce!=null);we<ye;)Le=h[we++],ce.X[(506832829*Le&4294967295)>>>ce.Mb]=Le;Le=ye,e(!(De>>>(Ye=ce).Xa)),h[Le]=Ye.X[De],De=!0}De||e(Z.h==J(Z))}if(u.Pb&&Z.h&&ye<O)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&ve(u.s.vb,u.s.Wa);else{if(Z.h)break e;z!=null&&z(u,B>M?M:B),u.a=0,u.$=ye-b}return 1}return u.a=3,0}function Ci(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var h=u.Wa;h!=null&&(h.X=null),u.vb=null,e(u!=null)}function $r(){var u=new Tf;return u==null?null:(u.a=0,u.xb=kg,Sr("Predictor","VP8LPredictors"),Sr("Predictor","VP8LPredictors_C"),Sr("PredictorAdd","VP8LPredictorsAdd"),Sr("PredictorAdd","VP8LPredictorsAdd_C"),$c=ge,wa=Ee,pr=xe,ir=Xe,Ns=mt,Xi=Gt,Zi=kt,I.VP8LMapColor32b=ko,I.VP8LMapColor8b=Wc,u)}function Ti(u,h,b,k,O){var M=1,z=[u],B=[h],q=k.m,Z=k.s,ue=null,ye=0;e:for(;;){if(b)for(;M&&ae(q,1);){var we=z,fe=B,Ie=k,Se=1,ce=Ie.m,de=Ie.gc[Ie.ab],Te=ae(ce,2);if(Ie.Oc&1<<Te)M=0;else{switch(Ie.Oc|=1<<Te,de.hc=Te,de.Ea=we[0],de.nc=fe[0],de.K=[null],++Ie.ab,e(4>=Ie.ab),Te){case 0:case 1:de.b=ae(ce,3)+2,Se=Ti(We(de.Ea,de.b),We(de.nc,de.b),0,Ie,de.K),de.K=de.K[0];break;case 3:var De,Le=ae(ce,8)+1,Ye=16<Le?0:4<Le?1:2<Le?2:3;if(we[0]=We(de.Ea,Ye),de.b=Ye,De=Se=Ti(Le,1,0,Ie,de.K)){var $e,rt=Le,qe=de,jt=1<<(8>>qe.b),Pt=s(jt);if(Pt==null)De=0;else{var St=qe.K[0],bt=qe.w;for(Pt[0]=qe.K[0][0],$e=1;$e<1*rt;++$e)Pt[$e]=Oe(St[bt+$e],Pt[$e-1]);for(;$e<4*jt;++$e)Pt[$e]=0;qe.K[0]=null,qe.K[0]=Pt,De=1}}Se=De;break;case 2:break;default:e(0)}M=Se}}if(z=z[0],B=B[0],M&&ae(q,1)&&!(M=1<=(ye=ae(q,4))&&11>=ye)){k.a=3;break e}var Ot;if(Ot=M)t:{var It,vt,yn,mr=k,wn=z,gr=B,Et=ye,Pr=b,Er=mr.m,Tn=mr.s,Dn=[null],ar=1,Kr=0,Oi=Kw[Et];n:for(;;){if(Pr&&ae(Er,1)){var Ln=ae(Er,3)+2,rs=We(wn,Ln),Na=We(gr,Ln),Co=rs*Na;if(!Ti(rs,Na,0,mr,Dn))break n;for(Dn=Dn[0],Tn.xc=Ln,It=0;It<Co;++It){var Es=Dn[It]>>8&65535;Dn[It]=Es,Es>=ar&&(ar=Es+1)}}if(Er.h)break n;for(vt=0;5>vt;++vt){var tn=Sg[vt];!vt&&0<Et&&(tn+=1<<Et),Kr<tn&&(Kr=tn)}var Uf=a(ar*Oi,A),Rg=ar,Og=a(Rg,K);if(Og==null)var nd=null;else e(65536>=Rg),nd=Og;var ru=s(Kr);if(nd==null||ru==null||Uf==null){mr.a=1;break n}var rd=Uf;for(It=yn=0;It<ar;++It){var di=nd[It],To=di.G,Lo=di.H,Dg=0,id=1,Fg=0;for(vt=0;5>vt;++vt){tn=Sg[vt],To[vt]=rd,Lo[vt]=yn,!vt&&0<Et&&(tn+=1<<Et);i:{var sd,$f=tn,ad=mr,iu=ru,gx=rd,vx=yn,qf=0,Cs=ad.m,yx=ae(Cs,1);if(i(iu,0,0,$f),yx){var wx=ae(Cs,1)+1,xx=ae(Cs,1),Mg=ae(Cs,xx==0?1:8);iu[Mg]=1,wx==2&&(iu[Mg=ae(Cs,8)]=1);var od=1}else{var zg=s(19),Bg=ae(Cs,4)+4;if(19<Bg){ad.a=3;var ld=0;break i}for(sd=0;sd<Bg;++sd)zg[Gw[sd]]=ae(Cs,3);var Wf=void 0,su=void 0,Ug=ad,bx=zg,ud=$f,$g=iu,Hf=0,Ts=Ug.m,qg=8,Wg=a(128,A);r:for(;R(Wg,0,7,bx,19);){if(ae(Ts,1)){var _x=2+2*ae(Ts,3);if((Wf=2+ae(Ts,_x))>ud)break r}else Wf=ud;for(su=0;su<ud&&Wf--;){P(Ts);var Hg=Wg[0+(127&$(Ts))];ne(Ts,Ts.u+Hg.g);var Io=Hg.value;if(16>Io)$g[su++]=Io,Io!=0&&(qg=Io);else{var Sx=Io==16,Vg=Io-16,Nx=Hw[Vg],Gg=ae(Ts,Ww[Vg])+Nx;if(su+Gg>ud)break r;for(var kx=Sx?qg:0;0<Gg--;)$g[su++]=kx}}Hf=1;break r}Hf||(Ug.a=3),od=Hf}(od=od&&!Cs.h)&&(qf=R(gx,vx,8,iu,$f)),od&&qf!=0?ld=qf:(ad.a=3,ld=0)}if(ld==0)break n;if(id&&Vw[vt]==1&&(id=rd[yn].g==0),Dg+=rd[yn].g,yn+=ld,3>=vt){var au,Vf=ru[0];for(au=1;au<tn;++au)ru[au]>Vf&&(Vf=ru[au]);Fg+=Vf}}if(di.nd=id,di.Qb=0,id&&(di.qb=(To[3][Lo[3]+0].value<<24|To[1][Lo[1]+0].value<<16|To[2][Lo[2]+0].value)>>>0,Dg==0&&256>To[0][Lo[0]+0].value&&(di.Qb=1,di.qb+=To[0][Lo[0]+0].value<<8)),di.jc=!di.Qb&&6>Fg,di.jc){var cd,is=di;for(cd=0;cd<On;++cd){var Ls=cd,Is=is.pd[Ls],dd=is.G[0][is.H[0]+Ls];256<=dd.value?(Is.g=dd.g+256,Is.value=dd.value):(Is.g=0,Is.value=0,Ls>>=Sn(dd,8,Is),Ls>>=Sn(is.G[1][is.H[1]+Ls],16,Is),Ls>>=Sn(is.G[2][is.H[2]+Ls],0,Is),Sn(is.G[3][is.H[3]+Ls],24,Is))}}}Tn.vc=Dn,Tn.Wb=ar,Tn.Ya=nd,Tn.yc=Uf,Ot=1;break t}Ot=0}if(!(M=Ot)){k.a=3;break e}if(0<ye){if(Z.ua=1<<ye,!Ke(Z.Wa,ye)){k.a=1,M=0;break e}}else Z.ua=0;var Gf=k,Yg=z,jx=B,Yf=Gf.s,Kf=Yf.xc;if(Gf.c=Yg,Gf.i=jx,Yf.md=We(Yg,Kf),Yf.wc=Kf==0?-1:(1<<Kf)-1,b){k.xb=rx;break e}if((ue=s(z*B))==null){k.a=1,M=0;break e}M=(M=ai(k,ue,0,z,B,B,null))&&!q.h;break e}return M?(O!=null?O[0]=ue:(e(ue==null),e(b)),k.$=0,b||Ci(Z)):Ci(Z),M}function pa(u,h){var b=u.c*u.i,k=b+h+16*h;return e(u.c<=h),u.V=s(k),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+h,1)}function so(u,h){var b=u.C,k=h-b,O=u.V,M=u.Ba+u.c*b;for(e(h<=u.l.o);0<k;){var z=16<k?16:k,B=u.l.ma,q=u.l.width,Z=q*z,ue=B.ca,ye=B.tb+q*b,we=u.Ta,fe=u.Ua;kr(u,z,O,M),un(we,fe,ue,ye,Z),ii(B,b,b+z,ue,ye,q),k-=z,O+=z*u.c,b+=z}e(b==h),u.C=u.Ma=h}function ao(){this.ub=this.yd=this.td=this.Rb=0}function oo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function lo(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function _c(){this.Yb=function(){var u=[];return function h(b,k,O){for(var M=O[k],z=0;z<M&&(b.push(O.length>k+1?[]:0),!(O.length<k+1));z++)h(b[z],k+1,O)}(u,0,[3,11]),u}()}function lf(){this.jb=s(3),this.Wc=o([4,8],_c),this.Xc=o([4,17],_c)}function uf(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function uo(){this.ld=this.La=this.dd=this.tc=0}function Sc(){this.Na=this.la=0}function cf(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Tl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function df(){this.uc=this.M=this.Nb=0,this.wa=Array(new uo),this.Y=0,this.ya=Array(new Tl),this.aa=0,this.l=new co}function Nc(){this.y=s(16),this.f=s(8),this.ea=s(8)}function hf(){this.cb=this.a=0,this.sc="",this.m=new pe,this.Od=new ao,this.Kc=new oo,this.ed=new uf,this.Qa=new lo,this.Ic=this.$c=this.Aa=0,this.D=new df,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,pe),this.ia=0,this.pb=a(4,cf),this.Pa=new lf,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Nc),this.Hd=0,this.rb=Array(new Sc),this.sb=0,this.wa=Array(new uo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Tl),this.L=this.aa=0,this.gd=o([4,2],uo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function co(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ff(){var u=new hf;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,tu||(tu=Ac)),u}function on(u,h,b){return u.a==0&&(u.a=h,u.sc=b,u.cb=0),0}function kc(u,h,b){return 3<=b&&u[h+0]==157&&u[h+1]==1&&u[h+2]==42}function jc(u,h){if(u==null)return 0;if(u.a=0,u.sc="OK",h==null)return on(u,2,"null VP8Io passed to VP8GetHeaders()");var b=h.data,k=h.w,O=h.ha;if(4>O)return on(u,7,"Truncated header.");var M=b[k+0]|b[k+1]<<8|b[k+2]<<16,z=u.Od;if(z.Rb=!(1&M),z.td=M>>1&7,z.yd=M>>4&1,z.ub=M>>5,3<z.td)return on(u,3,"Incorrect keyframe parameters.");if(!z.yd)return on(u,4,"Frame not displayable.");k+=3,O-=3;var B=u.Kc;if(z.Rb){if(7>O)return on(u,7,"cannot parse picture header");if(!kc(b,k,O))return on(u,3,"Bad code word");B.c=16383&(b[k+4]<<8|b[k+3]),B.Td=b[k+4]>>6,B.i=16383&(b[k+6]<<8|b[k+5]),B.Ud=b[k+6]>>6,k+=7,O-=7,u.za=B.c+15>>4,u.Ub=B.i+15>>4,h.width=B.c,h.height=B.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((M=u.Pa).jb,0,255,M.jb.length),e((M=u.Qa)!=null),M.Cb=0,M.Bb=0,M.Fb=1,i(M.Zb,0,0,M.Zb.length),i(M.Lb,0,0,M.Lb)}if(z.ub>O)return on(u,7,"bad partition length");re(M=u.m,b,k,z.ub),k+=z.ub,O-=z.ub,z.Rb&&(B.Ld=Q(M),B.Kd=Q(M)),B=u.Qa;var q,Z=u.Pa;if(e(M!=null),e(B!=null),B.Cb=Q(M),B.Cb){if(B.Bb=Q(M),Q(M)){for(B.Fb=Q(M),q=0;4>q;++q)B.Zb[q]=Q(M)?X(M,7):0;for(q=0;4>q;++q)B.Lb[q]=Q(M)?X(M,6):0}if(B.Bb)for(q=0;3>q;++q)Z.jb[q]=Q(M)?W(M,8):255}else B.Bb=0;if(M.Ka)return on(u,3,"cannot parse segment header");if((B=u.ed).zd=Q(M),B.Tb=W(M,6),B.wb=W(M,3),B.Pc=Q(M),B.Pc&&Q(M)){for(Z=0;4>Z;++Z)Q(M)&&(B.vd[Z]=X(M,6));for(Z=0;4>Z;++Z)Q(M)&&(B.od[Z]=X(M,6))}if(u.L=B.Tb==0?0:B.zd?1:2,M.Ka)return on(u,3,"cannot parse filter header");var ue=O;if(O=q=k,k=q+ue,B=ue,u.Xb=(1<<W(u.m,2))-1,ue<3*(Z=u.Xb))b=7;else{for(q+=3*Z,B-=3*Z,ue=0;ue<Z;++ue){var ye=b[O+0]|b[O+1]<<8|b[O+2]<<16;ye>B&&(ye=B),re(u.Jc[+ue],b,q,ye),q+=ye,B-=ye,O+=3}re(u.Jc[+Z],b,q,B),b=q<k?0:5}if(b!=0)return on(u,b,"cannot parse partitions");for(b=W(q=u.m,7),O=Q(q)?X(q,4):0,k=Q(q)?X(q,4):0,B=Q(q)?X(q,4):0,Z=Q(q)?X(q,4):0,q=Q(q)?X(q,4):0,ue=u.Qa,ye=0;4>ye;++ye){if(ue.Cb){var we=ue.Zb[ye];ue.Fb||(we+=b)}else{if(0<ye){u.pb[ye]=u.pb[0];continue}we=b}var fe=u.pb[ye];fe.Sc[0]=Mf[jr(we+O,127)],fe.Sc[1]=zf[jr(we+0,127)],fe.Eb[0]=2*Mf[jr(we+k,127)],fe.Eb[1]=101581*zf[jr(we+B,127)]>>16,8>fe.Eb[1]&&(fe.Eb[1]=8),fe.Qc[0]=Mf[jr(we+Z,117)],fe.Qc[1]=zf[jr(we+q,127)],fe.lc=we+q}if(!z.Rb)return on(u,4,"Not a key frame.");for(Q(M),z=u.Pa,b=0;4>b;++b){for(O=0;8>O;++O)for(k=0;3>k;++k)for(B=0;11>B;++B)Z=ie(M,tx[b][O][k][B])?W(M,8):Zw[b][O][k][B],z.Wc[b][O].Yb[k][B]=Z;for(O=0;17>O;++O)z.Xc[b][O]=z.Wc[b][nx[O]]}return u.kc=Q(M),u.kc&&(u.Bd=W(M,8)),u.cb=1}function Ac(u,h,b,k,O,M,z){var B=h[O].Yb[b];for(b=0;16>O;++O){if(!ie(u,B[b+0]))return O;for(;!ie(u,B[b+1]);)if(B=h[++O].Yb[0],b=0,O==16)return 16;var q=h[O+1].Yb;if(ie(u,B[b+2])){var Z=u,ue=0;if(ie(Z,(we=B)[(ye=b)+3]))if(ie(Z,we[ye+6])){for(B=0,ye=2*(ue=ie(Z,we[ye+8]))+(we=ie(Z,we[ye+9+ue])),ue=0,we=Qw[ye];we[B];++B)ue+=ue+ie(Z,we[B]);ue+=3+(8<<ye)}else ie(Z,we[ye+7])?(ue=7+2*ie(Z,165),ue+=ie(Z,145)):ue=5+ie(Z,159);else ue=ie(Z,we[ye+4])?3+ie(Z,we[ye+5]):2;B=q[2]}else ue=1,B=q[1];q=z+Xw[O],0>(Z=u).b&&H(Z);var ye,we=Z.b,fe=(ye=Z.Ca>>1)-(Z.I>>we)>>31;--Z.b,Z.Ca+=fe,Z.Ca|=1,Z.I-=(ye+1&fe)<<we,M[q]=((ue^fe)-fe)*k[(0<O)+0]}return 16}function Ll(u){var h=u.rb[u.sb-1];h.la=0,h.Na=0,i(u.zc,0,0,u.zc.length),u.ja=0}function pf(u,h){if(u==null)return 0;if(h==null)return on(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!jc(u,h))return 0;if(e(u.cb),h.ac==null||h.ac(h)){h.ob&&(u.L=0);var b=td[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=h.v-b>>4,u.zb=h.j-b>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=h.o+15+b>>4,u.Hb=h.va+15+b>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var k=u.ed;for(b=0;4>b;++b){var O;if(u.Qa.Cb){var M=u.Qa.Lb[b];u.Qa.Fb||(M+=k.Tb)}else M=k.Tb;for(O=0;1>=O;++O){var z=u.gd[b][O],B=M;if(k.Pc&&(B+=k.vd[0],O&&(B+=k.od[0])),0<(B=0>B?0:63<B?63:B)){var q=B;0<k.wb&&(q=4<k.wb?q>>2:q>>1)>9-k.wb&&(q=9-k.wb),1>q&&(q=1),z.dd=q,z.tc=2*B+q,z.ld=40<=B?2:15<=B?1:0}else z.tc=0;z.La=O}}}b=0}else on(u,6,"Frame setup failed"),b=u.a;if(b=b==0){if(b){u.$c=0,0<u.Aa||(u.Ic=mx);e:{b=u.Ic,k=4*(q=u.za);var Z=32*q,ue=q+1,ye=0<u.L?q*(0<u.Aa?2:1):0,we=(u.Aa==2?2:1)*q;if((z=k+832+(O=3*(16*b+td[u.L])/2*Z)+(M=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=z)b=0;else{if(z>u.Vb){if(u.Vb=0,u.Ec=s(z),u.Fc=0,u.Ec==null){b=on(u,1,"no memory during frame initialization.");break e}u.Vb=z}z=u.Ec,B=u.Fc,u.Ac=z,u.Bc=B,B+=k,u.Gd=a(Z,Nc),u.Hd=0,u.rb=a(ue+1,Sc),u.sb=1,u.wa=ye?a(ye,uo):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=q),e(!0),u.oc=z,u.pc=B,B+=832,u.ya=a(we,Tl),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=q),u.R=16*q,u.B=8*q,q=(Z=td[u.L])*u.R,Z=Z/2*u.B,u.sa=z,u.ta=B+q,u.qa=u.sa,u.ra=u.ta+16*b*u.R+Z,u.Ha=u.qa,u.Ia=u.ra+8*b*u.B+Z,u.$c=0,B+=O,u.mb=M?z:null,u.nb=M?B:null,e(B+M<=u.Fc+u.Vb),Ll(u),i(u.Ac,u.Bc,0,k),b=1}}if(b){if(h.ka=0,h.y=u.sa,h.O=u.ta,h.f=u.qa,h.N=u.ra,h.ea=u.Ha,h.Vd=u.Ia,h.fa=u.R,h.Rc=u.B,h.F=null,h.J=0,!Vc){for(b=-255;255>=b;++b)Nn[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)ts[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)eu[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)Eo[255+b]=0>b?0:255<b?255:b;Vc=1}jo=vf,es=mf,Ql=Ec,sr=gf,Wr=Cc,ln=Pc,Ao=Ml,Hc=va,Xl=Cf,xa=zl,ba=Ef,ks=vo,_a=Bl,Po=zc,Sa=Mc,js=Ii,Zl=Qi,Hr=Pf,ci[0]=Li,ci[1]=yf,ci[2]=_f,ci[3]=Sf,ci[4]=Ic,ci[5]=mo,ci[6]=Rc,ci[7]=Ol,ci[8]=kf,ci[9]=Nf,As[0]=Tc,As[1]=xf,As[2]=Ji,As[3]=fo,As[4]=Hn,As[5]=bf,As[6]=Lc,ns[0]=xs,ns[1]=wf,ns[2]=jf,ns[3]=Dl,ns[4]=ga,ns[5]=Af,ns[6]=Fl,b=1}else b=0}b&&(b=function(fe,Ie){for(fe.M=0;fe.M<fe.Va;++fe.M){var Se,ce=fe.Jc[fe.M&fe.Xb],de=fe.m,Te=fe;for(Se=0;Se<Te.za;++Se){var De=de,Le=Te,Ye=Le.Ac,$e=Le.Bc+4*Se,rt=Le.zc,qe=Le.ya[Le.aa+Se];if(Le.Qa.Bb?qe.$b=ie(De,Le.Pa.jb[0])?2+ie(De,Le.Pa.jb[2]):ie(De,Le.Pa.jb[1]):qe.$b=0,Le.kc&&(qe.Ad=ie(De,Le.Bd)),qe.Za=!ie(De,145)+0,qe.Za){var jt=qe.Ob,Pt=0;for(Le=0;4>Le;++Le){var St,bt=rt[0+Le];for(St=0;4>St;++St){bt=ex[Ye[$e+St]][bt];for(var Ot=Ng[ie(De,bt[0])];0<Ot;)Ot=Ng[2*Ot+ie(De,bt[Ot])];bt=-Ot,Ye[$e+St]=bt}r(jt,Pt,Ye,$e,4),Pt+=4,rt[0+Le]=bt}}else bt=ie(De,156)?ie(De,128)?1:3:ie(De,163)?2:0,qe.Ob[0]=bt,i(Ye,$e,bt,4),i(rt,0,bt,4);qe.Dd=ie(De,142)?ie(De,114)?ie(De,183)?1:3:2:0}if(Te.m.Ka)return on(fe,7,"Premature end-of-partition0 encountered.");for(;fe.ja<fe.za;++fe.ja){if(Te=ce,De=(de=fe).rb[de.sb-1],Ye=de.rb[de.sb+de.ja],Se=de.ya[de.aa+de.ja],$e=de.kc?Se.Ad:0)De.la=Ye.la=0,Se.Za||(De.Na=Ye.Na=0),Se.Hc=0,Se.Gc=0,Se.ia=0;else{var It,vt;if(De=Ye,Ye=Te,$e=de.Pa.Xc,rt=de.ya[de.aa+de.ja],qe=de.pb[rt.$b],Le=rt.ad,jt=0,Pt=de.rb[de.sb-1],bt=St=0,i(Le,jt,0,384),rt.Za)var yn=0,mr=$e[3];else{Ot=s(16);var wn=De.Na+Pt.Na;if(wn=tu(Ye,$e[1],wn,qe.Eb,0,Ot,0),De.Na=Pt.Na=(0<wn)+0,1<wn)jo(Ot,0,Le,jt);else{var gr=Ot[0]+3>>3;for(Ot=0;256>Ot;Ot+=16)Le[jt+Ot]=gr}yn=1,mr=$e[0]}var Et=15&De.la,Pr=15&Pt.la;for(Ot=0;4>Ot;++Ot){var Er=1&Pr;for(gr=vt=0;4>gr;++gr)Et=Et>>1|(Er=(wn=tu(Ye,mr,wn=Er+(1&Et),qe.Sc,yn,Le,jt))>yn)<<7,vt=vt<<2|(3<wn?3:1<wn?2:Le[jt+0]!=0),jt+=16;Et>>=4,Pr=Pr>>1|Er<<7,St=(St<<8|vt)>>>0}for(mr=Et,yn=Pr>>4,It=0;4>It;It+=2){for(vt=0,Et=De.la>>4+It,Pr=Pt.la>>4+It,Ot=0;2>Ot;++Ot){for(Er=1&Pr,gr=0;2>gr;++gr)wn=Er+(1&Et),Et=Et>>1|(Er=0<(wn=tu(Ye,$e[2],wn,qe.Qc,0,Le,jt)))<<3,vt=vt<<2|(3<wn?3:1<wn?2:Le[jt+0]!=0),jt+=16;Et>>=2,Pr=Pr>>1|Er<<5}bt|=vt<<4*It,mr|=Et<<4<<It,yn|=(240&Pr)<<It}De.la=mr,Pt.la=yn,rt.Hc=St,rt.Gc=bt,rt.ia=43690&bt?0:qe.ia,$e=!(St|bt)}if(0<de.L&&(de.wa[de.Y+de.ja]=de.gd[Se.$b][Se.Za],de.wa[de.Y+de.ja].La|=!$e),Te.Ka)return on(fe,7,"Premature end-of-file encountered.")}if(Ll(fe),de=Ie,Te=1,Se=(ce=fe).D,De=0<ce.L&&ce.M>=ce.zb&&ce.M<=ce.Va,ce.Aa==0)e:{if(Se.M=ce.M,Se.uc=De,Vl(ce,Se),Te=1,Se=(vt=ce.D).Nb,De=(bt=td[ce.L])*ce.R,Ye=bt/2*ce.B,Ot=16*Se*ce.R,gr=8*Se*ce.B,$e=ce.sa,rt=ce.ta-De+Ot,qe=ce.qa,Le=ce.ra-Ye+gr,jt=ce.Ha,Pt=ce.Ia-Ye+gr,Pr=(Et=vt.M)==0,St=Et>=ce.Va-1,ce.Aa==2&&Vl(ce,vt),vt.uc)for(Er=(wn=ce).D.M,e(wn.D.uc),vt=wn.yb;vt<wn.Hb;++vt){yn=vt,mr=Er;var Tn=(Dn=(tn=wn).D).Nb;It=tn.R;var Dn=Dn.wa[Dn.Y+yn],ar=tn.sa,Kr=tn.ta+16*Tn*It+16*yn,Oi=Dn.dd,Ln=Dn.tc;if(Ln!=0)if(e(3<=Ln),tn.L==1)0<yn&&js(ar,Kr,It,Ln+4),Dn.La&&Hr(ar,Kr,It,Ln),0<mr&&Sa(ar,Kr,It,Ln+4),Dn.La&&Zl(ar,Kr,It,Ln);else{var rs=tn.B,Na=tn.qa,Co=tn.ra+8*Tn*rs+8*yn,Es=tn.Ha,tn=tn.Ia+8*Tn*rs+8*yn;Tn=Dn.ld,0<yn&&(Hc(ar,Kr,It,Ln+4,Oi,Tn),xa(Na,Co,Es,tn,rs,Ln+4,Oi,Tn)),Dn.La&&(ks(ar,Kr,It,Ln,Oi,Tn),Po(Na,Co,Es,tn,rs,Ln,Oi,Tn)),0<mr&&(Ao(ar,Kr,It,Ln+4,Oi,Tn),Xl(Na,Co,Es,tn,rs,Ln+4,Oi,Tn)),Dn.La&&(ba(ar,Kr,It,Ln,Oi,Tn),_a(Na,Co,Es,tn,rs,Ln,Oi,Tn))}}if(ce.ia&&alert("todo:DitherRow"),de.put!=null){if(vt=16*Et,Et=16*(Et+1),Pr?(de.y=ce.sa,de.O=ce.ta+Ot,de.f=ce.qa,de.N=ce.ra+gr,de.ea=ce.Ha,de.W=ce.Ia+gr):(vt-=bt,de.y=$e,de.O=rt,de.f=qe,de.N=Le,de.ea=jt,de.W=Pt),St||(Et-=bt),Et>de.o&&(Et=de.o),de.F=null,de.J=null,ce.Fa!=null&&0<ce.Fa.length&&vt<Et&&(de.J=Wl(ce,de,vt,Et-vt),de.F=ce.mb,de.F==null&&de.F.length==0)){Te=on(ce,3,"Could not decode alpha data.");break e}vt<de.j&&(bt=de.j-vt,vt=de.j,e(!(1&bt)),de.O+=ce.R*bt,de.N+=ce.B*(bt>>1),de.W+=ce.B*(bt>>1),de.F!=null&&(de.J+=de.width*bt)),vt<Et&&(de.O+=de.v,de.N+=de.v>>1,de.W+=de.v>>1,de.F!=null&&(de.J+=de.v),de.ka=vt-de.j,de.U=de.va-de.v,de.T=Et-vt,Te=de.put(de))}Se+1!=ce.Ic||St||(r(ce.sa,ce.ta-De,$e,rt+16*ce.R,De),r(ce.qa,ce.ra-Ye,qe,Le+8*ce.B,Ye),r(ce.Ha,ce.Ia-Ye,jt,Pt+8*ce.B,Ye))}if(!Te)return on(fe,6,"Output aborted.")}return 1}(u,h)),h.bc!=null&&h.bc(h),b&=1}return b?(u.cb=0,b):0}function oi(u,h,b,k,O){O=u[h+b+32*k]+(O>>3),u[h+b+32*k]=-256&O?0>O?0:255:O}function ho(u,h,b,k,O,M){oi(u,h,0,b,k+O),oi(u,h,1,b,k+M),oi(u,h,2,b,k-M),oi(u,h,3,b,k-O)}function hr(u){return(20091*u>>16)+u}function Il(u,h,b,k){var O,M=0,z=s(16);for(O=0;4>O;++O){var B=u[h+0]+u[h+8],q=u[h+0]-u[h+8],Z=(35468*u[h+4]>>16)-hr(u[h+12]),ue=hr(u[h+4])+(35468*u[h+12]>>16);z[M+0]=B+ue,z[M+1]=q+Z,z[M+2]=q-Z,z[M+3]=B-ue,M+=4,h++}for(O=M=0;4>O;++O)B=(u=z[M+0]+4)+z[M+8],q=u-z[M+8],Z=(35468*z[M+4]>>16)-hr(z[M+12]),oi(b,k,0,0,B+(ue=hr(z[M+4])+(35468*z[M+12]>>16))),oi(b,k,1,0,q+Z),oi(b,k,2,0,q-Z),oi(b,k,3,0,B-ue),M++,k+=32}function Pc(u,h,b,k){var O=u[h+0]+4,M=35468*u[h+4]>>16,z=hr(u[h+4]),B=35468*u[h+1]>>16;ho(b,k,0,O+z,u=hr(u[h+1]),B),ho(b,k,1,O+M,u,B),ho(b,k,2,O-M,u,B),ho(b,k,3,O-z,u,B)}function mf(u,h,b,k,O){Il(u,h,b,k),O&&Il(u,h+16,b,k+4)}function Ec(u,h,b,k){es(u,h+0,b,k,1),es(u,h+32,b,k+128,1)}function gf(u,h,b,k){var O;for(u=u[h+0]+4,O=0;4>O;++O)for(h=0;4>h;++h)oi(b,k,h,O,u)}function Cc(u,h,b,k){u[h+0]&&sr(u,h+0,b,k),u[h+16]&&sr(u,h+16,b,k+4),u[h+32]&&sr(u,h+32,b,k+128),u[h+48]&&sr(u,h+48,b,k+128+4)}function vf(u,h,b,k){var O,M=s(16);for(O=0;4>O;++O){var z=u[h+0+O]+u[h+12+O],B=u[h+4+O]+u[h+8+O],q=u[h+4+O]-u[h+8+O],Z=u[h+0+O]-u[h+12+O];M[0+O]=z+B,M[8+O]=z-B,M[4+O]=Z+q,M[12+O]=Z-q}for(O=0;4>O;++O)z=(u=M[0+4*O]+3)+M[3+4*O],B=M[1+4*O]+M[2+4*O],q=M[1+4*O]-M[2+4*O],Z=u-M[3+4*O],b[k+0]=z+B>>3,b[k+16]=Z+q>>3,b[k+32]=z-B>>3,b[k+48]=Z-q>>3,k+=64}function Rl(u,h,b){var k,O=h-32,M=Ar,z=255-u[O-1];for(k=0;k<b;++k){var B,q=M,Z=z+u[h-1];for(B=0;B<b;++B)u[h+B]=q[Z+u[O+B]];h+=32}}function yf(u,h){Rl(u,h,4)}function wf(u,h){Rl(u,h,8)}function xf(u,h){Rl(u,h,16)}function Ji(u,h){var b;for(b=0;16>b;++b)r(u,h+32*b,u,h-32,16)}function fo(u,h){var b;for(b=16;0<b;--b)i(u,h,u[h-1],16),h+=32}function po(u,h,b){var k;for(k=0;16>k;++k)i(h,b+32*k,u,16)}function Tc(u,h){var b,k=16;for(b=0;16>b;++b)k+=u[h-1+32*b]+u[h+b-32];po(k>>5,u,h)}function Hn(u,h){var b,k=8;for(b=0;16>b;++b)k+=u[h-1+32*b];po(k>>4,u,h)}function bf(u,h){var b,k=8;for(b=0;16>b;++b)k+=u[h+b-32];po(k>>4,u,h)}function Lc(u,h){po(128,u,h)}function dt(u,h,b){return u+2*h+b+2>>2}function _f(u,h){var b,k=h-32;for(k=new Uint8Array([dt(u[k-1],u[k+0],u[k+1]),dt(u[k+0],u[k+1],u[k+2]),dt(u[k+1],u[k+2],u[k+3]),dt(u[k+2],u[k+3],u[k+4])]),b=0;4>b;++b)r(u,h+32*b,k,0,k.length)}function Sf(u,h){var b=u[h-1],k=u[h-1+32],O=u[h-1+64],M=u[h-1+96];be(u,h+0,16843009*dt(u[h-1-32],b,k)),be(u,h+32,16843009*dt(b,k,O)),be(u,h+64,16843009*dt(k,O,M)),be(u,h+96,16843009*dt(O,M,M))}function Li(u,h){var b,k=4;for(b=0;4>b;++b)k+=u[h+b-32]+u[h-1+32*b];for(k>>=3,b=0;4>b;++b)i(u,h+32*b,k,4)}function Ic(u,h){var b=u[h-1+0],k=u[h-1+32],O=u[h-1+64],M=u[h-1-32],z=u[h+0-32],B=u[h+1-32],q=u[h+2-32],Z=u[h+3-32];u[h+0+96]=dt(k,O,u[h-1+96]),u[h+1+96]=u[h+0+64]=dt(b,k,O),u[h+2+96]=u[h+1+64]=u[h+0+32]=dt(M,b,k),u[h+3+96]=u[h+2+64]=u[h+1+32]=u[h+0+0]=dt(z,M,b),u[h+3+64]=u[h+2+32]=u[h+1+0]=dt(B,z,M),u[h+3+32]=u[h+2+0]=dt(q,B,z),u[h+3+0]=dt(Z,q,B)}function Rc(u,h){var b=u[h+1-32],k=u[h+2-32],O=u[h+3-32],M=u[h+4-32],z=u[h+5-32],B=u[h+6-32],q=u[h+7-32];u[h+0+0]=dt(u[h+0-32],b,k),u[h+1+0]=u[h+0+32]=dt(b,k,O),u[h+2+0]=u[h+1+32]=u[h+0+64]=dt(k,O,M),u[h+3+0]=u[h+2+32]=u[h+1+64]=u[h+0+96]=dt(O,M,z),u[h+3+32]=u[h+2+64]=u[h+1+96]=dt(M,z,B),u[h+3+64]=u[h+2+96]=dt(z,B,q),u[h+3+96]=dt(B,q,q)}function mo(u,h){var b=u[h-1+0],k=u[h-1+32],O=u[h-1+64],M=u[h-1-32],z=u[h+0-32],B=u[h+1-32],q=u[h+2-32],Z=u[h+3-32];u[h+0+0]=u[h+1+64]=M+z+1>>1,u[h+1+0]=u[h+2+64]=z+B+1>>1,u[h+2+0]=u[h+3+64]=B+q+1>>1,u[h+3+0]=q+Z+1>>1,u[h+0+96]=dt(O,k,b),u[h+0+64]=dt(k,b,M),u[h+0+32]=u[h+1+96]=dt(b,M,z),u[h+1+32]=u[h+2+96]=dt(M,z,B),u[h+2+32]=u[h+3+96]=dt(z,B,q),u[h+3+32]=dt(B,q,Z)}function Ol(u,h){var b=u[h+0-32],k=u[h+1-32],O=u[h+2-32],M=u[h+3-32],z=u[h+4-32],B=u[h+5-32],q=u[h+6-32],Z=u[h+7-32];u[h+0+0]=b+k+1>>1,u[h+1+0]=u[h+0+64]=k+O+1>>1,u[h+2+0]=u[h+1+64]=O+M+1>>1,u[h+3+0]=u[h+2+64]=M+z+1>>1,u[h+0+32]=dt(b,k,O),u[h+1+32]=u[h+0+96]=dt(k,O,M),u[h+2+32]=u[h+1+96]=dt(O,M,z),u[h+3+32]=u[h+2+96]=dt(M,z,B),u[h+3+64]=dt(z,B,q),u[h+3+96]=dt(B,q,Z)}function Nf(u,h){var b=u[h-1+0],k=u[h-1+32],O=u[h-1+64],M=u[h-1+96];u[h+0+0]=b+k+1>>1,u[h+2+0]=u[h+0+32]=k+O+1>>1,u[h+2+32]=u[h+0+64]=O+M+1>>1,u[h+1+0]=dt(b,k,O),u[h+3+0]=u[h+1+32]=dt(k,O,M),u[h+3+32]=u[h+1+64]=dt(O,M,M),u[h+3+64]=u[h+2+64]=u[h+0+96]=u[h+1+96]=u[h+2+96]=u[h+3+96]=M}function kf(u,h){var b=u[h-1+0],k=u[h-1+32],O=u[h-1+64],M=u[h-1+96],z=u[h-1-32],B=u[h+0-32],q=u[h+1-32],Z=u[h+2-32];u[h+0+0]=u[h+2+32]=b+z+1>>1,u[h+0+32]=u[h+2+64]=k+b+1>>1,u[h+0+64]=u[h+2+96]=O+k+1>>1,u[h+0+96]=M+O+1>>1,u[h+3+0]=dt(B,q,Z),u[h+2+0]=dt(z,B,q),u[h+1+0]=u[h+3+32]=dt(b,z,B),u[h+1+32]=u[h+3+64]=dt(k,b,z),u[h+1+64]=u[h+3+96]=dt(O,k,b),u[h+1+96]=dt(M,O,k)}function jf(u,h){var b;for(b=0;8>b;++b)r(u,h+32*b,u,h-32,8)}function Dl(u,h){var b;for(b=0;8>b;++b)i(u,h,u[h-1],8),h+=32}function ma(u,h,b){var k;for(k=0;8>k;++k)i(h,b+32*k,u,8)}function xs(u,h){var b,k=8;for(b=0;8>b;++b)k+=u[h+b-32]+u[h-1+32*b];ma(k>>4,u,h)}function Af(u,h){var b,k=4;for(b=0;8>b;++b)k+=u[h+b-32];ma(k>>3,u,h)}function ga(u,h){var b,k=4;for(b=0;8>b;++b)k+=u[h-1+32*b];ma(k>>3,u,h)}function Fl(u,h){ma(128,u,h)}function go(u,h,b){var k=u[h-b],O=u[h+0],M=3*(O-k)+If[1020+u[h-2*b]-u[h+b]],z=Gc[112+(M+4>>3)];u[h-b]=Ar[255+k+Gc[112+(M+3>>3)]],u[h+0]=Ar[255+O-z]}function Oc(u,h,b,k){var O=u[h+0],M=u[h+b];return Gr[255+u[h-2*b]-u[h-b]]>k||Gr[255+M-O]>k}function Dc(u,h,b,k){return 4*Gr[255+u[h-b]-u[h+0]]+Gr[255+u[h-2*b]-u[h+b]]<=k}function Fc(u,h,b,k,O){var M=u[h-3*b],z=u[h-2*b],B=u[h-b],q=u[h+0],Z=u[h+b],ue=u[h+2*b],ye=u[h+3*b];return 4*Gr[255+B-q]+Gr[255+z-Z]>k?0:Gr[255+u[h-4*b]-M]<=O&&Gr[255+M-z]<=O&&Gr[255+z-B]<=O&&Gr[255+ye-ue]<=O&&Gr[255+ue-Z]<=O&&Gr[255+Z-q]<=O}function Mc(u,h,b,k){var O=2*k+1;for(k=0;16>k;++k)Dc(u,h+k,b,O)&&go(u,h+k,b)}function Ii(u,h,b,k){var O=2*k+1;for(k=0;16>k;++k)Dc(u,h+k*b,1,O)&&go(u,h+k*b,1)}function Qi(u,h,b,k){var O;for(O=3;0<O;--O)Mc(u,h+=4*b,b,k)}function Pf(u,h,b,k){var O;for(O=3;0<O;--O)Ii(u,h+=4,b,k)}function bs(u,h,b,k,O,M,z,B){for(M=2*M+1;0<O--;){if(Fc(u,h,b,M,z))if(Oc(u,h,b,B))go(u,h,b);else{var q=u,Z=h,ue=b,ye=q[Z-2*ue],we=q[Z-ue],fe=q[Z+0],Ie=q[Z+ue],Se=q[Z+2*ue],ce=27*(Te=If[1020+3*(fe-we)+If[1020+ye-Ie]])+63>>7,de=18*Te+63>>7,Te=9*Te+63>>7;q[Z-3*ue]=Ar[255+q[Z-3*ue]+Te],q[Z-2*ue]=Ar[255+ye+de],q[Z-ue]=Ar[255+we+ce],q[Z+0]=Ar[255+fe-ce],q[Z+ue]=Ar[255+Ie-de],q[Z+2*ue]=Ar[255+Se-Te]}h+=k}}function li(u,h,b,k,O,M,z,B){for(M=2*M+1;0<O--;){if(Fc(u,h,b,M,z))if(Oc(u,h,b,B))go(u,h,b);else{var q=u,Z=h,ue=b,ye=q[Z-ue],we=q[Z+0],fe=q[Z+ue],Ie=Gc[112+((Se=3*(we-ye))+4>>3)],Se=Gc[112+(Se+3>>3)],ce=Ie+1>>1;q[Z-2*ue]=Ar[255+q[Z-2*ue]+ce],q[Z-ue]=Ar[255+ye+Se],q[Z+0]=Ar[255+we-Ie],q[Z+ue]=Ar[255+fe-ce]}h+=k}}function Ml(u,h,b,k,O,M){bs(u,h,b,1,16,k,O,M)}function va(u,h,b,k,O,M){bs(u,h,1,b,16,k,O,M)}function Ef(u,h,b,k,O,M){var z;for(z=3;0<z;--z)li(u,h+=4*b,b,1,16,k,O,M)}function vo(u,h,b,k,O,M){var z;for(z=3;0<z;--z)li(u,h+=4,1,b,16,k,O,M)}function Cf(u,h,b,k,O,M,z,B){bs(u,h,O,1,8,M,z,B),bs(b,k,O,1,8,M,z,B)}function zl(u,h,b,k,O,M,z,B){bs(u,h,1,O,8,M,z,B),bs(b,k,1,O,8,M,z,B)}function Bl(u,h,b,k,O,M,z,B){li(u,h+4*O,O,1,8,M,z,B),li(b,k+4*O,O,1,8,M,z,B)}function zc(u,h,b,k,O,M,z,B){li(u,h+4,1,O,8,M,z,B),li(b,k+4,1,O,8,M,z,B)}function yo(){this.ba=new Nr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new wt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ul(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function $l(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bc(){this.ua=0,this.Wa=new se,this.vb=new se,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new A}function Tf(){this.xb=this.a=0,this.l=new co,this.ca=new Nr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bc,this.ab=0,this.gc=a(4,$l),this.Oc=0}function wo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new co,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ya(u,h,b,k,O,M,z){for(u=u==null?0:u[h+0],h=0;h<z;++h)O[M+h]=u+b[k+h]&255,u=O[M+h]}function ql(u,h,b,k,O,M,z){var B;if(u==null)ya(null,null,b,k,O,M,z);else for(B=0;B<z;++B)O[M+B]=u[h+B]+b[k+B]&255}function _s(u,h,b,k,O,M,z){if(u==null)ya(null,null,b,k,O,M,z);else{var B,q=u[h+0],Z=q,ue=q;for(B=0;B<z;++B)Z=ue+(q=u[h+B])-Z,ue=b[k+B]+(-256&Z?0>Z?0:255:Z)&255,Z=q,O[M+B]=ue}}function Wl(u,h,b,k){var O=h.width,M=h.o;if(e(u!=null&&h!=null),0>b||0>=k||b+k>M)return null;if(!u.Cc){if(u.ga==null){var z;if(u.ga=new wo,(z=u.ga==null)||(z=h.width*h.o,e(u.Gb.length==0),u.Gb=s(z),u.Uc=0,u.Gb==null?z=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,z=1),z=!z),!z){z=u.ga;var B=u.Fa,q=u.P,Z=u.qc,ue=u.mb,ye=u.nb,we=q+1,fe=Z-1,Ie=z.l;if(e(B!=null&&ue!=null&&h!=null),Ps[0]=null,Ps[1]=ya,Ps[2]=ql,Ps[3]=_s,z.ca=ue,z.tb=ye,z.c=h.width,z.i=h.height,e(0<z.c&&0<z.i),1>=Z)h=0;else if(z.$a=B[q+0]>>0&3,z.Z=B[q+0]>>2&3,z.Lc=B[q+0]>>4&3,q=B[q+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||q)h=0;else if(Ie.put=nr,Ie.ac=Ht,Ie.bc=rr,Ie.ma=z,Ie.width=h.width,Ie.height=h.height,Ie.Da=h.Da,Ie.v=h.v,Ie.va=h.va,Ie.j=h.j,Ie.o=h.o,z.$a)e:{e(z.$a==1),h=$r();t:for(;;){if(h==null){h=0;break e}if(e(z!=null),z.mc=h,h.c=z.c,h.i=z.i,h.l=z.l,h.l.ma=z,h.l.width=z.c,h.l.height=z.i,h.a=0,G(h.m,B,we,fe),!Ti(z.c,z.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&Ki(h.s)?(z.ic=1,B=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(B),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(z.ic=0,h=pa(h,z.c)),!h))break t;h=1;break e}z.mc=null,h=0}else h=fe>=z.c*z.i;z=!h}if(z)return null;u.ga.Lc!=1?u.Ga=0:k=M-b}e(u.ga!=null),e(b+k<=M);e:{if(h=(B=u.ga).c,M=B.l.o,B.$a==0){if(we=u.rc,fe=u.Vc,Ie=u.Fa,q=u.P+1+b*h,Z=u.mb,ue=u.nb+b*h,e(q<=u.P+u.qc),B.Z!=0)for(e(Ps[B.Z]!=null),z=0;z<k;++z)Ps[B.Z](we,fe,Ie,q,Z,ue,h),we=Z,fe=ue,ue+=h,q+=h;else for(z=0;z<k;++z)r(Z,ue,Ie,q,h),we=Z,fe=ue,ue+=h,q+=h;u.rc=we,u.Vc=fe}else{if(e(B.mc!=null),h=b+k,e((z=B.mc)!=null),e(h<=z.i),z.C>=h)h=1;else if(B.ic||me(),B.ic){B=z.V,we=z.Ba,fe=z.c;var Se=z.i,ce=(Ie=1,q=z.$/fe,Z=z.$%fe,ue=z.m,ye=z.s,z.$),de=fe*Se,Te=fe*h,De=ye.wc,Le=ce<Te?gn(ye,Z,q):null;e(ce<=de),e(h<=Se),e(Ki(ye));t:for(;;){for(;!ue.h&&ce<Te;){if(Z&De||(Le=gn(ye,Z,q)),e(Le!=null),P(ue),256>(Se=Wn(Le.G[0],Le.H[0],ue)))B[we+ce]=Se,++ce,++Z>=fe&&(Z=0,++q<=h&&!(q%16)&&si(z,q));else{if(!(280>Se)){Ie=0;break t}Se=qn(Se-256,ue);var Ye,$e=Wn(Le.G[4],Le.H[4],ue);if(P(ue),!(ce>=($e=Ur(fe,$e=qn($e,ue)))&&de-ce>=Se)){Ie=0;break t}for(Ye=0;Ye<Se;++Ye)B[we+ce+Ye]=B[we+ce+Ye-$e];for(ce+=Se,Z+=Se;Z>=fe;)Z-=fe,++q<=h&&!(q%16)&&si(z,q);ce<Te&&Z&De&&(Le=gn(ye,Z,q))}e(ue.h==J(ue))}si(z,q>h?h:q);break t}!Ie||ue.h&&ce<de?(Ie=0,z.a=ue.h?5:3):z.$=ce,h=Ie}else h=ai(z,z.V,z.Ba,z.c,z.i,h,so);if(!h){k=0;break e}}b+k>=M&&(u.Cc=1),k=1}if(!k)return null;if(u.Cc&&((k=u.ga)!=null&&(k.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*O}function y(u,h,b,k,O,M){for(;0<O--;){var z,B=u,q=h+(b?1:0),Z=u,ue=h+(b?0:3);for(z=0;z<k;++z){var ye=Z[ue+4*z];ye!=255&&(ye*=32897,B[q+4*z+0]=B[q+4*z+0]*ye>>23,B[q+4*z+1]=B[q+4*z+1]*ye>>23,B[q+4*z+2]=B[q+4*z+2]*ye>>23)}h+=M}}function F(u,h,b,k,O){for(;0<k--;){var M;for(M=0;M<b;++M){var z=u[h+2*M+0],B=15&(Z=u[h+2*M+1]),q=4369*B,Z=(240&Z|Z>>4)*q>>16;u[h+2*M+0]=(240&z|z>>4)*q>>16&240|(15&z|z<<4)*q>>16>>4&15,u[h+2*M+1]=240&Z|B}h+=O}}function te(u,h,b,k,O,M,z,B){var q,Z,ue=255;for(Z=0;Z<O;++Z){for(q=0;q<k;++q){var ye=u[h+q];M[z+4*q]=ye,ue&=ye}h+=b,z+=B}return ue!=255}function le(u,h,b,k,O){var M;for(M=0;M<O;++M)b[k+M]=u[h+M]>>8}function me(){Vr=y,Ft=F,Mt=te,un=le}function Ne(u,h,b){I[u]=function(k,O,M,z,B,q,Z,ue,ye,we,fe,Ie,Se,ce,de,Te,De){var Le,Ye=De-1>>1,$e=B[q+0]|Z[ue+0]<<16,rt=ye[we+0]|fe[Ie+0]<<16;e(k!=null);var qe=3*$e+rt+131074>>2;for(h(k[O+0],255&qe,qe>>16,Se,ce),M!=null&&(qe=3*rt+$e+131074>>2,h(M[z+0],255&qe,qe>>16,de,Te)),Le=1;Le<=Ye;++Le){var jt=B[q+Le]|Z[ue+Le]<<16,Pt=ye[we+Le]|fe[Ie+Le]<<16,St=$e+jt+rt+Pt+524296,bt=St+2*(jt+rt)>>3;qe=bt+$e>>1,$e=(St=St+2*($e+Pt)>>3)+jt>>1,h(k[O+2*Le-1],255&qe,qe>>16,Se,ce+(2*Le-1)*b),h(k[O+2*Le-0],255&$e,$e>>16,Se,ce+(2*Le-0)*b),M!=null&&(qe=St+rt>>1,$e=bt+Pt>>1,h(M[z+2*Le-1],255&qe,qe>>16,de,Te+(2*Le-1)*b),h(M[z+2*Le+0],255&$e,$e>>16,de,Te+(2*Le+0)*b)),$e=jt,rt=Pt}1&De||(qe=3*$e+rt+131074>>2,h(k[O+De-1],255&qe,qe>>16,Se,ce+(De-1)*b),M!=null&&(qe=3*rt+$e+131074>>2,h(M[z+De-1],255&qe,qe>>16,de,Te+(De-1)*b)))}}function Fe(){Yr[Yc]=ix,Yr[Kc]=jg,Yr[bg]=sx,Yr[Jc]=Ag,Yr[Qc]=Pg,Yr[Rf]=Eg,Yr[_g]=ax,Yr[Of]=jg,Yr[Df]=Ag,Yr[Xc]=Pg,Yr[Ff]=Eg}function Ve(u){return u&~ox?0>u?0:255:u>>Cg}function tt(u,h){return Ve((19077*u>>8)+(26149*h>>8)-14234)}function gt(u,h,b){return Ve((19077*u>>8)-(6419*h>>8)-(13320*b>>8)+8708)}function ht(u,h){return Ve((19077*u>>8)+(33050*h>>8)-17685)}function _t(u,h,b,k,O){k[O+0]=tt(u,b),k[O+1]=gt(u,h,b),k[O+2]=ht(u,h)}function Yt(u,h,b,k,O){k[O+0]=ht(u,h),k[O+1]=gt(u,h,b),k[O+2]=tt(u,b)}function en(u,h,b,k,O){var M=gt(u,h,b);h=M<<3&224|ht(u,h)>>3,k[O+0]=248&tt(u,b)|M>>5,k[O+1]=h}function vn(u,h,b,k,O){var M=240&ht(u,h)|15;k[O+0]=240&tt(u,b)|gt(u,h,b)>>4,k[O+1]=M}function Vn(u,h,b,k,O){k[O+0]=255,_t(u,h,b,k,O+1)}function Cn(u,h,b,k,O){Yt(u,h,b,k,O),k[O+3]=255}function ui(u,h,b,k,O){_t(u,h,b,k,O),k[O+3]=255}function jr(u,h){return 0>u?0:u>h?h:u}function Ri(u,h,b){I[u]=function(k,O,M,z,B,q,Z,ue,ye){for(var we=ue+(-2&ye)*b;ue!=we;)h(k[O+0],M[z+0],B[q+0],Z,ue),h(k[O+1],M[z+0],B[q+0],Z,ue+b),O+=2,++z,++q,ue+=2*b;1&ye&&h(k[O+0],M[z+0],B[q+0],Z,ue)}}function Uc(u,h,b){return b==0?u==0?h==0?6:5:h==0?4:0:b}function Hl(u,h,b,k,O){switch(u>>>30){case 3:es(h,b,k,O,0);break;case 2:ln(h,b,k,O);break;case 1:sr(h,b,k,O)}}function Vl(u,h){var b,k,O=h.M,M=h.Nb,z=u.oc,B=u.pc+40,q=u.oc,Z=u.pc+584,ue=u.oc,ye=u.pc+600;for(b=0;16>b;++b)z[B+32*b-1]=129;for(b=0;8>b;++b)q[Z+32*b-1]=129,ue[ye+32*b-1]=129;for(0<O?z[B-1-32]=q[Z-1-32]=ue[ye-1-32]=129:(i(z,B-32-1,127,21),i(q,Z-32-1,127,9),i(ue,ye-32-1,127,9)),k=0;k<u.za;++k){var we=h.ya[h.aa+k];if(0<k){for(b=-1;16>b;++b)r(z,B+32*b-4,z,B+32*b+12,4);for(b=-1;8>b;++b)r(q,Z+32*b-4,q,Z+32*b+4,4),r(ue,ye+32*b-4,ue,ye+32*b+4,4)}var fe=u.Gd,Ie=u.Hd+k,Se=we.ad,ce=we.Hc;if(0<O&&(r(z,B-32,fe[Ie].y,0,16),r(q,Z-32,fe[Ie].f,0,8),r(ue,ye-32,fe[Ie].ea,0,8)),we.Za){var de=z,Te=B-32+16;for(0<O&&(k>=u.za-1?i(de,Te,fe[Ie].y[15],4):r(de,Te,fe[Ie+1].y,0,4)),b=0;4>b;b++)de[Te+128+b]=de[Te+256+b]=de[Te+384+b]=de[Te+0+b];for(b=0;16>b;++b,ce<<=2)de=z,Te=B+Lg[b],ci[we.Ob[b]](de,Te),Hl(ce,Se,16*+b,de,Te)}else if(de=Uc(k,O,we.Ob[0]),As[de](z,B),ce!=0)for(b=0;16>b;++b,ce<<=2)Hl(ce,Se,16*+b,z,B+Lg[b]);for(b=we.Gc,de=Uc(k,O,we.Dd),ns[de](q,Z),ns[de](ue,ye),ce=Se,de=q,Te=Z,255&(we=b>>0)&&(170&we?Ql(ce,256,de,Te):Wr(ce,256,de,Te)),we=ue,ce=ye,255&(b>>=8)&&(170&b?Ql(Se,320,we,ce):Wr(Se,320,we,ce)),O<u.Ub-1&&(r(fe[Ie].y,0,z,B+480,16),r(fe[Ie].f,0,q,Z+224,8),r(fe[Ie].ea,0,ue,ye+224,8)),b=8*M*u.B,fe=u.sa,Ie=u.ta+16*k+16*M*u.R,Se=u.qa,we=u.ra+8*k+b,ce=u.Ha,de=u.Ia+8*k+b,b=0;16>b;++b)r(fe,Ie+b*u.R,z,B+32*b,16);for(b=0;8>b;++b)r(Se,we+b*u.B,q,Z+32*b,8),r(ce,de+b*u.B,ue,ye+32*b,8)}}function xo(u,h,b,k,O,M,z,B,q){var Z=[0],ue=[0],ye=0,we=q!=null?q.kd:0,fe=q??new Ul;if(u==null||12>b)return 7;fe.data=u,fe.w=h,fe.ha=b,h=[h],b=[b],fe.gb=[fe.gb];e:{var Ie=h,Se=b,ce=fe.gb;if(e(u!=null),e(Se!=null),e(ce!=null),ce[0]=0,12<=Se[0]&&!n(u,Ie[0],"RIFF")){if(n(u,Ie[0]+8,"WEBP")){ce=3;break e}var de=ke(u,Ie[0]+4);if(12>de||4294967286<de){ce=3;break e}if(we&&de>Se[0]-8){ce=7;break e}ce[0]=de,Ie[0]+=12,Se[0]-=12}ce=0}if(ce!=0)return ce;for(de=0<fe.gb[0],b=b[0];;){e:{var Te=u;Se=h,ce=b;var De=Z,Le=ue,Ye=Ie=[0];if((qe=ye=[ye])[0]=0,8>ce[0])ce=7;else{if(!n(Te,Se[0],"VP8X")){if(ke(Te,Se[0]+4)!=10){ce=3;break e}if(18>ce[0]){ce=7;break e}var $e=ke(Te,Se[0]+8),rt=1+Ae(Te,Se[0]+12);if(2147483648<=rt*(Te=1+Ae(Te,Se[0]+15))){ce=3;break e}Ye!=null&&(Ye[0]=$e),De!=null&&(De[0]=rt),Le!=null&&(Le[0]=Te),Se[0]+=18,ce[0]-=18,qe[0]=1}ce=0}}if(ye=ye[0],Ie=Ie[0],ce!=0)return ce;if(Se=!!(2&Ie),!de&&ye)return 3;if(M!=null&&(M[0]=!!(16&Ie)),z!=null&&(z[0]=Se),B!=null&&(B[0]=0),z=Z[0],Ie=ue[0],ye&&Se&&q==null){ce=0;break}if(4>b){ce=7;break}if(de&&ye||!de&&!ye&&!n(u,h[0],"ALPH")){b=[b],fe.na=[fe.na],fe.P=[fe.P],fe.Sa=[fe.Sa];e:{$e=u,ce=h,de=b;var qe=fe.gb;De=fe.na,Le=fe.P,Ye=fe.Sa,rt=22,e($e!=null),e(de!=null),Te=ce[0];var jt=de[0];for(e(De!=null),e(Ye!=null),De[0]=null,Le[0]=null,Ye[0]=0;;){if(ce[0]=Te,de[0]=jt,8>jt){ce=7;break e}var Pt=ke($e,Te+4);if(4294967286<Pt){ce=3;break e}var St=8+Pt+1&-2;if(rt+=St,0<qe&&rt>qe){ce=3;break e}if(!n($e,Te,"VP8 ")||!n($e,Te,"VP8L")){ce=0;break e}if(jt[0]<St){ce=7;break e}n($e,Te,"ALPH")||(De[0]=$e,Le[0]=Te+8,Ye[0]=Pt),Te+=St,jt-=St}}if(b=b[0],fe.na=fe.na[0],fe.P=fe.P[0],fe.Sa=fe.Sa[0],ce!=0)break}b=[b],fe.Ja=[fe.Ja],fe.xa=[fe.xa];e:if(qe=u,ce=h,de=b,De=fe.gb[0],Le=fe.Ja,Ye=fe.xa,$e=ce[0],Te=!n(qe,$e,"VP8 "),rt=!n(qe,$e,"VP8L"),e(qe!=null),e(de!=null),e(Le!=null),e(Ye!=null),8>de[0])ce=7;else{if(Te||rt){if(qe=ke(qe,$e+4),12<=De&&qe>De-12){ce=3;break e}if(we&&qe>de[0]-8){ce=7;break e}Le[0]=qe,ce[0]+=8,de[0]-=8,Ye[0]=rt}else Ye[0]=5<=de[0]&&qe[$e+0]==47&&!(qe[$e+4]>>5),Le[0]=de[0];ce=0}if(b=b[0],fe.Ja=fe.Ja[0],fe.xa=fe.xa[0],h=h[0],ce!=0)break;if(4294967286<fe.Ja)return 3;if(B==null||Se||(B[0]=fe.xa?2:1),z=[z],Ie=[Ie],fe.xa){if(5>b){ce=7;break}B=z,we=Ie,Se=M,u==null||5>b?u=0:5<=b&&u[h+0]==47&&!(u[h+4]>>5)?(de=[0],qe=[0],De=[0],G(Le=new T,u,h,b),nt(Le,de,qe,De)?(B!=null&&(B[0]=de[0]),we!=null&&(we[0]=qe[0]),Se!=null&&(Se[0]=De[0]),u=1):u=0):u=0}else{if(10>b){ce=7;break}B=Ie,u==null||10>b||!kc(u,h+3,b-3)?u=0:(we=u[h+0]|u[h+1]<<8|u[h+2]<<16,Se=16383&(u[h+7]<<8|u[h+6]),u=16383&(u[h+9]<<8|u[h+8]),1&we||3<(we>>1&7)||!(we>>4&1)||we>>5>=fe.Ja||!Se||!u?u=0:(z&&(z[0]=Se),B&&(B[0]=u),u=1))}if(!u||(z=z[0],Ie=Ie[0],ye&&(Z[0]!=z||ue[0]!=Ie)))return 3;q!=null&&(q[0]=fe,q.offset=h-q.w,e(4294967286>h-q.w),e(q.offset==q.ha-b));break}return ce==0||ce==7&&ye&&q==null?(M!=null&&(M[0]|=fe.na!=null&&0<fe.na.length),k!=null&&(k[0]=z),O!=null&&(O[0]=Ie),0):ce}function Gl(u,h,b){var k=h.width,O=h.height,M=0,z=0,B=k,q=O;if(h.Da=u!=null&&0<u.Da,h.Da&&(B=u.cd,q=u.bd,M=u.v,z=u.j,11>b||(M&=-2,z&=-2),0>M||0>z||0>=B||0>=q||M+B>k||z+q>O))return 0;if(h.v=M,h.j=z,h.va=M+B,h.o=z+q,h.U=B,h.T=q,h.da=u!=null&&0<u.da,h.da){if(!Ze(B,q,b=[u.ib],M=[u.hb]))return 0;h.ib=b[0],h.hb=M[0]}return h.ob=u!=null&&u.ob,h.Kb=u==null||!u.Sd,h.da&&(h.ob=h.ib<3*k/4&&h.hb<3*O/4,h.Kb=0),1}function Yl(u){if(u==null)return 2;if(11>u.S){var h=u.f.RGBA;h.fb+=(u.height-1)*h.A,h.A=-h.A}else h=u.f.kb,u=u.height,h.O+=(u-1)*h.fa,h.fa=-h.fa,h.N+=(u-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(u-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(u-1)*h.lb,h.lb=-h.lb);return 0}function bo(u,h,b,k){if(k==null||0>=u||0>=h)return 2;if(b!=null){if(b.Da){var O=b.cd,M=b.bd,z=-2&b.v,B=-2&b.j;if(0>z||0>B||0>=O||0>=M||z+O>u||B+M>h)return 2;u=O,h=M}if(b.da){if(!Ze(u,h,O=[b.ib],M=[b.hb]))return 2;u=O[0],h=M[0]}}k.width=u,k.height=h;e:{var q=k.width,Z=k.height;if(u=k.S,0>=q||0>=Z||!(u>=Yc&&13>u))u=2;else{if(0>=k.Rd&&k.sd==null){z=M=O=h=0;var ue=(B=q*Ig[u])*Z;if(11>u||(M=(Z+1)/2*(h=(q+1)/2),u==12&&(z=(O=q)*Z)),(Z=s(ue+2*M+z))==null){u=1;break e}k.sd=Z,11>u?((q=k.f.RGBA).eb=Z,q.fb=0,q.A=B,q.size=ue):((q=k.f.kb).y=Z,q.O=0,q.fa=B,q.Fd=ue,q.f=Z,q.N=0+ue,q.Ab=h,q.Cd=M,q.ea=Z,q.W=0+ue+M,q.Db=h,q.Ed=M,u==12&&(q.F=Z,q.J=0+ue+2*M),q.Tc=z,q.lb=O)}if(h=1,O=k.S,M=k.width,z=k.height,O>=Yc&&13>O)if(11>O)u=k.f.RGBA,h&=(B=Math.abs(u.A))*(z-1)+M<=u.size,h&=B>=M*Ig[O],h&=u.eb!=null;else{u=k.f.kb,B=(M+1)/2,ue=(z+1)/2,q=Math.abs(u.fa),Z=Math.abs(u.Ab);var ye=Math.abs(u.Db),we=Math.abs(u.lb),fe=we*(z-1)+M;h&=q*(z-1)+M<=u.Fd,h&=Z*(ue-1)+B<=u.Cd,h=(h&=ye*(ue-1)+B<=u.Ed)&q>=M&Z>=B&ye>=B,h&=u.y!=null,h&=u.f!=null,h&=u.ea!=null,O==12&&(h&=we>=M,h&=fe<=u.Tc,h&=u.F!=null)}else h=0;u=h?0:2}}return u!=0||b!=null&&b.fd&&(u=Yl(k)),u}var On=64,_o=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],So=24,No=32,Kl=8,fr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Me("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(u){return u},I.Predictor2=function(u,h,b){return h[b+0]},I.Predictor3=function(u,h,b){return h[b+1]},I.Predictor4=function(u,h,b){return h[b-1]},I.Predictor5=function(u,h,b){return Pe(Pe(u,h[b+1]),h[b+0])},I.Predictor6=function(u,h,b){return Pe(u,h[b-1])},I.Predictor7=function(u,h,b){return Pe(u,h[b+0])},I.Predictor8=function(u,h,b){return Pe(h[b-1],h[b+0])},I.Predictor9=function(u,h,b){return Pe(h[b+0],h[b+1])},I.Predictor10=function(u,h,b){return Pe(Pe(u,h[b-1]),Pe(h[b+0],h[b+1]))},I.Predictor11=function(u,h,b){var k=h[b+0];return 0>=oe(k>>24&255,u>>24&255,(h=h[b-1])>>24&255)+oe(k>>16&255,u>>16&255,h>>16&255)+oe(k>>8&255,u>>8&255,h>>8&255)+oe(255&k,255&u,255&h)?k:u},I.Predictor12=function(u,h,b){var k=h[b+0];return(Re((u>>24&255)+(k>>24&255)-((h=h[b-1])>>24&255))<<24|Re((u>>16&255)+(k>>16&255)-(h>>16&255))<<16|Re((u>>8&255)+(k>>8&255)-(h>>8&255))<<8|Re((255&u)+(255&k)-(255&h)))>>>0},I.Predictor13=function(u,h,b){var k=h[b-1];return(He((u=Pe(u,h[b+0]))>>24&255,k>>24&255)<<24|He(u>>16&255,k>>16&255)<<16|He(u>>8&255,k>>8&255)<<8|He(u>>0&255,k>>0&255))>>>0};var Lf=I.PredictorAdd0;I.PredictorAdd1=C,Me("Predictor2","PredictorAdd2"),Me("Predictor3","PredictorAdd3"),Me("Predictor4","PredictorAdd4"),Me("Predictor5","PredictorAdd5"),Me("Predictor6","PredictorAdd6"),Me("Predictor7","PredictorAdd7"),Me("Predictor8","PredictorAdd8"),Me("Predictor9","PredictorAdd9"),Me("Predictor10","PredictorAdd10"),Me("Predictor11","PredictorAdd11"),Me("Predictor12","PredictorAdd12"),Me("Predictor13","PredictorAdd13");var Jl=I.PredictorAdd2;Ce("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),Ce("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var $c,qr=I.ColorIndexInverseTransform,ko=I.MapARGB,qc=I.VP8LColorIndexInverseTransformAlpha,Wc=I.MapAlpha,Ss=I.VP8LPredictorsAdd=[];Ss.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var wa,pr,ir,Ns,Xi,Zi,jo,es,ln,Ql,sr,Wr,Ao,Hc,Xl,xa,ba,ks,_a,Po,Sa,js,Zl,Hr,Vr,Ft,Mt,un,Nn=s(511),ts=s(2041),eu=s(225),Eo=s(767),Vc=0,If=ts,Gc=eu,Ar=Eo,Gr=Nn,Yc=0,Kc=1,bg=2,Jc=3,Qc=4,Rf=5,_g=6,Of=7,Df=8,Xc=9,Ff=10,Ww=[2,3,7],Hw=[3,3,11],Sg=[280,256,256,256,40],Vw=[0,1,1,1,0],Gw=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yw=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Kw=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Jw=8,Mf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tu=null,Qw=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Xw=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ng=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zw=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ex=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],tx=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],nx=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],As=[],ci=[],ns=[],rx=1,kg=2,Ps=[],Yr=[];Ne("UpsampleRgbLinePair",_t,3),Ne("UpsampleBgrLinePair",Yt,3),Ne("UpsampleRgbaLinePair",ui,4),Ne("UpsampleBgraLinePair",Cn,4),Ne("UpsampleArgbLinePair",Vn,4),Ne("UpsampleRgba4444LinePair",vn,2),Ne("UpsampleRgb565LinePair",en,2);var ix=I.UpsampleRgbLinePair,sx=I.UpsampleBgrLinePair,jg=I.UpsampleRgbaLinePair,Ag=I.UpsampleBgraLinePair,Pg=I.UpsampleArgbLinePair,Eg=I.UpsampleRgba4444LinePair,ax=I.UpsampleRgb565LinePair,Zc=16,ed=1<<Zc-1,nu=-227,Bf=482,Cg=6,ox=(256<<Cg)-1,Tg=0,lx=s(256),ux=s(256),cx=s(256),dx=s(256),hx=s(Bf-nu),fx=s(Bf-nu);Ri("YuvToRgbRow",_t,3),Ri("YuvToBgrRow",Yt,3),Ri("YuvToRgbaRow",ui,4),Ri("YuvToBgraRow",Cn,4),Ri("YuvToArgbRow",Vn,4),Ri("YuvToRgba4444Row",vn,2),Ri("YuvToRgb565Row",en,2);var Lg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],td=[0,2,8],px=[8,7,6,4,4,2,2,2,1,1,1,1],mx=1;this.WebPDecodeRGBA=function(u,h,b,k,O){var M=Kc,z=new yo,B=new Nr;z.ba=B,B.S=M,B.width=[B.width],B.height=[B.height];var q=B.width,Z=B.height,ue=new an;if(ue==null||u==null)var ye=2;else e(ue!=null),ye=xo(u,h,b,ue.width,ue.height,ue.Pd,ue.Qd,ue.format,null);if(ye!=0?q=0:(q!=null&&(q[0]=ue.width[0]),Z!=null&&(Z[0]=ue.height[0]),q=1),q){B.width=B.width[0],B.height=B.height[0],k!=null&&(k[0]=B.width),O!=null&&(O[0]=B.height);e:{if(k=new co,(O=new Ul).data=u,O.w=h,O.ha=b,O.kd=1,h=[0],e(O!=null),((u=xo(O.data,O.w,O.ha,null,null,null,h,null,O))==0||u==7)&&h[0]&&(u=4),(h=u)==0){if(e(z!=null),k.data=O.data,k.w=O.w+O.offset,k.ha=O.ha-O.offset,k.put=nr,k.ac=Ht,k.bc=rr,k.ma=z,O.xa){if((u=$r())==null){z=1;break e}if(function(we,fe){var Ie=[0],Se=[0],ce=[0];t:for(;;){if(we==null)return 0;if(fe==null)return we.a=2,0;if(we.l=fe,we.a=0,G(we.m,fe.data,fe.w,fe.ha),!nt(we.m,Ie,Se,ce)){we.a=3;break t}if(we.xb=kg,fe.width=Ie[0],fe.height=Se[0],!Ti(Ie[0],Se[0],1,we,null))break t;return 1}return e(we.a!=0),0}(u,k)){if(k=(h=bo(k.width,k.height,z.Oa,z.ba))==0){t:{k=u;n:for(;;){if(k==null){k=0;break t}if(e(k.s.yc!=null),e(k.s.Ya!=null),e(0<k.s.Wb),e((b=k.l)!=null),e((O=b.ma)!=null),k.xb!=0){if(k.ca=O.ba,k.tb=O.tb,e(k.ca!=null),!Gl(O.Oa,b,Jc)){k.a=2;break n}if(!pa(k,b.width)||b.da)break n;if((b.da||Ue(k.ca.S))&&me(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&me()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!Ke(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!ai(k,k.V,k.Ba,k.c,k.i,b.o,io))break n;O.Dc=k.Ma,k=1;break t}e(k.a!=0),k=0}k=!k}k&&(h=u.a)}else h=u.a}else{if((u=new ff)==null){z=1;break e}if(u.Fa=O.na,u.P=O.P,u.qc=O.Sa,jc(u,k)){if((h=bo(k.width,k.height,z.Oa,z.ba))==0){if(u.Aa=0,b=z.Oa,e((O=u)!=null),b!=null){if(0<(q=0>(q=b.Md)?0:100<q?255:255*q/100)){for(Z=ue=0;4>Z;++Z)12>(ye=O.pb[Z]).lc&&(ye.ia=q*px[0>ye.lc?0:ye.lc]>>3),ue|=ye.ia;ue&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=b.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}pf(u,k)||(h=u.a)}}else h=u.a}h==0&&z.Oa!=null&&z.Oa.fd&&(h=Yl(z.ba))}z=h}M=z!=0?null:11>M?B.f.RGBA.eb:B.f.kb.y}else M=null;return M};var Ig=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(I,Y){for(var ee="",R=0;R<4;R++)ee+=String.fromCharCode(I[Y++]);return ee}function g(I,Y){return(I[Y+0]<<0|I[Y+1]<<8|I[Y+2]<<16)>>>0}function m(I,Y){return(I[Y+0]<<0|I[Y+1]<<8|I[Y+2]<<16|I[Y+3]<<24)>>>0}new l;var v=[0],p=[0],S=[],_=new l,j=t,x=function(I,Y){var ee={},R=0,A=!1,V=0,K=0;if(ee.frames=[],!function($,J,ne,P){for(var H=0;H<P;H++)if($[J+H]!=ne.charCodeAt(H))return!0;return!1}(I,Y,"RIFF",4)){var re,W;for(m(I,Y+=4),Y+=8;Y<I.length;){var X=d(I,Y),G=m(I,Y+=4);Y+=4;var U=G+(1&G);switch(X){case"VP8 ":case"VP8L":ee.frames[R]===void 0&&(ee.frames[R]={}),(T=ee.frames[R]).src_off=A?K:Y-8,T.src_size=V+G+8,R++,A&&(A=!1,V=0,K=0);break;case"VP8X":(T=ee.header={}).feature_flags=I[Y];var ae=Y+4;T.canvas_width=1+g(I,ae),ae+=3,T.canvas_height=1+g(I,ae),ae+=3;break;case"ALPH":A=!0,V=U+8,K=Y-8;break;case"ANIM":(T=ee.header).bgcolor=m(I,Y),ae=Y+4,T.loop_count=(re=I)[(W=ae)+0]<<0|re[W+1]<<8,ae+=2;break;case"ANMF":var pe,T;(T=ee.frames[R]={}).offset_x=2*g(I,Y),Y+=3,T.offset_y=2*g(I,Y),Y+=3,T.width=1+g(I,Y),Y+=3,T.height=1+g(I,Y),Y+=3,T.duration=g(I,Y),Y+=3,pe=I[Y++],T.dispose=1&pe,T.blend=pe>>1&1}X!="ANMF"&&(Y+=U)}return ee}}(j,0);x.response=j,x.rgbaoutput=!0,x.dataurl=!1;var f=x.header?x.header:null,w=x.frames?x.frames:null;if(f){f.loop_counter=f.loop_count,v=[f.canvas_height],p=[f.canvas_width];for(var N=0;N<w.length&&w[N].blend!=0;N++);}var D=w[0],E=_.WebPDecodeRGBA(j,D.src_off,D.src_size,p,v);D.rgba=E,D.imgwidth=p[0],D.imgheight=v[0];for(var L=0;L<p[0]*v[0]*4;L++)S[L]=E[L];return this.width=p,this.height=v,this.data=S,this}(function(t){var e=function(){return typeof n0=="function"},n=function(v,p,S,_){var j=4,x=a;switch(_){case t.image_compression.FAST:j=1,x=s;break;case t.image_compression.MEDIUM:j=6,x=o;break;case t.image_compression.SLOW:j=9,x=l}v=r(v,p,S,x);var f=n0(v,{level:j});return t.__addimage__.arrayBufferToBinaryString(f)},r=function(v,p,S,_){for(var j,x,f,w=v.length/p,N=new Uint8Array(v.length+w),D=g(),E=0;E<w;E+=1){if(f=E*p,j=v.subarray(f,f+p),_)N.set(_(j,S,x),f+E);else{for(var L,I=D.length,Y=[];L<I;L+=1)Y[L]=D[L](j,S,x);var ee=m(Y.concat());N.set(Y[ee],f+E)}x=j}return N},i=function(v){var p=Array.apply([],v);return p.unshift(0),p},s=function(v,p){var S,_=[],j=v.length;_[0]=1;for(var x=0;x<j;x+=1)S=v[x-p]||0,_[x+1]=v[x]-S+256&255;return _},a=function(v,p,S){var _,j=[],x=v.length;j[0]=2;for(var f=0;f<x;f+=1)_=S&&S[f]||0,j[f+1]=v[f]-_+256&255;return j},o=function(v,p,S){var _,j,x=[],f=v.length;x[0]=3;for(var w=0;w<f;w+=1)_=v[w-p]||0,j=S&&S[w]||0,x[w+1]=v[w]+256-(_+j>>>1)&255;return x},l=function(v,p,S){var _,j,x,f,w=[],N=v.length;w[0]=4;for(var D=0;D<N;D+=1)_=v[D-p]||0,j=S&&S[D]||0,x=S&&S[D-p]||0,f=d(_,j,x),w[D+1]=v[D]-f+256&255;return w},d=function(v,p,S){if(v===p&&p===S)return v;var _=Math.abs(p-S),j=Math.abs(v-S),x=Math.abs(v+p-S-S);return _<=j&&_<=x?v:j<=x?p:S},g=function(){return[i,s,a,o,l]},m=function(v){var p=v.map(function(S){return S.reduce(function(_,j){return _+Math.abs(j)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(v,p,S,_){var j,x,f,w,N,D,E,L,I,Y,ee,R,A,V,K,re=this.decode.FLATE_DECODE,W="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(f=new Tj(v)).imgData,x=f.bits,j=f.colorSpace,N=f.colors,[4,6].indexOf(f.colorType)!==-1){if(f.bits===8){I=(L=f.pixelBitlength==32?new Uint32Array(f.decodePixels().buffer):f.pixelBitlength==16?new Uint16Array(f.decodePixels().buffer):new Uint8Array(f.decodePixels().buffer)).length,ee=new Uint8Array(I*f.colors),Y=new Uint8Array(I);var X,G=f.pixelBitlength-f.bits;for(V=0,K=0;V<I;V++){for(A=L[V],X=0;X<G;)ee[K++]=A>>>X&255,X+=f.bits;Y[V]=A>>>X&255}}if(f.bits===16){I=(L=new Uint32Array(f.decodePixels().buffer)).length,ee=new Uint8Array(I*(32/f.pixelBitlength)*f.colors),Y=new Uint8Array(I*(32/f.pixelBitlength)),R=f.colors>1,V=0,K=0;for(var U=0;V<I;)A=L[V++],ee[K++]=A>>>0&255,R&&(ee[K++]=A>>>16&255,A=L[V++],ee[K++]=A>>>0&255),Y[U++]=A>>>16&255;x=8}_!==t.image_compression.NONE&&e()?(v=n(ee,f.width*f.colors,f.colors,_),E=n(Y,f.width,1,_)):(v=ee,E=Y,re=void 0)}if(f.colorType===3&&(j=this.color_spaces.INDEXED,D=f.palette,f.transparency.indexed)){var ae=f.transparency.indexed,pe=0;for(V=0,I=ae.length;V<I;++V)pe+=ae[V];if((pe/=255)===I-1&&ae.indexOf(0)!==-1)w=[ae.indexOf(0)];else if(pe!==I){for(L=f.decodePixels(),Y=new Uint8Array(L.length),V=0,I=L.length;V<I;V++)Y[V]=ae[L[V]];E=n(Y,f.width,1)}}var T=function($){var J;switch($){case t.image_compression.FAST:J=11;break;case t.image_compression.MEDIUM:J=13;break;case t.image_compression.SLOW:J=14;break;default:J=12}return J}(_);return re===this.decode.FLATE_DECODE&&(W="/Predictor "+T+" "),W+="/Colors "+N+" /BitsPerComponent "+x+" /Columns "+f.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:S,data:v,index:p,filter:re,decodeParameters:W,transparency:w,palette:D,sMask:E,predictor:T,width:f.width,height:f.height,bitsPerComponent:x,colorSpace:j}}}})(it.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new Lj(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var d={data:l,width:a,height:o},g=new $p(100).encode(d,100);return t.processJPEG.call(this,g,n,r,i)},t.processGIF87A=t.processGIF89A}(it.API),pi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},pi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Dt.log("bit decode error:"+n)}},pi.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},pi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,l=15&s,d=this.palette[o];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*i+1>=this.width)break;d=this.palette[l],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},pi.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},pi.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,d=s>>15?255:0,g=r*this.width*4+4*i;this.data[g]=l,this.data[g+1]=o,this.data[g+2]=a,this.data[g+3]=d}this.pos+=t}},pi.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&n)/n*255|0,d=(a>>11)/e*255|0,g=i*this.width*4+4*s;this.data[g]=d,this.data[g+1]=l,this.data[g+2]=o,this.data[g+3]=255}this.pos+=t}},pi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},pi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},pi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new pi(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},d=new $p(100).encode(l,100);return t.processJPEG.call(this,d,n,r,i)}}(it.API),h2.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new h2(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},d=new $p(100).encode(l,100);return t.processJPEG.call(this,d,n,r,i)}}(it.API),it.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,d=0;d<i;d+=4){var g=r[d],m=r[d+1],v=r[d+2],p=r[d+3];s[o++]=g,s[o++]=m,s[o++]=v,a[l++]=p}var S=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:S,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},it.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},qo=it.API,Md=qo.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,g=d.fof?d.fof:1,m=e.doKerning!==!1,v=0,p=t.length,S=0,_=o[0]||l,j=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?j.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(v=m&&Tt(d[r])==="object"&&!isNaN(parseInt(d[r][S],10))?d[r][S]/g:0,j.push((o[r]||_)/l+v)),S=r;return j},l2=qo.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return qo.processArabic&&(t=qo.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:Md.apply(this,arguments).reduce(function(s,a){return s+a},0)},u2=function(t,e,n,r){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<n;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>r&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},c2=function(t,e,n){n||(n={});var r,i,s,a,o,l,d,g=[],m=[g],v=n.textIndent||0,p=0,S=0,_=t.split(" "),j=Md.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?_[0].length+2:n.lineIndent||0){var x=Array(l).join(" "),f=[];_.map(function(N){(N=N.split(/\s*\n/)).length>1?f=f.concat(N.map(function(D,E){return(E&&D.length?`
`:"")+D})):f.push(N[0])}),_=f,l=l2.apply(this,[x,n])}for(s=0,a=_.length;s<a;s++){var w=0;if(r=_[s],l&&r[0]==`
`&&(r=r.substr(1),w=1),v+p+(S=(i=Md.apply(this,[r,n])).reduce(function(N,D){return N+D},0))>e||w){if(S>e){for(o=u2.apply(this,[r,i,e-(v+p),e]),g.push(o.shift()),g=[o.pop()];o.length;)m.push([o.shift()]);S=i.slice(r.length-(g[0]?g[0].length:0)).reduce(function(N,D){return N+D},0)}else g=[r];m.push(g),v=S+l,p=j}else g.push(r),v+=p+S,p=j}return d=l?function(N,D){return(D?x:"")+N.join(" ")}:function(N){return N.join(" ")},m.map(d)},qo.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var m=this.internal.getFont(g.fontName,g.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var o,l,d=[];for(o=0,l=r.length;o<l;o++)d=d.concat(c2.apply(this,[r[o],a,s]));return d},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=t.__fontmetrics__.compress=function(m){var v,p,S,_,j=["{"];for(var x in m){if(v=m[x],isNaN(parseInt(x,10))?p="'"+x+"'":(x=parseInt(x,10),p=(p=s(x).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof v=="number")v<0?(S=s(v).slice(3),_="-"):(S=s(v).slice(2),_=""),S=_+S.slice(0,-1)+r[S.slice(-1)];else{if(Tt(v)!=="object")throw new Error("Don't know what to do with value type "+Tt(v)+".");S=a(v)}j.push(p+S)}return j.push("}"),j.join("")},o=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,p,S,_,j={},x=1,f=j,w=[],N="",D="",E=m.length-1,L=1;L<E;L+=1)(_=m[L])=="'"?v?(S=v.join(""),v=void 0):v=[]:v?v.push(_):_=="{"?(w.push([f,S]),f={},S=void 0):_=="}"?((p=w.pop())[0][p[1]]=f,S=void 0,f=p[0]):_=="-"?x=-1:S===void 0?n.hasOwnProperty(_)?(N+=n[_],S=parseInt(N,16)*x,x=1,N=""):N+=_:n.hasOwnProperty(_)?(D+=n[_],f[S]=parseInt(D,16)*x,x=1,S=void 0,D=""):D+=_;return j},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},g={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var v=m.font,p=g.Unicode[v.postScriptName];p&&(v.metadata.Unicode={},v.metadata.Unicode.widths=p.widths,v.metadata.Unicode.kerning=p.kerning);var S=d.Unicode[v.postScriptName];S&&(v.metadata.Unicode.encoding=S,v.encoding=S.codePages[0])}])}(it.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Ru(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(it),function(t){function e(){return(ut.canvg?Promise.resolve(ut.canvg):Qm(()=>import("./index.es-DdsH5ifl.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}it.API.addSvgAsImage=function(n,r,i,s,a,o,l,d){if(isNaN(r)||isNaN(i))throw Dt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Dt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=s,g.height=a;var m=g.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,g.width,g.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(S){return S.fromString(m,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(v)}).then(function(){p.addImage(g.toDataURL("image/jpeg",1),r,i,s,a,l,d)})}}(),it.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},it.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],d=0,g=0,m=0;function v(S,_){var j,x=!1;for(j=0;j<S.length;j+=1)S[j]===_&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=o.length;for(m=0;m<p;m+=1)n[o[m]].value=n[o[m]].defaultValue,n[o[m]].explicitSet=!1}if(Tt(t)==="object"){for(i in t)if(s=t[i],v(o,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")l.push(String(s[d]-1));else if(s[d].length>1){for(g=0;g<s[d].length;g+=1)typeof s[d][g]!="number"&&(r=!1);r===!0&&l.push([s[d][0]-1,s[d][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var S,_=[];for(S in n)n[S].explicitSet===!0&&(n[S].type==="name"?_.push("/"+S+" /"+n[S].value):_.push("/"+S+" "+n[S].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(it.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],m=0,v=s.length;m<v;++m){if(o=a.metadata.characterToGlyph(s.charCodeAt(m)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(m),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return g.join("");o=o.toString(16),g.push(d[4-o.length],o)}return g.join("")},r=function(s){var a,o,l,d,g,m,v;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],m=0,v=(o=Object.keys(s).sort(function(p,S){return p-S})).length;m<v;m++)a=o[m],l.length>=100&&(g+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(d=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+d+">"));return l.length&&(g+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,d=a.newObject,g=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var m=o.metadata.Unicode.widths,v=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",S=0;S<v.length;S++)p+=String.fromCharCode(v[S]);var _=d();g({data:p,addLength1:!0,objectId:_}),l("endobj");var j=d();g({data:r(o.metadata.toUnicode),addLength1:!0,objectId:j}),l("endobj");var x=d();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Jo(o.fontName)),l("/FontFile2 "+_+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var f=d();l("<<"),l("/Type /Font"),l("/BaseFont /"+Jo(o.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+t.API.PDFObject.convert(m)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=d(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+j+" 0 R"),l("/BaseFont /"+Jo(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+f+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,d=a.newObject,g=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var m=o.metadata.rawData,v="",p=0;p<m.length;p++)v+=String.fromCharCode(m[p]);var S=d();g({data:v,addLength1:!0,objectId:S}),l("endobj");var _=d();g({data:r(o.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var j=d();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+S+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Jo(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=d();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Jo(o.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,d=s.y,g=s.options||{},m=s.mutex||{},v=m.pdfEscape,p=m.activeFontKey,S=m.fonts,_=p,j="",x=0,f="",w=S[_].encoding;if(S[_].encoding!=="Identity-H")return{text:o,x:l,y:d,options:g,mutex:m};for(f=o,_=p,Array.isArray(o)&&(f=o[0]),x=0;x<f.length;x+=1)S[_].metadata.hasOwnProperty("cmap")&&(a=S[_].metadata.cmap.unicode.codeMap[f[x].charCodeAt(0)]),a||f[x].charCodeAt(0)<256&&S[_].metadata.hasOwnProperty("Unicode")?j+=f[x]:j+="";var N="";return parseInt(_.slice(1))<14||w==="WinAnsiEncoding"?N=v(j,_).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(N=n(j,S[_])),m.isHex=!0,{text:N,x:l,y:d,options:g,mutex:m}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?o.push([i(Object.assign({},l,{text:a[d][0]})).text,a[d][1],a[d][2]]):o.push(i(Object.assign({},l,{text:a[d]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(it),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(it.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,a,o,l,d,g,m=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),f=!1,w=0;this.__bidiEngine__={};var N=function(R){var A=R.charCodeAt(),V=A>>8,K=_[V];return K!==void 0?m[256*K+(255&A)]:V===252||V===253?"AL":x.test(V)?"L":V===8?"R":"N"},D=function(R){for(var A,V=0;V<R.length;V++){if((A=N(R.charAt(V)))==="L")return!1;if(A==="R")return!0}return!1},E=function(R,A,V,K){var re,W,X,G,U=A[K];switch(U){case"L":case"R":f=!1;break;case"N":case"AN":break;case"EN":f&&(U="AN");break;case"AL":f=!0,U="R";break;case"WS":U="N";break;case"CS":K<1||K+1>=A.length||(re=V[K-1])!=="EN"&&re!=="AN"||(W=A[K+1])!=="EN"&&W!=="AN"?U="N":f&&(W="AN"),U=W===re?W:"N";break;case"ES":U=(re=K>0?V[K-1]:"B")==="EN"&&K+1<A.length&&A[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&V[K-1]==="EN"){U="EN";break}if(f){U="N";break}for(X=K+1,G=A.length;X<G&&A[X]==="ET";)X++;U=X<G&&A[X]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(G=A.length,X=K+1;X<G&&A[X]==="NSM";)X++;if(X<G){var ae=R[K],pe=ae>=1425&&ae<=2303||ae===64286;if(re=A[X],pe&&(re==="R"||re==="AL")){U="R";break}}}U=K<1||(re=A[K-1])==="B"?"N":V[K-1];break;case"B":f=!1,i=!0,U=w;break;case"S":s=!0,U="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":f=!1;break;case"BN":U="N"}return U},L=function(R,A,V){var K=R.split("");return V&&I(K,V,{hiLevel:w}),K.reverse(),A&&A.reverse(),K.join("")},I=function(R,A,V){var K,re,W,X,G,U=-1,ae=R.length,pe=0,T=[],$=w?p:v,J=[];for(f=!1,i=!1,s=!1,re=0;re<ae;re++)J[re]=N(R[re]);for(W=0;W<ae;W++){if(G=pe,T[W]=E(R,J,T,W),K=240&(pe=$[G][S[T[W]]]),pe&=15,A[W]=X=$[pe][5],K>0)if(K===16){for(re=U;re<W;re++)A[re]=1;U=-1}else U=-1;if($[pe][6])U===-1&&(U=W);else if(U>-1){for(re=U;re<W;re++)A[re]=X;U=-1}J[W]==="B"&&(A[W]=0),V.hiLevel|=X}s&&function(ne,P,H){for(var Q=0;Q<H;Q++)if(ne[Q]==="S"){P[Q]=w;for(var ie=Q-1;ie>=0&&ne[ie]==="WS";ie--)P[ie]=w}}(J,A,ae)},Y=function(R,A,V,K,re){if(!(re.hiLevel<R)){if(R===1&&w===1&&!i)return A.reverse(),void(V&&V.reverse());for(var W,X,G,U,ae=A.length,pe=0;pe<ae;){if(K[pe]>=R){for(G=pe+1;G<ae&&K[G]>=R;)G++;for(U=pe,X=G-1;U<X;U++,X--)W=A[U],A[U]=A[X],A[X]=W,V&&(W=V[U],V[U]=V[X],V[X]=W);pe=G}pe++}}},ee=function(R,A,V){var K=R.split(""),re={hiLevel:w};return V||(V=[]),I(K,V,re),function(W,X,G){if(G.hiLevel!==0&&g)for(var U,ae=0;ae<W.length;ae++)X[ae]===1&&(U=j.indexOf(W[ae]))>=0&&(W[ae]=j[U+1])}(K,V,re),Y(2,K,A,V,re),Y(1,K,A,V,re),K.join("")};return this.__bidiEngine__.doBidiReorder=function(R,A,V){if(function(re,W){if(W)for(var X=0;X<re.length;X++)W[X]=X;o===void 0&&(o=D(re)),d===void 0&&(d=D(re))}(R,A),a||!l||d)if(a&&l&&o^d)w=o?1:0,R=L(R,A,V);else if(!a&&l&&d)w=o?1:0,R=ee(R,A,V),R=L(R,A);else if(!a||o||l||d){if(a&&!l&&o^d)R=L(R,A),o?(w=0,R=ee(R,A,V)):(w=1,R=ee(R,A,V),R=L(R,A));else if(a&&o&&!l&&d)w=1,R=ee(R,A,V),R=L(R,A);else if(!a&&!l&&o^d){var K=g;o?(w=1,R=ee(R,A,V),w=0,g=!1,R=ee(R,A,V),g=K):(w=0,R=ee(R,A,V),R=L(R,A),w=1,g=!1,R=ee(R,A,V),g=K,R=L(R,A))}}else w=0,R=ee(R,A,V);else w=o?1:0,R=ee(R,A,V);return R},this.__bidiEngine__.setOptions=function(R){R&&(a=R.isInputVisual,l=R.isOutputVisual,o=R.isInputRtl,d=R.isOutputRtl,g=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),a=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([n.doBidiReorder(i[o])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(it),it.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new ua(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Gj(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Ij(this.contents),this.head=new Oj(this),this.name=new Bj(this),this.cmap=new Uw(this),this.toUnicode={},this.hhea=new Dj(this),this.maxp=new Uj(this),this.hmtx=new $j(this),this.post=new Mj(this),this.os2=new Fj(this),this.loca=new Vj(this),this.glyf=new qj(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,d;for(d=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Pi,ua=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,a,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),Ij=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,a,o,l,d,g,m,v,p,S,_;for(_ in p=Object.keys(n).length,l=Math.log(2),m=16*Math.floor(Math.log(p)/l),a=Math.floor(m/l),g=16*p-m,(i=new ua).writeInt(this.scalarType),i.writeShort(p),i.writeShort(m),i.writeShort(a),i.writeShort(g),s=16*p,d=i.pos+s,o=null,S=[],n)for(v=n[_],i.writeString(_),i.writeInt(t(v)),i.writeInt(d),i.writeInt(v.length),S=S.concat(v),_==="head"&&(o=d),d+=v.length;d%4;)S.push(0),d++;return i.write(S),r=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,a;for(n=$w.call(n);n.length%4;)n.push(0);for(s=new ua(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),Rj={}.hasOwnProperty,Yi=function(t,e){for(var n in e)Rj.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Pi=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Oj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yi(e,Pi),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new ua).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),f2=function(){function t(e,n){var r,i,s,a,o,l,d,g,m,v,p,S,_,j,x,f,w;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),v=p/2,e.pos+=6,s=function(){var N,D;for(D=[],l=N=0;0<=v?N<v:N>v;l=0<=v?++N:--N)D.push(e.readUInt16());return D}(),e.pos+=2,_=function(){var N,D;for(D=[],l=N=0;0<=v?N<v:N>v;l=0<=v?++N:--N)D.push(e.readUInt16());return D}(),d=function(){var N,D;for(D=[],l=N=0;0<=v?N<v:N>v;l=0<=v?++N:--N)D.push(e.readUInt16());return D}(),g=function(){var N,D;for(D=[],l=N=0;0<=v?N<v:N>v;l=0<=v?++N:--N)D.push(e.readUInt16());return D}(),i=(this.length-e.pos+this.offset)/2,o=function(){var N,D;for(D=[],l=N=0;0<=i?N<i:N>i;l=0<=i?++N:--N)D.push(e.readUInt16());return D}(),l=x=0,w=s.length;x<w;l=++x)for(j=s[l],r=f=S=_[l];S<=j?f<=j:f>=j;r=S<=j?++f:--f)g[l]===0?a=r+d[l]:(a=o[g[l]/2+(r-S)-(v-l)]||0)!==0&&(a+=d[l]),this.codeMap[r]=65535&a}e.pos=m}return t.encode=function(e,n){var r,i,s,a,o,l,d,g,m,v,p,S,_,j,x,f,w,N,D,E,L,I,Y,ee,R,A,V,K,re,W,X,G,U,ae,pe,T,$,J,ne,P,H,Q,ie,be,_e,Ae;switch(K=new ua,a=Object.keys(e).sort(function(ke,Ke){return ke-Ke}),n){case"macroman":for(_=0,j=function(){var ke=[];for(S=0;S<256;++S)ke.push(0);return ke}(),f={0:0},s={},re=0,U=a.length;re<U;re++)f[ie=e[i=a[re]]]==null&&(f[ie]=++_),s[i]={old:e[i],new:f[e[i]]},j[i]=f[e[i]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(j),{charMap:s,subtable:K.data,maxGlyphID:_+1};case"unicode":for(A=[],m=[],w=0,f={},r={},x=d=null,W=0,ae=a.length;W<ae;W++)f[D=e[i=a[W]]]==null&&(f[D]=++w),r[i]={old:D,new:f[D]},o=f[D]-i,x!=null&&o===d||(x&&m.push(x),A.push(i),d=o),x=i;for(x&&m.push(x),m.push(65535),A.push(65535),ee=2*(Y=A.length),I=2*Math.pow(Math.log(Y)/Math.LN2,2),v=Math.log(I/2)/Math.LN2,L=2*Y-I,l=[],E=[],p=[],S=X=0,pe=A.length;X<pe;S=++X){if(R=A[S],g=m[S],R===65535){l.push(0),E.push(0);break}if(R-(V=r[R].new)>=32768)for(l.push(0),E.push(2*(p.length+Y-S)),i=G=R;R<=g?G<=g:G>=g;i=R<=g?++G:--G)p.push(r[i].new);else l.push(V-R),E.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*Y+2*p.length),K.writeUInt16(0),K.writeUInt16(ee),K.writeUInt16(I),K.writeUInt16(v),K.writeUInt16(L),H=0,T=m.length;H<T;H++)i=m[H],K.writeUInt16(i);for(K.writeUInt16(0),Q=0,$=A.length;Q<$;Q++)i=A[Q],K.writeUInt16(i);for(be=0,J=l.length;be<J;be++)o=l[be],K.writeUInt16(o);for(_e=0,ne=E.length;_e<ne;_e++)N=E[_e],K.writeUInt16(N);for(Ae=0,P=p.length;Ae<P;Ae++)_=p[Ae],K.writeUInt16(_);return{charMap:r,subtable:K.data,maxGlyphID:w+1}}},t}(),Uw=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yi(e,Pi),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new f2(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=f2.encode(n,r),(s=new ua).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),Dj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yi(e,Pi),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),Fj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yi(e,Pi),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Mj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yi(e,Pi),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var o,l,d;for(d=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)d.push(n.readUInt32());return d}).call(this)}},e}(),zj=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Bj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yi(e,Pi),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,a,o,l,d,g,m,v,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(d={},a=m=0,v=i.length;m<v;a=++m)s=i[a],n.pos=s.offset,g=n.readString(s.length),o=new zj(g,s),d[p=s.nameID]==null&&(d[p]=[]),d[s.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),Uj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yi(e,Pi),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),$j=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yi(e,Pi),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,a,o,l,d;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,m;for(m=[],r=g=0;0<=s?g<s:g>s;r=0<=s?++g:--g)m.push(n.readInt16());return m}(),this.widths=(function(){var g,m,v,p;for(p=[],g=0,m=(v=this.metrics).length;g<m;g++)a=v[g],p.push(a.advance);return p}).call(this),i=this.widths[this.widths.length-1],d=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)d.push(this.widths.push(i));return d},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),$w=[].slice,qj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yi(e,Pi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,a,o,l,d,g,m,v;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,o=(l=new ua(r.read(s))).readShort(),g=l.readShort(),v=l.readShort(),d=l.readShort(),m=l.readShort(),this.cache[n]=o===-1?new Hj(l,g,v,d,m):new Wj(l,o,g,v,d,m),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,a,o,l,d;for(o=[],a=[],l=0,d=r.length;l<d;l++)s=n[r[l]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),Wj=function(){function t(e,n,r,i,s,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Hj=function(){function t(e,n,r,i,s){var a,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new ua($w.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Vj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yi(e,Pi),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<r.length&&r[a]==o){++a,i[o]=s;var l=this.offsets[o],d=this.offsets[o+1]-l;d>0&&(s+=d)}for(var g=new Array(4*i.length),m=0;m<i.length;++m)g[4*m+3]=255&i[m],g[4*m+2]=(65280&i[m])>>8,g[4*m+1]=(16711680&i[m])>>16,g[4*m]=(4278190080&i[m])>>24;return g},e}(),Gj=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,a,o,l,d,g,m,v,p,S,_,j,x;for(i in r=Uw.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},x=r.charMap)p[(l=x[i]).old]=l.new;for(S in v=r.maxGlyphID,a)S in p||(p[S]=v++);return g=function(f){var w,N;for(w in N={},f)N[f[w]]=w;return N}(p),m=Object.keys(g).sort(function(f,w){return f-w}),_=function(){var f,w,N;for(N=[],f=0,w=m.length;f<w;f++)o=m[f],N.push(g[o]);return N}(),s=this.font.glyf.encode(a,_,p),d=this.font.loca.encode(s.offsets,_),j={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},t}();it.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var o,l,d;for(d=[],o=0,l=n.length;o<l;o++)r=n[o],d.push(e.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+n},e}();const Yj=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:kj,AcroFormAppearance:Qe,AcroFormButton:An,AcroFormCheckBox:Fu,AcroFormChoiceField:qa,AcroFormComboBox:Ha,AcroFormEditBox:Ou,AcroFormListBox:Wa,AcroFormPasswordField:Mu,AcroFormPushButton:Du,AcroFormRadioButton:Va,AcroFormTextField:sa,GState:mc,ShadingPattern:Hs,TilingPattern:Ba,default:it,jsPDF:it},Symbol.toStringTag,{value:"Module"}));var qw={exports:{}};const Kj=Px(Yj);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(r,i){t.exports=i(function(){try{return Kj}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Jf<"u"?Jf:typeof window<"u"?window:typeof self<"u"?self:Jf,function(n){return function(){var r={172:function(o,l){var d=this&&this.__extends||function(){var v=function(p,S){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,j){_.__proto__=j}||function(_,j){for(var x in j)Object.prototype.hasOwnProperty.call(j,x)&&(_[x]=j[x])},v(p,S)};return function(p,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");v(p,S);function _(){this.constructor=p}p.prototype=S===null?Object.create(S):(_.prototype=S.prototype,new _)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var g=function(){function v(p,S,_){this.table=S,this.pageNumber=S.pageNumber,this.pageCount=this.pageNumber,this.settings=S.settings,this.cursor=_,this.doc=p.getDocument()}return v}();l.HookData=g;var m=function(v){d(p,v);function p(S,_,j,x,f,w){var N=v.call(this,S,_,w)||this;return N.cell=j,N.row=x,N.column=f,N.section=x.section,N}return p}(g);l.CellHookData=m},340:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0});var g=d(4),m=d(136),v=d(744),p=d(776),S=d(664),_=d(972);function j(x){x.API.autoTable=function(){for(var f=[],w=0;w<arguments.length;w++)f[w]=arguments[w];var N;f.length===1?N=f[0]:(console.error("Use of deprecated autoTable initiation"),N=f[2]||{},N.columns=f[0],N.body=f[1]);var D=(0,p.parseInput)(this,N),E=(0,_.createTable)(this,D);return(0,S.drawTable)(this,E),this},x.API.lastAutoTable=!1,x.API.previousAutoTable=!1,x.API.autoTable.previous=!1,x.API.autoTableText=function(f,w,N,D){(0,m.default)(f,w,N,D,this)},x.API.autoTableSetDefaults=function(f){return v.DocHandler.setDefaults(f,this),this},x.autoTableSetDefaults=function(f,w){v.DocHandler.setDefaults(f,w)},x.API.autoTableHtmlToJson=function(f,w){var N;if(w===void 0&&(w=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var D=new v.DocHandler(this),E=(0,g.parseHtml)(D,f,window,w,!1),L=E.head,I=E.body,Y=((N=L[0])===null||N===void 0?void 0:N.map(function(ee){return ee.content}))||[];return{columns:Y,rows:I,data:I}},x.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var f=this.lastAutoTable;return f&&f.finalY?f.finalY:0},x.API.autoTableAddPageContent=function(f){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),x.API.autoTable.globalDefaults||(x.API.autoTable.globalDefaults={}),x.API.autoTable.globalDefaults.addPageContent=f,this},x.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=j},136:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function d(g,m,v,p,S){p=p||{};var _=1.15,j=S.internal.scaleFactor,x=S.internal.getFontSize()/j,f=S.getLineHeightFactor?S.getLineHeightFactor():_,w=x*f,N=/\r\n|\r|\n/g,D="",E=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(D=typeof g=="string"?g.split(N):g,E=D.length||1),v+=x*(2-_),p.valign==="middle"?v-=E/2*w:p.valign==="bottom"&&(v-=E*w),p.halign==="center"||p.halign==="right"){var L=x;if(p.halign==="center"&&(L*=.5),D&&E>=1){for(var I=0;I<D.length;I++)S.text(D[I],m-S.getStringUnitWidth(D[I])*L,v),v+=w;return S}m-=S.getStringUnitWidth(g)*L}return p.halign==="justify"?S.text(g,m,v,{maxWidth:p.maxWidth||100,align:"justify"}):S.text(g,m,v),S}l.default=d},420:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function d(S,_,j){j.applyStyles(_,!0);var x=Array.isArray(S)?S:[S],f=x.map(function(w){return j.getTextWidth(w)}).reduce(function(w,N){return Math.max(w,N)},0);return f}l.getStringWidth=d;function g(S,_,j,x){var f=_.settings.tableLineWidth,w=_.settings.tableLineColor;S.applyStyles({lineWidth:f,lineColor:w});var N=m(f,!1);N&&S.rect(j.x,j.y,_.getWidth(S.pageSize().width),x.y-j.y,N)}l.addTableBorder=g;function m(S,_){var j=S>0,x=_||_===0;return j&&x?"DF":j?"S":x?"F":null}l.getFillStyle=m;function v(S,_){var j,x,f,w;if(S=S||_,Array.isArray(S)){if(S.length>=4)return{top:S[0],right:S[1],bottom:S[2],left:S[3]};if(S.length===3)return{top:S[0],right:S[1],bottom:S[2],left:S[1]};if(S.length===2)return{top:S[0],right:S[1],bottom:S[0],left:S[1]};S.length===1?S=S[0]:S=_}return typeof S=="object"?(typeof S.vertical=="number"&&(S.top=S.vertical,S.bottom=S.vertical),typeof S.horizontal=="number"&&(S.right=S.horizontal,S.left=S.horizontal),{left:(j=S.left)!==null&&j!==void 0?j:_,top:(x=S.top)!==null&&x!==void 0?x:_,right:(f=S.right)!==null&&f!==void 0?f:_,bottom:(w=S.bottom)!==null&&w!==void 0?w:_}):(typeof S!="number"&&(S=_),{top:S,right:S,bottom:S,left:S})}l.parseSpacing=v;function p(S,_){var j=v(_.settings.margin,0);return S.pageSize().width-(j.left+j.right)}l.getPageAvailableWidth=p},796:function(o,l){var d=this&&this.__extends||function(){var p=function(S,_){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,x){j.__proto__=x}||function(j,x){for(var f in x)Object.prototype.hasOwnProperty.call(x,f)&&(j[f]=x[f])},p(S,_)};return function(S,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");p(S,_);function j(){this.constructor=S}S.prototype=_===null?Object.create(_):(j.prototype=_.prototype,new j)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var g=function(p){d(S,p);function S(_){var j=p.call(this)||this;return j._element=_,j}return S}(Array);l.HtmlRowInput=g;function m(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=m;function v(p){var S={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return S[p]}l.getTheme=v},903:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var g=d(420);function m(j,x,f,w,N){var D={},E=1.3333333333333333,L=p(x,function(U){return N.getComputedStyle(U).backgroundColor});L!=null&&(D.fillColor=L);var I=p(x,function(U){return N.getComputedStyle(U).color});I!=null&&(D.textColor=I);var Y=_(w,f);Y&&(D.cellPadding=Y);var ee="borderTopColor",R=E*f,A=w.borderTopWidth;if(w.borderBottomWidth===A&&w.borderRightWidth===A&&w.borderLeftWidth===A){var V=(parseFloat(A)||0)/R;V&&(D.lineWidth=V)}else D.lineWidth={top:(parseFloat(w.borderTopWidth)||0)/R,right:(parseFloat(w.borderRightWidth)||0)/R,bottom:(parseFloat(w.borderBottomWidth)||0)/R,left:(parseFloat(w.borderLeftWidth)||0)/R},D.lineWidth.top||(D.lineWidth.right?ee="borderRightColor":D.lineWidth.bottom?ee="borderBottomColor":D.lineWidth.left&&(ee="borderLeftColor"));var K=p(x,function(U){return N.getComputedStyle(U)[ee]});K!=null&&(D.lineColor=K);var re=["left","right","center","justify"];re.indexOf(w.textAlign)!==-1&&(D.halign=w.textAlign),re=["middle","bottom","top"],re.indexOf(w.verticalAlign)!==-1&&(D.valign=w.verticalAlign);var W=parseInt(w.fontSize||"");isNaN(W)||(D.fontSize=W/E);var X=v(w);X&&(D.fontStyle=X);var G=(w.fontFamily||"").toLowerCase();return j.indexOf(G)!==-1&&(D.font=G),D}l.parseCss=m;function v(j){var x="";return(j.fontWeight==="bold"||j.fontWeight==="bolder"||parseInt(j.fontWeight)>=700)&&(x="bold"),(j.fontStyle==="italic"||j.fontStyle==="oblique")&&(x+="italic"),x}function p(j,x){var f=S(j,x);if(!f)return null;var w=f.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!w||!Array.isArray(w))return null;var N=[parseInt(w[1]),parseInt(w[2]),parseInt(w[3])],D=parseInt(w[4]);return D===0||isNaN(N[0])||isNaN(N[1])||isNaN(N[2])?null:N}function S(j,x){var f=x(j);return f==="rgba(0, 0, 0, 0)"||f==="transparent"||f==="initial"||f==="inherit"?j.parentElement==null?null:S(j.parentElement,x):f}function _(j,x){var f=[j.paddingTop,j.paddingRight,j.paddingBottom,j.paddingLeft],w=96/(72/x),N=(parseInt(j.lineHeight)-parseInt(j.fontSize))/x/2,D=f.map(function(L){return parseInt(L||"0")/w}),E=(0,g.parseSpacing)(D,0);return N>E.top&&(E.top=N),N>E.bottom&&(E.bottom=N),E}},744:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var d={},g=function(){function m(v){this.jsPDFDocument=v,this.userStyles={textColor:v.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:v.internal.getFontSize(),fontStyle:v.internal.getFont().fontStyle,font:v.internal.getFont().fontName,lineWidth:v.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:v.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return m.setDefaults=function(v,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=v:d=v},m.unifyColor=function(v){return Array.isArray(v)?v:typeof v=="number"?[v,v,v]:typeof v=="string"?[v]:null},m.prototype.applyStyles=function(v,p){var S,_,j;p===void 0&&(p=!1),v.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(v.fontStyle);var x=this.jsPDFDocument.internal.getFont(),f=x.fontStyle,w=x.fontName;if(v.font&&(w=v.font),v.fontStyle){f=v.fontStyle;var N=this.getFontList()[w];N&&N.indexOf(f)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(N[0]),f=N[0])}if(this.jsPDFDocument.setFont(w,f),v.fontSize&&this.jsPDFDocument.setFontSize(v.fontSize),!p){var D=m.unifyColor(v.fillColor);D&&(S=this.jsPDFDocument).setFillColor.apply(S,D),D=m.unifyColor(v.textColor),D&&(_=this.jsPDFDocument).setTextColor.apply(_,D),D=m.unifyColor(v.lineColor),D&&(j=this.jsPDFDocument).setDrawColor.apply(j,D),typeof v.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(v.lineWidth)}},m.prototype.splitTextToSize=function(v,p,S){return this.jsPDFDocument.splitTextToSize(v,p,S)},m.prototype.rect=function(v,p,S,_,j){return this.jsPDFDocument.rect(v,p,S,_,j)},m.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},m.prototype.getTextWidth=function(v){return this.jsPDFDocument.getTextWidth(v)},m.prototype.getDocument=function(){return this.jsPDFDocument},m.prototype.setPage=function(v){this.jsPDFDocument.setPage(v)},m.prototype.addPage=function(){return this.jsPDFDocument.addPage()},m.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},m.prototype.getGlobalOptions=function(){return d||{}},m.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},m.prototype.pageSize=function(){var v=this.jsPDFDocument.internal.pageSize;return v.width==null&&(v={width:v.getWidth(),height:v.getHeight()}),v},m.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},m.prototype.getLineHeightFactor=function(){var v=this.jsPDFDocument;return v.getLineHeightFactor?v.getLineHeightFactor():1.15},m.prototype.getLineHeight=function(v){return v/this.scaleFactor()*this.getLineHeightFactor()},m.prototype.pageNumber=function(){var v=this.jsPDFDocument.internal.getCurrentPageInfo();return v?v.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},m}();l.DocHandler=g},4:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var g=d(903),m=d(796);function v(_,j,x,f,w){var N,D;f===void 0&&(f=!1),w===void 0&&(w=!1);var E;typeof j=="string"?E=x.document.querySelector(j):E=j;var L=Object.keys(_.getFontList()),I=_.scaleFactor(),Y=[],ee=[],R=[];if(!E)return console.error("Html table could not be found with input: ",j),{head:Y,body:ee,foot:R};for(var A=0;A<E.rows.length;A++){var V=E.rows[A],K=(D=(N=V==null?void 0:V.parentElement)===null||N===void 0?void 0:N.tagName)===null||D===void 0?void 0:D.toLowerCase(),re=p(L,I,x,V,f,w);re&&(K==="thead"?Y.push(re):K==="tfoot"?R.push(re):ee.push(re))}return{head:Y,body:ee,foot:R}}l.parseHtml=v;function p(_,j,x,f,w,N){for(var D=new m.HtmlRowInput(f),E=0;E<f.cells.length;E++){var L=f.cells[E],I=x.getComputedStyle(L);if(w||I.display!=="none"){var Y=void 0;N&&(Y=(0,g.parseCss)(_,L,j,I,x)),D.push({rowSpan:L.rowSpan,colSpan:L.colSpan,styles:Y,_element:L,content:S(L)})}}var ee=x.getComputedStyle(f);if(D.length>0&&(w||ee.display!=="none"))return D}function S(_){var j=_.cloneNode(!0);return j.innerHTML=j.innerHTML.replace(/\n/g,"").replace(/ +/g," "),j.innerHTML=j.innerHTML.split(/<br.*?>/).map(function(x){return x.trim()}).join(`
`),j.innerText||j.textContent||""}},776:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var g=d(4),m=d(356),v=d(420),p=d(744),S=d(792);function _(E,L){var I=new p.DocHandler(E),Y=I.getDocumentOptions(),ee=I.getGlobalOptions();(0,S.default)(I,ee,Y,L);var R=(0,m.assign)({},ee,Y,L),A;typeof window<"u"&&(A=window);var V=j(ee,Y,L),K=x(ee,Y,L),re=f(I,R),W=N(I,R,A);return{id:L.tableId,content:W,hooks:K,styles:V,settings:re}}l.parseInput=_;function j(E,L,I){for(var Y={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},ee=function(K){if(K==="columnStyles"){var re=E[K],W=L[K],X=I[K];Y.columnStyles=(0,m.assign)({},re,W,X)}else{var G=[E,L,I],U=G.map(function(ae){return ae[K]||{}});Y[K]=(0,m.assign)({},U[0],U[1],U[2])}},R=0,A=Object.keys(Y);R<A.length;R++){var V=A[R];ee(V)}return Y}function x(E,L,I){for(var Y=[E,L,I],ee={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},R=0,A=Y;R<A.length;R++){var V=A[R];V.didParseCell&&ee.didParseCell.push(V.didParseCell),V.willDrawCell&&ee.willDrawCell.push(V.willDrawCell),V.didDrawCell&&ee.didDrawCell.push(V.didDrawCell),V.willDrawPage&&ee.willDrawPage.push(V.willDrawPage),V.didDrawPage&&ee.didDrawPage.push(V.didDrawPage)}return ee}function f(E,L){var I,Y,ee,R,A,V,K,re,W,X,G,U,ae=(0,v.parseSpacing)(L.margin,40/E.scaleFactor()),pe=(I=w(E,L.startY))!==null&&I!==void 0?I:ae.top,T;L.showFoot===!0?T="everyPage":L.showFoot===!1?T="never":T=(Y=L.showFoot)!==null&&Y!==void 0?Y:"everyPage";var $;L.showHead===!0?$="everyPage":L.showHead===!1?$="never":$=(ee=L.showHead)!==null&&ee!==void 0?ee:"everyPage";var J=(R=L.useCss)!==null&&R!==void 0?R:!1,ne=L.theme||(J?"plain":"striped"),P=!!L.horizontalPageBreak,H=(A=L.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(V=L.includeHiddenHtml)!==null&&V!==void 0?V:!1,useCss:J,theme:ne,startY:pe,margin:ae,pageBreak:(K=L.pageBreak)!==null&&K!==void 0?K:"auto",rowPageBreak:(re=L.rowPageBreak)!==null&&re!==void 0?re:"auto",tableWidth:(W=L.tableWidth)!==null&&W!==void 0?W:"auto",showHead:$,showFoot:T,tableLineWidth:(X=L.tableLineWidth)!==null&&X!==void 0?X:0,tableLineColor:(G=L.tableLineColor)!==null&&G!==void 0?G:200,horizontalPageBreak:P,horizontalPageBreakRepeat:H,horizontalPageBreakBehaviour:(U=L.horizontalPageBreakBehaviour)!==null&&U!==void 0?U:"afterAllRows"}}function w(E,L){var I=E.getLastAutoTable(),Y=E.scaleFactor(),ee=E.pageNumber(),R=!1;if(I&&I.startPageNumber){var A=I.startPageNumber+I.pageNumber-1;R=A===ee}return typeof L=="number"?L:(L==null||L===!1)&&R&&(I==null?void 0:I.finalY)!=null?I.finalY+20/Y:null}function N(E,L,I){var Y=L.head||[],ee=L.body||[],R=L.foot||[];if(L.html){var A=L.includeHiddenHtml;if(I){var V=(0,g.parseHtml)(E,L.html,I,A,L.useCss)||{};Y=V.head||Y,ee=V.body||Y,R=V.foot||Y}else console.error("Cannot parse html in non browser environment")}var K=L.columns||D(Y,ee,R);return{columns:K,head:Y,body:ee,foot:R}}function D(E,L,I){var Y=E[0]||L[0]||I[0]||[],ee=[];return Object.keys(Y).filter(function(R){return R!=="_element"}).forEach(function(R){var A=1,V;Array.isArray(Y)?V=Y[parseInt(R)]:V=Y[R],typeof V=="object"&&!Array.isArray(V)&&(A=(V==null?void 0:V.colSpan)||1);for(var K=0;K<A;K++){var re=void 0;Array.isArray(Y)?re=ee.length:re=R+(K>0?"_".concat(K):"");var W={dataKey:re};ee.push(W)}}),ee}},792:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function d(m,v,p,S){for(var _=function(w){w&&typeof w!="object"&&console.error("The options parameter should be of type object, is: "+typeof w),typeof w.extendWidth<"u"&&(w.tableWidth=w.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof w.margins<"u"&&(typeof w.margin>"u"&&(w.margin=w.margins),console.error("Use of deprecated option: margins, use margin instead.")),w.startY&&typeof w.startY!="number"&&(console.error("Invalid value for startY option",w.startY),delete w.startY),!w.didDrawPage&&(w.afterPageContent||w.beforePageContent||w.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),w.didDrawPage=function(R){m.applyStyles(m.userStyles),w.beforePageContent&&w.beforePageContent(R),m.applyStyles(m.userStyles),w.afterPageContent&&w.afterPageContent(R),m.applyStyles(m.userStyles),w.afterPageAdd&&R.pageNumber>1&&R.afterPageAdd(R),m.applyStyles(m.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(R){w[R]&&console.error('The "'.concat(R,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(R){var A=R[0],V=R[1];w[V]&&(console.error("Use of deprecated option ".concat(V,". Use ").concat(A," instead")),w[A]=w[V])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(R){var A=typeof R=="string"?R:R[0],V=typeof R=="string"?R:R[1];typeof w[A]<"u"&&(typeof w.styles[V]>"u"&&(w.styles[V]=w[A]),console.error("Use of deprecated option: "+A+", use the style "+V+" instead."))});for(var N=0,D=["styles","bodyStyles","headStyles","footStyles"];N<D.length;N++){var E=D[N];g(w[E]||{})}for(var L=w.columnStyles||{},I=0,Y=Object.keys(L);I<Y.length;I++){var ee=Y[I];g(L[ee]||{})}},j=0,x=[v,p,S];j<x.length;j++){var f=x[j];_(f)}}l.default=d;function g(m){m.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),m.minCellHeight||(m.minCellHeight=m.rowHeight)):m.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),m.cellWidth||(m.cellWidth=m.columnWidth))}},260:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var g=d(796),m=d(172),v=d(420),p=function(){function x(f,w){this.pageNumber=1,this.pageCount=1,this.id=f.id,this.settings=f.settings,this.styles=f.styles,this.hooks=f.hooks,this.columns=w.columns,this.head=w.head,this.body=w.body,this.foot=w.foot}return x.prototype.getHeadHeight=function(f){return this.head.reduce(function(w,N){return w+N.getMaxCellHeight(f)},0)},x.prototype.getFootHeight=function(f){return this.foot.reduce(function(w,N){return w+N.getMaxCellHeight(f)},0)},x.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},x.prototype.callCellHooks=function(f,w,N,D,E,L){for(var I=0,Y=w;I<Y.length;I++){var ee=Y[I],R=new m.CellHookData(f,this,N,D,E,L),A=ee(R)===!1;if(N.text=Array.isArray(N.text)?N.text:[N.text],A)return!1}return!0},x.prototype.callEndPageHooks=function(f,w){f.applyStyles(f.userStyles);for(var N=0,D=this.hooks.didDrawPage;N<D.length;N++){var E=D[N];E(new m.HookData(f,this,w))}},x.prototype.callWillDrawPageHooks=function(f,w){for(var N=0,D=this.hooks.willDrawPage;N<D.length;N++){var E=D[N];E(new m.HookData(f,this,w))}},x.prototype.getWidth=function(f){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var w=this.columns.reduce(function(D,E){return D+E.wrappedWidth},0);return w}else{var N=this.settings.margin;return f-N.left-N.right}},x}();l.Table=p;var S=function(){function x(f,w,N,D,E){E===void 0&&(E=!1),this.height=0,this.raw=f,f instanceof g.HtmlRowInput&&(this.raw=f._element,this.element=f._element),this.index=w,this.section=N,this.cells=D,this.spansMultiplePages=E}return x.prototype.getMaxCellHeight=function(f){var w=this;return f.reduce(function(N,D){var E;return Math.max(N,((E=w.cells[D.index])===null||E===void 0?void 0:E.height)||0)},0)},x.prototype.hasRowSpan=function(f){var w=this;return f.filter(function(N){var D=w.cells[N.index];return D?D.rowSpan>1:!1}).length>0},x.prototype.canEntireRowFit=function(f,w){return this.getMaxCellHeight(w)<=f},x.prototype.getMinimumRowHeight=function(f,w){var N=this;return f.reduce(function(D,E){var L=N.cells[E.index];if(!L)return 0;var I=w.getLineHeight(L.styles.fontSize),Y=L.padding("vertical"),ee=Y+I;return ee>D?ee:D},0)},x}();l.Row=S;var _=function(){function x(f,w,N){var D,E;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=w,this.section=N,this.raw=f;var L=f;f!=null&&typeof f=="object"&&!Array.isArray(f)?(this.rowSpan=f.rowSpan||1,this.colSpan=f.colSpan||1,L=(E=(D=f.content)!==null&&D!==void 0?D:f.title)!==null&&E!==void 0?E:f,f._element&&(this.raw=f._element)):(this.rowSpan=1,this.colSpan=1);var I=L!=null?""+L:"",Y=/\r\n|\r|\n/g;this.text=I.split(Y)}return x.prototype.getTextPos=function(){var f;if(this.styles.valign==="top")f=this.y+this.padding("top");else if(this.styles.valign==="bottom")f=this.y+this.height-this.padding("bottom");else{var w=this.height-this.padding("vertical");f=this.y+w/2+this.padding("top")}var N;if(this.styles.halign==="right")N=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var D=this.width-this.padding("horizontal");N=this.x+D/2+this.padding("left")}else N=this.x+this.padding("left");return{x:N,y:f}},x.prototype.getContentHeight=function(f,w){w===void 0&&(w=1.15);var N=Array.isArray(this.text)?this.text.length:1,D=this.styles.fontSize/f*w,E=N*D+this.padding("vertical");return Math.max(E,this.styles.minCellHeight)},x.prototype.padding=function(f){var w=(0,v.parseSpacing)(this.styles.cellPadding,0);return f==="vertical"?w.top+w.bottom:f==="horizontal"?w.left+w.right:w[f]},x}();l.Cell=_;var j=function(){function x(f,w,N){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=f,this.raw=w,this.index=N}return x.prototype.getMaxCustomCellWidth=function(f){for(var w=0,N=0,D=f.allRows();N<D.length;N++){var E=D[N],L=E.cells[this.index];L&&typeof L.styles.cellWidth=="number"&&(w=Math.max(w,L.styles.cellWidth))}return w},x}();l.Column=j},356:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function d(g,m,v,p,S){if(g==null)throw new TypeError("Cannot convert undefined or null to object");for(var _=Object(g),j=1;j<arguments.length;j++){var x=arguments[j];if(x!=null)for(var f in x)Object.prototype.hasOwnProperty.call(x,f)&&(_[f]=x[f])}return _}l.assign=d},972:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var g=d(744),m=d(260),v=d(324),p=d(796),S=d(356);function _(E,L){var I=new g.DocHandler(E),Y=j(L,I.scaleFactor()),ee=new m.Table(L,Y);return(0,v.calculateWidths)(I,ee),I.applyStyles(I.userStyles),ee}l.createTable=_;function j(E,L){var I=E.content,Y=N(I.columns);if(I.head.length===0){var ee=f(Y,"head");ee&&I.head.push(ee)}if(I.foot.length===0){var ee=f(Y,"foot");ee&&I.foot.push(ee)}var R=E.settings.theme,A=E.styles;return{columns:Y,head:x("head",I.head,Y,A,R,L),body:x("body",I.body,Y,A,R,L),foot:x("foot",I.foot,Y,A,R,L)}}function x(E,L,I,Y,ee,R){var A={},V=L.map(function(K,re){for(var W=0,X={},G=0,U=0,ae=0,pe=I;ae<pe.length;ae++){var T=pe[ae];if(A[T.index]==null||A[T.index].left===0)if(U===0){var $=void 0;Array.isArray(K)?$=K[T.index-G-W]:$=K[T.dataKey];var J={};typeof $=="object"&&!Array.isArray($)&&(J=($==null?void 0:$.styles)||{});var ne=D(E,T,re,ee,Y,R,J),P=new m.Cell($,ne,E);X[T.dataKey]=P,X[T.index]=P,U=P.colSpan-1,A[T.index]={left:P.rowSpan-1,times:U}}else U--,G++;else A[T.index].left--,U=A[T.index].times,W++}return new m.Row(K,re,E,X)});return V}function f(E,L){var I={};return E.forEach(function(Y){if(Y.raw!=null){var ee=w(L,Y.raw);ee!=null&&(I[Y.dataKey]=ee)}}),Object.keys(I).length>0?I:null}function w(E,L){if(E==="head"){if(typeof L=="object")return L.header||L.title||null;if(typeof L=="string"||typeof L=="number")return L}else if(E==="foot"&&typeof L=="object")return L.footer;return null}function N(E){return E.map(function(L,I){var Y,ee,R;return typeof L=="object"?R=(ee=(Y=L.dataKey)!==null&&Y!==void 0?Y:L.key)!==null&&ee!==void 0?ee:I:R=I,new m.Column(R,L,I)})}function D(E,L,I,Y,ee,R,A){var V=(0,p.getTheme)(Y),K;E==="head"?K=ee.headStyles:E==="body"?K=ee.bodyStyles:E==="foot"&&(K=ee.footStyles);var re=(0,S.assign)({},V.table,V[E],ee.styles,K),W=ee.columnStyles[L.dataKey]||ee.columnStyles[L.index]||{},X=E==="body"?W:{},G=E==="body"&&I%2===0?(0,S.assign)({},V.alternateRow,ee.alternateRowStyles):{},U=(0,p.defaultStyles)(R),ae=(0,S.assign)({},U,re,G,X);return(0,S.assign)(ae,A)}},664:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var g=d(420),m=d(260),v=d(744),p=d(356),S=d(136),_=d(224);function j(W,X){var G=X.settings,U=G.startY,ae=G.margin,pe={x:ae.left,y:U},T=X.getHeadHeight(X.columns)+X.getFootHeight(X.columns),$=U+ae.bottom+T;if(G.pageBreak==="avoid"){var J=X.body,ne=J.reduce(function(Q,ie){return Q+ie.height},0);$+=ne}var P=new v.DocHandler(W);(G.pageBreak==="always"||G.startY!=null&&$>P.pageSize().height)&&(re(P),pe.y=ae.top),X.callWillDrawPageHooks(P,pe);var H=(0,p.assign)({},pe);X.startPageNumber=P.pageNumber(),G.horizontalPageBreak?x(P,X,H,pe):(P.applyStyles(P.userStyles),(G.showHead==="firstPage"||G.showHead==="everyPage")&&X.head.forEach(function(Q){return ee(P,X,Q,pe,X.columns)}),P.applyStyles(P.userStyles),X.body.forEach(function(Q,ie){var be=ie===X.body.length-1;Y(P,X,Q,be,H,pe,X.columns)}),P.applyStyles(P.userStyles),(G.showFoot==="lastPage"||G.showFoot==="everyPage")&&X.foot.forEach(function(Q){return ee(P,X,Q,pe,X.columns)})),(0,g.addTableBorder)(P,X,H,pe),X.callEndPageHooks(P,pe),X.finalY=pe.y,W.lastAutoTable=X,W.previousAutoTable=X,W.autoTable&&(W.autoTable.previous=X),P.applyStyles(P.userStyles)}l.drawTable=j;function x(W,X,G,U){var ae=(0,_.calculateAllColumnsCanFitInPage)(W,X),pe=X.settings;if(pe.horizontalPageBreakBehaviour==="afterAllRows")ae.forEach(function(ne,P){W.applyStyles(W.userStyles),P>0?K(W,X,G,U,ne.columns,!0):f(W,X,U,ne.columns),w(W,X,G,U,ne.columns),D(W,X,U,ne.columns)});else for(var T=-1,$=ae[0],J=function(){var ne=T;if($){W.applyStyles(W.userStyles);var P=$.columns;T>=0?K(W,X,G,U,P,!0):f(W,X,U,P),ne=N(W,X,T+1,U,P),D(W,X,U,P)}var H=ne-T;ae.slice(1).forEach(function(Q){W.applyStyles(W.userStyles),K(W,X,G,U,Q.columns,!0),N(W,X,T+1,U,Q.columns,H),D(W,X,U,Q.columns)}),T=ne};T<X.body.length-1;)J()}function f(W,X,G,U){var ae=X.settings;W.applyStyles(W.userStyles),(ae.showHead==="firstPage"||ae.showHead==="everyPage")&&X.head.forEach(function(pe){return ee(W,X,pe,G,U)})}function w(W,X,G,U,ae){W.applyStyles(W.userStyles),X.body.forEach(function(pe,T){var $=T===X.body.length-1;Y(W,X,pe,$,G,U,ae)})}function N(W,X,G,U,ae,pe){W.applyStyles(W.userStyles),pe=pe??X.body.length;var T=Math.min(G+pe,X.body.length),$=-1;return X.body.slice(G,T).forEach(function(J,ne){var P=G+ne===X.body.length-1,H=V(W,X,P,U);J.canEntireRowFit(H,ae)&&(ee(W,X,J,U,ae),$=G+ne)}),$}function D(W,X,G,U){var ae=X.settings;W.applyStyles(W.userStyles),(ae.showFoot==="lastPage"||ae.showFoot==="everyPage")&&X.foot.forEach(function(pe){return ee(W,X,pe,G,U)})}function E(W,X,G){var U=G.getLineHeight(W.styles.fontSize),ae=W.padding("vertical"),pe=Math.floor((X-ae)/U);return Math.max(0,pe)}function L(W,X,G,U){var ae={};W.spansMultiplePages=!0,W.height=0;for(var pe=0,T=0,$=G.columns;T<$.length;T++){var J=$[T],ne=W.cells[J.index];if(ne){Array.isArray(ne.text)||(ne.text=[ne.text]);var P=new m.Cell(ne.raw,ne.styles,ne.section);P=(0,p.assign)(P,ne),P.text=[];var H=E(ne,X,U);ne.text.length>H&&(P.text=ne.text.splice(H,ne.text.length));var Q=U.scaleFactor(),ie=U.getLineHeightFactor();ne.contentHeight=ne.getContentHeight(Q,ie),ne.contentHeight>=X&&(ne.contentHeight=X,P.styles.minCellHeight-=X),ne.contentHeight>W.height&&(W.height=ne.contentHeight),P.contentHeight=P.getContentHeight(Q,ie),P.contentHeight>pe&&(pe=P.contentHeight),ae[J.index]=P}}var be=new m.Row(W.raw,-1,W.section,ae,!0);be.height=pe;for(var _e=0,Ae=G.columns;_e<Ae.length;_e++){var J=Ae[_e],P=be.cells[J.index];P&&(P.height=be.height);var ne=W.cells[J.index];ne&&(ne.height=W.height)}return be}function I(W,X,G,U){var ae=W.pageSize().height,pe=U.settings.margin,T=pe.top+pe.bottom,$=ae-T;X.section==="body"&&($-=U.getHeadHeight(U.columns)+U.getFootHeight(U.columns));var J=X.getMinimumRowHeight(U.columns,W),ne=J<G;if(J>$)return console.error("Will not be able to print row ".concat(X.index," correctly since it's minimum height is larger than page height")),!0;if(!ne)return!1;var P=X.hasRowSpan(U.columns),H=X.getMaxCellHeight(U.columns)>$;return H?(P&&console.error("The content of row ".concat(X.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(P||U.settings.rowPageBreak==="avoid")}function Y(W,X,G,U,ae,pe,T){var $=V(W,X,U,pe);if(G.canEntireRowFit($,T))ee(W,X,G,pe,T);else if(I(W,G,$,X)){var J=L(G,$,X,W);ee(W,X,G,pe,T),K(W,X,ae,pe,T),Y(W,X,J,U,ae,pe,T)}else K(W,X,ae,pe,T),Y(W,X,G,U,ae,pe,T)}function ee(W,X,G,U,ae){U.x=X.settings.margin.left;for(var pe=0,T=ae;pe<T.length;pe++){var $=T[pe],J=G.cells[$.index];if(!J){U.x+=$.width;continue}W.applyStyles(J.styles),J.x=U.x,J.y=U.y;var ne=X.callCellHooks(W,X.hooks.willDrawCell,J,G,$,U);if(ne===!1){U.x+=$.width;continue}R(W,J,U);var P=J.getTextPos();(0,S.default)(J.text,P.x,P.y,{halign:J.styles.halign,valign:J.styles.valign,maxWidth:Math.ceil(J.width-J.padding("left")-J.padding("right"))},W.getDocument()),X.callCellHooks(W,X.hooks.didDrawCell,J,G,$,U),U.x+=$.width}U.y+=G.height}function R(W,X,G){var U=X.styles;if(W.getDocument().setFillColor(W.getDocument().getFillColor()),typeof U.lineWidth=="number"){var ae=(0,g.getFillStyle)(U.lineWidth,U.fillColor);ae&&W.rect(X.x,G.y,X.width,X.height,ae)}else typeof U.lineWidth=="object"&&(U.fillColor&&W.rect(X.x,G.y,X.width,X.height,"F"),A(W,X,G,U.lineWidth))}function A(W,X,G,U){var ae,pe,T,$;U.top&&(ae=G.x,pe=G.y,T=G.x+X.width,$=G.y,U.right&&(T+=.5*U.right),U.left&&(ae-=.5*U.left),J(U.top,ae,pe,T,$)),U.bottom&&(ae=G.x,pe=G.y+X.height,T=G.x+X.width,$=G.y+X.height,U.right&&(T+=.5*U.right),U.left&&(ae-=.5*U.left),J(U.bottom,ae,pe,T,$)),U.left&&(ae=G.x,pe=G.y,T=G.x,$=G.y+X.height,U.top&&(pe-=.5*U.top),U.bottom&&($+=.5*U.bottom),J(U.left,ae,pe,T,$)),U.right&&(ae=G.x+X.width,pe=G.y,T=G.x+X.width,$=G.y+X.height,U.top&&(pe-=.5*U.top),U.bottom&&($+=.5*U.bottom),J(U.right,ae,pe,T,$));function J(ne,P,H,Q,ie){W.getDocument().setLineWidth(ne),W.getDocument().line(P,H,Q,ie,"S")}}function V(W,X,G,U){var ae=X.settings.margin.bottom,pe=X.settings.showFoot;return(pe==="everyPage"||pe==="lastPage"&&G)&&(ae+=X.getFootHeight(X.columns)),W.pageSize().height-U.y-ae}function K(W,X,G,U,ae,pe){ae===void 0&&(ae=[]),pe===void 0&&(pe=!1),W.applyStyles(W.userStyles),X.settings.showFoot==="everyPage"&&!pe&&X.foot.forEach(function($){return ee(W,X,$,U,ae)}),X.callEndPageHooks(W,U);var T=X.settings.margin;(0,g.addTableBorder)(W,X,G,U),re(W),X.pageNumber++,X.pageCount++,U.x=T.left,U.y=T.top,G.y=T.top,X.callWillDrawPageHooks(W,U),X.settings.showHead==="everyPage"&&(X.head.forEach(function($){return ee(W,X,$,U,ae)}),W.applyStyles(W.userStyles))}l.addPage=K;function re(W){var X=W.pageNumber();W.setPage(X+1);var G=W.pageNumber();return G===X?(W.addPage(),!0):!1}},224:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var g=d(420);function m(p,S,_){var j;_===void 0&&(_={});var x=(0,g.getPageAvailableWidth)(p,S),f=new Map,w=[],N=[],D=[];S.settings.horizontalPageBreakRepeat,Array.isArray(S.settings.horizontalPageBreakRepeat)?D=S.settings.horizontalPageBreakRepeat:(typeof S.settings.horizontalPageBreakRepeat=="string"||typeof S.settings.horizontalPageBreakRepeat=="number")&&(D=[S.settings.horizontalPageBreakRepeat]),D.forEach(function(Y){var ee=S.columns.find(function(R){return R.dataKey===Y||R.index===Y});ee&&!f.has(ee.index)&&(f.set(ee.index,!0),w.push(ee.index),N.push(S.columns[ee.index]),x-=ee.wrappedWidth)});for(var E=!0,L=(j=_==null?void 0:_.start)!==null&&j!==void 0?j:0;L<S.columns.length;){if(f.has(L)){L++;continue}var I=S.columns[L].wrappedWidth;if(E||x>=I)E=!1,w.push(L),N.push(S.columns[L]),x-=I;else break;L++}return{colIndexes:w,columns:N,lastIndex:L-1}}function v(p,S){for(var _=[],j=0;j<S.columns.length;j++){var x=m(p,S,{start:j});x.columns.length&&(_.push(x),j=x.lastIndex)}return _}l.calculateAllColumnsCanFitInPage=v},324:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var g=d(420);function m(w,N){v(w,N);var D=[],E=0;N.columns.forEach(function(I){var Y=I.getMaxCustomCellWidth(N);Y?I.width=Y:(I.width=I.wrappedWidth,D.push(I)),E+=I.width});var L=N.getWidth(w.pageSize().width)-E;L&&(L=p(D,L,function(I){return Math.max(I.minReadableWidth,I.minWidth)})),L&&(L=p(D,L,function(I){return I.minWidth})),L=Math.abs(L),!N.settings.horizontalPageBreak&&L>.1/w.scaleFactor()&&(L=L<1?L:Math.round(L),console.warn("Of the table content, ".concat(L," units width could not fit page"))),_(N),j(N,w),S(N)}l.calculateWidths=m;function v(w,N){var D=w.scaleFactor(),E=N.settings.horizontalPageBreak,L=(0,g.getPageAvailableWidth)(w,N);N.allRows().forEach(function(I){for(var Y=0,ee=N.columns;Y<ee.length;Y++){var R=ee[Y],A=I.cells[R.index];if(A){var V=N.hooks.didParseCell;N.callCellHooks(w,V,A,I,R,null);var K=A.padding("horizontal");A.contentWidth=(0,g.getStringWidth)(A.text,A.styles,w)+K;var re=(0,g.getStringWidth)(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,w);if(A.minReadableWidth=re+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||E===!0)A.contentWidth>L?(A.minWidth=L,A.wrappedWidth=L):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var W=10/D;A.minWidth=A.styles.minCellWidth||W,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),N.allRows().forEach(function(I){for(var Y=0,ee=N.columns;Y<ee.length;Y++){var R=ee[Y],A=I.cells[R.index];if(A&&A.colSpan===1)R.wrappedWidth=Math.max(R.wrappedWidth,A.wrappedWidth),R.minWidth=Math.max(R.minWidth,A.minWidth),R.minReadableWidth=Math.max(R.minReadableWidth,A.minReadableWidth);else{var V=N.styles.columnStyles[R.dataKey]||N.styles.columnStyles[R.index]||{},K=V.cellWidth||V.minCellWidth;K&&typeof K=="number"&&(R.minWidth=K,R.wrappedWidth=K)}A&&(A.colSpan>1&&!R.minWidth&&(R.minWidth=A.minWidth),A.colSpan>1&&!R.wrappedWidth&&(R.wrappedWidth=A.minWidth))}})}function p(w,N,D){for(var E=N,L=w.reduce(function(W,X){return W+X.wrappedWidth},0),I=0;I<w.length;I++){var Y=w[I],ee=Y.wrappedWidth/L,R=E*ee,A=Y.width+R,V=D(Y),K=A<V?V:A;N-=K-Y.width,Y.width=K}if(N=Math.round(N*1e10)/1e10,N){var re=w.filter(function(W){return N<0?W.width>D(W):!0});re.length&&(N=p(re,N,D))}return N}l.resizeColumns=p;function S(w){for(var N={},D=1,E=w.allRows(),L=0;L<E.length;L++)for(var I=E[L],Y=0,ee=w.columns;Y<ee.length;Y++){var R=ee[Y],A=N[R.index];if(D>1)D--,delete I.cells[R.index];else if(A)A.cell.height+=I.height,D=A.cell.colSpan,delete I.cells[R.index],A.left--,A.left<=1&&delete N[R.index];else{var V=I.cells[R.index];if(!V)continue;if(V.height=I.height,V.rowSpan>1){var K=E.length-L,re=V.rowSpan>K?K:V.rowSpan;N[R.index]={cell:V,left:re,row:I}}}}}function _(w){for(var N=w.allRows(),D=0;D<N.length;D++)for(var E=N[D],L=null,I=0,Y=0,ee=0;ee<w.columns.length;ee++){var R=w.columns[ee];if(Y-=1,Y>1&&w.columns[ee+1])I+=R.width,delete E.cells[R.index];else if(L){var A=L;delete E.cells[R.index],L=null,A.width=R.width+I}else{var A=E.cells[R.index];if(!A)continue;if(Y=A.colSpan,I=0,A.colSpan>1){L=A,I+=R.width;continue}A.width=R.width+I}}}function j(w,N){for(var D={count:0,height:0},E=0,L=w.allRows();E<L.length;E++){for(var I=L[E],Y=0,ee=w.columns;Y<ee.length;Y++){var R=ee[Y],A=I.cells[R.index];if(A){N.applyStyles(A.styles,!0);var V=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=N.splitTextToSize(A.text,V+1/N.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=x(A.text,V,A.styles,N,"...");else if(A.styles.overflow==="hidden")A.text=x(A.text,V,A.styles,N,"");else if(typeof A.styles.overflow=="function"){var K=A.styles.overflow(A.text,V);typeof K=="string"?A.text=[K]:A.text=K}A.contentHeight=A.getContentHeight(N.scaleFactor(),N.getLineHeightFactor());var re=A.contentHeight/A.rowSpan;A.rowSpan>1&&D.count*D.height<re*A.rowSpan?D={height:re,count:A.rowSpan}:D&&D.count>0&&D.height>re&&(re=D.height),re>I.height&&(I.height=re)}}D.count--}}function x(w,N,D,E,L){return w.map(function(I){return f(I,N,D,E,L)})}l.ellipsize=x;function f(w,N,D,E,L){var I=1e4*E.scaleFactor();if(N=Math.ceil(N*I)/I,N>=(0,g.getStringWidth)(w,D,E))return w;for(;N<(0,g.getStringWidth)(w+L,D,E)&&!(w.length<=1);)w=w.substring(0,w.length-1);return w.trim()+L}},964:function(o){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}o.exports=n}},i={};function s(o){var l=i[o];if(l!==void 0)return l.exports;var d=i[o]={exports:{}};return r[o].call(d.exports,d,d.exports,s),d.exports}var a={};return function(){var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.Cell=o.Column=o.Row=o.Table=o.CellHookData=o.__drawTable=o.__createTable=o.applyPlugin=void 0;var l=s(340),d=s(776),g=s(664),m=s(972),v=s(260);Object.defineProperty(o,"Table",{enumerable:!0,get:function(){return v.Table}});var p=s(172);Object.defineProperty(o,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var S=s(260);Object.defineProperty(o,"Cell",{enumerable:!0,get:function(){return S.Cell}}),Object.defineProperty(o,"Column",{enumerable:!0,get:function(){return S.Column}}),Object.defineProperty(o,"Row",{enumerable:!0,get:function(){return S.Row}});function _(N){(0,l.default)(N)}o.applyPlugin=_;function j(N,D){var E=(0,d.parseInput)(N,D),L=(0,m.createTable)(N,E);(0,g.drawTable)(N,L)}function x(N,D){var E=(0,d.parseInput)(N,D);return(0,m.createTable)(N,E)}o.__createTable=x;function f(N,D){(0,g.drawTable)(N,D)}o.__drawTable=f;try{var w=s(964);w.jsPDF&&(w=w.jsPDF),_(w)}catch{}o.default=j}(),a}()})})(qw);var Jj=qw.exports;const Wo=u0(Jj),Ho=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"];function Ms(t){return"dateFrom"in t&&t.dateFrom instanceof Date}const Qj=()=>{var Re,He;const{state:t,generateMonthlyReport:e,generatePeriodReport:n,getPerson:r,getVehicle:i,formatDate:s}=ri(),[a,o]=he.useState(""),[l,d]=he.useState(new Date().getMonth().toString()),[g,m]=he.useState(new Date().getFullYear().toString()),[v,p]=he.useState("mensile"),[S,_]=he.useState("1"),[j,x]=he.useState("1"),[f,w]=he.useState(""),[N,D]=he.useState(""),[E,L]=he.useState(null),[I,Y]=he.useState(!0),[ee,R]=he.useState(!0),[A,V]=he.useState(!0),[K,re]=he.useState("all"),[W,X]=he.useState(null),[G,U]=he.useState(!1),ae=Array.from({length:12},(oe,C)=>({value:C.toString(),label:Ho[C]})),pe=new Date().getFullYear(),T=Array.from({length:5},(oe,C)=>({value:(pe-C).toString(),label:(pe-C).toString()})),$=[{value:"1",label:"1 Trimestre (Gen  Mar)"},{value:"2",label:"2 Trimestre (Apr  Giu)"},{value:"3",label:"3 Trimestre (Lug  Set)"},{value:"4",label:"4 Trimestre (Ott  Dic)"}],J=[{value:"1",label:"1 Semestre (Gen  Giu)"},{value:"2",label:"2 Semestre (Lug  Dic)"}],ne=t.people.filter(oe=>!I&&!ee&&!A?!0:I&&oe.isDocente||ee&&oe.isAmministratore||A&&oe.isDipendente),P=(oe,C)=>{const ge=[0,3,6,9],je=[2,5,8,11],Ee=ge[oe-1],Ce=je[oe-1];return{dateFrom:new Date(C,Ee,1),dateTo:new Date(C,Ce+1,0),label:`${oe} Trimestre ${C} (${Ho[Ee]}  ${Ho[Ce]})`}},H=(oe,C)=>oe===1?{dateFrom:new Date(C,0,1),dateTo:new Date(C,5,30),label:`1 Semestre ${C} (Gennaio  Giugno)`}:{dateFrom:new Date(C,6,1),dateTo:new Date(C,11,31),label:`2 Semestre ${C} (Luglio  Dicembre)`},Q=(oe,C)=>{if(C==="all")return oe;const ge=oe.trips.filter(Xe=>Xe.tripRole===C);let je=0,Ee=0,Ce=0,xe=0;return ge.forEach(Xe=>{const mt=i(Xe.vehicleId);if(mt){const Gt=Xe.isRoundTrip?Xe.distance*2:Xe.distance;je+=Gt,Ee+=Gt*mt.reimbursementRate}Xe.hasToll&&Xe.tollAmount&&(Ce+=Xe.isRoundTrip?Xe.tollAmount*2:Xe.tollAmount),Xe.isRoundTrip&&Xe.returnTollAmount&&(Ce+=Xe.returnTollAmount),Xe.meals&&Xe.meals.length>0?Xe.meals.forEach(Gt=>{xe+=Gt.amount}):Xe.hasMeal&&Xe.mealAmount&&(xe+=Xe.mealAmount)}),{...oe,trips:ge,totalDistance:je,totalReimbursement:Ee,totalTollFees:Ce,totalMealReimbursement:xe}},ie=()=>{if(!a)return;U(!1);const oe=parseInt(g);let C=null;if(v==="mensile")C=e(a,parseInt(l),oe);else if(v==="trimestrale"){const{dateFrom:Ce,dateTo:xe,label:Xe}=P(parseInt(S),oe);C=n(a,Ce,xe,Xe)}else if(v==="semestrale"){const{dateFrom:Ce,dateTo:xe,label:Xe}=H(parseInt(j),oe);C=n(a,Ce,xe,Xe)}else if(v==="personalizzato"){if(!f||!N)return;const Ce=new Date(f),xe=new Date(N),Xe=`${Ce.toLocaleDateString("it-IT")}  ${xe.toLocaleDateString("it-IT")}`;C=n(a,Ce,xe,Xe)}if(!C){L(null),U(!0);return}const ge={docente:0,amministratore:0,dipendente:0};C.trips.forEach(Ce=>{Ce.tripRole&&(ge[Ce.tripRole]=(ge[Ce.tripRole]||0)+1)});const je=Object.entries(ge).filter(([Ce,xe])=>xe>0);X({hasMultipleRoles:je.length>1,roleCounts:ge});const Ee=Q(C,K);L(Ee)},be=oe=>Ms(oe)?oe.periodLabel:`${Ho[oe.month]} ${oe.year}`,_e=(oe,C)=>{const ge=[],je=new Date(oe.getFullYear(),oe.getMonth(),1),Ee=new Date(C.getFullYear(),C.getMonth(),1);for(;je<=Ee;)ge.push({month:je.getMonth(),year:je.getFullYear(),label:`${Ho[je.getMonth()]} ${je.getFullYear()}`}),je.setMonth(je.getMonth()+1);return ge},Ae=(oe,C,ge)=>_e(C,ge).map(Ee=>({...Ee,trips:oe.filter(Ce=>{const xe=new Date(Ce.date);return xe.getMonth()===Ee.month&&xe.getFullYear()===Ee.year})})).filter(Ee=>Ee.trips.length>0),ke=(oe,C,ge)=>_e(C,ge).map(Ee=>({...Ee,expenses:oe.filter(Ce=>{const xe=new Date(Ce.date);return xe.getMonth()===Ee.month&&xe.getFullYear()===Ee.year})})).filter(Ee=>Ee.expenses.length>0),Ke=oe=>{if(!oe)return null;const ge={docente:{label:"Docente",bg:"bg-teal-100",text:"text-teal-700"},amministratore:{label:"Amministratore",bg:"bg-blue-100",text:"text-blue-700"},dipendente:{label:"Dipendente",bg:"bg-gray-100",text:"text-gray-700"}}[oe]||{label:oe,bg:"bg-gray-100",text:"text-gray-700"};return c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${ge.bg} ${ge.text}`,children:ge.label})},ve=oe=>oe.meals&&oe.meals.length>0?oe.meals.reduce((C,ge)=>C+ge.amount,0):oe.hasMeal&&oe.mealAmount?oe.mealAmount:0,se=oe=>oe.meals&&oe.meals.length>0?oe.meals.map(C=>C.mealType==="pranzo"?"P":"C").join("+"):oe.hasMeal&&oe.mealType?oe.mealType==="pranzo"?"Pranzo":"Cena":"",Ze=()=>!E||!Ms(E)?!1:_e(E.dateFrom,E.dateTo).length>1,We=()=>{if(!E)return;const oe=r(E.personId);if(!oe)return;const C=new it,ge=be(E),je=`${oe.name} ${oe.surname}`,Ee=[0,0,0],Ce=[50,50,50],xe=[120,120,120],Xe=[240,240,240],mt=[255,255,255],Gt=[220,220,220],kt={docente:"Docente",amministratore:"Amministratore",dipendente:"Dipendente"};C.setDrawColor(...xe),C.setLineWidth(.3),C.line(14,8,196,8),C.setFontSize(15),C.setFont("helvetica","bold"),C.setTextColor(...Ee),C.text("NOTA SPESE DI TRASFERTA",14,16);const Rt=K!=="all"?kt[K]:null,Sr=[je,ge];Rt&&Sr.push(Rt),C.setFontSize(9),C.setFont("helvetica","normal"),C.setTextColor(...Ce),C.text(Sr.join("  |  "),14,22),C.setFontSize(8),C.setFont("helvetica","bold"),C.setTextColor(...Ee),C.text(Rd.ragioneSociale,196,12,{align:"right"}),C.setFont("helvetica","normal"),C.setTextColor(...Ce),C.setFontSize(7.5),C.text(`P.IVA / C.F.: ${Rd.partitaIva}`,196,17,{align:"right"}),C.text(`REA: ${Rd.rea}`,196,22,{align:"right"}),C.setDrawColor(...xe),C.setLineWidth(.3),C.line(14,26,196,26);let Ue=34;const Ei=E.totalReimbursement+E.totalTollFees+E.totalMealReimbursement+E.totalExpenses+E.totalAccommodations;if(Wo(C,{startY:Ue,head:[["Voce di Spesa","Importo"]],body:[["Rimborso Chilometrico",`${E.totalReimbursement.toFixed(2)} `],["Pedaggi Autostradali",`${E.totalTollFees.toFixed(2)} `],["Rimborsi Vitto (Pasti)",`${E.totalMealReimbursement.toFixed(2)} `],["Spese Documentate",`${E.totalExpenses.toFixed(2)} `],["Alloggi",`${E.totalAccommodations.toFixed(2)} `]],foot:[["TOTALE RIMBORSO SPESE",`${Ei.toFixed(2)} `]],theme:"grid",headStyles:{fillColor:Xe,textColor:Ee,fontStyle:"bold",lineColor:xe},footStyles:{fillColor:Xe,textColor:Ee,fontStyle:"bold",fontSize:10,lineColor:xe},bodyStyles:{textColor:Ce,lineColor:Xe},columnStyles:{1:{halign:"right",fontStyle:"bold"}},margin:{left:14,right:14}}),Ue=C.lastAutoTable.finalY+10,E.trips.length>0)if(C.setFontSize(11),C.setFont("helvetica","bold"),C.setTextColor(...Ce),C.text("Rimborsi Chilometrici",14,Ue),Ue+=4,Ms(E)&&_e(E.dateFrom,E.dateTo).length>1&&Ms(E)){const wt=Ae(E.trips,E.dateFrom,E.dateTo);for(const Ge of wt){Ue>240&&(C.addPage(),Ue=20),C.setFontSize(9),C.setFont("helvetica","bold"),C.setTextColor(...Ce),C.setFillColor(...Gt),C.rect(14,Ue,182,6,"F"),C.text(Ge.label,16,Ue+4.2),Ue+=8;const ct=Ge.trips.map(At=>{const Ht=i(At.vehicleId),nr=At.isRoundTrip?At.distance*2:At.distance,rr=Ht?(nr*Ht.reimbursementRate).toFixed(2)+" ":"-",nt=At.hasToll&&At.tollAmount?(At.isRoundTrip?At.tollAmount*2:At.tollAmount).toFixed(2)+" ":"-",qn=ve(At),Ur=qn>0?`${qn.toFixed(2)}  (${se(At)})`:"-",Wn=At.tripRole?kt[At.tripRole]??At.tripRole:"-";return[new Date(At.date).toLocaleDateString("it-IT"),`${At.origin} -> ${At.destination}${At.isRoundTrip?" (A/R)":""}`,Ht?Ht.plate:"-",`${nr.toFixed(1)} km`,rr,nt,Ur,Wn,At.purpose||"-"]});Wo(C,{startY:Ue,head:[["Data","Percorso","Targa","Km","Rimborso","Pedaggio","Vitto","Ruolo","Motivo"]],body:ct,theme:"grid",headStyles:{fillColor:Xe,textColor:Ee,fontStyle:"bold",fontSize:8,lineColor:xe},bodyStyles:{fontSize:7.5,textColor:Ce,lineColor:Xe},alternateRowStyles:{fillColor:mt},columnStyles:{0:{cellWidth:16},1:{cellWidth:38},2:{cellWidth:14},3:{cellWidth:14},4:{cellWidth:18},5:{cellWidth:16},6:{cellWidth:18},7:{cellWidth:22}},margin:{left:14,right:14}}),Ue=C.lastAutoTable.finalY+6}Ue+=4}else{const wt=E.trips.map(Ge=>{const ct=i(Ge.vehicleId),At=Ge.isRoundTrip?Ge.distance*2:Ge.distance,Ht=ct?(At*ct.reimbursementRate).toFixed(2)+" ":"-",nr=Ge.hasToll&&Ge.tollAmount?(Ge.isRoundTrip?Ge.tollAmount*2:Ge.tollAmount).toFixed(2)+" ":"-",rr=ve(Ge),nt=rr>0?`${rr.toFixed(2)}  (${se(Ge)})`:"-",qn=Ge.tripRole?kt[Ge.tripRole]??Ge.tripRole:"-";return[new Date(Ge.date).toLocaleDateString("it-IT"),`${Ge.origin} -> ${Ge.destination}${Ge.isRoundTrip?" (A/R)":""}`,ct?ct.plate:"-",`${At.toFixed(1)} km`,Ht,nr,nt,qn,Ge.purpose||"-"]});Wo(C,{startY:Ue,head:[["Data","Percorso","Targa","Km","Rimborso","Pedaggio","Vitto","Ruolo","Motivo"]],body:wt,theme:"grid",headStyles:{fillColor:Xe,textColor:Ee,fontStyle:"bold",fontSize:8,lineColor:xe},bodyStyles:{fontSize:7.5,textColor:Ce,lineColor:Xe},alternateRowStyles:{fillColor:mt},columnStyles:{0:{cellWidth:16},1:{cellWidth:38},2:{cellWidth:14},3:{cellWidth:14},4:{cellWidth:18},5:{cellWidth:16},6:{cellWidth:18},7:{cellWidth:22}},margin:{left:14,right:14}}),Ue=C.lastAutoTable.finalY+10}if(E.expenses.length>0)if(Ue>240&&(C.addPage(),Ue=20),C.setFontSize(11),C.setFont("helvetica","bold"),C.setTextColor(...Ce),C.text("Spese di Viaggio e Trasferimento",14,Ue),Ue+=4,Ms(E)&&_e(E.dateFrom,E.dateTo).length>1&&Ms(E)){const wt=ke(E.expenses,E.dateFrom,E.dateTo);for(const Ge of wt)Ue>240&&(C.addPage(),Ue=20),C.setFontSize(9),C.setFont("helvetica","bold"),C.setTextColor(...Ce),C.setFillColor(...Gt),C.rect(14,Ue,182,6,"F"),C.text(Ge.label,16,Ue+4.2),Ue+=8,Wo(C,{startY:Ue,head:[["Data","Tipo","Dettaglio","Importo"]],body:Ge.expenses.map(ct=>[new Date(ct.date).toLocaleDateString("it-IT"),ds[ct.expenseType],ct.fromLocation&&ct.toLocation?`${ct.fromLocation} -> ${ct.toLocation}`:ct.description||"-",`${ct.amount.toFixed(2)} `]),theme:"grid",headStyles:{fillColor:Xe,textColor:Ee,fontStyle:"bold",fontSize:9,lineColor:xe},bodyStyles:{textColor:Ce,lineColor:Xe},alternateRowStyles:{fillColor:mt},columnStyles:{3:{halign:"right",fontStyle:"bold"}},margin:{left:14,right:14}}),Ue=C.lastAutoTable.finalY+6;Ue>240&&(C.addPage(),Ue=20),C.setFontSize(9),C.setFont("helvetica","bold"),C.setTextColor(...Ce),C.text(`Totale Spese Documentate: ${E.totalExpenses.toFixed(2)} `,196,Ue,{align:"right"}),Ue+=10}else Wo(C,{startY:Ue,head:[["Data","Tipo","Dettaglio","Importo"]],body:E.expenses.map(wt=>[new Date(wt.date).toLocaleDateString("it-IT"),ds[wt.expenseType],wt.fromLocation&&wt.toLocation?`${wt.fromLocation} -> ${wt.toLocation}`:wt.description||"-",`${wt.amount.toFixed(2)} `]),foot:[["","","TOTALE",`${E.totalExpenses.toFixed(2)} `]],theme:"grid",headStyles:{fillColor:Xe,textColor:Ee,fontStyle:"bold",fontSize:9,lineColor:xe},bodyStyles:{textColor:Ce,lineColor:Xe},footStyles:{fontStyle:"bold",fillColor:Xe,textColor:Ee,lineColor:xe},alternateRowStyles:{fillColor:mt},columnStyles:{3:{halign:"right",fontStyle:"bold"}},margin:{left:14,right:14}}),Ue=C.lastAutoTable.finalY+10;E.accommodations.length>0&&(Ue>240&&(C.addPage(),Ue=20),C.setFontSize(11),C.setFont("helvetica","bold"),C.setTextColor(...Ce),C.text("Alloggi",14,Ue),Ue+=4,Wo(C,{startY:Ue,head:[["Periodo","Luogo","Importo"]],body:E.accommodations.map(an=>[`${new Date(an.dateFrom).toLocaleDateString("it-IT")} -> ${new Date(an.dateTo).toLocaleDateString("it-IT")}`,an.location||"-",`${an.amount.toFixed(2)} `]),foot:[["","TOTALE",`${E.totalAccommodations.toFixed(2)} `]],theme:"grid",headStyles:{fillColor:Xe,textColor:Ee,fontStyle:"bold",fontSize:9,lineColor:xe},bodyStyles:{textColor:Ce,lineColor:Xe},footStyles:{fontStyle:"bold",fillColor:Xe,textColor:Ee,lineColor:xe},alternateRowStyles:{fillColor:mt},columnStyles:{2:{halign:"right",fontStyle:"bold"}},margin:{left:14,right:14}}),Ue=C.lastAutoTable.finalY+10),Ue>230&&(C.addPage(),Ue=20),C.setDrawColor(...xe),C.setLineWidth(.3),C.line(14,Ue,196,Ue),Ue+=8,C.setFontSize(12),C.setFont("helvetica","bold"),C.setTextColor(...Ee),C.text("TOTALE RIMBORSO SPESE:",14,Ue),C.text(`${Ei.toFixed(2)} `,196,Ue,{align:"right"}),Ue+=16,C.setFontSize(8.5),C.setFont("helvetica","normal"),C.setTextColor(...xe),C.text("Firmare e allegare tutta la relativa documentazione (ricevute, scontrini, biglietti, ecc.)",14,Ue),Ue+=12,C.setTextColor(...Ce),C.text("Firma:",14,Ue),C.setDrawColor(...xe),C.line(40,Ue,100,Ue),C.text("Data:",120,Ue),C.line(135,Ue,196,Ue);const Ut=C.internal.getNumberOfPages();for(let an=1;an<=Ut;an++)C.setPage(an),C.setDrawColor(...Xe),C.setLineWidth(.3),C.line(14,287,196,287),C.setFontSize(7),C.setTextColor(...xe),C.text(`${je} - ${ge}`,14,291),C.text(`P.IVA ${Rd.partitaIva}`,105,291,{align:"center"}),C.text(`Pagina ${an} di ${Ut}`,196,291,{align:"right"});const Nr=v==="mensile"?`${Ho[parseInt(l)].toLowerCase()}-${g}`:v==="trimestrale"?`T${S}-${g}`:v==="semestrale"?`S${j}-${g}`:`${f}_${N}`;C.save(`nota-spese_${oe.surname.toLowerCase()}_${Nr}.pdf`)},Oe=[{key:"date",header:"Data",render:oe=>c.jsx("span",{children:s(oe.date)})},{key:"route",header:"Percorso",render:oe=>c.jsxs("span",{children:[oe.origin,"  ",oe.destination,oe.isRoundTrip&&c.jsx("span",{className:"ml-1 text-teal-600",children:"(A/R)"})]})},{key:"role",header:"Ruolo",render:oe=>Ke(oe.tripRole)},{key:"vehicle",header:"Veicolo",render:oe=>{const C=i(oe.vehicleId);return C?c.jsxs("span",{children:[C.make," ",C.model," (",C.plate,")"]}):c.jsx("span",{className:"text-red-500",children:"N/D"})}},{key:"distance",header:"Km",render:oe=>{const C=oe.isRoundTrip?oe.distance*2:oe.distance;return c.jsxs("span",{children:[C.toFixed(1)," km"]})}},{key:"reimbursement",header:"Rimborso km",render:oe=>{const C=i(oe.vehicleId);if(!C)return c.jsx("span",{children:"-"});const ge=oe.isRoundTrip?oe.distance*2:oe.distance;return c.jsxs("span",{className:"font-medium",children:[(ge*C.reimbursementRate).toFixed(2)," "]})}},{key:"toll",header:"Pedaggio",render:oe=>{if(oe.hasToll&&oe.tollAmount){const C=oe.isRoundTrip?oe.tollAmount*2:oe.tollAmount;return c.jsxs("span",{className:"font-medium text-amber-700",children:[C.toFixed(2)," "]})}return c.jsx("span",{className:"text-gray-400",children:"-"})}},{key:"meal",header:"Vitto",render:oe=>{const C=ve(oe);return C>0?c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{className:"font-medium text-green-700",children:[C.toFixed(2)," "]}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",se(oe),")"]})]}):c.jsx("span",{className:"text-gray-400",children:"-"})}},{key:"purpose",header:"Motivo"}],Me=Ze(),Be=E&&Ms(E)?E.dateFrom:null,Pe=E&&Ms(E)?E.dateTo:null;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Report Trasferte"}),c.jsxs(mn,{children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Genera Report"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtra persone per Ruolo"}),c.jsx("div",{className:"flex flex-wrap gap-4",children:[{key:"filterDocenti",value:I,set:Y,label:"Docenti"},{key:"filterAmministratori",value:ee,set:R,label:"Amministratori"},{key:"filterDipendenti",value:A,set:V,label:"Dipendenti"}].map(oe=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:oe.value,onChange:C=>oe.set(C.target.checked),className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:oe.label})]},oe.key))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsx(Qt,{id:"personId",label:"Seleziona Persona",options:[{value:"",label:"Seleziona..."},...ne.map(oe=>{const C=[];return oe.isDocente&&C.push("D"),oe.isAmministratore&&C.push("A"),oe.isDipendente&&C.push("Dip"),{value:oe.id,label:`${oe.name} ${oe.surname} (${C.join(", ")})`}})],value:a,onChange:oe=>o(oe.target.value)}),c.jsx(Qt,{id:"tripRole",label:"Filtra per Ruolo Trasferta",options:[{value:"all",label:"Tutti i ruoli"},{value:"docente",label:"Solo Docente"},{value:"amministratore",label:"Solo Amministratore"},{value:"dipendente",label:"Solo Dipendente"}],value:K,onChange:oe=>re(oe.target.value)})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo di Periodo"}),c.jsx("div",{className:"flex flex-wrap gap-3",children:[{value:"mensile",label:"Mensile"},{value:"trimestrale",label:"Trimestrale"},{value:"semestrale",label:"Semestrale"},{value:"personalizzato",label:"Personalizzato"}].map(oe=>c.jsx("button",{onClick:()=>p(oe.value),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-colors ${v===oe.value?"bg-teal-600 text-white border-teal-600":"bg-white text-gray-700 border-gray-300 hover:border-teal-400"}`,children:oe.label},oe.value))})]}),v==="mensile"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsx(Qt,{id:"month",label:"Mese",options:ae,value:l,onChange:oe=>d(oe.target.value)}),c.jsx(Qt,{id:"year",label:"Anno",options:T,value:g,onChange:oe=>m(oe.target.value)})]}),v==="trimestrale"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsx(Qt,{id:"quarter",label:"Trimestre",options:$,value:S,onChange:oe=>_(oe.target.value)}),c.jsx(Qt,{id:"year",label:"Anno",options:T,value:g,onChange:oe=>m(oe.target.value)})]}),v==="semestrale"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsx(Qt,{id:"semester",label:"Semestre",options:J,value:j,onChange:oe=>x(oe.target.value)}),c.jsx(Qt,{id:"year",label:"Anno",options:T,value:g,onChange:oe=>m(oe.target.value)})]}),v==="personalizzato"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsx(pt,{id:"dateFrom",label:"Data Inizio",type:"date",value:f,onChange:oe=>w(oe.target.value)}),c.jsx(pt,{id:"dateTo",label:"Data Fine",type:"date",value:N,onChange:oe=>D(oe.target.value)})]}),c.jsx(st,{variant:"primary",icon:c.jsx(Np,{size:18}),onClick:ie,disabled:!a||v==="personalizzato"&&(!f||!N),children:"Genera Report"})]}),G&&c.jsx("div",{className:"border-t border-gray-200 pt-6 text-center py-6",children:c.jsx("p",{className:"text-gray-500",children:"Nessuna trasferta, spesa o alloggio registrati per il periodo selezionato."})}),E&&c.jsxs("div",{className:"border-t border-gray-200 pt-6 space-y-6",children:[(W==null?void 0:W.hasMultipleRoles)&&K==="all"&&c.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(l_,{className:"h-5 w-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-amber-800 mb-1",children:"Trasferte in Piu' Ruoli Rilevate"}),c.jsxs("ul",{className:"text-sm text-amber-700 list-disc list-inside mb-2",children:[W.roleCounts.docente>0&&c.jsxs("li",{children:[c.jsx("strong",{children:W.roleCounts.docente})," trasferte come ",c.jsx("strong",{children:"Docente"})]}),W.roleCounts.amministratore>0&&c.jsxs("li",{children:[c.jsx("strong",{children:W.roleCounts.amministratore})," trasferte come ",c.jsx("strong",{children:"Amministratore"})]}),W.roleCounts.dipendente>0&&c.jsxs("li",{children:[c.jsx("strong",{children:W.roleCounts.dipendente})," trasferte come ",c.jsx("strong",{children:"Dipendente"})]})]}),c.jsx("p",{className:"text-sm text-amber-700",children:"Si consiglia di generare report separati per ogni ruolo usando il filtro apposito."})]})]})}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:[(Re=r(E.personId))==null?void 0:Re.name," ",(He=r(E.personId))==null?void 0:He.surname]}),K!=="all"&&Ke(K)]}),c.jsx("p",{className:"text-sm text-gray-600",children:be(E)})]}),c.jsx(st,{variant:"primary",icon:c.jsx(f_,{size:18}),onClick:We,children:"Scarica PDF"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[{label:"Km totali",value:`${E.totalDistance.toFixed(1)} km`,colorClass:"bg-blue-50 border-blue-100",icon:c.jsx(y_,{className:"h-5 w-5 text-blue-500"})},{label:"Rimborso km",value:`${E.totalReimbursement.toFixed(2)} `,colorClass:"bg-teal-50 border-teal-100",icon:c.jsx(Np,{className:"h-5 w-5 text-teal-500"})},{label:"Pedaggi",value:`${E.totalTollFees.toFixed(2)} `,colorClass:"bg-amber-50 border-amber-100",icon:c.jsx(B5,{className:"h-5 w-5 text-amber-500"})},{label:"Vitto (pasti)",value:`${E.totalMealReimbursement.toFixed(2)} `,colorClass:"bg-green-50 border-green-100",icon:c.jsx(Y5,{className:"h-5 w-5 text-green-500"})},{label:"Spese doc.",value:`${E.totalExpenses.toFixed(2)} `,colorClass:"bg-orange-50 border-orange-100",icon:c.jsx(sc,{className:"h-5 w-5 text-orange-500"})},{label:"Alloggi",value:`${E.totalAccommodations.toFixed(2)} `,colorClass:"bg-sky-50 border-sky-100",icon:c.jsx(Nh,{className:"h-5 w-5 text-sky-500"})}].map(oe=>c.jsxs("div",{className:`${oe.colorClass} p-3 rounded-lg border`,children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[oe.icon,c.jsx("span",{className:"text-xs font-medium text-gray-600",children:oe.label})]}),c.jsx("p",{className:"text-sm font-bold text-gray-900",children:oe.value})]},oe.label))}),c.jsx("div",{className:"bg-gray-900 p-5 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-gray-300 font-medium",children:"TOTALE RIMBORSO SPESE"}),c.jsxs("span",{className:"text-2xl font-bold text-white",children:[(E.totalReimbursement+E.totalTollFees+E.totalMealReimbursement+E.totalExpenses+E.totalAccommodations).toFixed(2)," "]})]})}),E.trips.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[c.jsx(Np,{size:18,className:"text-teal-500"}),"Rimborsi Chilometrici (",E.trips.length," trasferte)"]}),Me&&Be&&Pe?c.jsx("div",{className:"space-y-4",children:Ae(E.trips,Be,Pe).map(oe=>c.jsxs("div",{children:[c.jsx("div",{className:"bg-gray-100 px-3 py-2 rounded-t-lg border border-gray-200",children:c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:oe.label})}),c.jsx("div",{className:"border border-t-0 border-gray-200 rounded-b-lg overflow-hidden",children:c.jsx(fc,{columns:Oe,data:oe.trips,keyExtractor:C=>C.id})})]},`${oe.year}-${oe.month}`))}):c.jsx(fc,{columns:Oe,data:E.trips,keyExtractor:oe=>oe.id})]}),E.expenses.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[c.jsx(sc,{size:18,className:"text-orange-500"}),"Spese di Viaggio e Trasferimento (",E.expenses.length," voci)"]}),Me&&Be&&Pe?c.jsxs("div",{className:"space-y-4",children:[ke(E.expenses,Be,Pe).map(oe=>c.jsxs("div",{children:[c.jsx("div",{className:"bg-gray-100 px-3 py-2 rounded-t-lg border border-gray-200",children:c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:oe.label})}),c.jsx("div",{className:"border border-t-0 border-gray-200 rounded-b-lg overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:["Data","Tipo","Dettaglio","Note","Importo"].map(C=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:C},C))})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.expenses.map(C=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:s(C.date)}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:ds[C.expenseType]})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:C.fromLocation&&C.toLocation?`${C.fromLocation}  ${C.toLocation}`:C.description||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:C.notes||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:[C.amount.toFixed(2)," "]})]},C.id))})]})})})]},`${oe.year}-${oe.month}`)),c.jsxs("div",{className:"bg-orange-50 px-4 py-3 rounded-lg text-right",children:[c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Totale Spese Documentate: "}),c.jsxs("span",{className:"text-sm font-bold text-orange-700",children:[E.totalExpenses.toFixed(2)," "]})]})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:["Data","Tipo","Dettaglio","Note","Importo"].map(oe=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:oe},oe))})}),c.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[E.expenses.map(oe=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:s(oe.date)}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:ds[oe.expenseType]})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:oe.fromLocation&&oe.toLocation?`${oe.fromLocation}  ${oe.toLocation}`:oe.description||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:oe.notes||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:[oe.amount.toFixed(2)," "]})]},oe.id)),c.jsxs("tr",{className:"bg-orange-50",children:[c.jsx("td",{colSpan:4,className:"px-4 py-3 text-sm font-semibold text-gray-700 text-right",children:"Totale Spese Documentate:"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-orange-700",children:[E.totalExpenses.toFixed(2)," "]})]})]})]})})]}),E.accommodations.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[c.jsx(Nh,{size:18,className:"text-sky-500"}),"Alloggi (",E.accommodations.length," soggiorni)"]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:["Periodo","Luogo","Note","Importo"].map(oe=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:oe},oe))})}),c.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[E.accommodations.map(oe=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[s(oe.dateFrom),"  ",s(oe.dateTo)]}),c.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-700",children:oe.location||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:oe.notes||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:[oe.amount.toFixed(2)," "]})]},oe.id)),c.jsxs("tr",{className:"bg-sky-50",children:[c.jsx("td",{colSpan:3,className:"px-4 py-3 text-sm font-semibold text-gray-700 text-right",children:"Totale Alloggi:"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-sky-700",children:[E.totalAccommodations.toFixed(2)," "]})]})]})]})})]})]})]})]})},Xj=()=>{const{state:t,deleteSavedRoute:e}=ri(),n=ni(),[r,i]=he.useState(""),s=l=>{window.confirm("Sei sicuro di voler eliminare questo percorso salvato?")&&e(l)},a=t.savedRoutes.filter(l=>l.name.toLowerCase().includes(r.toLowerCase())||l.origin.toLowerCase().includes(r.toLowerCase())||l.destination.toLowerCase().includes(r.toLowerCase())),o=[{key:"name",header:"Nome Percorso",render:l=>c.jsx("span",{className:"font-medium text-gray-900",children:l.name})},{key:"origin",header:"Origine",render:l=>c.jsx("span",{className:"text-sm text-gray-600",children:l.origin.length>30?l.origin.substring(0,30)+"...":l.origin})},{key:"destination",header:"Destinazione",render:l=>c.jsx("span",{className:"text-sm text-gray-600",children:l.destination.length>30?l.destination.substring(0,30)+"...":l.destination})},{key:"distances",header:"Opzioni Percorso",render:l=>c.jsxs("div",{className:"space-y-1",children:[l.distances.map((d,g)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ac,{className:"h-3 w-3 text-teal-500"}),c.jsxs("span",{className:"text-xs text-gray-600",children:[d.label,": ",c.jsxs("span",{className:"font-medium",children:[d.distance.toFixed(1)," km"]})]})]},d.id)),l.distances.length===0&&c.jsx("span",{className:"text-xs text-red-500",children:"Nessuna distanza configurata"})]})},{key:"actions",header:"Azioni",className:"text-right w-32",render:l=>c.jsxs("div",{className:"flex flex-col items-stretch space-y-2",children:[c.jsx(st,{variant:"info",size:"sm",icon:c.jsx(Xh,{size:16}),onClick:d=>{d.stopPropagation(),n(`/percorsi/${l.id}`)},className:"w-full",children:"Modifica"}),c.jsx(st,{variant:"danger",size:"sm",icon:c.jsx(Vi,{size:16}),onClick:d=>{d.stopPropagation(),s(l.id)},className:"w-full",children:"Elimina"})]})}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Percorsi Salvati"}),c.jsx(Pn,{to:"/percorsi/nuovo",children:c.jsx(st,{variant:"primary",icon:c.jsx(H5,{size:18}),children:"Nuovo Percorso"})})]}),c.jsxs(mn,{children:[c.jsxs("div",{className:"mb-4 relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(dg,{size:18,className:"text-gray-400"})}),c.jsx("input",{type:"text",placeholder:"Cerca per nome, origine o destinazione...",className:"pl-10 shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border-gray-300 rounded-md",value:r,onChange:l=>i(l.target.value)})]}),c.jsx("div",{className:"mb-4 bg-blue-50 rounded-md p-4 border border-blue-200",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(Qh,{className:"text-blue-500 mt-1 mr-3 flex-shrink-0",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-blue-800",children:"Percorsi con Multiple Opzioni"}),c.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Ora puoi salvare pi opzioni di distanza per ogni percorso (es. strada normale, autostrada). Questo ti permetter di selezionare rapidamente l'opzione desiderata quando inserisci un nuovo tragitto, riducendo la necessit di consultare Google Maps ogni volta."})]})]})}),c.jsx(fc,{columns:o,data:a,keyExtractor:l=>l.id,onRowClick:l=>n(`/percorsi/${l.id}`),emptyMessage:r?"Nessun percorso trovato con questi criteri di ricerca":"Nessun percorso salvato. Clicca su 'Nuovo Percorso' per iniziare."})]})]})};let zd;const Zj=new Uint8Array(16);function eA(){if(!zd&&(zd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zd(Zj)}const Mn=[];for(let t=0;t<256;++t)Mn.push((t+256).toString(16).slice(1));function tA(t,e=0){return Mn[t[e+0]]+Mn[t[e+1]]+Mn[t[e+2]]+Mn[t[e+3]]+"-"+Mn[t[e+4]]+Mn[t[e+5]]+"-"+Mn[t[e+6]]+Mn[t[e+7]]+"-"+Mn[t[e+8]]+Mn[t[e+9]]+"-"+Mn[t[e+10]]+Mn[t[e+11]]+Mn[t[e+12]]+Mn[t[e+13]]+Mn[t[e+14]]+Mn[t[e+15]]}const nA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),p2={randomUUID:nA};function qp(t,e,n){if(p2.randomUUID&&!e&&!t)return p2.randomUUID();t=t||{};const r=t.random||(t.rng||eA)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,tA(r)}const m2=()=>{const{id:t}=ug(),e=ni(),{state:n,addSavedRoute:r,updateSavedRoute:i}=ri(),s=!!t,a=s?n.savedRoutes.find(N=>N.id===t):null,[o,l]=he.useState({name:"",origin:"",destination:"",distances:[{id:qp(),label:"Percorso Standard",distance:0}]}),[d,g]=he.useState({});he.useEffect(()=>{a&&l({name:a.name,origin:a.origin,destination:a.destination,distances:a.distances.length>0?a.distances:[{id:qp(),label:"Percorso Standard",distance:0}]})},[a]);const m=()=>{const N={};if(o.name.trim()||(N.name="Il nome del percorso  obbligatorio"),o.origin.trim()||(N.origin="L'indirizzo di origine  obbligatorio"),o.destination.trim()||(N.destination="L'indirizzo di destinazione  obbligatorio"),o.distances.length===0)N.distances="Almeno una distanza  obbligatoria";else{o.distances.some(I=>!I.label.trim()||isNaN(I.distance)||I.distance<=0)&&(N.distances="Tutte le distanze devono avere un nome e un valore positivo");const E=o.distances.map(I=>I.label.trim().toLowerCase()),L=new Set(E);E.length!==L.size&&(N.distances="I nomi delle distanze devono essere univoci")}return g(N),Object.keys(N).length===0},v=N=>{const{name:D,value:E}=N.target;l(L=>({...L,[D]:E}))},p=(N,D,E)=>{l(L=>({...L,distances:L.distances.map(I=>I.id===N?{...I,[D]:D==="distance"||D==="tollAmount"?parseFloat(E)||0:E}:I)}))},S=(N,D)=>{l(E=>({...E,distances:E.distances.map(L=>L.id===N?{...L,tollEntryStation:D?L.tollEntryStation||"":void 0,tollExitStation:D?L.tollExitStation||"":void 0,tollAmount:D?L.tollAmount||0:void 0}:L)}))},_=()=>{const N={id:qp(),label:"",distance:0};l(D=>({...D,distances:[...D.distances,N]}))},j=N=>{o.distances.length<=1||l(D=>({...D,distances:D.distances.filter(E=>E.id!==N)}))},x=()=>{try{bw(o.origin,o.destination)}catch(N){N instanceof Error&&alert(N.message)}},f=N=>{if(N.preventDefault(),!m())return;const D={name:o.name,origin:o.origin,destination:o.destination,distances:o.distances};s&&a?i({id:a.id,...D}):r(D),e("/percorsi")},w=o.origin.trim()&&o.destination.trim();return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(st,{variant:"secondary",icon:c.jsx(ic,{size:18}),onClick:()=>e("/percorsi"),children:"Torna all'elenco"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:s?"Modifica Percorso":"Nuovo Percorso"})]}),c.jsx(mn,{children:c.jsxs("form",{onSubmit:f,className:"space-y-6",children:[c.jsx(pt,{id:"name",name:"name",label:"Nome Percorso",value:o.name,onChange:v,error:d.name,placeholder:"es. Sede Treviso - Sede Vicenza",required:!0}),c.jsx("div",{className:"p-4 bg-blue-50 rounded-md border border-blue-200",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(Qh,{className:"text-blue-500 mt-1 mr-3 flex-shrink-0",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-blue-800",children:"Suggerimento"}),c.jsx("p",{className:"text-sm text-blue-600 mt-1",children:'Inserisci indirizzi completi per un calcolo della distanza pi accurato. Esempio: "Via della Quercia 2/B, Treviso, Italia"'})]})]})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Indirizzo di Origine"}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:za.map(N=>c.jsx("button",{type:"button",onClick:()=>l(D=>({...D,origin:N.address})),className:"text-xs px-3 py-1 rounded-full border border-blue-300 bg-blue-50 text-blue-700 hover:bg-blue-100 transition-colors",children:N.name},N.id))}),c.jsx(pt,{id:"origin",name:"origin",value:o.origin,onChange:v,error:d.origin,placeholder:"Via, numero civico, citt",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Indirizzo di Destinazione"}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:za.map(N=>c.jsx("button",{type:"button",onClick:()=>l(D=>({...D,destination:N.address})),className:"text-xs px-3 py-1 rounded-full border border-blue-300 bg-blue-50 text-blue-700 hover:bg-blue-100 transition-colors",children:N.name},N.id))}),c.jsx(pt,{id:"destination",name:"destination",value:o.destination,onChange:v,error:d.destination,placeholder:"Via, numero civico, citt",required:!0})]}),c.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(vi,{className:"h-5 w-5 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Calcolo Distanza con Google Maps"}),c.jsx("p",{className:"text-sm text-green-700 mb-3",children:"Clicca il pulsante qui sotto per aprire Google Maps con il percorso tra gli indirizzi inseriti. Potrai vedere le diverse opzioni di percorso (strada normale, autostrada, ecc.) e inserire manualmente le distanze nei campi sottostanti."}),c.jsx(st,{type:"button",variant:"success",size:"sm",icon:c.jsx(kh,{size:16}),onClick:x,disabled:!w,children:"Apri Google Maps"}),!w&&c.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Inserisci prima gli indirizzi di origine e destinazione"})]})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Opzioni di Percorso"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Aggiungi diverse opzioni di percorso (es. strada normale, autostrada) con le rispettive distanze"})]}),c.jsx(st,{type:"button",variant:"primary",size:"sm",icon:c.jsx(Fr,{size:16}),onClick:_,children:"Aggiungi Percorso"})]}),d.distances&&c.jsx("p",{className:"text-sm text-red-600",children:d.distances}),c.jsx("div",{className:"space-y-3",children:o.distances.map((N,D)=>c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(v_,{className:"h-4 w-4 text-gray-500"}),c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Percorso ",D+1]})]}),o.distances.length>1&&c.jsx(st,{type:"button",variant:"danger",size:"sm",icon:c.jsx(Vi,{size:14}),onClick:()=>j(N.id),children:"Rimuovi"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(pt,{id:`distance-label-${N.id}`,label:"Nome Percorso",value:N.label,onChange:E=>p(N.id,"label",E.target.value),placeholder:"es. Strada Normale, Autostrada, Percorso Veloce",required:!0}),c.jsx(pt,{id:`distance-value-${N.id}`,label:"Distanza (km)",type:"number",step:"0.1",min:"0.1",value:N.distance.toString(),onChange:E=>p(N.id,"distance",E.target.value),placeholder:"Inserisci la distanza da Google Maps",required:!0})]}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[c.jsx("input",{type:"checkbox",id:`toll-checkbox-${N.id}`,checked:N.tollEntryStation!==void 0||N.tollExitStation!==void 0||N.tollAmount!==void 0,onChange:E=>S(N.id,E.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:`toll-checkbox-${N.id}`,className:"text-sm font-medium text-gray-700",children:"Questo percorso include pedaggi autostradali"})]}),(N.tollEntryStation!==void 0||N.tollExitStation!==void 0||N.tollAmount!==void 0)&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"p-3 bg-blue-50 rounded-md border border-blue-200",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(vi,{className:"h-4 w-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),c.jsx("div",{className:"flex-grow",children:c.jsxs("p",{className:"text-xs text-blue-700",children:["Puoi definire un pedaggio predefinito per questo percorso. Gli importi possono essere modificati per ogni singolo viaggio."," ",c.jsxs("a",{href:"https://www.infoviaggiando.it/pedaggi",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-800 inline-flex items-center",children:["Consulta qui gli importi aggiornati",c.jsx(kh,{size:12,className:"ml-1"})]})]})})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx(pt,{id:`toll-entry-${N.id}`,label:"Casello di Entrata",value:N.tollEntryStation||"",onChange:E=>p(N.id,"tollEntryStation",E.target.value),placeholder:"es. Treviso"}),c.jsx(pt,{id:`toll-exit-${N.id}`,label:"Casello di Uscita",value:N.tollExitStation||"",onChange:E=>p(N.id,"tollExitStation",E.target.value),placeholder:"es. Vicenza"}),c.jsx(pt,{id:`toll-amount-${N.id}`,label:"Importo Pedaggio ()",type:"number",step:"0.10",min:"0",value:(N.tollAmount||0).toString(),onChange:E=>p(N.id,"tollAmount",E.target.value),placeholder:"es. 3.50"})]})]})]})]},N.id))})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(st,{type:"submit",variant:"primary",icon:c.jsx(jh,{size:18}),children:s?"Salva Modifiche":"Salva Percorso"})})]})})]})},rA=()=>{var x,f;const t=ni(),e=ys(),{signIn:n,user:r}=Cl(),{showToast:i}=no(),[s,a]=he.useState(""),[o,l]=he.useState(""),[d,g]=he.useState(!1),[m,v]=he.useState({}),p=he.useRef(!1),S=((f=(x=e.state)==null?void 0:x.from)==null?void 0:f.pathname)||"/";he.useEffect(()=>{p.current&&r&&t(S,{replace:!0})},[r,S,t]);const _=()=>{const w={};return s.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(w.email="Email non valida"):w.email="Email obbligatoria",o||(w.password="Password obbligatoria"),v(w),Object.keys(w).length===0},j=async w=>{if(w.preventDefault(),!!_()){g(!0);try{const{error:N}=await n(s,o);N?(N.message.includes("Invalid login credentials")?i("Email o password non corretti","error"):N.message.includes("Email not confirmed")?i("Conferma la tua email prima di accedere","error"):i(N.message,"error"),g(!1)):(i("Accesso effettuato con successo","success"),p.current=!0)}catch{i("Errore durante l'accesso","error"),g(!1)}}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 to-blue-50 px-4",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(m_,{className:"w-8 h-8 text-white"})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Accedi"}),c.jsx("p",{className:"text-gray-600",children:"Rimborsi Chilometrici ITFV"})]}),c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsx(pt,{label:"Email",type:"email",value:s,onChange:w=>a(w.target.value),error:m.email,placeholder:"nome@esempio.it",autoComplete:"email"}),c.jsx(pt,{label:"Password",type:"password",value:o,onChange:w=>l(w.target.value),error:m.password,placeholder:"",autoComplete:"current-password"}),c.jsx("div",{className:"flex items-center justify-between",children:c.jsx(Pn,{to:"/forgot-password",className:"text-sm text-teal-600 hover:text-teal-700 font-medium",children:"Password dimenticata?"})}),c.jsx(st,{type:"submit",className:"w-full",disabled:d,children:d?"Accesso in corso...":"Accedi"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-gray-600",children:["Non hai un account?"," ",c.jsx(Pn,{to:"/signup",className:"text-teal-600 hover:text-teal-700 font-medium",children:"Registrati"})]})})]})})})},iA=()=>{const t=ni(),{signUp:e}=Cl(),{state:n}=ri(),{showToast:r}=no(),[i,s]=he.useState(""),[a,o]=he.useState(""),[l,d]=he.useState(""),[g,m]=he.useState(""),[v,p]=he.useState(!1),[S,_]=he.useState({}),j=n.people.map(w=>({value:w.id,label:`${w.name} ${w.surname}`})),x=()=>{const w={};return i.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)||(w.email="Email non valida"):w.email="Email obbligatoria",a?a.length<8&&(w.password="La password deve contenere almeno 8 caratteri"):w.password="Password obbligatoria",l?a!==l&&(w.confirmPassword="Le password non corrispondono"):w.confirmPassword="Conferma password obbligatoria",g||(w.personId="Seleziona una persona"),_(w),Object.keys(w).length===0},f=async w=>{if(w.preventDefault(),!!x()){p(!0);try{const{error:N}=await e(i,a,g);N?N.message.includes("already registered")?r("Questa email  gi registrata","error"):r(N.message,"error"):(r("Registrazione completata! Ora puoi accedere.","success"),t("/login"))}catch{r("Errore durante la registrazione","error")}finally{p(!1)}}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 to-blue-50 px-4 py-12",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(V5,{className:"w-8 h-8 text-white"})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Registrati"}),c.jsx("p",{className:"text-gray-600",children:"Crea il tuo account"})]}),c.jsxs("form",{onSubmit:f,className:"space-y-6",children:[c.jsx(Qt,{label:"Seleziona Persona",value:g,onChange:w=>m(w.target.value),options:j,error:S.personId,placeholder:"Seleziona..."}),c.jsx(pt,{label:"Email",type:"email",value:i,onChange:w=>s(w.target.value),error:S.email,placeholder:"nome@esempio.it",autoComplete:"email"}),c.jsx(pt,{label:"Password",type:"password",value:a,onChange:w=>o(w.target.value),error:S.password,placeholder:"",autoComplete:"new-password",hint:"Minimo 8 caratteri"}),c.jsx(pt,{label:"Conferma Password",type:"password",value:l,onChange:w=>d(w.target.value),error:S.confirmPassword,placeholder:"",autoComplete:"new-password"}),c.jsx(st,{type:"submit",className:"w-full",disabled:v,children:v?"Registrazione in corso...":"Registrati"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-gray-600",children:["Hai gi un account?"," ",c.jsx(Pn,{to:"/login",className:"text-teal-600 hover:text-teal-700 font-medium",children:"Accedi"})]})})]})})})},sA=()=>{const{resetPassword:t}=Cl(),{showToast:e}=no(),[n,r]=he.useState(""),[i,s]=he.useState(!1),[a,o]=he.useState(!1),[l,d]=he.useState({}),g=()=>{const v={};return n.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||(v.email="Email non valida"):v.email="Email obbligatoria",d(v),Object.keys(v).length===0},m=async v=>{if(v.preventDefault(),!!g()){s(!0);try{const{error:p}=await t(n);p?e(p.message,"error"):(o(!0),e("Email di recupero inviata con successo","success"))}catch{e("Errore durante l'invio dell'email","error")}finally{s(!1)}}};return a?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 to-blue-50 px-4",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(fv,{className:"w-8 h-8 text-green-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Email Inviata"}),c.jsxs("p",{className:"text-gray-600 mb-6",children:["Abbiamo inviato un link per il recupero della password all'indirizzo ",c.jsx("strong",{children:n}),". Controlla la tua casella di posta e segui le istruzioni."]}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Se non ricevi l'email entro qualche minuto, controlla la cartella spam."}),c.jsx(Pn,{to:"/login",children:c.jsxs(st,{className:"w-full",children:[c.jsx(ic,{className:"w-4 h-4 mr-2"}),"Torna al Login"]})})]})})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 to-blue-50 px-4",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(fv,{className:"w-8 h-8 text-white"})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Password Dimenticata?"}),c.jsx("p",{className:"text-gray-600",children:"Inserisci la tua email e ti invieremo un link per reimpostare la password."})]}),c.jsxs("form",{onSubmit:m,className:"space-y-6",children:[c.jsx(pt,{label:"Email",type:"email",value:n,onChange:v=>r(v.target.value),error:l.email,placeholder:"nome@esempio.it",autoComplete:"email"}),c.jsx(st,{type:"submit",className:"w-full",disabled:i,children:i?"Invio in corso...":"Invia Link di Recupero"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs(Pn,{to:"/login",className:"text-teal-600 hover:text-teal-700 font-medium inline-flex items-center",children:[c.jsx(ic,{className:"w-4 h-4 mr-2"}),"Torna al Login"]})})]})})})},aA=()=>{const t=ni(),{updatePassword:e}=Cl(),{showToast:n}=no(),[r,i]=he.useState(""),[s,a]=he.useState(""),[o,l]=he.useState(!1),[d,g]=he.useState({}),m=()=>{const p={};return r?r.length<8&&(p.password="La password deve contenere almeno 8 caratteri"):p.password="Password obbligatoria",s?r!==s&&(p.confirmPassword="Le password non corrispondono"):p.confirmPassword="Conferma password obbligatoria",g(p),Object.keys(p).length===0},v=async p=>{if(p.preventDefault(),!!m()){l(!0);try{const{error:S}=await e(r);S?n(S.message,"error"):(n("Password aggiornata con successo","success"),t("/login"))}catch{n("Errore durante l'aggiornamento della password","error")}finally{l(!1)}}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 to-blue-50 px-4",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(p_,{className:"w-8 h-8 text-white"})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reimposta Password"}),c.jsx("p",{className:"text-gray-600",children:"Inserisci la tua nuova password"})]}),c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsx(pt,{label:"Nuova Password",type:"password",value:r,onChange:p=>i(p.target.value),error:d.password,placeholder:"",autoComplete:"new-password",hint:"Minimo 8 caratteri"}),c.jsx(pt,{label:"Conferma Nuova Password",type:"password",value:s,onChange:p=>a(p.target.value),error:d.confirmPassword,placeholder:"",autoComplete:"new-password"}),c.jsx(st,{type:"submit",className:"w-full",disabled:o,children:o?"Aggiornamento in corso...":"Aggiorna Password"})]})]})})})},Ih=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,confirmLabel:s="Conferma",cancelLabel:a="Annulla"})=>t?ig.createPortal(c.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:c.jsxs("div",{className:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0",children:[c.jsx("div",{className:"fixed inset-0 transition-opacity\\","aria-hidden":"true",children:c.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),c.jsx("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true",children:""}),c.jsxs("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle",children:[c.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:c.jsx("div",{className:"sm:flex sm:items-start",children:c.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:r}),c.jsxs("button",{type:"button",className:"rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500",onClick:e,children:[c.jsx("span",{className:"sr-only",children:"Chiudi"}),c.jsx(Zh,{className:"h-6 w-6"})]})]}),c.jsx("div",{className:"mt-2",children:c.jsx("p",{className:"text-sm text-gray-500",children:i})})]})})}),c.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[c.jsx(st,{variant:"danger",className:"w-full sm:ml-3 sm:w-auto",onClick:n,children:s}),c.jsx(st,{variant:"secondary",className:"mt-3 w-full sm:mt-0 sm:w-auto",onClick:e,children:a})]})]})]})}),document.body):null,oA=Object.entries(ds).map(([t,e])=>({value:t,label:e})),lA=["treno","supplemento_treno","aereo"],g2=()=>({personId:"",date:new Date().toISOString().split("T")[0],expenseType:"treno",description:"",fromLocation:"",toLocation:"",amount:"",notes:""}),uA=()=>{const{state:t,addTripExpense:e,updateTripExpense:n,deleteTripExpense:r,formatDate:i}=ri(),[s,a]=he.useState(!1),[o,l]=he.useState(null),[d,g]=he.useState(null),[m,v]=he.useState(g2()),[p,S]=he.useState(!1),[_,j]=he.useState(""),[x,f]=he.useState(new Date().getFullYear().toString()),[w,N]=he.useState(new Date().getMonth().toString()),D=new Date().getFullYear(),E=Array.from({length:3},(re,W)=>({value:(D-W).toString(),label:(D-W).toString()})),L=[{value:"",label:"Tutti i mesi"},...Array.from({length:12},(re,W)=>({value:W.toString(),label:new Date(0,W).toLocaleString("it-IT",{month:"long"})}))],I=t.tripExpenses.filter(re=>{if(_&&re.personId!==_)return!1;const W=new Date(re.date);return!(x&&W.getFullYear()!==parseInt(x)||w!==""&&W.getMonth()!==parseInt(w))}),Y=()=>{l(null),v(g2()),a(!0)},ee=re=>{l(re),v({personId:re.personId,date:re.date,expenseType:re.expenseType,description:re.description,fromLocation:re.fromLocation,toLocation:re.toLocation,amount:re.amount.toString(),notes:re.notes}),a(!0)},R=async re=>{if(re.preventDefault(),!(!m.personId||!m.amount)){S(!0);try{const W={personId:m.personId,date:m.date,expenseType:m.expenseType,description:m.description,fromLocation:m.fromLocation,toLocation:m.toLocation,amount:parseFloat(m.amount),notes:m.notes};o?await n({...W,id:o.id,createdAt:o.createdAt}):await e(W),a(!1)}finally{S(!1)}}},A=async()=>{d&&(await r(d),g(null))},V=lA.includes(m.expenseType),K=I.reduce((re,W)=>re+W.amount,0);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Spese Documentate"}),c.jsx(st,{variant:"primary",icon:c.jsx(Fr,{size:18}),onClick:Y,children:"Aggiungi Spesa"})]}),c.jsx(mn,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(Qt,{id:"filterPerson",label:"Persona",options:[{value:"",label:"Tutte le persone"},...t.people.map(re=>({value:re.id,label:`${re.name} ${re.surname}`}))],value:_,onChange:re=>j(re.target.value)}),c.jsx(Qt,{id:"filterYear",label:"Anno",options:E,value:x,onChange:re=>f(re.target.value)}),c.jsx(Qt,{id:"filterMonth",label:"Mese",options:L,value:w,onChange:re=>N(re.target.value)})]})}),I.length===0?c.jsx(mn,{children:c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(sc,{size:40,className:"mx-auto mb-3 text-gray-300"}),c.jsx("p",{children:"Nessuna spesa trovata per i filtri selezionati."})]})}):c.jsx(mn,{children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:["Data","Persona","Tipo","Dettaglio","Note","Importo","Azioni"].map(re=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:re},re))})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(re=>{const W=t.people.find(X=>X.id===re.personId);return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 whitespace-nowrap",children:i(re.date)}),c.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:W?`${W.name} ${W.surname}`:"-"}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:ds[re.expenseType]})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:re.fromLocation&&re.toLocation?`${re.fromLocation}  ${re.toLocation}`:re.description||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:re.notes||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900 whitespace-nowrap",children:[re.amount.toFixed(2)," "]}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>ee(re),className:"text-teal-600 hover:text-teal-800 p-1 rounded transition-colors",title:"Modifica",children:c.jsx(cg,{size:16})}),c.jsx("button",{onClick:()=>g(re.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Elimina",children:c.jsx(Vi,{size:16})})]})})]},re.id)})}),c.jsx("tfoot",{children:c.jsxs("tr",{className:"bg-gray-50",children:[c.jsxs("td",{colSpan:5,className:"px-4 py-3 text-sm font-semibold text-gray-700 text-right",children:["Totale (",I.length," voci):"]}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-teal-700",children:[K.toFixed(2)," "]}),c.jsx("td",{})]})})]})})}),s&&c.jsx(Ih,{title:o?"Modifica Spesa":"Nuova Spesa Documentata",onClose:()=>a(!1),children:c.jsxs("form",{onSubmit:R,className:"space-y-4",children:[c.jsx(Qt,{id:"personId",label:"Persona *",options:[{value:"",label:"Seleziona persona..."},...t.people.map(re=>({value:re.id,label:`${re.name} ${re.surname}`}))],value:m.personId,onChange:re=>v(W=>({...W,personId:re.target.value})),required:!0}),c.jsx(pt,{id:"date",label:"Data *",type:"date",value:m.date,onChange:re=>v(W=>({...W,date:re.target.value})),required:!0}),c.jsx(Qt,{id:"expenseType",label:"Tipo di Spesa *",options:oA,value:m.expenseType,onChange:re=>v(W=>({...W,expenseType:re.target.value}))}),V?c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(pt,{id:"fromLocation",label:"Da",value:m.fromLocation,onChange:re=>v(W=>({...W,fromLocation:re.target.value})),placeholder:"Partenza"}),c.jsx(pt,{id:"toLocation",label:"A",value:m.toLocation,onChange:re=>v(W=>({...W,toLocation:re.target.value})),placeholder:"Destinazione"})]}):c.jsx(pt,{id:"description",label:"Descrizione",value:m.description,onChange:re=>v(W=>({...W,description:re.target.value})),placeholder:"Descrizione della spesa"}),c.jsx(pt,{id:"amount",label:"Importo () *",type:"number",step:"0.01",min:"0",value:m.amount,onChange:re=>v(W=>({...W,amount:re.target.value})),required:!0}),c.jsx(pt,{id:"notes",label:"Note",value:m.notes,onChange:re=>v(W=>({...W,notes:re.target.value})),placeholder:"Note aggiuntive"}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(st,{variant:"secondary",type:"button",onClick:()=>a(!1),children:"Annulla"}),c.jsx(st,{variant:"primary",type:"submit",disabled:p,children:p?"Salvataggio...":o?"Salva Modifiche":"Aggiungi Spesa"})]})]})}),d&&c.jsxs(Ih,{title:"Conferma Eliminazione",onClose:()=>g(null),children:[c.jsx("p",{className:"text-gray-700 mb-6",children:"Sei sicuro di voler eliminare questa spesa?"}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(st,{variant:"secondary",onClick:()=>g(null),children:"Annulla"}),c.jsx(st,{variant:"danger",onClick:A,children:"Elimina"})]})]})]})},v2=()=>({personId:"",dateFrom:new Date().toISOString().split("T")[0],dateTo:new Date().toISOString().split("T")[0],location:"",amount:"",notes:""}),cA=()=>{const{state:t,addAccommodation:e,updateAccommodation:n,deleteAccommodation:r,formatDate:i}=ri(),[s,a]=he.useState(!1),[o,l]=he.useState(null),[d,g]=he.useState(null),[m,v]=he.useState(v2()),[p,S]=he.useState(!1),[_,j]=he.useState(""),[x,f]=he.useState(new Date().getFullYear().toString()),w=new Date().getFullYear(),N=[{value:"",label:"Tutti gli anni"},...Array.from({length:3},(A,V)=>({value:(w-V).toString(),label:(w-V).toString()}))],D=t.accommodations.filter(A=>{if(_&&A.personId!==_)return!1;if(x){const V=new Date(A.dateFrom),K=new Date(A.dateTo),re=parseInt(x);if(V.getFullYear()!==re&&K.getFullYear()!==re)return!1}return!0}),E=(A,V)=>{const K=new Date(V).getTime()-new Date(A).getTime();return Math.max(0,Math.round(K/(1e3*60*60*24)))},L=()=>{l(null),v(v2()),a(!0)},I=A=>{l(A),v({personId:A.personId,dateFrom:A.dateFrom,dateTo:A.dateTo,location:A.location,amount:A.amount.toString(),notes:A.notes}),a(!0)},Y=async A=>{if(A.preventDefault(),!(!m.personId||!m.amount)){S(!0);try{const V={personId:m.personId,dateFrom:m.dateFrom,dateTo:m.dateTo,location:m.location,amount:parseFloat(m.amount),notes:m.notes};o?await n({...V,id:o.id,createdAt:o.createdAt}):await e(V),a(!1)}finally{S(!1)}}},ee=async()=>{d&&(await r(d),g(null))},R=D.reduce((A,V)=>A+V.amount,0);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Alloggi"}),c.jsx(st,{variant:"primary",icon:c.jsx(Fr,{size:18}),onClick:L,children:"Aggiungi Alloggio"})]}),c.jsx(mn,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Qt,{id:"filterPerson",label:"Persona",options:[{value:"",label:"Tutte le persone"},...t.people.map(A=>({value:A.id,label:`${A.name} ${A.surname}`}))],value:_,onChange:A=>j(A.target.value)}),c.jsx(Qt,{id:"filterYear",label:"Anno",options:N,value:x,onChange:A=>f(A.target.value)})]})}),D.length===0?c.jsx(mn,{children:c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Nh,{size:40,className:"mx-auto mb-3 text-gray-300"}),c.jsx("p",{children:"Nessun alloggio trovato per i filtri selezionati."})]})}):c.jsx(mn,{children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:["Persona","Periodo","Notti","Luogo","Note","Importo","Azioni"].map(A=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:A},A))})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(A=>{const V=t.people.find(re=>re.id===A.personId),K=E(A.dateFrom,A.dateTo);return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:V?`${V.name} ${V.surname}`:"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 whitespace-nowrap",children:[i(A.dateFrom),"  ",i(A.dateTo)]}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:c.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-sky-100 text-sky-700",children:[K," ",K===1?"notte":"notti"]})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:A.location||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:A.notes||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900 whitespace-nowrap",children:[A.amount.toFixed(2)," "]}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>I(A),className:"text-teal-600 hover:text-teal-800 p-1 rounded transition-colors",title:"Modifica",children:c.jsx(cg,{size:16})}),c.jsx("button",{onClick:()=>g(A.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Elimina",children:c.jsx(Vi,{size:16})})]})})]},A.id)})}),c.jsx("tfoot",{children:c.jsxs("tr",{className:"bg-gray-50",children:[c.jsxs("td",{colSpan:5,className:"px-4 py-3 text-sm font-semibold text-gray-700 text-right",children:["Totale (",D.length," soggiorni):"]}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-teal-700",children:[R.toFixed(2)," "]}),c.jsx("td",{})]})})]})})}),s&&c.jsx(Ih,{title:o?"Modifica Alloggio":"Nuovo Alloggio",onClose:()=>a(!1),children:c.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[c.jsx(Qt,{id:"personId",label:"Persona *",options:[{value:"",label:"Seleziona persona..."},...t.people.map(A=>({value:A.id,label:`${A.name} ${A.surname}`}))],value:m.personId,onChange:A=>v(V=>({...V,personId:A.target.value})),required:!0}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(pt,{id:"dateFrom",label:"Data inizio *",type:"date",value:m.dateFrom,onChange:A=>v(V=>({...V,dateFrom:A.target.value})),required:!0}),c.jsx(pt,{id:"dateTo",label:"Data fine *",type:"date",value:m.dateTo,onChange:A=>v(V=>({...V,dateTo:A.target.value})),required:!0})]}),c.jsx(pt,{id:"location",label:"Luogo",value:m.location,onChange:A=>v(V=>({...V,location:A.target.value})),placeholder:"Citt / Hotel"}),c.jsx(pt,{id:"amount",label:"Importo () *",type:"number",step:"0.01",min:"0",value:m.amount,onChange:A=>v(V=>({...V,amount:A.target.value})),required:!0}),c.jsx(pt,{id:"notes",label:"Note",value:m.notes,onChange:A=>v(V=>({...V,notes:A.target.value})),placeholder:"Note aggiuntive"}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(st,{variant:"secondary",type:"button",onClick:()=>a(!1),children:"Annulla"}),c.jsx(st,{variant:"primary",type:"submit",disabled:p,children:p?"Salvataggio...":o?"Salva Modifiche":"Aggiungi Alloggio"})]})]})}),d&&c.jsxs(Ih,{title:"Conferma Eliminazione",onClose:()=>g(null),children:[c.jsx("p",{className:"text-gray-700 mb-6",children:"Sei sicuro di voler eliminare questo alloggio?"}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(st,{variant:"secondary",onClick:()=>g(null),children:"Annulla"}),c.jsx(st,{variant:"danger",onClick:ee,children:"Elimina"})]})]})]})},Wp={name:"",address:"",defaultDistance:""},dA=()=>{const{state:t,addFavoriteDestination:e,updateFavoriteDestination:n,deleteFavoriteDestination:r}=ri(),{showToast:i}=no(),[s,a]=he.useState(!1),[o,l]=he.useState(null),[d,g]=he.useState(Wp),[m,v]=he.useState({}),[p,S]=he.useState(!1),_=()=>{g(Wp),v({}),l(null),a(!0)},j=E=>{g({name:E.name,address:E.address,defaultDistance:String(E.defaultDistance)}),v({}),l(E.id),a(!0)},x=()=>{a(!1),l(null),g(Wp),v({})},f=()=>{const E={};d.name.trim()||(E.name="Il nome  obbligatorio"),d.address.trim()||(E.address="L'indirizzo  obbligatorio");const L=parseFloat(d.defaultDistance);return(!d.defaultDistance||isNaN(L)||L<=0)&&(E.defaultDistance="Inserisci una distanza valida (km)"),v(E),Object.keys(E).length===0},w=async()=>{if(f()){S(!0);try{const E={name:d.name.trim(),address:d.address.trim(),defaultDistance:parseFloat(d.defaultDistance)};if(o){const L=t.favoriteDestinations.find(I=>I.id===o);await n({...L,...E}),i("Destinazione aggiornata","success")}else await e(E),i("Destinazione aggiunta","success");x()}catch{i("Errore durante il salvataggio","error")}finally{S(!1)}}},N=async E=>{if(window.confirm(`Eliminare "${E.name}"?`))try{await r(E.id),i("Destinazione eliminata","success")}catch{i("Errore durante l'eliminazione","error")}},D=E=>{const{name:L,value:I}=E.target;g(Y=>({...Y,[L]:I})),m[L]&&v(Y=>({...Y,[L]:void 0}))};return c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-amber-100 p-2 rounded-lg",children:c.jsx(Ah,{className:"h-6 w-6 text-amber-600"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Destinazioni Abituali"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Destinazioni frequenti con distanza predefinita"})]})]}),!s&&c.jsx(st,{icon:c.jsx(Fr,{size:18}),onClick:_,children:"Aggiungi"})]}),s&&c.jsxs(mn,{className:"mb-6 border-2 border-teal-200",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:o?"Modifica Destinazione":"Nuova Destinazione Abituale"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(pt,{id:"name",name:"name",label:"Nome breve",value:d.name,onChange:D,error:m.name,placeholder:"Es. Servizi Sociali Chioggia",required:!0}),c.jsx(pt,{id:"address",name:"address",label:"Indirizzo completo",value:d.address,onChange:D,error:m.address,placeholder:"Es. Corso del Popolo, 1193, 30015 Chioggia",required:!0}),c.jsx(pt,{id:"defaultDistance",name:"defaultDistance",label:"Distanza predefinita (km)",type:"number",step:"0.5",min:"0.1",value:d.defaultDistance,onChange:D,error:m.defaultDistance,placeholder:"Es. 75",required:!0}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx(st,{variant:"secondary",onClick:x,icon:c.jsx(Zh,{size:16}),children:"Annulla"}),c.jsx(st,{onClick:w,disabled:p,icon:c.jsx(h_,{size:16}),children:p?"Salvataggio...":o?"Salva modifiche":"Aggiungi"})]})]})]}),t.favoriteDestinations.length===0&&!s?c.jsx(mn,{children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Ah,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"Nessuna destinazione abituale"}),c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Aggiungi le destinazioni frequenti per velocizzare l'inserimento delle trasferte"}),c.jsx(st,{className:"mt-4",icon:c.jsx(Fr,{size:18}),onClick:_,children:"Aggiungi la prima destinazione"})]})}):c.jsx("div",{className:"space-y-3",children:t.favoriteDestinations.map(E=>c.jsx(mn,{className:"hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-start space-x-3 min-w-0",children:[c.jsx("div",{className:"bg-amber-50 p-2 rounded-lg flex-shrink-0 mt-0.5",children:c.jsx(Qh,{className:"h-4 w-4 text-amber-600"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[c.jsx("span",{className:"font-semibold text-gray-900",children:E.name}),c.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800",children:[E.defaultDistance," km"]})]}),c.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:E.address})]})]}),c.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0 ml-4",children:[c.jsx("button",{onClick:()=>j(E),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Modifica",children:c.jsx(cg,{size:16})}),c.jsx("button",{onClick:()=>N(E),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Elimina",children:c.jsx(Vi,{size:16})})]})]})},E.id))})]})};function hA(){return c.jsxs(Y3,{children:[c.jsx(xn,{path:"/login",element:c.jsx(rA,{})}),c.jsx(xn,{path:"/signup",element:c.jsx(iA,{})}),c.jsx(xn,{path:"/forgot-password",element:c.jsx(sA,{})}),c.jsx(xn,{path:"/reset-password",element:c.jsx(aA,{})}),c.jsxs(xn,{path:"/",element:c.jsx(i6,{children:c.jsx(r6,{})}),children:[c.jsx(xn,{index:!0,element:c.jsx(qk,{})}),c.jsx(xn,{path:"persone",element:c.jsx(Wk,{})}),c.jsx(xn,{path:"persone/nuovo",element:c.jsx(Hv,{})}),c.jsx(xn,{path:"persone/:id",element:c.jsx(Hv,{})}),c.jsx(xn,{path:"tragitti",element:c.jsx(Hk,{})}),c.jsx(xn,{path:"tragitti/nuovo",element:c.jsx(Vv,{})}),c.jsx(xn,{path:"tragitti/:id",element:c.jsx(Vv,{})}),c.jsx(xn,{path:"percorsi",element:c.jsx(Xj,{})}),c.jsx(xn,{path:"percorsi/nuovo",element:c.jsx(m2,{})}),c.jsx(xn,{path:"percorsi/:id",element:c.jsx(m2,{})}),c.jsx(xn,{path:"report",element:c.jsx(Qj,{})}),c.jsx(xn,{path:"spese",element:c.jsx(uA,{})}),c.jsx(xn,{path:"alloggi",element:c.jsx(cA,{})}),c.jsx(xn,{path:"destinazioni-abituali",element:c.jsx(dA,{})})]})]})}C5(document.getElementById("root")).render(c.jsx(he.StrictMode,{children:c.jsx(t_,{children:c.jsx(e6,{children:c.jsx(n6,{children:c.jsx($k,{children:c.jsx(hA,{})})})})})}));export{Tt as _,Jf as c,u0 as g};
