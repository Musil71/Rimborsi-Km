function bx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _x(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var p2={exports:{}},Lh={},m2={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc=Symbol.for("react.element"),Sx=Symbol.for("react.portal"),Nx=Symbol.for("react.fragment"),kx=Symbol.for("react.strict_mode"),jx=Symbol.for("react.profiler"),Ax=Symbol.for("react.provider"),Px=Symbol.for("react.context"),Ex=Symbol.for("react.forward_ref"),Cx=Symbol.for("react.suspense"),Tx=Symbol.for("react.memo"),Lx=Symbol.for("react.lazy"),Gg=Symbol.iterator;function Rx(t){return t===null||typeof t!="object"?null:(t=Gg&&t[Gg]||t["@@iterator"],typeof t=="function"?t:null)}var g2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v2=Object.assign,y2={};function jl(t,e,n){this.props=t,this.context=e,this.refs=y2,this.updater=n||g2}jl.prototype.isReactComponent={};jl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w2(){}w2.prototype=jl.prototype;function u0(t,e,n){this.props=t,this.context=e,this.refs=y2,this.updater=n||g2}var c0=u0.prototype=new w2;c0.constructor=u0;v2(c0,jl.prototype);c0.isPureReactComponent=!0;var Yg=Array.isArray,x2=Object.prototype.hasOwnProperty,d0={current:null},b2={key:!0,ref:!0,__self:!0,__source:!0};function _2(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)x2.call(e,r)&&!b2.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),d=0;d<o;d++)l[d]=arguments[d+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:gc,type:t,key:s,ref:a,props:i,_owner:d0.current}}function Ix(t,e){return{$$typeof:gc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function h0(t){return typeof t=="object"&&t!==null&&t.$$typeof===gc}function Ox(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Kg=/\/+/g;function Yf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ox(""+t.key):e.toString(36)}function zd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case gc:case Sx:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Yf(a,0):r,Yg(i)?(n="",t!=null&&(n=t.replace(Kg,"$&/")+"/"),zd(i,e,n,"",function(d){return d})):i!=null&&(h0(i)&&(i=Ix(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Kg,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Yg(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+Yf(s,o);a+=zd(s,e,n,l,i)}else if(l=Rx(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+Yf(s,o++),a+=zd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function hd(t,e,n){if(t==null)return t;var r=[],i=0;return zd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Dx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mr={current:null},Bd={transition:null},Fx={ReactCurrentDispatcher:mr,ReactCurrentBatchConfig:Bd,ReactCurrentOwner:d0};function S2(){throw Error("act(...) is not supported in production builds of React.")}Nt.Children={map:hd,forEach:function(t,e,n){hd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hd(t,function(){e++}),e},toArray:function(t){return hd(t,function(e){return e})||[]},only:function(t){if(!h0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Nt.Component=jl;Nt.Fragment=Nx;Nt.Profiler=jx;Nt.PureComponent=u0;Nt.StrictMode=kx;Nt.Suspense=Cx;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fx;Nt.act=S2;Nt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=v2({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=d0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)x2.call(e,l)&&!b2.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var d=0;d<l;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:gc,type:t.type,key:i,ref:s,props:r,_owner:a}};Nt.createContext=function(t){return t={$$typeof:Px,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ax,_context:t},t.Consumer=t};Nt.createElement=_2;Nt.createFactory=function(t){var e=_2.bind(null,t);return e.type=t,e};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(t){return{$$typeof:Ex,render:t}};Nt.isValidElement=h0;Nt.lazy=function(t){return{$$typeof:Lx,_payload:{_status:-1,_result:t},_init:Dx}};Nt.memo=function(t,e){return{$$typeof:Tx,type:t,compare:e===void 0?null:e}};Nt.startTransition=function(t){var e=Bd.transition;Bd.transition={};try{t()}finally{Bd.transition=e}};Nt.unstable_act=S2;Nt.useCallback=function(t,e){return mr.current.useCallback(t,e)};Nt.useContext=function(t){return mr.current.useContext(t)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(t){return mr.current.useDeferredValue(t)};Nt.useEffect=function(t,e){return mr.current.useEffect(t,e)};Nt.useId=function(){return mr.current.useId()};Nt.useImperativeHandle=function(t,e,n){return mr.current.useImperativeHandle(t,e,n)};Nt.useInsertionEffect=function(t,e){return mr.current.useInsertionEffect(t,e)};Nt.useLayoutEffect=function(t,e){return mr.current.useLayoutEffect(t,e)};Nt.useMemo=function(t,e){return mr.current.useMemo(t,e)};Nt.useReducer=function(t,e,n){return mr.current.useReducer(t,e,n)};Nt.useRef=function(t){return mr.current.useRef(t)};Nt.useState=function(t){return mr.current.useState(t)};Nt.useSyncExternalStore=function(t,e,n){return mr.current.useSyncExternalStore(t,e,n)};Nt.useTransition=function(){return mr.current.useTransition()};Nt.version="18.3.1";m2.exports=Nt;var fe=m2.exports;const Mx=l0(fe),zx=bx({__proto__:null,default:Mx},[fe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx=fe,Ux=Symbol.for("react.element"),$x=Symbol.for("react.fragment"),qx=Object.prototype.hasOwnProperty,Wx=Bx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hx={key:!0,ref:!0,__self:!0,__source:!0};function N2(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)qx.call(e,r)&&!Hx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ux,type:t,key:s,ref:a,props:i,_owner:Wx.current}}Lh.Fragment=$x;Lh.jsx=N2;Lh.jsxs=N2;p2.exports=Lh;var c=p2.exports,k2={exports:{}},Vr={},j2={exports:{}},A2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,B){var ie=V.length;V.push(B);e:for(;0<ie;){var ve=ie-1>>>1,E=V[ve];if(0<i(E,B))V[ve]=B,V[ie]=E,ie=ve;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var B=V[0],ie=V.pop();if(ie!==B){V[0]=ie;e:for(var ve=0,E=V.length,U=E>>>1;ve<U;){var X=2*(ve+1)-1,ne=V[X],P=X+1,H=V[P];if(0>i(ne,ie))P<E&&0>i(H,ne)?(V[ve]=H,V[P]=ie,ve=P):(V[ve]=ne,V[X]=ie,ve=X);else if(P<E&&0>i(H,ie))V[ve]=H,V[P]=ie,ve=P;else break e}}return B}function i(V,B){var ie=V.sortIndex-B.sortIndex;return ie!==0?ie:V.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],d=[],g=1,m=null,v=3,p=!1,_=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=V)r(d),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(d)}}function j(V){if(S=!1,w(V),!_)if(n(l)!==null)_=!0,$(D);else{var B=n(d);B!==null&&Q(j,B.startTime-V)}}function D(V,B){_=!1,S&&(S=!1,f(C),C=-1),p=!0;var ie=v;try{for(w(B),m=n(l);m!==null&&(!(m.expirationTime>B)||V&&!R());){var ve=m.callback;if(typeof ve=="function"){m.callback=null,v=m.priorityLevel;var E=ve(m.expirationTime<=B);B=t.unstable_now(),typeof E=="function"?m.callback=E:m===n(l)&&r(l),w(B)}else r(l);m=n(l)}if(m!==null)var U=!0;else{var X=n(d);X!==null&&Q(j,X.startTime-B),U=!1}return U}finally{m=null,v=ie,p=!1}}var T=!1,L=null,C=-1,G=5,Z=-1;function R(){return!(t.unstable_now()-Z<G)}function A(){if(L!==null){var V=t.unstable_now();Z=V;var B=!0;try{B=L(!0,V)}finally{B?q():(T=!1,L=null)}}else T=!1}var q;if(typeof x=="function")q=function(){x(A)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,te=K.port2;K.port1.onmessage=A,q=function(){te.postMessage(null)}}else q=function(){N(A,0)};function $(V){L=V,T||(T=!0,q())}function Q(V,B){C=N(function(){V(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){_||p||(_=!0,$(D))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(v){case 1:case 2:case 3:var B=3;break;default:B=v}var ie=v;v=B;try{return V()}finally{v=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,B){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ie=v;v=V;try{return B()}finally{v=ie}},t.unstable_scheduleCallback=function(V,B,ie){var ve=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ve+ie:ve):ie=ve,V){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=ie+E,V={id:g++,callback:B,priorityLevel:V,startTime:ie,expirationTime:E,sortIndex:-1},ie>ve?(V.sortIndex=ie,e(d,V),n(l)===null&&V===n(d)&&(S?(f(C),C=-1):S=!0,Q(j,ie-ve))):(V.sortIndex=E,e(l,V),_||p||(_=!0,$(D))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var B=v;return function(){var ie=v;v=B;try{return V.apply(this,arguments)}finally{v=ie}}}})(A2);j2.exports=A2;var Vx=j2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx=fe,Hr=Vx;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P2=new Set,Bu={};function eo(t,e){vl(t,e),vl(t+"Capture",e)}function vl(t,e){for(Bu[t]=e,t=0;t<e.length;t++)P2.add(e[t])}var hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Up=Object.prototype.hasOwnProperty,Yx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jg={},Xg={};function Kx(t){return Up.call(Xg,t)?!0:Up.call(Jg,t)?!1:Yx.test(t)?Xg[t]=!0:(Jg[t]=!0,!1)}function Jx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xx(t,e,n,r){if(e===null||typeof e>"u"||Jx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gr(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gn[t]=new gr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gn[e]=new gr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gn[t]=new gr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gn[t]=new gr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gn[t]=new gr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gn[t]=new gr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gn[t]=new gr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gn[t]=new gr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gn[t]=new gr(t,5,!1,t.toLowerCase(),null,!1,!1)});var f0=/[\-:]([a-z])/g;function p0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(f0,p0);Gn[e]=new gr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(f0,p0);Gn[e]=new gr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(f0,p0);Gn[e]=new gr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gn[t]=new gr(t,1,!1,t.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gn[t]=new gr(t,1,!1,t.toLowerCase(),null,!0,!0)});function m0(t,e,n,r){var i=Gn.hasOwnProperty(e)?Gn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xx(e,n,i,r)&&(n=null),r||i===null?Kx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gs=Gx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fd=Symbol.for("react.element"),Jo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),g0=Symbol.for("react.strict_mode"),$p=Symbol.for("react.profiler"),E2=Symbol.for("react.provider"),C2=Symbol.for("react.context"),v0=Symbol.for("react.forward_ref"),qp=Symbol.for("react.suspense"),Wp=Symbol.for("react.suspense_list"),y0=Symbol.for("react.memo"),zs=Symbol.for("react.lazy"),T2=Symbol.for("react.offscreen"),Qg=Symbol.iterator;function lu(t){return t===null||typeof t!="object"?null:(t=Qg&&t[Qg]||t["@@iterator"],typeof t=="function"?t:null)}var an=Object.assign,Kf;function wu(t){if(Kf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kf=e&&e[1]||""}return`
`+Kf+t}var Jf=!1;function Xf(t,e){if(!t||Jf)return"";Jf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Jf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wu(t):""}function Qx(t){switch(t.tag){case 5:return wu(t.type);case 16:return wu("Lazy");case 13:return wu("Suspense");case 19:return wu("SuspenseList");case 0:case 2:case 15:return t=Xf(t.type,!1),t;case 11:return t=Xf(t.type.render,!1),t;case 1:return t=Xf(t.type,!0),t;default:return""}}function Hp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case Jo:return"Portal";case $p:return"Profiler";case g0:return"StrictMode";case qp:return"Suspense";case Wp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case C2:return(t.displayName||"Context")+".Consumer";case E2:return(t._context.displayName||"Context")+".Provider";case v0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case y0:return e=t.displayName||null,e!==null?e:Hp(t.type)||"Memo";case zs:e=t._payload,t=t._init;try{return Hp(t(e))}catch{}}return null}function Zx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hp(e);case 8:return e===g0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function aa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function L2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eb(t){var e=L2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pd(t){t._valueTracker||(t._valueTracker=eb(t))}function R2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=L2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vp(t,e){var n=e.checked;return an({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=aa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function I2(t,e){e=e.checked,e!=null&&m0(t,"checked",e,!1)}function Gp(t,e){I2(t,e);var n=aa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yp(t,e.type,aa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function e1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yp(t,e,n){(e!=="number"||Xd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xu=Array.isArray;function ul(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+aa(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Kp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return an({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function t1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(xu(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:aa(n)}}function O2(t,e){var n=aa(e.value),r=aa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function n1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function D2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?D2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var md,F2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(md=md||document.createElement("div"),md.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=md.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Uu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Nu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tb=["Webkit","ms","Moz","O"];Object.keys(Nu).forEach(function(t){tb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nu[e]=Nu[t]})});function M2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Nu.hasOwnProperty(t)&&Nu[t]?(""+e).trim():e+"px"}function z2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=M2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nb=an({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xp(t,e){if(e){if(nb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function Qp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zp=null;function w0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var em=null,cl=null,dl=null;function r1(t){if(t=wc(t)){if(typeof em!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=Fh(e),em(t.stateNode,t.type,e))}}function B2(t){cl?dl?dl.push(t):dl=[t]:cl=t}function U2(){if(cl){var t=cl,e=dl;if(dl=cl=null,r1(t),e)for(t=0;t<e.length;t++)r1(e[t])}}function $2(t,e){return t(e)}function q2(){}var Qf=!1;function W2(t,e,n){if(Qf)return t(e,n);Qf=!0;try{return $2(t,e,n)}finally{Qf=!1,(cl!==null||dl!==null)&&(q2(),U2())}}function $u(t,e){var n=t.stateNode;if(n===null)return null;var r=Fh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var tm=!1;if(hs)try{var uu={};Object.defineProperty(uu,"passive",{get:function(){tm=!0}}),window.addEventListener("test",uu,uu),window.removeEventListener("test",uu,uu)}catch{tm=!1}function rb(t,e,n,r,i,s,a,o,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(g){this.onError(g)}}var ku=!1,Qd=null,Zd=!1,nm=null,ib={onError:function(t){ku=!0,Qd=t}};function sb(t,e,n,r,i,s,a,o,l){ku=!1,Qd=null,rb.apply(ib,arguments)}function ab(t,e,n,r,i,s,a,o,l){if(sb.apply(this,arguments),ku){if(ku){var d=Qd;ku=!1,Qd=null}else throw Error(Fe(198));Zd||(Zd=!0,nm=d)}}function to(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function H2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function i1(t){if(to(t)!==t)throw Error(Fe(188))}function ob(t){var e=t.alternate;if(!e){if(e=to(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return i1(i),t;if(s===r)return i1(i),e;s=s.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function V2(t){return t=ob(t),t!==null?G2(t):null}function G2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G2(t);if(e!==null)return e;t=t.sibling}return null}var Y2=Hr.unstable_scheduleCallback,s1=Hr.unstable_cancelCallback,lb=Hr.unstable_shouldYield,ub=Hr.unstable_requestPaint,vn=Hr.unstable_now,cb=Hr.unstable_getCurrentPriorityLevel,x0=Hr.unstable_ImmediatePriority,K2=Hr.unstable_UserBlockingPriority,eh=Hr.unstable_NormalPriority,db=Hr.unstable_LowPriority,J2=Hr.unstable_IdlePriority,Rh=null,qi=null;function hb(t){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(Rh,t,void 0,(t.current.flags&128)===128)}catch{}}var ki=Math.clz32?Math.clz32:mb,fb=Math.log,pb=Math.LN2;function mb(t){return t>>>=0,t===0?32:31-(fb(t)/pb|0)|0}var gd=64,vd=4194304;function bu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function th(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=bu(o):(s&=a,s!==0&&(r=bu(s)))}else a=n&~i,a!==0?r=bu(a):s!==0&&(r=bu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ki(e),i=1<<n,r|=t[n],e&=~i;return r}function gb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ki(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=gb(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function rm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function X2(){var t=gd;return gd<<=1,!(gd&4194240)&&(gd=64),t}function Zf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ki(e),t[e]=n}function yb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ki(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function b0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ki(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var $t=0;function Q2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Z2,_0,ey,ty,ny,im=!1,yd=[],Js=null,Xs=null,Qs=null,qu=new Map,Wu=new Map,$s=[],wb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a1(t,e){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":qu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wu.delete(e.pointerId)}}function cu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=wc(e),e!==null&&_0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function xb(t,e,n,r,i){switch(e){case"focusin":return Js=cu(Js,t,e,n,r,i),!0;case"dragenter":return Xs=cu(Xs,t,e,n,r,i),!0;case"mouseover":return Qs=cu(Qs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return qu.set(s,cu(qu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Wu.set(s,cu(Wu.get(s)||null,t,e,n,r,i)),!0}return!1}function ry(t){var e=Da(t.target);if(e!==null){var n=to(e);if(n!==null){if(e=n.tag,e===13){if(e=H2(n),e!==null){t.blockedOn=e,ny(t.priority,function(){ey(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ud(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zp=r,n.target.dispatchEvent(r),Zp=null}else return e=wc(n),e!==null&&_0(e),t.blockedOn=n,!1;e.shift()}return!0}function o1(t,e,n){Ud(t)&&n.delete(e)}function bb(){im=!1,Js!==null&&Ud(Js)&&(Js=null),Xs!==null&&Ud(Xs)&&(Xs=null),Qs!==null&&Ud(Qs)&&(Qs=null),qu.forEach(o1),Wu.forEach(o1)}function du(t,e){t.blockedOn===e&&(t.blockedOn=null,im||(im=!0,Hr.unstable_scheduleCallback(Hr.unstable_NormalPriority,bb)))}function Hu(t){function e(i){return du(i,t)}if(0<yd.length){du(yd[0],t);for(var n=1;n<yd.length;n++){var r=yd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Js!==null&&du(Js,t),Xs!==null&&du(Xs,t),Qs!==null&&du(Qs,t),qu.forEach(e),Wu.forEach(e),n=0;n<$s.length;n++)r=$s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$s.length&&(n=$s[0],n.blockedOn===null);)ry(n),n.blockedOn===null&&$s.shift()}var hl=gs.ReactCurrentBatchConfig,nh=!0;function _b(t,e,n,r){var i=$t,s=hl.transition;hl.transition=null;try{$t=1,S0(t,e,n,r)}finally{$t=i,hl.transition=s}}function Sb(t,e,n,r){var i=$t,s=hl.transition;hl.transition=null;try{$t=4,S0(t,e,n,r)}finally{$t=i,hl.transition=s}}function S0(t,e,n,r){if(nh){var i=sm(t,e,n,r);if(i===null)up(t,e,r,rh,n),a1(t,r);else if(xb(i,t,e,n,r))r.stopPropagation();else if(a1(t,r),e&4&&-1<wb.indexOf(t)){for(;i!==null;){var s=wc(i);if(s!==null&&Z2(s),s=sm(t,e,n,r),s===null&&up(t,e,r,rh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else up(t,e,r,null,n)}}var rh=null;function sm(t,e,n,r){if(rh=null,t=w0(r),t=Da(t),t!==null)if(e=to(t),e===null)t=null;else if(n=e.tag,n===13){if(t=H2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rh=t,null}function iy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cb()){case x0:return 1;case K2:return 4;case eh:case db:return 16;case J2:return 536870912;default:return 16}default:return 16}}var Vs=null,N0=null,$d=null;function sy(){if($d)return $d;var t,e=N0,n=e.length,r,i="value"in Vs?Vs.value:Vs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return $d=i.slice(t,1<r?1-r:void 0)}function qd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wd(){return!0}function l1(){return!1}function Gr(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wd:l1,this.isPropagationStopped=l1,this}return an(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wd)},persist:function(){},isPersistent:wd}),e}var Al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},k0=Gr(Al),yc=an({},Al,{view:0,detail:0}),Nb=Gr(yc),ep,tp,hu,Ih=an({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:j0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hu&&(hu&&t.type==="mousemove"?(ep=t.screenX-hu.screenX,tp=t.screenY-hu.screenY):tp=ep=0,hu=t),ep)},movementY:function(t){return"movementY"in t?t.movementY:tp}}),u1=Gr(Ih),kb=an({},Ih,{dataTransfer:0}),jb=Gr(kb),Ab=an({},yc,{relatedTarget:0}),np=Gr(Ab),Pb=an({},Al,{animationName:0,elapsedTime:0,pseudoElement:0}),Eb=Gr(Pb),Cb=an({},Al,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tb=Gr(Cb),Lb=an({},Al,{data:0}),c1=Gr(Lb),Rb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ib={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ob={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Db(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ob[t])?!!e[t]:!1}function j0(){return Db}var Fb=an({},yc,{key:function(t){if(t.key){var e=Rb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ib[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:j0,charCode:function(t){return t.type==="keypress"?qd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Mb=Gr(Fb),zb=an({},Ih,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d1=Gr(zb),Bb=an({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:j0}),Ub=Gr(Bb),$b=an({},Al,{propertyName:0,elapsedTime:0,pseudoElement:0}),qb=Gr($b),Wb=an({},Ih,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hb=Gr(Wb),Vb=[9,13,27,32],A0=hs&&"CompositionEvent"in window,ju=null;hs&&"documentMode"in document&&(ju=document.documentMode);var Gb=hs&&"TextEvent"in window&&!ju,ay=hs&&(!A0||ju&&8<ju&&11>=ju),h1=" ",f1=!1;function oy(t,e){switch(t){case"keyup":return Vb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ly(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function Yb(t,e){switch(t){case"compositionend":return ly(e);case"keypress":return e.which!==32?null:(f1=!0,h1);case"textInput":return t=e.data,t===h1&&f1?null:t;default:return null}}function Kb(t,e){if(Qo)return t==="compositionend"||!A0&&oy(t,e)?(t=sy(),$d=N0=Vs=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ay&&e.locale!=="ko"?null:e.data;default:return null}}var Jb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Jb[t.type]:e==="textarea"}function uy(t,e,n,r){B2(r),e=ih(e,"onChange"),0<e.length&&(n=new k0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Au=null,Vu=null;function Xb(t){xy(t,0)}function Oh(t){var e=tl(t);if(R2(e))return t}function Qb(t,e){if(t==="change")return e}var cy=!1;if(hs){var rp;if(hs){var ip="oninput"in document;if(!ip){var m1=document.createElement("div");m1.setAttribute("oninput","return;"),ip=typeof m1.oninput=="function"}rp=ip}else rp=!1;cy=rp&&(!document.documentMode||9<document.documentMode)}function g1(){Au&&(Au.detachEvent("onpropertychange",dy),Vu=Au=null)}function dy(t){if(t.propertyName==="value"&&Oh(Vu)){var e=[];uy(e,Vu,t,w0(t)),W2(Xb,e)}}function Zb(t,e,n){t==="focusin"?(g1(),Au=e,Vu=n,Au.attachEvent("onpropertychange",dy)):t==="focusout"&&g1()}function e4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oh(Vu)}function t4(t,e){if(t==="click")return Oh(e)}function n4(t,e){if(t==="input"||t==="change")return Oh(e)}function r4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ai=typeof Object.is=="function"?Object.is:r4;function Gu(t,e){if(Ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Up.call(e,i)||!Ai(t[i],e[i]))return!1}return!0}function v1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function y1(t,e){var n=v1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=v1(n)}}function hy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fy(){for(var t=window,e=Xd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xd(t.document)}return e}function P0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function i4(t){var e=fy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hy(n.ownerDocument.documentElement,n)){if(r!==null&&P0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=y1(n,s);var a=y1(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var s4=hs&&"documentMode"in document&&11>=document.documentMode,Zo=null,am=null,Pu=null,om=!1;function w1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;om||Zo==null||Zo!==Xd(r)||(r=Zo,"selectionStart"in r&&P0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pu&&Gu(Pu,r)||(Pu=r,r=ih(am,"onSelect"),0<r.length&&(e=new k0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zo)))}function xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var el={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},sp={},py={};hs&&(py=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function Dh(t){if(sp[t])return sp[t];if(!el[t])return t;var e=el[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in py)return sp[t]=e[n];return t}var my=Dh("animationend"),gy=Dh("animationiteration"),vy=Dh("animationstart"),yy=Dh("transitionend"),wy=new Map,x1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function da(t,e){wy.set(t,e),eo(e,[t])}for(var ap=0;ap<x1.length;ap++){var op=x1[ap],a4=op.toLowerCase(),o4=op[0].toUpperCase()+op.slice(1);da(a4,"on"+o4)}da(my,"onAnimationEnd");da(gy,"onAnimationIteration");da(vy,"onAnimationStart");da("dblclick","onDoubleClick");da("focusin","onFocus");da("focusout","onBlur");da(yy,"onTransitionEnd");vl("onMouseEnter",["mouseout","mouseover"]);vl("onMouseLeave",["mouseout","mouseover"]);vl("onPointerEnter",["pointerout","pointerover"]);vl("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l4=new Set("cancel close invalid load scroll toggle".split(" ").concat(_u));function b1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ab(r,e,void 0,t),t.currentTarget=null}function xy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,d=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;b1(i,o,d),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,d=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;b1(i,o,d),s=l}}}if(Zd)throw t=nm,Zd=!1,nm=null,t}function Xt(t,e){var n=e[hm];n===void 0&&(n=e[hm]=new Set);var r=t+"__bubble";n.has(r)||(by(e,t,2,!1),n.add(r))}function lp(t,e,n){var r=0;e&&(r|=4),by(n,t,r,e)}var bd="_reactListening"+Math.random().toString(36).slice(2);function Yu(t){if(!t[bd]){t[bd]=!0,P2.forEach(function(n){n!=="selectionchange"&&(l4.has(n)||lp(n,!1,t),lp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bd]||(e[bd]=!0,lp("selectionchange",!1,e))}}function by(t,e,n,r){switch(iy(e)){case 1:var i=_b;break;case 4:i=Sb;break;default:i=S0}n=i.bind(null,e,n,t),i=void 0,!tm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function up(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Da(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}W2(function(){var d=s,g=w0(n),m=[];e:{var v=wy.get(t);if(v!==void 0){var p=k0,_=t;switch(t){case"keypress":if(qd(n)===0)break e;case"keydown":case"keyup":p=Mb;break;case"focusin":_="focus",p=np;break;case"focusout":_="blur",p=np;break;case"beforeblur":case"afterblur":p=np;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=u1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ub;break;case my:case gy:case vy:p=Eb;break;case yy:p=qb;break;case"scroll":p=Nb;break;case"wheel":p=Hb;break;case"copy":case"cut":case"paste":p=Tb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=d1}var S=(e&4)!==0,N=!S&&t==="scroll",f=S?v!==null?v+"Capture":null:v;S=[];for(var x=d,w;x!==null;){w=x;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,f!==null&&(j=$u(x,f),j!=null&&S.push(Ku(x,j,w)))),N)break;x=x.return}0<S.length&&(v=new p(v,_,null,n,g),m.push({event:v,listeners:S}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",v&&n!==Zp&&(_=n.relatedTarget||n.fromElement)&&(Da(_)||_[fs]))break e;if((p||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,p?(_=n.relatedTarget||n.toElement,p=d,_=_?Da(_):null,_!==null&&(N=to(_),_!==N||_.tag!==5&&_.tag!==6)&&(_=null)):(p=null,_=d),p!==_)){if(S=u1,j="onMouseLeave",f="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(S=d1,j="onPointerLeave",f="onPointerEnter",x="pointer"),N=p==null?v:tl(p),w=_==null?v:tl(_),v=new S(j,x+"leave",p,n,g),v.target=N,v.relatedTarget=w,j=null,Da(g)===d&&(S=new S(f,x+"enter",_,n,g),S.target=w,S.relatedTarget=N,j=S),N=j,p&&_)t:{for(S=p,f=_,x=0,w=S;w;w=Lo(w))x++;for(w=0,j=f;j;j=Lo(j))w++;for(;0<x-w;)S=Lo(S),x--;for(;0<w-x;)f=Lo(f),w--;for(;x--;){if(S===f||f!==null&&S===f.alternate)break t;S=Lo(S),f=Lo(f)}S=null}else S=null;p!==null&&_1(m,v,p,S,!1),_!==null&&N!==null&&_1(m,N,_,S,!0)}}e:{if(v=d?tl(d):window,p=v.nodeName&&v.nodeName.toLowerCase(),p==="select"||p==="input"&&v.type==="file")var D=Qb;else if(p1(v))if(cy)D=n4;else{D=e4;var T=Zb}else(p=v.nodeName)&&p.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(D=t4);if(D&&(D=D(t,d))){uy(m,D,n,g);break e}T&&T(t,v,d),t==="focusout"&&(T=v._wrapperState)&&T.controlled&&v.type==="number"&&Yp(v,"number",v.value)}switch(T=d?tl(d):window,t){case"focusin":(p1(T)||T.contentEditable==="true")&&(Zo=T,am=d,Pu=null);break;case"focusout":Pu=am=Zo=null;break;case"mousedown":om=!0;break;case"contextmenu":case"mouseup":case"dragend":om=!1,w1(m,n,g);break;case"selectionchange":if(s4)break;case"keydown":case"keyup":w1(m,n,g)}var L;if(A0)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Qo?oy(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(ay&&n.locale!=="ko"&&(Qo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Qo&&(L=sy()):(Vs=g,N0="value"in Vs?Vs.value:Vs.textContent,Qo=!0)),T=ih(d,C),0<T.length&&(C=new c1(C,t,null,n,g),m.push({event:C,listeners:T}),L?C.data=L:(L=ly(n),L!==null&&(C.data=L)))),(L=Gb?Yb(t,n):Kb(t,n))&&(d=ih(d,"onBeforeInput"),0<d.length&&(g=new c1("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:d}),g.data=L))}xy(m,e)})}function Ku(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ih(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=$u(t,n),s!=null&&r.unshift(Ku(t,s,i)),s=$u(t,e),s!=null&&r.push(Ku(t,s,i))),t=t.return}return r}function Lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _1(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,d=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&d!==null&&(o=d,i?(l=$u(n,s),l!=null&&a.unshift(Ku(n,l,o))):i||(l=$u(n,s),l!=null&&a.push(Ku(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var u4=/\r\n?/g,c4=/\u0000|\uFFFD/g;function S1(t){return(typeof t=="string"?t:""+t).replace(u4,`
`).replace(c4,"")}function _d(t,e,n){if(e=S1(e),S1(t)!==e&&n)throw Error(Fe(425))}function sh(){}var lm=null,um=null;function cm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dm=typeof setTimeout=="function"?setTimeout:void 0,d4=typeof clearTimeout=="function"?clearTimeout:void 0,N1=typeof Promise=="function"?Promise:void 0,h4=typeof queueMicrotask=="function"?queueMicrotask:typeof N1<"u"?function(t){return N1.resolve(null).then(t).catch(f4)}:dm;function f4(t){setTimeout(function(){throw t})}function cp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Hu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hu(e)}function Zs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pl=Math.random().toString(36).slice(2),zi="__reactFiber$"+Pl,Ju="__reactProps$"+Pl,fs="__reactContainer$"+Pl,hm="__reactEvents$"+Pl,p4="__reactListeners$"+Pl,m4="__reactHandles$"+Pl;function Da(t){var e=t[zi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fs]||n[zi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k1(t);t!==null;){if(n=t[zi])return n;t=k1(t)}return e}t=n,n=t.parentNode}return null}function wc(t){return t=t[zi]||t[fs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function tl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function Fh(t){return t[Ju]||null}var fm=[],nl=-1;function ha(t){return{current:t}}function Zt(t){0>nl||(t.current=fm[nl],fm[nl]=null,nl--)}function Jt(t,e){nl++,fm[nl]=t.current,t.current=e}var oa={},ar=ha(oa),jr=ha(!1),Ga=oa;function yl(t,e){var n=t.type.contextTypes;if(!n)return oa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ar(t){return t=t.childContextTypes,t!=null}function ah(){Zt(jr),Zt(ar)}function j1(t,e,n){if(ar.current!==oa)throw Error(Fe(168));Jt(ar,e),Jt(jr,n)}function _y(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,Zx(t)||"Unknown",i));return an({},n,r)}function oh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oa,Ga=ar.current,Jt(ar,t),Jt(jr,jr.current),!0}function A1(t,e,n){var r=t.stateNode;if(!r)throw Error(Fe(169));n?(t=_y(t,e,Ga),r.__reactInternalMemoizedMergedChildContext=t,Zt(jr),Zt(ar),Jt(ar,t)):Zt(jr),Jt(jr,n)}var os=null,Mh=!1,dp=!1;function Sy(t){os===null?os=[t]:os.push(t)}function g4(t){Mh=!0,Sy(t)}function fa(){if(!dp&&os!==null){dp=!0;var t=0,e=$t;try{var n=os;for($t=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}os=null,Mh=!1}catch(i){throw os!==null&&(os=os.slice(t+1)),Y2(x0,fa),i}finally{$t=e,dp=!1}}return null}var rl=[],il=0,lh=null,uh=0,ri=[],ii=0,Ya=null,ls=1,us="";function Ea(t,e){rl[il++]=uh,rl[il++]=lh,lh=t,uh=e}function Ny(t,e,n){ri[ii++]=ls,ri[ii++]=us,ri[ii++]=Ya,Ya=t;var r=ls;t=us;var i=32-ki(r)-1;r&=~(1<<i),n+=1;var s=32-ki(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ls=1<<32-ki(e)+i|n<<i|r,us=s+t}else ls=1<<s|n<<i|r,us=t}function E0(t){t.return!==null&&(Ea(t,1),Ny(t,1,0))}function C0(t){for(;t===lh;)lh=rl[--il],rl[il]=null,uh=rl[--il],rl[il]=null;for(;t===Ya;)Ya=ri[--ii],ri[ii]=null,us=ri[--ii],ri[ii]=null,ls=ri[--ii],ri[ii]=null}var Wr=null,$r=null,en=!1,Ni=null;function ky(t,e){var n=si(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function P1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wr=t,$r=Zs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wr=t,$r=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ya!==null?{id:ls,overflow:us}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=si(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wr=t,$r=null,!0):!1;default:return!1}}function pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mm(t){if(en){var e=$r;if(e){var n=e;if(!P1(t,e)){if(pm(t))throw Error(Fe(418));e=Zs(n.nextSibling);var r=Wr;e&&P1(t,e)?ky(r,n):(t.flags=t.flags&-4097|2,en=!1,Wr=t)}}else{if(pm(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,en=!1,Wr=t}}}function E1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wr=t}function Sd(t){if(t!==Wr)return!1;if(!en)return E1(t),en=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cm(t.type,t.memoizedProps)),e&&(e=$r)){if(pm(t))throw jy(),Error(Fe(418));for(;e;)ky(t,e),e=Zs(e.nextSibling)}if(E1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$r=Zs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$r=null}}else $r=Wr?Zs(t.stateNode.nextSibling):null;return!0}function jy(){for(var t=$r;t;)t=Zs(t.nextSibling)}function wl(){$r=Wr=null,en=!1}function T0(t){Ni===null?Ni=[t]:Ni.push(t)}var v4=gs.ReactCurrentBatchConfig;function fu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function Nd(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function C1(t){var e=t._init;return e(t._payload)}function Ay(t){function e(f,x){if(t){var w=f.deletions;w===null?(f.deletions=[x],f.flags|=16):w.push(x)}}function n(f,x){if(!t)return null;for(;x!==null;)e(f,x),x=x.sibling;return null}function r(f,x){for(f=new Map;x!==null;)x.key!==null?f.set(x.key,x):f.set(x.index,x),x=x.sibling;return f}function i(f,x){return f=ra(f,x),f.index=0,f.sibling=null,f}function s(f,x,w){return f.index=w,t?(w=f.alternate,w!==null?(w=w.index,w<x?(f.flags|=2,x):w):(f.flags|=2,x)):(f.flags|=1048576,x)}function a(f){return t&&f.alternate===null&&(f.flags|=2),f}function o(f,x,w,j){return x===null||x.tag!==6?(x=yp(w,f.mode,j),x.return=f,x):(x=i(x,w),x.return=f,x)}function l(f,x,w,j){var D=w.type;return D===Xo?g(f,x,w.props.children,j,w.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===zs&&C1(D)===x.type)?(j=i(x,w.props),j.ref=fu(f,x,w),j.return=f,j):(j=Jd(w.type,w.key,w.props,null,f.mode,j),j.ref=fu(f,x,w),j.return=f,j)}function d(f,x,w,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=wp(w,f.mode,j),x.return=f,x):(x=i(x,w.children||[]),x.return=f,x)}function g(f,x,w,j,D){return x===null||x.tag!==7?(x=$a(w,f.mode,j,D),x.return=f,x):(x=i(x,w),x.return=f,x)}function m(f,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=yp(""+x,f.mode,w),x.return=f,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fd:return w=Jd(x.type,x.key,x.props,null,f.mode,w),w.ref=fu(f,null,x),w.return=f,w;case Jo:return x=wp(x,f.mode,w),x.return=f,x;case zs:var j=x._init;return m(f,j(x._payload),w)}if(xu(x)||lu(x))return x=$a(x,f.mode,w,null),x.return=f,x;Nd(f,x)}return null}function v(f,x,w,j){var D=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return D!==null?null:o(f,x,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fd:return w.key===D?l(f,x,w,j):null;case Jo:return w.key===D?d(f,x,w,j):null;case zs:return D=w._init,v(f,x,D(w._payload),j)}if(xu(w)||lu(w))return D!==null?null:g(f,x,w,j,null);Nd(f,w)}return null}function p(f,x,w,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return f=f.get(w)||null,o(x,f,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case fd:return f=f.get(j.key===null?w:j.key)||null,l(x,f,j,D);case Jo:return f=f.get(j.key===null?w:j.key)||null,d(x,f,j,D);case zs:var T=j._init;return p(f,x,w,T(j._payload),D)}if(xu(j)||lu(j))return f=f.get(w)||null,g(x,f,j,D,null);Nd(x,j)}return null}function _(f,x,w,j){for(var D=null,T=null,L=x,C=x=0,G=null;L!==null&&C<w.length;C++){L.index>C?(G=L,L=null):G=L.sibling;var Z=v(f,L,w[C],j);if(Z===null){L===null&&(L=G);break}t&&L&&Z.alternate===null&&e(f,L),x=s(Z,x,C),T===null?D=Z:T.sibling=Z,T=Z,L=G}if(C===w.length)return n(f,L),en&&Ea(f,C),D;if(L===null){for(;C<w.length;C++)L=m(f,w[C],j),L!==null&&(x=s(L,x,C),T===null?D=L:T.sibling=L,T=L);return en&&Ea(f,C),D}for(L=r(f,L);C<w.length;C++)G=p(L,f,C,w[C],j),G!==null&&(t&&G.alternate!==null&&L.delete(G.key===null?C:G.key),x=s(G,x,C),T===null?D=G:T.sibling=G,T=G);return t&&L.forEach(function(R){return e(f,R)}),en&&Ea(f,C),D}function S(f,x,w,j){var D=lu(w);if(typeof D!="function")throw Error(Fe(150));if(w=D.call(w),w==null)throw Error(Fe(151));for(var T=D=null,L=x,C=x=0,G=null,Z=w.next();L!==null&&!Z.done;C++,Z=w.next()){L.index>C?(G=L,L=null):G=L.sibling;var R=v(f,L,Z.value,j);if(R===null){L===null&&(L=G);break}t&&L&&R.alternate===null&&e(f,L),x=s(R,x,C),T===null?D=R:T.sibling=R,T=R,L=G}if(Z.done)return n(f,L),en&&Ea(f,C),D;if(L===null){for(;!Z.done;C++,Z=w.next())Z=m(f,Z.value,j),Z!==null&&(x=s(Z,x,C),T===null?D=Z:T.sibling=Z,T=Z);return en&&Ea(f,C),D}for(L=r(f,L);!Z.done;C++,Z=w.next())Z=p(L,f,C,Z.value,j),Z!==null&&(t&&Z.alternate!==null&&L.delete(Z.key===null?C:Z.key),x=s(Z,x,C),T===null?D=Z:T.sibling=Z,T=Z);return t&&L.forEach(function(A){return e(f,A)}),en&&Ea(f,C),D}function N(f,x,w,j){if(typeof w=="object"&&w!==null&&w.type===Xo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case fd:e:{for(var D=w.key,T=x;T!==null;){if(T.key===D){if(D=w.type,D===Xo){if(T.tag===7){n(f,T.sibling),x=i(T,w.props.children),x.return=f,f=x;break e}}else if(T.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===zs&&C1(D)===T.type){n(f,T.sibling),x=i(T,w.props),x.ref=fu(f,T,w),x.return=f,f=x;break e}n(f,T);break}else e(f,T);T=T.sibling}w.type===Xo?(x=$a(w.props.children,f.mode,j,w.key),x.return=f,f=x):(j=Jd(w.type,w.key,w.props,null,f.mode,j),j.ref=fu(f,x,w),j.return=f,f=j)}return a(f);case Jo:e:{for(T=w.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(f,x.sibling),x=i(x,w.children||[]),x.return=f,f=x;break e}else{n(f,x);break}else e(f,x);x=x.sibling}x=wp(w,f.mode,j),x.return=f,f=x}return a(f);case zs:return T=w._init,N(f,x,T(w._payload),j)}if(xu(w))return _(f,x,w,j);if(lu(w))return S(f,x,w,j);Nd(f,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(f,x.sibling),x=i(x,w),x.return=f,f=x):(n(f,x),x=yp(w,f.mode,j),x.return=f,f=x),a(f)):n(f,x)}return N}var xl=Ay(!0),Py=Ay(!1),ch=ha(null),dh=null,sl=null,L0=null;function R0(){L0=sl=dh=null}function I0(t){var e=ch.current;Zt(ch),t._currentValue=e}function gm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fl(t,e){dh=t,L0=sl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kr=!0),t.firstContext=null)}function li(t){var e=t._currentValue;if(L0!==t)if(t={context:t,memoizedValue:e,next:null},sl===null){if(dh===null)throw Error(Fe(308));sl=t,dh.dependencies={lanes:0,firstContext:t}}else sl=sl.next=t;return e}var Fa=null;function O0(t){Fa===null?Fa=[t]:Fa.push(t)}function Ey(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,O0(e)):(n.next=i.next,i.next=n),e.interleaved=n,ps(t,r)}function ps(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bs=!1;function D0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ds(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ea(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ot&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ps(t,n)}return i=r.interleaved,i===null?(e.next=e,O0(r)):(e.next=i.next,i.next=e),r.interleaved=e,ps(t,n)}function Wd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b0(t,n)}}function T1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hh(t,e,n,r){var i=t.updateQueue;Bs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,d=l.next;l.next=null,a===null?s=d:a.next=d,a=l;var g=t.alternate;g!==null&&(g=g.updateQueue,o=g.lastBaseUpdate,o!==a&&(o===null?g.firstBaseUpdate=d:o.next=d,g.lastBaseUpdate=l))}if(s!==null){var m=i.baseState;a=0,g=d=l=null,o=s;do{var v=o.lane,p=o.eventTime;if((r&v)===v){g!==null&&(g=g.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var _=t,S=o;switch(v=e,p=n,S.tag){case 1:if(_=S.payload,typeof _=="function"){m=_.call(p,m,v);break e}m=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=S.payload,v=typeof _=="function"?_.call(p,m,v):_,v==null)break e;m=an({},m,v);break e;case 2:Bs=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[o]:v.push(o))}else p={eventTime:p,lane:v,tag:o.tag,payload:o.payload,callback:o.callback,next:null},g===null?(d=g=p,l=m):g=g.next=p,a|=v;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;v=o,o=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(g===null&&(l=m),i.baseState=l,i.firstBaseUpdate=d,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ja|=a,t.lanes=a,t.memoizedState=m}}function L1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var xc={},Wi=ha(xc),Xu=ha(xc),Qu=ha(xc);function Ma(t){if(t===xc)throw Error(Fe(174));return t}function F0(t,e){switch(Jt(Qu,e),Jt(Xu,t),Jt(Wi,xc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jp(e,t)}Zt(Wi),Jt(Wi,e)}function bl(){Zt(Wi),Zt(Xu),Zt(Qu)}function Ty(t){Ma(Qu.current);var e=Ma(Wi.current),n=Jp(e,t.type);e!==n&&(Jt(Xu,t),Jt(Wi,n))}function M0(t){Xu.current===t&&(Zt(Wi),Zt(Xu))}var rn=ha(0);function fh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hp=[];function z0(){for(var t=0;t<hp.length;t++)hp[t]._workInProgressVersionPrimary=null;hp.length=0}var Hd=gs.ReactCurrentDispatcher,fp=gs.ReactCurrentBatchConfig,Ka=0,sn=null,Cn=null,Fn=null,ph=!1,Eu=!1,Zu=0,y4=0;function Qn(){throw Error(Fe(321))}function B0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ai(t[n],e[n]))return!1;return!0}function U0(t,e,n,r,i,s){if(Ka=s,sn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hd.current=t===null||t.memoizedState===null?_4:S4,t=n(r,i),Eu){s=0;do{if(Eu=!1,Zu=0,25<=s)throw Error(Fe(301));s+=1,Fn=Cn=null,e.updateQueue=null,Hd.current=N4,t=n(r,i)}while(Eu)}if(Hd.current=mh,e=Cn!==null&&Cn.next!==null,Ka=0,Fn=Cn=sn=null,ph=!1,e)throw Error(Fe(300));return t}function $0(){var t=Zu!==0;return Zu=0,t}function Mi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?sn.memoizedState=Fn=t:Fn=Fn.next=t,Fn}function ui(){if(Cn===null){var t=sn.alternate;t=t!==null?t.memoizedState:null}else t=Cn.next;var e=Fn===null?sn.memoizedState:Fn.next;if(e!==null)Fn=e,Cn=t;else{if(t===null)throw Error(Fe(310));Cn=t,t={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},Fn===null?sn.memoizedState=Fn=t:Fn=Fn.next=t}return Fn}function ec(t,e){return typeof e=="function"?e(t):e}function pp(t){var e=ui(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=Cn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,d=s;do{var g=d.lane;if((Ka&g)===g)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:g,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(o=l=m,a=r):l=l.next=m,sn.lanes|=g,Ja|=g}d=d.next}while(d!==null&&d!==s);l===null?a=r:l.next=o,Ai(r,e.memoizedState)||(kr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,sn.lanes|=s,Ja|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mp(t){var e=ui(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Ai(s,e.memoizedState)||(kr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ly(){}function Ry(t,e){var n=sn,r=ui(),i=e(),s=!Ai(r.memoizedState,i);if(s&&(r.memoizedState=i,kr=!0),r=r.queue,q0(Dy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Fn!==null&&Fn.memoizedState.tag&1){if(n.flags|=2048,tc(9,Oy.bind(null,n,r,i,e),void 0,null),Mn===null)throw Error(Fe(349));Ka&30||Iy(n,e,i)}return i}function Iy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=sn.updateQueue,e===null?(e={lastEffect:null,stores:null},sn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Oy(t,e,n,r){e.value=n,e.getSnapshot=r,Fy(e)&&My(t)}function Dy(t,e,n){return n(function(){Fy(e)&&My(t)})}function Fy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ai(t,n)}catch{return!0}}function My(t){var e=ps(t,1);e!==null&&ji(e,t,1,-1)}function R1(t){var e=Mi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:t},e.queue=t,t=t.dispatch=b4.bind(null,sn,t),[e.memoizedState,t]}function tc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=sn.updateQueue,e===null?(e={lastEffect:null,stores:null},sn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zy(){return ui().memoizedState}function Vd(t,e,n,r){var i=Mi();sn.flags|=t,i.memoizedState=tc(1|e,n,void 0,r===void 0?null:r)}function zh(t,e,n,r){var i=ui();r=r===void 0?null:r;var s=void 0;if(Cn!==null){var a=Cn.memoizedState;if(s=a.destroy,r!==null&&B0(r,a.deps)){i.memoizedState=tc(e,n,s,r);return}}sn.flags|=t,i.memoizedState=tc(1|e,n,s,r)}function I1(t,e){return Vd(8390656,8,t,e)}function q0(t,e){return zh(2048,8,t,e)}function By(t,e){return zh(4,2,t,e)}function Uy(t,e){return zh(4,4,t,e)}function $y(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qy(t,e,n){return n=n!=null?n.concat([t]):null,zh(4,4,$y.bind(null,e,t),n)}function W0(){}function Wy(t,e){var n=ui();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&B0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Hy(t,e){var n=ui();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&B0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vy(t,e,n){return Ka&21?(Ai(n,e)||(n=X2(),sn.lanes|=n,Ja|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kr=!0),t.memoizedState=n)}function w4(t,e){var n=$t;$t=n!==0&&4>n?n:4,t(!0);var r=fp.transition;fp.transition={};try{t(!1),e()}finally{$t=n,fp.transition=r}}function Gy(){return ui().memoizedState}function x4(t,e,n){var r=na(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yy(t))Ky(e,n);else if(n=Ey(t,e,n,r),n!==null){var i=pr();ji(n,t,r,i),Jy(n,e,r)}}function b4(t,e,n){var r=na(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yy(t))Ky(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Ai(o,a)){var l=e.interleaved;l===null?(i.next=i,O0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Ey(t,e,i,r),n!==null&&(i=pr(),ji(n,t,r,i),Jy(n,e,r))}}function Yy(t){var e=t.alternate;return t===sn||e!==null&&e===sn}function Ky(t,e){Eu=ph=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b0(t,n)}}var mh={readContext:li,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},_4={readContext:li,useCallback:function(t,e){return Mi().memoizedState=[t,e===void 0?null:e],t},useContext:li,useEffect:I1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vd(4194308,4,$y.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vd(4,2,t,e)},useMemo:function(t,e){var n=Mi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=x4.bind(null,sn,t),[r.memoizedState,t]},useRef:function(t){var e=Mi();return t={current:t},e.memoizedState=t},useState:R1,useDebugValue:W0,useDeferredValue:function(t){return Mi().memoizedState=t},useTransition:function(){var t=R1(!1),e=t[0];return t=w4.bind(null,t[1]),Mi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=sn,i=Mi();if(en){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),Mn===null)throw Error(Fe(349));Ka&30||Iy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,I1(Dy.bind(null,r,s,t),[t]),r.flags|=2048,tc(9,Oy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Mi(),e=Mn.identifierPrefix;if(en){var n=us,r=ls;n=(r&~(1<<32-ki(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=y4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},S4={readContext:li,useCallback:Wy,useContext:li,useEffect:q0,useImperativeHandle:qy,useInsertionEffect:By,useLayoutEffect:Uy,useMemo:Hy,useReducer:pp,useRef:zy,useState:function(){return pp(ec)},useDebugValue:W0,useDeferredValue:function(t){var e=ui();return Vy(e,Cn.memoizedState,t)},useTransition:function(){var t=pp(ec)[0],e=ui().memoizedState;return[t,e]},useMutableSource:Ly,useSyncExternalStore:Ry,useId:Gy,unstable_isNewReconciler:!1},N4={readContext:li,useCallback:Wy,useContext:li,useEffect:q0,useImperativeHandle:qy,useInsertionEffect:By,useLayoutEffect:Uy,useMemo:Hy,useReducer:mp,useRef:zy,useState:function(){return mp(ec)},useDebugValue:W0,useDeferredValue:function(t){var e=ui();return Cn===null?e.memoizedState=t:Vy(e,Cn.memoizedState,t)},useTransition:function(){var t=mp(ec)[0],e=ui().memoizedState;return[t,e]},useMutableSource:Ly,useSyncExternalStore:Ry,useId:Gy,unstable_isNewReconciler:!1};function wi(t,e){if(t&&t.defaultProps){e=an({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:an({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bh={isMounted:function(t){return(t=t._reactInternals)?to(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pr(),i=na(t),s=ds(r,i);s.payload=e,n!=null&&(s.callback=n),e=ea(t,s,i),e!==null&&(ji(e,t,i,r),Wd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pr(),i=na(t),s=ds(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ea(t,s,i),e!==null&&(ji(e,t,i,r),Wd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pr(),r=na(t),i=ds(n,r);i.tag=2,e!=null&&(i.callback=e),e=ea(t,i,r),e!==null&&(ji(e,t,r,n),Wd(e,t,r))}};function O1(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Gu(n,r)||!Gu(i,s):!0}function Xy(t,e,n){var r=!1,i=oa,s=e.contextType;return typeof s=="object"&&s!==null?s=li(s):(i=Ar(e)?Ga:ar.current,r=e.contextTypes,s=(r=r!=null)?yl(t,i):oa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function D1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Bh.enqueueReplaceState(e,e.state,null)}function ym(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},D0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=li(s):(s=Ar(e)?Ga:ar.current,i.context=yl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Bh.enqueueReplaceState(i,i.state,null),hh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _l(t,e){try{var n="",r=e;do n+=Qx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function gp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var k4=typeof WeakMap=="function"?WeakMap:Map;function Qy(t,e,n){n=ds(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vh||(vh=!0,Em=r),wm(t,e)},n}function Zy(t,e,n){n=ds(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){wm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){wm(t,e),typeof r!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function F1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new k4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=z4.bind(null,t,e,n),e.then(t,t))}function M1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function z1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ds(-1,1),e.tag=2,ea(n,e,1))),n.lanes|=1),t)}var j4=gs.ReactCurrentOwner,kr=!1;function hr(t,e,n,r){e.child=t===null?Py(e,null,n,r):xl(e,t.child,n,r)}function B1(t,e,n,r,i){n=n.render;var s=e.ref;return fl(e,i),r=U0(t,e,n,r,s,i),n=$0(),t!==null&&!kr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ms(t,e,i)):(en&&n&&E0(e),e.flags|=1,hr(t,e,r,i),e.child)}function U1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Q0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,e5(t,e,s,r,i)):(t=Jd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Gu,n(a,r)&&t.ref===e.ref)return ms(t,e,i)}return e.flags|=1,t=ra(s,r),t.ref=e.ref,t.return=e,e.child=t}function e5(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Gu(s,r)&&t.ref===e.ref)if(kr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(kr=!0);else return e.lanes=t.lanes,ms(t,e,i)}return xm(t,e,n,r,i)}function t5(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(ol,zr),zr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Jt(ol,zr),zr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Jt(ol,zr),zr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Jt(ol,zr),zr|=r;return hr(t,e,i,n),e.child}function n5(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xm(t,e,n,r,i){var s=Ar(n)?Ga:ar.current;return s=yl(e,s),fl(e,i),n=U0(t,e,n,r,s,i),r=$0(),t!==null&&!kr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ms(t,e,i)):(en&&r&&E0(e),e.flags|=1,hr(t,e,n,i),e.child)}function $1(t,e,n,r,i){if(Ar(n)){var s=!0;oh(e)}else s=!1;if(fl(e,i),e.stateNode===null)Gd(t,e),Xy(e,n,r),ym(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=li(d):(d=Ar(n)?Ga:ar.current,d=yl(e,d));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==d)&&D1(e,a,r,d),Bs=!1;var v=e.memoizedState;a.state=v,hh(e,r,a,i),l=e.memoizedState,o!==r||v!==l||jr.current||Bs?(typeof g=="function"&&(vm(e,n,g,r),l=e.memoizedState),(o=Bs||O1(e,n,o,r,v,l,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=d,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Cy(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:wi(e.type,o),a.props=d,m=e.pendingProps,v=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=li(l):(l=Ar(n)?Ga:ar.current,l=yl(e,l));var p=n.getDerivedStateFromProps;(g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==m||v!==l)&&D1(e,a,r,l),Bs=!1,v=e.memoizedState,a.state=v,hh(e,r,a,i);var _=e.memoizedState;o!==m||v!==_||jr.current||Bs?(typeof p=="function"&&(vm(e,n,p,r),_=e.memoizedState),(d=Bs||O1(e,n,d,r,v,_,l)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,_,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,_,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),a.props=r,a.state=_,a.context=l,r=d):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return bm(t,e,n,r,s,i)}function bm(t,e,n,r,i,s){n5(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&A1(e,n,!1),ms(t,e,s);r=e.stateNode,j4.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=xl(e,t.child,null,s),e.child=xl(e,null,o,s)):hr(t,e,o,s),e.memoizedState=r.state,i&&A1(e,n,!0),e.child}function r5(t){var e=t.stateNode;e.pendingContext?j1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&j1(t,e.context,!1),F0(t,e.containerInfo)}function q1(t,e,n,r,i){return wl(),T0(i),e.flags|=256,hr(t,e,n,r),e.child}var _m={dehydrated:null,treeContext:null,retryLane:0};function Sm(t){return{baseLanes:t,cachePool:null,transitions:null}}function i5(t,e,n){var r=e.pendingProps,i=rn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Jt(rn,i&1),t===null)return mm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=qh(a,r,0,null),t=$a(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Sm(n),e.memoizedState=_m,t):H0(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return A4(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ra(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=ra(o,s):(s=$a(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Sm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=_m,r}return s=t.child,t=s.sibling,r=ra(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function H0(t,e){return e=qh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kd(t,e,n,r){return r!==null&&T0(r),xl(e,t.child,null,n),t=H0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function A4(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=gp(Error(Fe(422))),kd(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=qh({mode:"visible",children:r.children},i,0,null),s=$a(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&xl(e,t.child,null,a),e.child.memoizedState=Sm(a),e.memoizedState=_m,s);if(!(e.mode&1))return kd(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Fe(419)),r=gp(s,r,void 0),kd(t,e,a,r)}if(o=(a&t.childLanes)!==0,kr||o){if(r=Mn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ps(t,i),ji(r,t,i,-1))}return X0(),r=gp(Error(Fe(421))),kd(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=B4.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,$r=Zs(i.nextSibling),Wr=e,en=!0,Ni=null,t!==null&&(ri[ii++]=ls,ri[ii++]=us,ri[ii++]=Ya,ls=t.id,us=t.overflow,Ya=e),e=H0(e,r.children),e.flags|=4096,e)}function W1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gm(t.return,e,n)}function vp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function s5(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(hr(t,e,r.children,n),r=rn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&W1(t,n,e);else if(t.tag===19)W1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Jt(rn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),vp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}vp(e,!0,n,null,s);break;case"together":vp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ms(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ja|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=ra(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ra(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function P4(t,e,n){switch(e.tag){case 3:r5(e),wl();break;case 5:Ty(e);break;case 1:Ar(e.type)&&oh(e);break;case 4:F0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Jt(ch,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Jt(rn,rn.current&1),e.flags|=128,null):n&e.child.childLanes?i5(t,e,n):(Jt(rn,rn.current&1),t=ms(t,e,n),t!==null?t.sibling:null);Jt(rn,rn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return s5(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Jt(rn,rn.current),r)break;return null;case 22:case 23:return e.lanes=0,t5(t,e,n)}return ms(t,e,n)}var a5,Nm,o5,l5;a5=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nm=function(){};o5=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ma(Wi.current);var s=null;switch(n){case"input":i=Vp(t,i),r=Vp(t,r),s=[];break;case"select":i=an({},i,{value:void 0}),r=an({},r,{value:void 0}),s=[];break;case"textarea":i=Kp(t,i),r=Kp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sh)}Xp(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var o=i[d];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Bu.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(o=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&l!==o&&(l!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Bu.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&Xt("scroll",t),s||o===l||(s=[])):(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};l5=function(t,e,n,r){n!==r&&(e.flags|=4)};function pu(t,e){if(!en)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function E4(t,e,n){var r=e.pendingProps;switch(C0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return Ar(e.type)&&ah(),Zn(e),null;case 3:return r=e.stateNode,bl(),Zt(jr),Zt(ar),z0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ni!==null&&(Lm(Ni),Ni=null))),Nm(t,e),Zn(e),null;case 5:M0(e);var i=Ma(Qu.current);if(n=e.type,t!==null&&e.stateNode!=null)o5(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return Zn(e),null}if(t=Ma(Wi.current),Sd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[zi]=e,r[Ju]=s,t=(e.mode&1)!==0,n){case"dialog":Xt("cancel",r),Xt("close",r);break;case"iframe":case"object":case"embed":Xt("load",r);break;case"video":case"audio":for(i=0;i<_u.length;i++)Xt(_u[i],r);break;case"source":Xt("error",r);break;case"img":case"image":case"link":Xt("error",r),Xt("load",r);break;case"details":Xt("toggle",r);break;case"input":Zg(r,s),Xt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Xt("invalid",r);break;case"textarea":t1(r,s),Xt("invalid",r)}Xp(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&_d(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&_d(r.textContent,o,t),i=["children",""+o]):Bu.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Xt("scroll",r)}switch(n){case"input":pd(r),e1(r,s,!0);break;case"textarea":pd(r),n1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=D2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[zi]=e,t[Ju]=r,a5(t,e,!1,!1),e.stateNode=t;e:{switch(a=Qp(n,r),n){case"dialog":Xt("cancel",t),Xt("close",t),i=r;break;case"iframe":case"object":case"embed":Xt("load",t),i=r;break;case"video":case"audio":for(i=0;i<_u.length;i++)Xt(_u[i],t);i=r;break;case"source":Xt("error",t),i=r;break;case"img":case"image":case"link":Xt("error",t),Xt("load",t),i=r;break;case"details":Xt("toggle",t),i=r;break;case"input":Zg(t,r),i=Vp(t,r),Xt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=an({},r,{value:void 0}),Xt("invalid",t);break;case"textarea":t1(t,r),i=Kp(t,r),Xt("invalid",t);break;default:i=r}Xp(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?z2(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&F2(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Uu(t,l):typeof l=="number"&&Uu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Xt("scroll",t):l!=null&&m0(t,s,l,a))}switch(n){case"input":pd(t),e1(t,r,!1);break;case"textarea":pd(t),n1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+aa(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ul(t,!!r.multiple,s,!1):r.defaultValue!=null&&ul(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)l5(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=Ma(Qu.current),Ma(Wi.current),Sd(e)){if(r=e.stateNode,n=e.memoizedProps,r[zi]=e,(s=r.nodeValue!==n)&&(t=Wr,t!==null))switch(t.tag){case 3:_d(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_d(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zi]=e,e.stateNode=r}return Zn(e),null;case 13:if(Zt(rn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(en&&$r!==null&&e.mode&1&&!(e.flags&128))jy(),wl(),e.flags|=98560,s=!1;else if(s=Sd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[zi]=e}else wl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zn(e),s=!1}else Ni!==null&&(Lm(Ni),Ni=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||rn.current&1?Ln===0&&(Ln=3):X0())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return bl(),Nm(t,e),t===null&&Yu(e.stateNode.containerInfo),Zn(e),null;case 10:return I0(e.type._context),Zn(e),null;case 17:return Ar(e.type)&&ah(),Zn(e),null;case 19:if(Zt(rn),s=e.memoizedState,s===null)return Zn(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)pu(s,!1);else{if(Ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=fh(t),a!==null){for(e.flags|=128,pu(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Jt(rn,rn.current&1|2),e.child}t=t.sibling}s.tail!==null&&vn()>Sl&&(e.flags|=128,r=!0,pu(s,!1),e.lanes=4194304)}else{if(!r)if(t=fh(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!en)return Zn(e),null}else 2*vn()-s.renderingStartTime>Sl&&n!==1073741824&&(e.flags|=128,r=!0,pu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vn(),e.sibling=null,n=rn.current,Jt(rn,r?n&1|2:n&1),e):(Zn(e),null);case 22:case 23:return J0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zr&1073741824&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function C4(t,e){switch(C0(e),e.tag){case 1:return Ar(e.type)&&ah(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bl(),Zt(jr),Zt(ar),z0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return M0(e),null;case 13:if(Zt(rn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));wl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Zt(rn),null;case 4:return bl(),null;case 10:return I0(e.type._context),null;case 22:case 23:return J0(),null;case 24:return null;default:return null}}var jd=!1,ir=!1,T4=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function al(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dn(t,e,r)}else n.current=null}function km(t,e,n){try{n()}catch(r){dn(t,e,r)}}var H1=!1;function L4(t,e){if(lm=nh,t=fy(),P0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,d=0,g=0,m=t,v=null;t:for(;;){for(var p;m!==n||i!==0&&m.nodeType!==3||(o=a+i),m!==s||r!==0&&m.nodeType!==3||(l=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(p=m.firstChild)!==null;)v=m,m=p;for(;;){if(m===t)break t;if(v===n&&++d===i&&(o=a),v===s&&++g===r&&(l=a),(p=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(um={focusedElem:t,selectionRange:n},nh=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var S=_.memoizedProps,N=_.memoizedState,f=e.stateNode,x=f.getSnapshotBeforeUpdate(e.elementType===e.type?S:wi(e.type,S),N);f.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(j){dn(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return _=H1,H1=!1,_}function Cu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&km(e,n,s)}i=i.next}while(i!==r)}}function Uh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function u5(t){var e=t.alternate;e!==null&&(t.alternate=null,u5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zi],delete e[Ju],delete e[hm],delete e[p4],delete e[m4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function c5(t){return t.tag===5||t.tag===3||t.tag===4}function V1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Am(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sh));else if(r!==4&&(t=t.child,t!==null))for(Am(t,e,n),t=t.sibling;t!==null;)Am(t,e,n),t=t.sibling}function Pm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pm(t,e,n),t=t.sibling;t!==null;)Pm(t,e,n),t=t.sibling}var Wn=null,_i=!1;function Rs(t,e,n){for(n=n.child;n!==null;)d5(t,e,n),n=n.sibling}function d5(t,e,n){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(Rh,n)}catch{}switch(n.tag){case 5:ir||al(n,e);case 6:var r=Wn,i=_i;Wn=null,Rs(t,e,n),Wn=r,_i=i,Wn!==null&&(_i?(t=Wn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wn.removeChild(n.stateNode));break;case 18:Wn!==null&&(_i?(t=Wn,n=n.stateNode,t.nodeType===8?cp(t.parentNode,n):t.nodeType===1&&cp(t,n),Hu(t)):cp(Wn,n.stateNode));break;case 4:r=Wn,i=_i,Wn=n.stateNode.containerInfo,_i=!0,Rs(t,e,n),Wn=r,_i=i;break;case 0:case 11:case 14:case 15:if(!ir&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&km(n,e,a),i=i.next}while(i!==r)}Rs(t,e,n);break;case 1:if(!ir&&(al(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){dn(n,e,o)}Rs(t,e,n);break;case 21:Rs(t,e,n);break;case 22:n.mode&1?(ir=(r=ir)||n.memoizedState!==null,Rs(t,e,n),ir=r):Rs(t,e,n);break;default:Rs(t,e,n)}}function G1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new T4),e.forEach(function(r){var i=U4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Wn=o.stateNode,_i=!1;break e;case 3:Wn=o.stateNode.containerInfo,_i=!0;break e;case 4:Wn=o.stateNode.containerInfo,_i=!0;break e}o=o.return}if(Wn===null)throw Error(Fe(160));d5(s,a,i),Wn=null,_i=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(d){dn(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)h5(e,t),e=e.sibling}function h5(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mi(e,t),Di(t),r&4){try{Cu(3,t,t.return),Uh(3,t)}catch(S){dn(t,t.return,S)}try{Cu(5,t,t.return)}catch(S){dn(t,t.return,S)}}break;case 1:mi(e,t),Di(t),r&512&&n!==null&&al(n,n.return);break;case 5:if(mi(e,t),Di(t),r&512&&n!==null&&al(n,n.return),t.flags&32){var i=t.stateNode;try{Uu(i,"")}catch(S){dn(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&I2(i,s),Qp(o,a);var d=Qp(o,s);for(a=0;a<l.length;a+=2){var g=l[a],m=l[a+1];g==="style"?z2(i,m):g==="dangerouslySetInnerHTML"?F2(i,m):g==="children"?Uu(i,m):m0(i,g,m,d)}switch(o){case"input":Gp(i,s);break;case"textarea":O2(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ul(i,!!s.multiple,p,!1):v!==!!s.multiple&&(s.defaultValue!=null?ul(i,!!s.multiple,s.defaultValue,!0):ul(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ju]=s}catch(S){dn(t,t.return,S)}}break;case 6:if(mi(e,t),Di(t),r&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){dn(t,t.return,S)}}break;case 3:if(mi(e,t),Di(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hu(e.containerInfo)}catch(S){dn(t,t.return,S)}break;case 4:mi(e,t),Di(t);break;case 13:mi(e,t),Di(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Y0=vn())),r&4&&G1(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(ir=(d=ir)||g,mi(e,t),ir=d):mi(e,t),Di(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!g&&t.mode&1)for(Ye=t,g=t.child;g!==null;){for(m=Ye=g;Ye!==null;){switch(v=Ye,p=v.child,v.tag){case 0:case 11:case 14:case 15:Cu(4,v,v.return);break;case 1:al(v,v.return);var _=v.stateNode;if(typeof _.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(S){dn(r,n,S)}}break;case 5:al(v,v.return);break;case 22:if(v.memoizedState!==null){K1(m);continue}}p!==null?(p.return=v,Ye=p):K1(m)}g=g.sibling}e:for(g=null,m=t;;){if(m.tag===5){if(g===null){g=m;try{i=m.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=m.stateNode,l=m.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=M2("display",a))}catch(S){dn(t,t.return,S)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(S){dn(t,t.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:mi(e,t),Di(t),r&4&&G1(t);break;case 21:break;default:mi(e,t),Di(t)}}function Di(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(c5(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Uu(i,""),r.flags&=-33);var s=V1(t);Pm(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=V1(t);Am(t,o,a);break;default:throw Error(Fe(161))}}catch(l){dn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function R4(t,e,n){Ye=t,f5(t)}function f5(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var i=Ye,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||jd;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||ir;o=jd;var d=ir;if(jd=a,(ir=l)&&!d)for(Ye=i;Ye!==null;)a=Ye,l=a.child,a.tag===22&&a.memoizedState!==null?J1(i):l!==null?(l.return=a,Ye=l):J1(i);for(;s!==null;)Ye=s,f5(s),s=s.sibling;Ye=i,jd=o,ir=d}Y1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ye=s):Y1(t)}}function Y1(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ir||Uh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ir)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:wi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&L1(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}L1(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var g=d.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&Hu(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}ir||e.flags&512&&jm(e)}catch(v){dn(e,e.return,v)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function K1(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function J1(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Uh(4,e)}catch(l){dn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){dn(e,i,l)}}var s=e.return;try{jm(e)}catch(l){dn(e,s,l)}break;case 5:var a=e.return;try{jm(e)}catch(l){dn(e,a,l)}}}catch(l){dn(e,e.return,l)}if(e===t){Ye=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Ye=o;break}Ye=e.return}}var I4=Math.ceil,gh=gs.ReactCurrentDispatcher,V0=gs.ReactCurrentOwner,ai=gs.ReactCurrentBatchConfig,Ot=0,Mn=null,jn=null,Vn=0,zr=0,ol=ha(0),Ln=0,nc=null,Ja=0,$h=0,G0=0,Tu=null,Nr=null,Y0=0,Sl=1/0,ss=null,vh=!1,Em=null,ta=null,Ad=!1,Gs=null,yh=0,Lu=0,Cm=null,Yd=-1,Kd=0;function pr(){return Ot&6?vn():Yd!==-1?Yd:Yd=vn()}function na(t){return t.mode&1?Ot&2&&Vn!==0?Vn&-Vn:v4.transition!==null?(Kd===0&&(Kd=X2()),Kd):(t=$t,t!==0||(t=window.event,t=t===void 0?16:iy(t.type)),t):1}function ji(t,e,n,r){if(50<Lu)throw Lu=0,Cm=null,Error(Fe(185));vc(t,n,r),(!(Ot&2)||t!==Mn)&&(t===Mn&&(!(Ot&2)&&($h|=n),Ln===4&&qs(t,Vn)),Pr(t,r),n===1&&Ot===0&&!(e.mode&1)&&(Sl=vn()+500,Mh&&fa()))}function Pr(t,e){var n=t.callbackNode;vb(t,e);var r=th(t,t===Mn?Vn:0);if(r===0)n!==null&&s1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&s1(n),e===1)t.tag===0?g4(X1.bind(null,t)):Sy(X1.bind(null,t)),h4(function(){!(Ot&6)&&fa()}),n=null;else{switch(Q2(r)){case 1:n=x0;break;case 4:n=K2;break;case 16:n=eh;break;case 536870912:n=J2;break;default:n=eh}n=b5(n,p5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p5(t,e){if(Yd=-1,Kd=0,Ot&6)throw Error(Fe(327));var n=t.callbackNode;if(pl()&&t.callbackNode!==n)return null;var r=th(t,t===Mn?Vn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wh(t,r);else{e=r;var i=Ot;Ot|=2;var s=g5();(Mn!==t||Vn!==e)&&(ss=null,Sl=vn()+500,Ua(t,e));do try{F4();break}catch(o){m5(t,o)}while(!0);R0(),gh.current=s,Ot=i,jn!==null?e=0:(Mn=null,Vn=0,e=Ln)}if(e!==0){if(e===2&&(i=rm(t),i!==0&&(r=i,e=Tm(t,i))),e===1)throw n=nc,Ua(t,0),qs(t,r),Pr(t,vn()),n;if(e===6)qs(t,r);else{if(i=t.current.alternate,!(r&30)&&!O4(i)&&(e=wh(t,r),e===2&&(s=rm(t),s!==0&&(r=s,e=Tm(t,s))),e===1))throw n=nc,Ua(t,0),qs(t,r),Pr(t,vn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:Ca(t,Nr,ss);break;case 3:if(qs(t,r),(r&130023424)===r&&(e=Y0+500-vn(),10<e)){if(th(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dm(Ca.bind(null,t,Nr,ss),e);break}Ca(t,Nr,ss);break;case 4:if(qs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-ki(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=vn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*I4(r/1960))-r,10<r){t.timeoutHandle=dm(Ca.bind(null,t,Nr,ss),r);break}Ca(t,Nr,ss);break;case 5:Ca(t,Nr,ss);break;default:throw Error(Fe(329))}}}return Pr(t,vn()),t.callbackNode===n?p5.bind(null,t):null}function Tm(t,e){var n=Tu;return t.current.memoizedState.isDehydrated&&(Ua(t,e).flags|=256),t=wh(t,e),t!==2&&(e=Nr,Nr=n,e!==null&&Lm(e)),t}function Lm(t){Nr===null?Nr=t:Nr.push.apply(Nr,t)}function O4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ai(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qs(t,e){for(e&=~G0,e&=~$h,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ki(e),r=1<<n;t[n]=-1,e&=~r}}function X1(t){if(Ot&6)throw Error(Fe(327));pl();var e=th(t,0);if(!(e&1))return Pr(t,vn()),null;var n=wh(t,e);if(t.tag!==0&&n===2){var r=rm(t);r!==0&&(e=r,n=Tm(t,r))}if(n===1)throw n=nc,Ua(t,0),qs(t,e),Pr(t,vn()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ca(t,Nr,ss),Pr(t,vn()),null}function K0(t,e){var n=Ot;Ot|=1;try{return t(e)}finally{Ot=n,Ot===0&&(Sl=vn()+500,Mh&&fa())}}function Xa(t){Gs!==null&&Gs.tag===0&&!(Ot&6)&&pl();var e=Ot;Ot|=1;var n=ai.transition,r=$t;try{if(ai.transition=null,$t=1,t)return t()}finally{$t=r,ai.transition=n,Ot=e,!(Ot&6)&&fa()}}function J0(){zr=ol.current,Zt(ol)}function Ua(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,d4(n)),jn!==null)for(n=jn.return;n!==null;){var r=n;switch(C0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ah();break;case 3:bl(),Zt(jr),Zt(ar),z0();break;case 5:M0(r);break;case 4:bl();break;case 13:Zt(rn);break;case 19:Zt(rn);break;case 10:I0(r.type._context);break;case 22:case 23:J0()}n=n.return}if(Mn=t,jn=t=ra(t.current,null),Vn=zr=e,Ln=0,nc=null,G0=$h=Ja=0,Nr=Tu=null,Fa!==null){for(e=0;e<Fa.length;e++)if(n=Fa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Fa=null}return t}function m5(t,e){do{var n=jn;try{if(R0(),Hd.current=mh,ph){for(var r=sn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ph=!1}if(Ka=0,Fn=Cn=sn=null,Eu=!1,Zu=0,V0.current=null,n===null||n.return===null){Ln=1,nc=e,jn=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=Vn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,g=o,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var p=M1(a);if(p!==null){p.flags&=-257,z1(p,a,o,s,e),p.mode&1&&F1(s,d,e),e=p,l=d;var _=e.updateQueue;if(_===null){var S=new Set;S.add(l),e.updateQueue=S}else _.add(l);break e}else{if(!(e&1)){F1(s,d,e),X0();break e}l=Error(Fe(426))}}else if(en&&o.mode&1){var N=M1(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),z1(N,a,o,s,e),T0(_l(l,o));break e}}s=l=_l(l,o),Ln!==4&&(Ln=2),Tu===null?Tu=[s]:Tu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var f=Qy(s,l,e);T1(s,f);break e;case 1:o=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ta===null||!ta.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=Zy(s,o,e);T1(s,j);break e}}s=s.return}while(s!==null)}y5(n)}catch(D){e=D,jn===n&&n!==null&&(jn=n=n.return);continue}break}while(!0)}function g5(){var t=gh.current;return gh.current=mh,t===null?mh:t}function X0(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Mn===null||!(Ja&268435455)&&!($h&268435455)||qs(Mn,Vn)}function wh(t,e){var n=Ot;Ot|=2;var r=g5();(Mn!==t||Vn!==e)&&(ss=null,Ua(t,e));do try{D4();break}catch(i){m5(t,i)}while(!0);if(R0(),Ot=n,gh.current=r,jn!==null)throw Error(Fe(261));return Mn=null,Vn=0,Ln}function D4(){for(;jn!==null;)v5(jn)}function F4(){for(;jn!==null&&!lb();)v5(jn)}function v5(t){var e=x5(t.alternate,t,zr);t.memoizedProps=t.pendingProps,e===null?y5(t):jn=e,V0.current=null}function y5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=C4(n,e),n!==null){n.flags&=32767,jn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ln=6,jn=null;return}}else if(n=E4(n,e,zr),n!==null){jn=n;return}if(e=e.sibling,e!==null){jn=e;return}jn=e=t}while(e!==null);Ln===0&&(Ln=5)}function Ca(t,e,n){var r=$t,i=ai.transition;try{ai.transition=null,$t=1,M4(t,e,n,r)}finally{ai.transition=i,$t=r}return null}function M4(t,e,n,r){do pl();while(Gs!==null);if(Ot&6)throw Error(Fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yb(t,s),t===Mn&&(jn=Mn=null,Vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ad||(Ad=!0,b5(eh,function(){return pl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ai.transition,ai.transition=null;var a=$t;$t=1;var o=Ot;Ot|=4,V0.current=null,L4(t,n),h5(n,t),i4(um),nh=!!lm,um=lm=null,t.current=n,R4(n),ub(),Ot=o,$t=a,ai.transition=s}else t.current=n;if(Ad&&(Ad=!1,Gs=t,yh=i),s=t.pendingLanes,s===0&&(ta=null),hb(n.stateNode),Pr(t,vn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vh)throw vh=!1,t=Em,Em=null,t;return yh&1&&t.tag!==0&&pl(),s=t.pendingLanes,s&1?t===Cm?Lu++:(Lu=0,Cm=t):Lu=0,fa(),null}function pl(){if(Gs!==null){var t=Q2(yh),e=ai.transition,n=$t;try{if(ai.transition=null,$t=16>t?16:t,Gs===null)var r=!1;else{if(t=Gs,Gs=null,yh=0,Ot&6)throw Error(Fe(331));var i=Ot;for(Ot|=4,Ye=t.current;Ye!==null;){var s=Ye,a=s.child;if(Ye.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var d=o[l];for(Ye=d;Ye!==null;){var g=Ye;switch(g.tag){case 0:case 11:case 15:Cu(8,g,s)}var m=g.child;if(m!==null)m.return=g,Ye=m;else for(;Ye!==null;){g=Ye;var v=g.sibling,p=g.return;if(u5(g),g===d){Ye=null;break}if(v!==null){v.return=p,Ye=v;break}Ye=p}}}var _=s.alternate;if(_!==null){var S=_.child;if(S!==null){_.child=null;do{var N=S.sibling;S.sibling=null,S=N}while(S!==null)}}Ye=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Ye=a;else e:for(;Ye!==null;){if(s=Ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cu(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,Ye=f;break e}Ye=s.return}}var x=t.current;for(Ye=x;Ye!==null;){a=Ye;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Ye=w;else e:for(a=x;Ye!==null;){if(o=Ye,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Uh(9,o)}}catch(D){dn(o,o.return,D)}if(o===a){Ye=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,Ye=j;break e}Ye=o.return}}if(Ot=i,fa(),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(Rh,t)}catch{}r=!0}return r}finally{$t=n,ai.transition=e}}return!1}function Q1(t,e,n){e=_l(n,e),e=Qy(t,e,1),t=ea(t,e,1),e=pr(),t!==null&&(vc(t,1,e),Pr(t,e))}function dn(t,e,n){if(t.tag===3)Q1(t,t,n);else for(;e!==null;){if(e.tag===3){Q1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ta===null||!ta.has(r))){t=_l(n,t),t=Zy(e,t,1),e=ea(e,t,1),t=pr(),e!==null&&(vc(e,1,t),Pr(e,t));break}}e=e.return}}function z4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pr(),t.pingedLanes|=t.suspendedLanes&n,Mn===t&&(Vn&n)===n&&(Ln===4||Ln===3&&(Vn&130023424)===Vn&&500>vn()-Y0?Ua(t,0):G0|=n),Pr(t,e)}function w5(t,e){e===0&&(t.mode&1?(e=vd,vd<<=1,!(vd&130023424)&&(vd=4194304)):e=1);var n=pr();t=ps(t,e),t!==null&&(vc(t,e,n),Pr(t,n))}function B4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),w5(t,n)}function U4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),w5(t,n)}var x5;x5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jr.current)kr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kr=!1,P4(t,e,n);kr=!!(t.flags&131072)}else kr=!1,en&&e.flags&1048576&&Ny(e,uh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gd(t,e),t=e.pendingProps;var i=yl(e,ar.current);fl(e,n),i=U0(null,e,r,t,i,n);var s=$0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ar(r)?(s=!0,oh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,D0(e),i.updater=Bh,e.stateNode=i,i._reactInternals=e,ym(e,r,t,n),e=bm(null,e,r,!0,s,n)):(e.tag=0,en&&s&&E0(e),hr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=q4(r),t=wi(r,t),i){case 0:e=xm(null,e,r,t,n);break e;case 1:e=$1(null,e,r,t,n);break e;case 11:e=B1(null,e,r,t,n);break e;case 14:e=U1(null,e,r,wi(r.type,t),n);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wi(r,i),xm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wi(r,i),$1(t,e,r,i,n);case 3:e:{if(r5(e),t===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Cy(t,e),hh(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_l(Error(Fe(423)),e),e=q1(t,e,r,n,i);break e}else if(r!==i){i=_l(Error(Fe(424)),e),e=q1(t,e,r,n,i);break e}else for($r=Zs(e.stateNode.containerInfo.firstChild),Wr=e,en=!0,Ni=null,n=Py(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wl(),r===i){e=ms(t,e,n);break e}hr(t,e,r,n)}e=e.child}return e;case 5:return Ty(e),t===null&&mm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,cm(r,i)?a=null:s!==null&&cm(r,s)&&(e.flags|=32),n5(t,e),hr(t,e,a,n),e.child;case 6:return t===null&&mm(e),null;case 13:return i5(t,e,n);case 4:return F0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xl(e,null,r,n):hr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wi(r,i),B1(t,e,r,i,n);case 7:return hr(t,e,e.pendingProps,n),e.child;case 8:return hr(t,e,e.pendingProps.children,n),e.child;case 12:return hr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Jt(ch,r._currentValue),r._currentValue=a,s!==null)if(Ai(s.value,a)){if(s.children===i.children&&!jr.current){e=ms(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ds(-1,n&-n),l.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var g=d.pending;g===null?l.next=l:(l.next=g.next,g.next=l),d.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gm(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Fe(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),gm(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}hr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fl(e,n),i=li(i),r=r(i),e.flags|=1,hr(t,e,r,n),e.child;case 14:return r=e.type,i=wi(r,e.pendingProps),i=wi(r.type,i),U1(t,e,r,i,n);case 15:return e5(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wi(r,i),Gd(t,e),e.tag=1,Ar(r)?(t=!0,oh(e)):t=!1,fl(e,n),Xy(e,r,i),ym(e,r,i,n),bm(null,e,r,!0,t,n);case 19:return s5(t,e,n);case 22:return t5(t,e,n)}throw Error(Fe(156,e.tag))};function b5(t,e){return Y2(t,e)}function $4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(t,e,n,r){return new $4(t,e,n,r)}function Q0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function q4(t){if(typeof t=="function")return Q0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===v0)return 11;if(t===y0)return 14}return 2}function ra(t,e){var n=t.alternate;return n===null?(n=si(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jd(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Q0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Xo:return $a(n.children,i,s,e);case g0:a=8,i|=8;break;case $p:return t=si(12,n,e,i|2),t.elementType=$p,t.lanes=s,t;case qp:return t=si(13,n,e,i),t.elementType=qp,t.lanes=s,t;case Wp:return t=si(19,n,e,i),t.elementType=Wp,t.lanes=s,t;case T2:return qh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E2:a=10;break e;case C2:a=9;break e;case v0:a=11;break e;case y0:a=14;break e;case zs:a=16,r=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=si(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $a(t,e,n,r){return t=si(7,t,r,e),t.lanes=n,t}function qh(t,e,n,r){return t=si(22,t,r,e),t.elementType=T2,t.lanes=n,t.stateNode={isHidden:!1},t}function yp(t,e,n){return t=si(6,t,null,e),t.lanes=n,t}function wp(t,e,n){return e=si(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function W4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zf(0),this.expirationTimes=Zf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Z0(t,e,n,r,i,s,a,o,l){return t=new W4(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=si(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},D0(s),t}function H4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _5(t){if(!t)return oa;t=t._reactInternals;e:{if(to(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if(Ar(n))return _y(t,n,e)}return e}function S5(t,e,n,r,i,s,a,o,l){return t=Z0(n,r,!0,t,i,s,a,o,l),t.context=_5(null),n=t.current,r=pr(),i=na(n),s=ds(r,i),s.callback=e??null,ea(n,s,i),t.current.lanes=i,vc(t,i,r),Pr(t,r),t}function Wh(t,e,n,r){var i=e.current,s=pr(),a=na(i);return n=_5(n),e.context===null?e.context=n:e.pendingContext=n,e=ds(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ea(i,e,a),t!==null&&(ji(t,i,a,s),Wd(t,i,a)),a}function xh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Z1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eg(t,e){Z1(t,e),(t=t.alternate)&&Z1(t,e)}function V4(){return null}var N5=typeof reportError=="function"?reportError:function(t){console.error(t)};function tg(t){this._internalRoot=t}Hh.prototype.render=tg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));Wh(t,e,null,null)};Hh.prototype.unmount=tg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xa(function(){Wh(null,t,null,null)}),e[fs]=null}};function Hh(t){this._internalRoot=t}Hh.prototype.unstable_scheduleHydration=function(t){if(t){var e=ty();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$s.length&&e!==0&&e<$s[n].priority;n++);$s.splice(n,0,t),n===0&&ry(t)}};function ng(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ev(){}function G4(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=xh(a);s.call(d)}}var a=S5(e,r,t,0,null,!1,!1,"",ev);return t._reactRootContainer=a,t[fs]=a.current,Yu(t.nodeType===8?t.parentNode:t),Xa(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var d=xh(l);o.call(d)}}var l=Z0(t,0,!1,null,null,!1,!1,"",ev);return t._reactRootContainer=l,t[fs]=l.current,Yu(t.nodeType===8?t.parentNode:t),Xa(function(){Wh(e,l,n,r)}),l}function Gh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=xh(a);o.call(l)}}Wh(e,a,t,i)}else a=G4(n,e,t,i,r);return xh(a)}Z2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bu(e.pendingLanes);n!==0&&(b0(e,n|1),Pr(e,vn()),!(Ot&6)&&(Sl=vn()+500,fa()))}break;case 13:Xa(function(){var r=ps(t,1);if(r!==null){var i=pr();ji(r,t,1,i)}}),eg(t,1)}};_0=function(t){if(t.tag===13){var e=ps(t,134217728);if(e!==null){var n=pr();ji(e,t,134217728,n)}eg(t,134217728)}};ey=function(t){if(t.tag===13){var e=na(t),n=ps(t,e);if(n!==null){var r=pr();ji(n,t,e,r)}eg(t,e)}};ty=function(){return $t};ny=function(t,e){var n=$t;try{return $t=t,e()}finally{$t=n}};em=function(t,e,n){switch(e){case"input":if(Gp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fh(r);if(!i)throw Error(Fe(90));R2(r),Gp(r,i)}}}break;case"textarea":O2(t,n);break;case"select":e=n.value,e!=null&&ul(t,!!n.multiple,e,!1)}};$2=K0;q2=Xa;var Y4={usingClientEntryPoint:!1,Events:[wc,tl,Fh,B2,U2,K0]},mu={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K4={bundleType:mu.bundleType,version:mu.version,rendererPackageName:mu.rendererPackageName,rendererConfig:mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V2(t),t===null?null:t.stateNode},findFiberByHostInstance:mu.findFiberByHostInstance||V4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pd.isDisabled&&Pd.supportsFiber)try{Rh=Pd.inject(K4),qi=Pd}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y4;Vr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ng(e))throw Error(Fe(200));return H4(t,e,null,n)};Vr.createRoot=function(t,e){if(!ng(t))throw Error(Fe(299));var n=!1,r="",i=N5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Z0(t,1,!1,null,null,n,!1,r,i),t[fs]=e.current,Yu(t.nodeType===8?t.parentNode:t),new tg(e)};Vr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=V2(e),t=t===null?null:t.stateNode,t};Vr.flushSync=function(t){return Xa(t)};Vr.hydrate=function(t,e,n){if(!Vh(e))throw Error(Fe(200));return Gh(null,t,e,!0,n)};Vr.hydrateRoot=function(t,e,n){if(!ng(t))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=N5;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=S5(e,null,t,1,n??null,i,!1,s,a),t[fs]=e.current,Yu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Hh(e)};Vr.render=function(t,e,n){if(!Vh(e))throw Error(Fe(200));return Gh(null,t,e,!1,n)};Vr.unmountComponentAtNode=function(t){if(!Vh(t))throw Error(Fe(40));return t._reactRootContainer?(Xa(function(){Gh(null,null,t,!1,function(){t._reactRootContainer=null,t[fs]=null})}),!0):!1};Vr.unstable_batchedUpdates=K0;Vr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vh(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return Gh(t,e,n,!1,r)};Vr.version="18.3.1-next-f1338f8080-20240426";function k5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k5)}catch(t){console.error(t)}}k5(),k2.exports=Vr;var Yh=k2.exports,j5,tv=Yh;j5=tv.createRoot,tv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rc.apply(this,arguments)}var Ys;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ys||(Ys={}));const nv="popstate";function J4(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return Rm("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bh(i)}return Q4(e,n,null,t)}function bn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function A5(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function X4(){return Math.random().toString(36).substr(2,8)}function rv(t,e){return{usr:t.state,key:t.key,idx:e}}function Rm(t,e,n,r){return n===void 0&&(n=null),rc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?El(e):e,{state:n,key:e&&e.key||r||X4()})}function bh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function El(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Q4(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Ys.Pop,l=null,d=g();d==null&&(d=0,a.replaceState(rc({},a.state,{idx:d}),""));function g(){return(a.state||{idx:null}).idx}function m(){o=Ys.Pop;let N=g(),f=N==null?null:N-d;d=N,l&&l({action:o,location:S.location,delta:f})}function v(N,f){o=Ys.Push;let x=Rm(S.location,N,f);d=g()+1;let w=rv(x,d),j=S.createHref(x);try{a.pushState(w,"",j)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(j)}s&&l&&l({action:o,location:S.location,delta:1})}function p(N,f){o=Ys.Replace;let x=Rm(S.location,N,f);d=g();let w=rv(x,d),j=S.createHref(x);a.replaceState(w,"",j),s&&l&&l({action:o,location:S.location,delta:0})}function _(N){let f=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof N=="string"?N:bh(N);return x=x.replace(/ $/,"%20"),bn(f,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,f)}let S={get action(){return o},get location(){return t(i,a)},listen(N){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(nv,m),l=N,()=>{i.removeEventListener(nv,m),l=null}},createHref(N){return e(i,N)},createURL:_,encodeLocation(N){let f=_(N);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:v,replace:p,go(N){return a.go(N)}};return S}var iv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(iv||(iv={}));function Z4(t,e,n){return n===void 0&&(n="/"),e3(t,e,n,!1)}function e3(t,e,n,r){let i=typeof e=="string"?El(e):e,s=rg(i.pathname||"/",n);if(s==null)return null;let a=P5(t);t3(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let d=h3(s);o=c3(a[l],d,r)}return o}function P5(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(bn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let d=ia([r,l.relativePath]),g=n.concat(l);s.children&&s.children.length>0&&(bn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),P5(s.children,e,g,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:l3(d,s.index),routesMeta:g})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of E5(s.path))i(s,a,l)}),e}function E5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=E5(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function t3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:u3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const n3=/^:[\w-]+$/,r3=3,i3=2,s3=1,a3=10,o3=-2,sv=t=>t==="*";function l3(t,e){let n=t.split("/"),r=n.length;return n.some(sv)&&(r+=o3),e&&(r+=i3),n.filter(i=>!sv(i)).reduce((i,s)=>i+(n3.test(s)?r3:s===""?s3:a3),r)}function u3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function c3(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],d=o===r.length-1,g=s==="/"?e:e.slice(s.length)||"/",m=av({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},g),v=l.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=av({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},g)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:ia([s,m.pathname]),pathnameBase:g3(ia([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=ia([s,m.pathnameBase]))}return a}function av(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=d3(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((d,g,m)=>{let{paramName:v,isOptional:p}=g;if(v==="*"){let S=o[m]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const _=o[m];return p&&!_?d[v]=void 0:d[v]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function d3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),A5(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function h3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return A5(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function f3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?El(t):t;return{pathname:n?n.startsWith("/")?n:p3(n,e):e,search:v3(r),hash:y3(i)}}function p3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function xp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function m3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ig(t,e){let n=m3(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=El(t):(i=rc({},t),bn(!i.pathname||!i.pathname.includes("?"),xp("?","pathname","search",i)),bn(!i.pathname||!i.pathname.includes("#"),xp("#","pathname","hash",i)),bn(!i.search||!i.search.includes("#"),xp("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}o=m>=0?e[m]:"/"}let l=f3(i,o),d=a&&a!=="/"&&a.endsWith("/"),g=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(d||g)&&(l.pathname+="/"),l}const ia=t=>t.join("/").replace(/\/\/+/g,"/"),g3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),v3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,y3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function w3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const C5=["post","put","patch","delete"];new Set(C5);const x3=["get",...C5];new Set(x3);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ic(){return ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ic.apply(this,arguments)}const ag=fe.createContext(null),b3=fe.createContext(null),pa=fe.createContext(null),Kh=fe.createContext(null),Vi=fe.createContext({outlet:null,matches:[],isDataRoute:!1}),T5=fe.createContext(null);function _3(t,e){let{relative:n}=e===void 0?{}:e;Cl()||bn(!1);let{basename:r,navigator:i}=fe.useContext(pa),{hash:s,pathname:a,search:o}=R5(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:ia([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Cl(){return fe.useContext(Kh)!=null}function vs(){return Cl()||bn(!1),fe.useContext(Kh).location}function L5(t){fe.useContext(pa).static||fe.useLayoutEffect(t)}function Yr(){let{isDataRoute:t}=fe.useContext(Vi);return t?F3():S3()}function S3(){Cl()||bn(!1);let t=fe.useContext(ag),{basename:e,future:n,navigator:r}=fe.useContext(pa),{matches:i}=fe.useContext(Vi),{pathname:s}=vs(),a=JSON.stringify(ig(i,n.v7_relativeSplatPath)),o=fe.useRef(!1);return L5(()=>{o.current=!0}),fe.useCallback(function(d,g){if(g===void 0&&(g={}),!o.current)return;if(typeof d=="number"){r.go(d);return}let m=sg(d,JSON.parse(a),s,g.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ia([e,m.pathname])),(g.replace?r.replace:r.push)(m,g.state,g)},[e,r,a,s,t])}const N3=fe.createContext(null);function k3(t){let e=fe.useContext(Vi).outlet;return e&&fe.createElement(N3.Provider,{value:t},e)}function og(){let{matches:t}=fe.useContext(Vi),e=t[t.length-1];return e?e.params:{}}function R5(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=fe.useContext(pa),{matches:i}=fe.useContext(Vi),{pathname:s}=vs(),a=JSON.stringify(ig(i,r.v7_relativeSplatPath));return fe.useMemo(()=>sg(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function j3(t,e){return A3(t,e)}function A3(t,e,n,r){Cl()||bn(!1);let{navigator:i}=fe.useContext(pa),{matches:s}=fe.useContext(Vi),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let d=vs(),g;if(e){var m;let N=typeof e=="string"?El(e):e;l==="/"||(m=N.pathname)!=null&&m.startsWith(l)||bn(!1),g=N}else g=d;let v=g.pathname||"/",p=v;if(l!=="/"){let N=l.replace(/^\//,"").split("/");p="/"+v.replace(/^\//,"").split("/").slice(N.length).join("/")}let _=Z4(t,{pathname:p}),S=L3(_&&_.map(N=>Object.assign({},N,{params:Object.assign({},o,N.params),pathname:ia([l,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?l:ia([l,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r);return e&&S?fe.createElement(Kh.Provider,{value:{location:ic({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Ys.Pop}},S):S}function P3(){let t=D3(),e=w3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return fe.createElement(fe.Fragment,null,fe.createElement("h2",null,"Unexpected Application Error!"),fe.createElement("h3",{style:{fontStyle:"italic"}},e),n?fe.createElement("pre",{style:i},n):null,null)}const E3=fe.createElement(P3,null);class C3 extends fe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?fe.createElement(Vi.Provider,{value:this.props.routeContext},fe.createElement(T5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function T3(t){let{routeContext:e,match:n,children:r}=t,i=fe.useContext(ag);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),fe.createElement(Vi.Provider,{value:e},r)}function L3(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let g=a.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);g>=0||bn(!1),a=a.slice(0,Math.min(a.length,g+1))}let l=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<a.length;g++){let m=a[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=g),m.route.id){let{loaderData:v,errors:p}=n,_=m.route.loader&&v[m.route.id]===void 0&&(!p||p[m.route.id]===void 0);if(m.route.lazy||_){l=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((g,m,v)=>{let p,_=!1,S=null,N=null;n&&(p=o&&m.route.id?o[m.route.id]:void 0,S=m.route.errorElement||E3,l&&(d<0&&v===0?(_=!0,N=null):d===v&&(_=!0,N=m.route.hydrateFallbackElement||null)));let f=e.concat(a.slice(0,v+1)),x=()=>{let w;return p?w=S:_?w=N:m.route.Component?w=fe.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=g,fe.createElement(T3,{match:m,routeContext:{outlet:g,matches:f,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?fe.createElement(C3,{location:n.location,revalidation:n.revalidation,component:S,error:p,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):x()},null)}var I5=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(I5||{}),_h=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_h||{});function R3(t){let e=fe.useContext(ag);return e||bn(!1),e}function I3(t){let e=fe.useContext(b3);return e||bn(!1),e}function O3(t){let e=fe.useContext(Vi);return e||bn(!1),e}function O5(t){let e=O3(),n=e.matches[e.matches.length-1];return n.route.id||bn(!1),n.route.id}function D3(){var t;let e=fe.useContext(T5),n=I3(_h.UseRouteError),r=O5(_h.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function F3(){let{router:t}=R3(I5.UseNavigateStable),e=O5(_h.UseNavigateStable),n=fe.useRef(!1);return L5(()=>{n.current=!0}),fe.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ic({fromRouteId:e},s)))},[t,e])}function M3(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function z3(t){let{to:e,replace:n,state:r,relative:i}=t;Cl()||bn(!1);let{future:s,static:a}=fe.useContext(pa),{matches:o}=fe.useContext(Vi),{pathname:l}=vs(),d=Yr(),g=sg(e,ig(o,s.v7_relativeSplatPath),l,i==="path"),m=JSON.stringify(g);return fe.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:i}),[d,m,i,n,r]),null}function B3(t){return k3(t.context)}function Dn(t){bn(!1)}function U3(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ys.Pop,navigator:s,static:a=!1,future:o}=t;Cl()&&bn(!1);let l=e.replace(/^\/*/,"/"),d=fe.useMemo(()=>({basename:l,navigator:s,static:a,future:ic({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=El(r));let{pathname:g="/",search:m="",hash:v="",state:p=null,key:_="default"}=r,S=fe.useMemo(()=>{let N=rg(g,l);return N==null?null:{location:{pathname:N,search:m,hash:v,state:p,key:_},navigationType:i}},[l,g,m,v,p,_,i]);return S==null?null:fe.createElement(pa.Provider,{value:d},fe.createElement(Kh.Provider,{children:n,value:S}))}function $3(t){let{children:e,location:n}=t;return j3(Im(e),n)}new Promise(()=>{});function Im(t,e){e===void 0&&(e=[]);let n=[];return fe.Children.forEach(t,(r,i)=>{if(!fe.isValidElement(r))return;let s=[...e,i];if(r.type===fe.Fragment){n.push.apply(n,Im(r.props.children,s));return}r.type!==Dn&&bn(!1),!r.props.index||!r.props.children||bn(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Im(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Om(){return Om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Om.apply(this,arguments)}function q3(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function W3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function H3(t,e){return t.button===0&&(!e||e==="_self")&&!W3(t)}const V3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],G3="6";try{window.__reactRouterVersion=G3}catch{}const Y3="startTransition",ov=zx[Y3];function K3(t){let{basename:e,children:n,future:r,window:i}=t,s=fe.useRef();s.current==null&&(s.current=J4({window:i,v5Compat:!0}));let a=s.current,[o,l]=fe.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},g=fe.useCallback(m=>{d&&ov?ov(()=>l(m)):l(m)},[l,d]);return fe.useLayoutEffect(()=>a.listen(g),[a,g]),fe.useEffect(()=>M3(r),[r]),fe.createElement(U3,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const J3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",X3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hn=fe.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:d,preventScrollReset:g,viewTransition:m}=e,v=q3(e,V3),{basename:p}=fe.useContext(pa),_,S=!1;if(typeof d=="string"&&X3.test(d)&&(_=d,J3))try{let w=new URL(window.location.href),j=d.startsWith("//")?new URL(w.protocol+d):new URL(d),D=rg(j.pathname,p);j.origin===w.origin&&D!=null?d=D+j.search+j.hash:S=!0}catch{}let N=_3(d,{relative:i}),f=Q3(d,{replace:a,state:o,target:l,preventScrollReset:g,relative:i,viewTransition:m});function x(w){r&&r(w),w.defaultPrevented||f(w)}return fe.createElement("a",Om({},v,{href:_||N,onClick:S||s?r:x,ref:n,target:l}))});var lv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lv||(lv={}));var uv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uv||(uv={}));function Q3(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=Yr(),d=vs(),g=R5(t,{relative:a});return fe.useCallback(m=>{if(H3(m,n)){m.preventDefault();let v=r!==void 0?r:bh(d)===bh(g);l(t,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[d,l,g,r,i,n,t,s,a,o])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),xt=(t,e)=>{const n=fe.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...d},g)=>fe.createElement("svg",{ref:g,...Z3,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${e_(t)}`,o].join(" "),...d},[...e.map(([m,v])=>fe.createElement(m,v)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=xt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=xt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=xt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=xt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=xt("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=xt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=xt("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=xt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=xt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=xt("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=xt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=xt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=xt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=xt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=xt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=xt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=xt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=xt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=xt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=xt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=xt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=xt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=xt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=xt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=xt("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=xt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=xt("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=xt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=xt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=xt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=xt("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=xt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=xt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=xt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=xt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=xt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=xt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=xt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=xt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=xt("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var W5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(W5);var p_=W5.exports;const fr=l0(p_);function Xh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function m_(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(g){try{d(r.next(g))}catch(m){a(m)}}function l(g){try{d(r.throw(g))}catch(m){a(m)}}function d(g){g.done?s(g.value):i(g.value).then(o,l)}d((r=r.apply(t,e||[])).next())})}const g_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class cg extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class v_ extends cg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hv extends cg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fv extends cg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Mm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Mm||(Mm={}));class y_{constructor(e,{headers:n={},customFetch:r,region:i=Mm.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=g_(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return m_(this,arguments,void 0,function*(n,r={}){var i;let s,a;try{const{headers:o,method:l,body:d,signal:g,timeout:m}=r;let v={},{region:p}=r;p||(p=this.region);const _=new URL(`${this.url}/${n}`);p&&p!=="any"&&(v["x-region"]=p,_.searchParams.set("forceFunctionRegion",p));let S;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",S=d):typeof d=="string"?(v["Content-Type"]="text/plain",S=d):typeof FormData<"u"&&d instanceof FormData?S=d:(v["Content-Type"]="application/json",S=JSON.stringify(d)):S=d;let N=g;m&&(a=new AbortController,s=setTimeout(()=>a.abort(),m),g?(N=a.signal,g.addEventListener("abort",()=>a.abort())):N=a.signal);const f=yield this.fetch(_.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),o),body:S,signal:N}).catch(D=>{throw new v_(D)}),x=f.headers.get("x-relay-error");if(x&&x==="true")throw new hv(f);if(!f.ok)throw new fv(f);let w=((i=f.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return w==="application/json"?j=yield f.json():w==="application/octet-stream"||w==="application/pdf"?j=yield f.blob():w==="text/event-stream"?j=f:w==="multipart/form-data"?j=yield f.formData():j=yield f.text(),{data:j,error:null,response:f}}catch(o){return{data:null,error:o,response:o instanceof fv||o instanceof hv?o.context:void 0}}finally{s&&clearTimeout(s)}})}}var w_=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},x_=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let a=null,o=null,l=null,d=s.status,g=s.statusText;if(s.ok){var m,v;if(n.method!=="HEAD"){var p;const f=await s.text();f===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?o=f:o=JSON.parse(f))}const S=(m=n.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),N=(v=s.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");S&&N&&N.length>1&&(l=parseInt(N[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,d=406,g="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var _;const S=await s.text();try{a=JSON.parse(S),Array.isArray(a)&&s.status===404&&(o=[],a=null,d=200,g="OK")}catch{s.status===404&&S===""?(d=204,g="No Content"):a={message:S}}if(a&&n.isMaybeSingle&&(!(a==null||(_=a.details)===null||_===void 0)&&_.includes("0 rows"))&&(a=null,d=200,g="OK"),a&&n.shouldThrowOnError)throw new w_(a)}return{error:a,data:o,count:l,status:d,statusText:g}});return this.shouldThrowOnError||(i=i.catch(s=>{var a;let o="";const l=s==null?void 0:s.cause;if(l){var d,g,m,v;const _=(d=l==null?void 0:l.message)!==null&&d!==void 0?d:"",S=(g=l==null?void 0:l.code)!==null&&g!==void 0?g:"";o=`${(m=s==null?void 0:s.name)!==null&&m!==void 0?m:"FetchError"}: ${s==null?void 0:s.message}`,o+=`

Caused by: ${(v=l==null?void 0:l.name)!==null&&v!==void 0?v:"Error"}: ${_}`,S&&(o+=` (${S})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var p;o=(p=s==null?void 0:s.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},b_=class extends x_{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var a;const o=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const pv=new RegExp("[,()]");var Wo=class extends b_{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&pv.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&pv.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},__=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Wo({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((a,o)=>a.concat(Object.keys(o)),[]);if(s.length>0){const a=[...new Set(s)].map(o=>`"${o}"`);this.url.searchParams.set("columns",a.join(","))}}return new Wo({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){const l=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new Wo({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Wo({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Wo({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},S_=class H5{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new __(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new H5(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let d;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([m,v])=>v!==void 0).map(([m,v])=>[m,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([m,v])=>{l.searchParams.append(m,v)})):(o="POST",d=n);const g=new Headers(this.headers);return s&&g.set("Prefer",`count=${s}`),new Wo({method:o,url:l,headers:g,schema:this.schemaName,body:d,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class N_{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const k_="2.89.0",j_=`realtime-js/${k_}`,V5="1.0.0",A_="2.0.0",mv=V5,zm=1e4,P_=1e3,E_=100;var Us;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Us||(Us={}));var En;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(En||(En={}));var Si;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Si||(Si={}));var Bm;(function(t){t.websocket="websocket"})(Bm||(Bm={}));var Ia;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ia||(Ia={}));class C_{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,s;const a=e.topic,o=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",d=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(g).length===0?"":JSON.stringify(g);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+d.length+m.length,p=new ArrayBuffer(this.HEADER_LENGTH+v);let _=new DataView(p),S=0;_.setUint8(S++,this.KINDS.userBroadcastPush),_.setUint8(S++,l.length),_.setUint8(S++,o.length),_.setUint8(S++,a.length),_.setUint8(S++,d.length),_.setUint8(S++,m.length),_.setUint8(S++,n),Array.from(l,f=>_.setUint8(S++,f.charCodeAt(0))),Array.from(o,f=>_.setUint8(S++,f.charCodeAt(0))),Array.from(a,f=>_.setUint8(S++,f.charCodeAt(0))),Array.from(d,f=>_.setUint8(S++,f.charCodeAt(0))),Array.from(m,f=>_.setUint8(S++,f.charCodeAt(0)));var N=new Uint8Array(p.byteLength+r.byteLength);return N.set(new Uint8Array(p),0),N.set(new Uint8Array(r),p.byteLength),N.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,a,o,l]=r;return n({join_ref:i,ref:s,topic:a,event:o,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),a=n.getUint8(3),o=n.getUint8(4);let l=this.HEADER_LENGTH+4;const d=r.decode(e.slice(l,l+i));l=l+i;const g=r.decode(e.slice(l,l+s));l=l+s;const m=r.decode(e.slice(l,l+a));l=l+a;const v=e.slice(l,e.byteLength),p=o===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,_={type:this.BROADCAST_EVENT,event:g,payload:p};return a>0&&(_.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class G5{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Kt||(Kt={}));const gv=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=T_(a,t,e,i),s),{}):{}},T_=(t,e,n,r)=>{const i=e.find(o=>o.name===t),s=i==null?void 0:i.type,a=n[t];return s&&!r.includes(s)?Y5(s,a):Um(a)},Y5=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return O_(e,n)}switch(t){case Kt.bool:return L_(e);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return R_(e);case Kt.json:case Kt.jsonb:return I_(e);case Kt.timestamp:return D_(e);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return Um(e);default:return Um(e)}},Um=t=>t,L_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},R_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},I_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},O_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>Y5(e,o))}return t},D_=t=>typeof t=="string"?t.replace(" ","T"):t,K5=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class _p{constructor(e,n,r={},i=zm){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(vv||(vv={}));class Ru{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ru.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Ru.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ru.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(s,(d,g)=>{a[d]||(l[d]=g)}),this.map(a,(d,g)=>{const m=s[d];if(m){const v=g.map(N=>N.presence_ref),p=m.map(N=>N.presence_ref),_=g.filter(N=>p.indexOf(N.presence_ref)<0),S=m.filter(N=>v.indexOf(N.presence_ref)<0);_.length>0&&(o[d]=_),S.length>0&&(l[d]=S)}else o[d]=g}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var d;const g=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(l),g.length>0){const m=e[o].map(p=>p.presence_ref),v=g.filter(p=>m.indexOf(p.presence_ref)<0);e[o].unshift(...v)}r(o,g,l)}),this.map(a,(o,l)=>{let d=e[o];if(!d)return;const g=l.map(m=>m.presence_ref);d=d.filter(m=>g.indexOf(m.presence_ref)<0),e[o]=d,i(o,d,l),d.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(yv||(yv={}));var Iu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Iu||(Iu={}));var as;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(as||(as={}));class ll{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=En.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new _p(this,Si.join,this.params,this.timeout),this.rejoinTimer=new G5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=En.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=En.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=En.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=En.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=En.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Si.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Ru(this),this.broadcastEndpointURL=K5(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==En.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[Iu.PRESENCE]&&this.bindings[Iu.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,m={},v={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:g}),postgres_changes:d,private:l};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(as.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(as.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(as.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,N=(_=S==null?void 0:S.length)!==null&&_!==void 0?_:0,f=[];for(let x=0;x<N;x++){const w=S[x],{filter:{event:j,schema:D,table:T,filter:L}}=w,C=p&&p[x];if(C&&C.event===j&&ll.isFilterValueEqual(C.schema,D)&&ll.isFilterValueEqual(C.table,T)&&ll.isFilterValueEqual(C.filter,L))f.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=En.errored,e==null||e(as.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e(as.SUBSCRIBED);return}}).receive("error",p=>{this.state=En.errored,e==null||e(as.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(as.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===En.joined&&e===Iu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const d=await o.json();l=d.error||d.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=En.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Si.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new _p(this,Si.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=En.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new _p(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>E_){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:d,join:g}=Si;if(r&&[o,l,d,g].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var _,S,N;return((_=p.filter)===null||_===void 0?void 0:_.event)==="*"||((N=(S=p.filter)===null||S===void 0?void 0:S.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===a}).map(p=>p.callback(v,r)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var _,S,N,f,x,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const j=p.id,D=(_=p.filter)===null||_===void 0?void 0:_.event;return j&&((S=n.ids)===null||S===void 0?void 0:S.includes(j))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const j=(x=(f=p==null?void 0:p.filter)===null||f===void 0?void 0:f.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return j==="*"||j===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:S,table:N,commit_timestamp:f,type:x,errors:w}=_;v=Object.assign(Object.assign({},{schema:S,table:N,commit_timestamp:f,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(_))}p.callback(v,r)})}_isClosed(){return this.state===En.closed}_isJoined(){return this.state===En.joined}_isJoining(){return this.state===En.joining}_isLeaving(){return this.state===En.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&ll.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Si.close,{},e)}_onError(e){this._on(Si.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=En.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=gv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=gv(e.columns,e.old_record)),n}}const Sp=()=>{},Ed={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},F_=[1e3,2e3,5e3,1e4],M_=1e4,z_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class B_{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zm,this.transport=null,this.heartbeatIntervalMs=Ed.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sp,this.ref=0,this.reconnectTimer=null,this.vsn=mv,this.logger=Sp,this.conn=null,this.sendBuffer=[],this.serializer=new C_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Bm.websocket}`,this.httpEndpoint=K5(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=N_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Us.connecting:return Ia.Connecting;case Us.open:return Ia.Open;case Us.closing:return Ia.Closing;default:return Ia.Closed}}isConnected(){return this.connectionState()===Ia.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new ll(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(P_,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ed.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${o}`.trim(),s),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Us.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Us.open||this.conn.readyState===Us.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Si.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([z_],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:j_};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(Si.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new G5(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ed.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,a,o,l,d,g,m,v,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:zm,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Ed.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Sp,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:mv,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:_=>F_[_-1]||M_,this.vsn){case V5:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:(_,S)=>S(JSON.stringify(_)),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:(_,S)=>S(JSON.parse(_));break;case A_:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var lc=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function U_(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function $_(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function q_(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:a}){const o=U_(t.baseUrl,r,i),l=await $_(t.auth),d=await e(o,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),g=await d.text(),m=(d.headers.get("content-type")||"").includes("application/json"),v=m&&g?JSON.parse(g):g;if(!d.ok){const p=m?v:void 0,_=p==null?void 0:p.error;throw new lc((_==null?void 0:_.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:_==null?void 0:_.type,icebergCode:_==null?void 0:_.code,details:p})}return{status:d.status,headers:d.headers,data:v}}}}function Cd(t){return t.join("")}var W_=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Cd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Cd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Cd(t.namespace)}`}),!0}catch(e){if(e instanceof lc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof lc&&n.status===409)return;throw n}}};function Ro(t){return t.join("")}var H_=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ro(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ro(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ro(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ro(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ro(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ro(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof lc&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof lc&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},V_=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=q_({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new W_(this.client,e),this.tableOps=new H_(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Qh=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function nn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var G_=class extends Qh{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$m=class extends Qh{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const dg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Y_=()=>Response,qm=t=>{if(Array.isArray(t))return t.map(n=>qm(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=qm(r)}),e},K_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},J_=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function uc(t){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uc(t)}function X_(t,e){if(uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q_(t){var e=X_(t,"string");return uc(e)=="symbol"?e:e+""}function Z_(t,e,n){return(e=Q_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wv(Object(n),!0).forEach(function(r){Z_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Np=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},eS=async(t,e,n)=>{t instanceof await Y_()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,s=(r==null?void 0:r.statusCode)||i+"";e(new G_(Np(r),i,s))}).catch(r=>{e(new $m(Np(r),r))}):e(new $m(Np(t),t))},tS=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(K_(r)?(i.headers=lt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),lt(lt({},i),n))};async function bc(t,e,n,r,i,s){return new Promise((a,o)=>{t(n,tS(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>eS(l,o,r))})}async function cc(t,e,n,r){return bc(t,"GET",e,n,r)}async function xi(t,e,n,r,i){return bc(t,"POST",e,r,i,n)}async function Wm(t,e,n,r,i){return bc(t,"PUT",e,r,i,n)}async function nS(t,e,n,r){return bc(t,"HEAD",e,lt(lt({},n),{},{noResolveJson:!0}),r)}async function hg(t,e,n,r,i){return bc(t,"DELETE",e,r,i,n)}var rS=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(nn(e))return{data:null,error:e};throw e}}};let J5;J5=Symbol.toStringTag;var iS=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[J5]="BlobDownloadBuilder",this.promise=null}asStream(){return new rS(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(nn(e))return{data:null,error:e};throw e}}};const sS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var aS=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=dg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const a=lt(lt({},xv),r);let o=lt(lt({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(o=lt(lt({},o),r.headers));const d=i._removeEmptyFolders(e),g=i._getFinalPath(d),m=await(t=="PUT"?Wm:xi)(i.fetch,`${i.url}/object/${g}`,s,lt({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(nn(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),a=i._getFinalPath(s),o=new URL(i.url+`/object/upload/sign/${a}`);o.searchParams.set("token",e);try{let l;const d=lt({upsert:xv.upsert},r),g=lt(lt({},i.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",d.cacheControl)):(l=n,g["cache-control"]=`max-age=${d.cacheControl}`,g["content-type"]=d.contentType),{data:{path:s,fullPath:(await Wm(i.fetch,o.toString(),l,{headers:g})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(nn(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=lt({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await xi(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+s.url),o=a.searchParams.get("token");if(!o)throw new Qh("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await xi(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await xi(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await xi(r.fetch,`${r.url}/object/sign/${i}`,lt({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await xi(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>lt(lt({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),a=()=>cc(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new iS(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:qm(await cc(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await nS(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(nn(r)&&r instanceof $m){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&r.push(a);let o=r.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}async remove(t){var e=this;try{return{data:await hg(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=lt(lt(lt({},sS),e),{},{prefix:t||""});return{data:await xi(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=lt({},t);return{data:await xi(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const X5="2.89.0",Q5={"X-Client-Info":`storage-js/${X5}`};var oS=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=lt(lt({},Q5),e),this.fetch=dg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await cc(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await cc(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await xi(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await Wm(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await xi(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await hg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},lS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=lt(lt({},Q5),e),this.fetch=dg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await xi(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await cc(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await hg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!J_(t))throw new Qh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new V_({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const a=i[s];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(i,o),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const fg={"X-Client-Info":`storage-js/${X5}`,"Content-Type":"application/json"};var Z5=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Br(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var kp=class extends Z5{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},uS=class extends Z5{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const pg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},bv=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dS=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const a=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";e(new kp(bv(s),r,a))}).catch(()=>{const s=r+"";e(new kp(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new kp(i.statusText||`HTTP ${r} error`,r,s))}}else e(new uS(bv(t),t))},hS=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(cS(r)?(i.headers=lt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,lt(lt({},i),n)):i};async function fS(t,e,n,r,i,s){return new Promise((a,o)=>{t(n,hS(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const d=l.headers.get("content-type");return!d||!d.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>dS(l,o,r))})}async function Ur(t,e,n,r,i){return fS(t,"POST",e,r,i,n)}var pS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=lt(lt({},fg),e),this.fetch=pg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Ur(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await Ur(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Br(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await Ur(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await Ur(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Br(r))return{data:null,error:r};throw r}}},mS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=lt(lt({},fg),e),this.fetch=pg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ur(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await Ur(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Ur(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await Ur(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ur(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}},gS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=lt(lt({},fg),e),this.fetch=pg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Ur(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Ur(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await Ur(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Ur(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Br(n))return{data:null,error:n};throw n}}},vS=class extends gS{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new yS(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},yS=class extends pS{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,lt(lt({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,lt(lt({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new wS(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},wS=class extends mS{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,lt(lt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,lt(lt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,lt(lt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,lt(lt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,lt(lt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},xS=class extends oS{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new aS(this.url,this.headers,t,this.fetch)}get vectors(){return new vS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lS(this.url+"/iceberg",this.headers,this.fetch)}};const ew="2.89.0",Ho=30*1e3,Hm=3,jp=Hm*Ho,bS="http://localhost:9999",_S="supabase.auth.token",SS={"X-Client-Info":`gotrue-js/${ew}`},Vm="X-Supabase-Api-Version",tw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},NS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kS=10*60*1e3;class dc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Xe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class jS extends dc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function AS(t){return Xe(t)&&t.name==="AuthApiError"}class Oa extends dc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ys extends dc{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Mr extends ys{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function PS(t){return Xe(t)&&t.name==="AuthSessionMissingError"}class Io extends ys{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Td extends ys{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ld extends ys{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ES(t){return Xe(t)&&t.name==="AuthImplicitGrantRedirectError"}class _v extends ys{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class CS extends ys{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Gm extends ys{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Ap(t){return Xe(t)&&t.name==="AuthRetryableFetchError"}class Sv extends ys{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ym extends ys{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const jh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nv=` 	
\r=`.split(""),TS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Nv.length;e+=1)t[Nv[e].charCodeAt(0)]=-2;for(let e=0;e<jh.length;e+=1)t[jh[e].charCodeAt(0)]=e;return t})();function kv(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(jh[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(jh[r]),e.queuedBits-=6}}function nw(t,e,n){const r=TS[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function jv(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{IS(a,r,n)};for(let a=0;a<t.length;a+=1)nw(t.charCodeAt(a),i,s);return e.join("")}function LS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function RS(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}LS(r,e)}}function IS(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ml(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)nw(t.charCodeAt(i),n,r);return new Uint8Array(e)}function OS(t){const e=[];return RS(t,n=>e.push(n)),new Uint8Array(e)}function za(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>kv(i,n,r)),kv(null,n,r),e.join("")}function DS(t){return Math.round(Date.now()/1e3)+t}function FS(){return Symbol("auth-callback")}const qn=()=>typeof window<"u"&&typeof document<"u",Aa={tested:!1,writable:!1},rw=()=>{if(!qn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Aa.tested)return Aa.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Aa.tested=!0,Aa.writable=!0}catch{Aa.tested=!0,Aa.writable=!1}return Aa.writable};function MS(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const iw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),zS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Vo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Pa=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},$n=async(t,e)=>{await t.removeItem(e)};class Zh{constructor(){this.promise=new Zh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Zh.promiseConstructor=Promise;function Pp(t){const e=t.split(".");if(e.length!==3)throw new Ym("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!NS.test(e[r]))throw new Ym("JWT not in base64url format");return{header:JSON.parse(jv(e[0])),payload:JSON.parse(jv(e[1])),signature:ml(e[2]),raw:{header:e[0],payload:e[1]}}}async function BS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function US(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function $S(t){return("0"+t.toString(16)).substr(-2)}function qS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,$S).join("")}async function WS(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function HS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await WS(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oo(t,e,n=!1){const r=qS();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Vo(t,`${e}-code-verifier`,i);const s=await HS(r);return[s,r===s?"plain":"s256"]}const VS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function GS(t){const e=t.headers.get(Vm);if(!e||!e.match(VS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function YS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function KS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const JS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Do(t){if(!JS.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ep(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function XS(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Av(t){return JSON.parse(JSON.stringify(t))}const Ta=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),QS=[502,503,504];async function Pv(t){var e;if(!zS(t))throw new Gm(Ta(t),0);if(QS.includes(t.status))throw new Gm(Ta(t),t.status);let n;try{n=await t.json()}catch(s){throw new Oa(Ta(s),s)}let r;const i=GS(t);if(i&&i.getTime()>=tw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Sv(Ta(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Mr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Sv(Ta(n),t.status,n.weak_password.reasons);throw new jS(Ta(n),t.status||500,r)}const ZS=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ot(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Vm]||(s[Vm]=tw["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await eN(t,e,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function eN(t,e,n,r,i,s){const a=ZS(e,r,i,s);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new Gm(Ta(l),0)}if(o.ok||await Pv(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await Pv(l)}}function yi(t){var e;let n=null;rN(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=DS(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Ev(t){const e=yi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ws(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function tN(t){return{data:t,error:null}}function nN(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,a=Xh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Cv(t){return t}function rN(t){return t.access_token&&t.refresh_token&&t.expires_in}const Cp=["global","local","others"];class iN{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=iw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Cp[0]){if(Cp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cp.join(", ")}`);try{return await ot(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ws})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Xh(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:nN,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Xe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ot(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ws})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,a,o,l;try{const d={nextPage:null,lastPage:0,total:0},g=await ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Cv});if(g.error)throw g.error;const m=await g.json(),v=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=g.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(_.split(";")[1].split("=")[1]);d[`${N}Page`]=S}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Xe(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Do(e);try{return await ot(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ws})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Do(e);try{return await ot(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ws})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Do(e);try{return await ot(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ws})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Do(e.userId);try{const{data:n,error:r}=await ot(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Do(e.userId),Do(e.id);try{return{data:await ot(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,a,o,l;try{const d={nextPage:null,lastPage:0,total:0},g=await ot(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Cv});if(g.error)throw g.error;const m=await g.json(),v=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=g.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(_.split(";")[1].split("=")[1]);d[`${N}Page`]=S}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Xe(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await ot(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ot(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ot(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ot(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ot(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}}function Tv(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Fo={debug:!!(globalThis&&rw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class sN extends sw{}async function aN(t,e,n){Fo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Fo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Fo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Fo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new sN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function oN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function aw(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function lN(t){return parseInt(t,16)}function uN(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function cN(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:d,scheme:g,uri:m,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=aw(t.address),_=g?`${g}://${r}`:r,S=t.statement?`${t.statement}
`:"",N=`${_} wants you to sign in with your Ethereum account:
${p}

${S}`;let f=`URI: ${m}
Version: ${v}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(f+=`
Expiration Time: ${i.toISOString()}`),o&&(f+=`
Not Before: ${o.toISOString()}`),l&&(f+=`
Request ID: ${l}`),d){let x=`
Resources:`;for(const w of d){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);x+=`
- ${w}`}f+=x}return`${N}
${f}`}class kn extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Ah extends kn{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function dN({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new kn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new kn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new kn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new kn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new kn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new kn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new kn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(ow(a)){if(s.rp.id!==a)return new kn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new kn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new kn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new kn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new kn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function hN({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new kn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(ow(r)){if(n.rpId!==r)return new kn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new kn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new kn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new kn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class fN{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const pN=new fN;function mN(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Xh(t,["challenge","user","excludeCredentials"]),s=ml(e).buffer,a=Object.assign(Object.assign({},n),{id:ml(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const d=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},d),{id:ml(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function gN(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Xh(t,["challenge","allowCredentials"]),i=ml(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:ml(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function vN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:za(new Uint8Array(t.response.attestationObject)),clientDataJSON:za(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function yN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:za(new Uint8Array(i.authenticatorData)),clientDataJSON:za(new Uint8Array(i.clientDataJSON)),signature:za(new Uint8Array(i.signature)),userHandle:i.userHandle?za(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ow(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Lv(){var t,e;return!!(qn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function wN(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ah("Browser returned unexpected credential type",e)}:{data:null,error:new Ah("Empty credential response",e)}}catch(e){return{data:null,error:dN({error:e,options:t})}}}async function xN(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ah("Browser returned unexpected credential type",e)}:{data:null,error:new Ah("Empty credential response",e)}}catch(e){return{data:null,error:hN({error:e,options:t})}}}const bN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},_N={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ph(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(e(a)){const o=r[s];e(o)?r[s]=Ph(o,a):r[s]=Ph(a)}else r[s]=a}return r}function SN(t,e){return Ph(bN,t,e||{})}function NN(t,e){return Ph(_N,t,e||{})}class kN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:o};const l=i??pN.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=SN(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:g,error:m}=await wN({publicKey:d,signal:l});return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:m}}case"request":{const d=NN(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:g,error:m}=await xN(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:l}));return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:m}}}}catch(a){return Xe(a)?{data:null,error:a}:{data:null,error:new Oa("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new dc("rpId is required for WebAuthn authentication")};try{if(!Lv())return{data:null,error:new Oa("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return Xe(a)?{data:null,error:a}:{data:null,error:new Oa("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new dc("rpId is required for WebAuthn registration")};try{if(!Lv())return{data:null,error:new Oa("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(g=>{var m;return(m=g.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:o};const{data:l,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:d}}catch(a){return Xe(a)?{data:null,error:a}:{data:null,error:new Oa("Unexpected error in register",a)}}}}oN();const jN={url:bS,storageKey:_S,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:SS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Rv(t,e,n){return await n()}const Mo={};class hc{get jwks(){var e,n;return(n=(e=Mo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Mo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},jN),e);if(this.storageKey=s.storageKey,this.instanceID=(n=hc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,hc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&qn()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new iN({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=iw(s.fetch),this.lock=s.lock||Rv,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&qn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=aN:this.lock=Rv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:rw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tv(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Tv(this.memoryStorage)),qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ew}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(qn()&&(n=MS(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),qn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ES(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Xe(n)?this._returnResult({error:n}):this._returnResult({error:new Oa("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:yi}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:d,session:l},error:null})}catch(s){if(Xe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:g,password:m,options:v}=e;let p=null,_=null;this.flowType==="pkce"&&([p,_]=await Oo(this.storage,this.storageKey)),s=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:m,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:p,code_challenge_method:_},xform:yi})}else if("phone"in e){const{phone:g,password:m,options:v}=e;s=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:m,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:yi})}else throw new Td("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return await $n(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:d,session:l},error:null})}catch(s){if(await $n(this.storage,`${this.storageKey}-code-verifier`),Xe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:o}=e;n=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ev})}else if("phone"in e){const{phone:s,password:a,options:o}=e;n=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ev})}else throw new Td("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Io;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,a,o,l,d,g,m,v;let p,_;if("message"in e)p=e.message,_=e.signature;else{const{chain:S,wallet:N,statement:f,options:x}=e;let w;if(qn())if(typeof N=="object")w=N;else{const G=window;if("ethereum"in G&&typeof G.ethereum=="object"&&"request"in G.ethereum&&typeof G.ethereum.request=="function")w=G.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=N}const j=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),D=await w.request({method:"eth_requestAccounts"}).then(G=>G).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=aw(D[0]);let L=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!L){const G=await w.request({method:"eth_chainId"});L=lN(G)}const C={domain:j.host,address:T,statement:f,uri:j.href,version:"1",chainId:L,nonce:(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(g=x==null?void 0:x.signInWithEthereum)===null||g===void 0?void 0:g.resources};p=cN(C),_=await w.request({method:"personal_sign",params:[uN(p),T]})}try{const{data:S,error:N}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:_},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:yi});if(N)throw N;if(!S||!S.session||!S.user){const f=new Io;return this._returnResult({data:{user:null,session:null},error:f})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:N})}catch(S){if(Xe(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(e){var n,r,i,s,a,o,l,d,g,m,v,p;let _,S;if("message"in e)_=e.message,S=e.signature;else{const{chain:N,wallet:f,statement:x,options:w}=e;let j;if(qn())if(typeof f=="object")j=f;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))j=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof f!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=f}const D=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const T=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),x?{statement:x}:null));let L;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")L=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)L=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)_=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),S=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${D.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((m=(g=w==null?void 0:w.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||m===void 0)&&m.length?["Resources",...w.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const T=await j.signMessage(new TextEncoder().encode(_),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=T}}try{const{data:N,error:f}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:za(S)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:yi});if(f)throw f;if(!N||!N.session||!N.user){const x=new Io;return this._returnResult({data:{user:null,session:null},error:x})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:f})}catch(N){if(Xe(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(e){const n=await Pa(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new CS;const{data:s,error:a}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:yi});if(await $n(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new Io;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(await $n(this.storage,`${this.storageKey}-code-verifier`),Xe(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=e,o=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:yi}),{data:l,error:d}=o;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l||!l.session||!l.user){const g=new Io;return this._returnResult({data:{user:null,session:null},error:g})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:d})}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,a;try{if("email"in e){const{email:o,options:l}=e;let d=null,g=null;this.flowType==="pkce"&&([d,g]=await Oo(this.storage,this.storageKey));const{error:m}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:g},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:o,options:l}=e,{data:d,error:g}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:g})}throw new Td("You must provide either an email or phone number.")}catch(o){if(await $n(this.storage,`${this.storageKey}-code-verifier`),Xe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:yi});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,d=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:d,session:l},error:null})}catch(i){if(Xe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Oo(this.storage,this.storageKey));const d=await ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:tN});return!((s=d.data)===null||s===void 0)&&s.url&&qn()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(o){if(await $n(this.storage,`${this.storageKey}-code-verifier`),Xe(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Mr;const{error:i}=await ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Xe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await ot(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:o}=await ot(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new Td("You must provide either an email or phone number and a type")}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Pa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<jp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await Pa(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Ep()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=XS(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ws}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Mr}:await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ws})})}catch(n){if(Xe(n))return PS(n)&&(await this._removeSession(),await $n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Mr;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Oo(this.storage,this.storageKey));const{data:d,error:g}=await ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Ws});if(g)throw g;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await $n(this.storage,`${this.storageKey}-code-verifier`),Xe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Mr;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=Pp(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Xe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Mr;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!qn())throw new Ld("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ld(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _v("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ld("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _v("No code detected.");const{data:x,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:d}=e;if(!s||!o||!a||!d)throw new Ld("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(o);let v=g+m;l&&(v=parseInt(l));const p=v-g;p*1e3<=Ho&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${m}s`);const _=v-m;g-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,g):g-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,g);const{data:S,error:N}=await this._getUser(s);if(N)throw N;const f={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:v,refresh_token:a,token_type:d,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:f,redirectType:e.type},error:null})}catch(r){if(Xe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Pa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(AS(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await $n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=FS(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Oo(this.storage,this.storageKey,!0));try{return await ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await $n(this.storage,`${this.storageKey}-code-verifier`),Xe(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,d,g;const{data:m,error:v}=s;if(v)throw v;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ot(this.fetch,"GET",p,{headers:this.headers,jwt:(g=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return qn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Xe(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:o,token:l,access_token:d,nonce:g}=e,m=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:d,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:yi}),{data:v,error:p}=m;return p?this._returnResult({data:{user:null,session:null},error:p}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Io}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:p}))}catch(i){if(await $n(this.storage,`${this.storageKey}-code-verifier`),Xe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await ot(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await US(async i=>(i>0&&await BS(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yi})),(i,s)=>{const a=200*Math.pow(2,i);return s&&Ap(s)&&Date.now()+a-r<Ho})}catch(r){if(this._debug(n,"error",r),Xe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),qn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Pa(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Pa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Vo(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Ep()}else if(i&&!i.user&&!i.user){const a=await Pa(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await $n(this.storage,this.storageKey+"-user"),await Vo(this.storage,this.storageKey,i)):i.user=Ep()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<jp;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${jp}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Ap(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Mr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Zh;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Mr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),Xe(s)){const a={data:null,error:s};return Ap(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await $n(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Vo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Av(i);await Vo(this.storage,this.storageKey,s)}else{const i=Av(n);await Vo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await $n(this.storage,this.storageKey),await $n(this.storage,this.storageKey+"-code-verifier"),await $n(this.storage,this.storageKey+"-user"),this.userStorage&&await $n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ho);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ho);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ho}ms, refresh threshold is ${Hm} ticks`),i<=Hm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Oo(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await ot(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:d}=await ot(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?vN(e.webauthn.credential_response):yN(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await ot(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await ot(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:mN(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:gN(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Pp(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const d=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ot(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Mr})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Mr});const a=await ot(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&qn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Xe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Mr});const a=await ot(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&qn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Xe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ot(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Mr})})}catch(e){if(Xe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ot(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Mr})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+kS>i)return r;const{data:s,error:a}=await ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:_}=await this.getSession();if(_||!p.session)return this._returnResult({data:null,error:_});r=p.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=Pp(r);n!=null&&n.allowExpired||YS(s.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:a},error:null}}const g=KS(i.alg),m=await crypto.subtle.importKey("jwk",d,g,!0,["verify"]);if(!await crypto.subtle.verify(g,m,a,OS(`${o}.${l}`)))throw new Ym("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(Xe(r))return this._returnResult({data:null,error:r});throw r}}}hc.nextInstanceID={};const AN=hc,PN="2.89.0";let Su="";typeof Deno<"u"?Su="deno":typeof document<"u"?Su="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Su="react-native":Su="node";const EN={"X-Client-Info":`supabase-js-${Su}/${PN}`},CN={headers:EN},TN={schema:"public"},LN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RN={};function fc(t){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(t)}function IN(t,e){if(fc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ON(t){var e=IN(t,"string");return fc(e)=="symbol"?e:e+""}function DN(t,e,n){return(e=ON(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Iv(Object(n),!0).forEach(function(r){DN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Iv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const FN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),MN=()=>Headers,zN=(t,e,n)=>{const r=FN(n),i=MN();return async(s,a)=>{var o;const l=(o=await e())!==null&&o!==void 0?o:t;let d=new i(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(s,cn(cn({},a),{},{headers:d}))}};function BN(t){return t.endsWith("/")?t:t+"/"}function UN(t,e){var n,r;const{db:i,auth:s,realtime:a,global:o}=t,{db:l,auth:d,realtime:g,global:m}=e,v={db:cn(cn({},l),i),auth:cn(cn({},d),s),realtime:cn(cn({},g),a),storage:{},global:cn(cn(cn({},m),o),{},{headers:cn(cn({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function $N(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(BN(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var qN=class extends AN{constructor(t){super(t)}},WN=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=$N(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const a=`sb-${s.hostname.split(".")[0]}-auth-token`,o={db:TN,realtime:RN,auth:cn(cn({},LN),{},{storageKey:a}),global:CN},l=UN(n??{},o);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(g,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=l.auth)!==null&&d!==void 0?d:{},this.headers,l.global.fetch)}this.fetch=zN(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(cn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new S_(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new xS(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new y_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:a,lock:o,debug:l,throwOnError:d},g,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qN({url:this.authUrl.href,headers:cn(cn({},v),g),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:o,debug:l,throwOnError:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new B_(this.realtimeUrl.href,cn(cn({},t),{},{params:cn(cn({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const HN=(t,e,n)=>new WN(t,e,n);function VN(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}VN()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const GN="https://fwctdtyteesfcstncwez.supabase.co",YN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ3Y3RkdHl0ZWVzZmNzdG5jd2V6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzNDQyNjAsImV4cCI6MjA4MTkyMDI2MH0.KoasyQfV9mX3GzXuTn4aqLVwoLOyECjy3J7bNjq7an8",ct=HN(GN,YN),lw=fe.createContext(void 0),KN=({children:t})=>{const[e,n]=fe.useState(null),[r,i]=fe.useState(null),[s,a]=fe.useState(!0);fe.useEffect(()=>{let S=!0;(async()=>{try{const{data:{session:x}}=await ct.auth.getSession();if(!S)return;x&&(await o(x.user),i(x))}catch(x){console.error("Error initializing auth:",x)}finally{S&&a(!1)}})();const{data:{subscription:f}}=ct.auth.onAuthStateChange((x,w)=>{S&&(async()=>(i(w),w!=null&&w.user?await o(w.user):n(null)))()});return()=>{S=!1,f.unsubscribe()}},[]);const o=async S=>{try{const{data:N,error:f}=await ct.from("user_profiles").select("id, person_id, is_admin").eq("id",S.id).maybeSingle();if(f){console.error("Error loading user profile:",f);return}N&&n({id:N.id,personId:N.person_id,isAdmin:N.is_admin,email:S.email||""})}catch(N){console.error("Error loading user profile:",N)}},_={user:e,loading:s,session:r,signUp:async(S,N,f)=>{try{const{data:x,error:w}=await ct.auth.signUp({email:S,password:N});if(w)return{error:w};if(x.user){const{error:j}=await ct.from("user_profiles").insert({id:x.user.id,person_id:f||null,is_admin:!1});if(j)return console.error("Error creating user profile:",j),{error:new Error("Failed to create user profile")}}return{error:null}}catch(x){return{error:x}}},signIn:async(S,N)=>{try{const{error:f}=await ct.auth.signInWithPassword({email:S,password:N});return f?{error:f}:{error:null}}catch(f){return{error:f}}},signOut:async()=>{try{await ct.auth.signOut(),n(null),i(null)}catch(S){console.error("Error signing out:",S)}},resetPassword:async S=>{try{const{error:N}=await ct.auth.resetPasswordForEmail(S,{redirectTo:`${window.location.origin}/reset-password`});return N?{error:N}:{error:null}}catch(N){return{error:N}}},updatePassword:async S=>{try{const{error:N}=await ct.auth.updateUser({password:S});return N?{error:N}:{error:null}}catch(N){return{error:N}}},checkIsAdmin:()=>(e==null?void 0:e.isAdmin)||!1};return c.jsx(lw.Provider,{value:_,children:t})},Tl=()=>{const t=fe.useContext(lw);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},JN=({message:t,type:e,onClose:n,duration:r=5e3})=>{fe.useEffect(()=>{const a=setTimeout(()=>{n()},r);return()=>clearTimeout(a)},[r,n]);const i={success:c.jsx(a_,{className:"h-5 w-5 text-green-400"}),error:c.jsx(t_,{className:"h-5 w-5 text-red-400"}),info:c.jsx(is,{className:"h-5 w-5 text-blue-400"})},s={success:"bg-green-50 text-green-800 border-green-200",error:"bg-red-50 text-red-800 border-red-200",info:"bg-blue-50 text-blue-800 border-blue-200"};return Yh.createPortal(c.jsx("div",{className:"fixed top-4 right-4 z-50 animate-fade-in",children:c.jsx("div",{className:`rounded-lg border p-4 shadow-lg ${s[e]}`,children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:i[e]}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm font-medium",children:t})}),c.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:c.jsxs("button",{type:"button",className:"inline-flex rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:n,children:[c.jsx("span",{className:"sr-only",children:"Chiudi"}),c.jsx(kl,{className:"h-5 w-5"})]})})]})})}),document.body)},uw=fe.createContext(void 0),XN=({children:t})=>{const[e,n]=fe.useState(null),r=(i,s)=>{n({message:i,type:s})};return c.jsxs(uw.Provider,{value:{showToast:r},children:[t,e&&c.jsx(JN,{message:e.message,type:e.type,onClose:()=>n(null)})]})},ma=()=>{const t=fe.useContext(uw);if(t===void 0)throw new Error("useToast must be used within a ToastProvider");return t},QN=()=>{const[t,e]=fe.useState(!1),n=vs(),r=Yr(),{user:i,signOut:s}=Tl(),{showToast:a}=ma(),o=v=>n.pathname===v,l=()=>{e(!t)},d=()=>{e(!1)},g=async()=>{try{await s(),a("Disconnesso con successo","success"),r("/login"),e(!1)}catch(v){console.error("Errore durante il logout:",v),a("Errore durante la disconnessione","error")}},m=[{path:"/",label:"Home",icon:c.jsx(M5,{size:20})},{path:"/persone",label:"Persone",icon:c.jsx($5,{size:20})},{path:"/tragitti",label:"Trasferte",icon:c.jsx(z5,{size:20})},{path:"/percorsi",label:"Destinazioni",icon:c.jsx(ug,{size:20})},{path:"/spese",label:"Spese",icon:c.jsx(ac,{size:20})},{path:"/alloggi",label:"Alloggi",icon:c.jsx(Sh,{size:20})},{path:"/report",label:"Report",icon:c.jsx(D5,{size:20})}];return c.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[c.jsx("header",{className:"bg-teal-700 text-white shadow-md",children:c.jsx("div",{className:"container mx-auto px-4 py-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"ITFV Rimborsi Spese"}),c.jsxs(Hn,{to:"/tragitti/nuovo",className:"hidden lg:flex items-center space-x-2 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2.5 px-5 rounded-lg shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(oi,{size:20}),c.jsx("span",{children:"Nuova Trasferta"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs(Hn,{to:"/tragitti/nuovo",className:"lg:hidden flex items-center space-x-1 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2 px-3 rounded-lg shadow-lg transition-all",children:[c.jsx(oi,{size:18}),c.jsx("span",{className:"hidden sm:inline",children:"Nuovo"})]}),c.jsx("button",{className:"md:hidden p-2 hover:bg-teal-600 rounded-lg transition-colors",onClick:l,"aria-label":t?"Chiudi menu":"Apri menu",children:t?c.jsx(kl,{size:24}):c.jsx(h_,{size:24})}),c.jsxs("nav",{className:"hidden md:flex items-center space-x-4",children:[m.map(v=>c.jsxs(Hn,{to:v.path,className:fr("flex items-center space-x-1 py-2 px-3 rounded-md transition-colors text-sm",{"bg-teal-600 text-white":o(v.path),"hover:bg-teal-600/60":!o(v.path)}),children:[v.icon,c.jsx("span",{children:v.label})]},v.path)),i&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-white text-sm px-2 border-l border-teal-500 ml-2",children:i.email}),c.jsxs("button",{onClick:g,className:"flex items-center space-x-1 py-2 px-3 rounded-md transition-colors hover:bg-teal-600/60 text-sm",children:[c.jsx(cv,{size:18}),c.jsx("span",{children:"Logout"})]})]})]})]})]})})}),t&&c.jsx("div",{className:"md:hidden bg-white shadow-lg absolute top-20 right-0 left-0 z-50 transition-all",children:c.jsxs("nav",{className:"flex flex-col p-4",children:[c.jsxs(Hn,{to:"/tragitti/nuovo",className:"flex items-center justify-center space-x-3 py-4 px-4 mb-4 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-bold text-lg shadow-lg transition-all",onClick:d,children:[c.jsx(oi,{size:24}),c.jsx("span",{children:"Nuova Trasferta"})]}),c.jsx("div",{className:"border-t border-gray-200 mb-2"}),m.map(v=>c.jsxs(Hn,{to:v.path,className:fr("flex items-center space-x-3 py-3 px-4 rounded-md transition-colors",{"bg-teal-100 text-teal-800":o(v.path),"hover:bg-gray-100":!o(v.path)}),onClick:d,children:[v.icon,c.jsx("span",{className:"font-medium",children:v.label})]},v.path)),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-t border-gray-200 my-2"}),c.jsx("div",{className:"py-2 px-4 text-sm text-gray-600",children:i.email}),c.jsxs("button",{onClick:g,className:"flex items-center space-x-3 py-3 px-4 rounded-md transition-colors text-red-600 hover:bg-red-50 font-medium",children:[c.jsx(cv,{size:20}),c.jsx("span",{children:"Logout"})]})]})]})}),c.jsx("main",{className:"flex-grow container mx-auto px-4 py-6",children:c.jsx(B3,{})}),c.jsx("footer",{className:"bg-gray-800 text-white py-4",children:c.jsxs("div",{className:"container mx-auto px-4 text-center text-sm",children:[c.jsxs("p",{children:[" ",new Date().getFullYear()," Istituto Veneto di Terapia Familiare"]}),c.jsx("p",{className:"mt-1",children:"Via della Quercia 2/B, Treviso"})]})})]})},ZN=({children:t})=>{const{user:e,loading:n}=Tl(),r=vs();return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Caricamento..."})]})}):e?c.jsx(c.Fragment,{children:t}):c.jsx(z3,{to:"/login",state:{from:r},replace:!0})},zn=({children:t,title:e,footer:n,className:r,contentClassName:i})=>c.jsxs("div",{className:fr("bg-white rounded-lg shadow-md overflow-hidden",r),children:[e&&c.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e})}),c.jsx("div",{className:fr("p-6",i),children:t}),n&&c.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200",children:n})]});function Pi(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Qa(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const cw=6048e5,e6=864e5;let t6={};function ef(){return t6}function Za(t,e){var o,l,d,g;const n=ef(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((g=(d=n.locale)==null?void 0:d.options)==null?void 0:g.weekStartsOn)??0,i=Pi(t),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Eh(t){return Za(t,{weekStartsOn:1})}function dw(t){const e=Pi(t),n=e.getFullYear(),r=Qa(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Eh(r),s=Qa(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=Eh(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function Ov(t){const e=Pi(t);return e.setHours(0,0,0,0),e}function Dv(t){const e=Pi(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function n6(t,e){const n=Ov(t),r=Ov(e),i=+n-Dv(n),s=+r-Dv(r);return Math.round((i-s)/e6)}function r6(t){const e=dw(t),n=Qa(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Eh(n)}function i6(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function s6(t){if(!i6(t)&&typeof t!="number")return!1;const e=Pi(t);return!isNaN(Number(e))}function a6(t){const e=Pi(t),n=Qa(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const o6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},l6=(t,e,n)=>{let r;const i=o6[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function gl(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const u6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},c6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},d6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},h6={date:gl({formats:u6,defaultWidth:"full"}),time:gl({formats:c6,defaultWidth:"full"}),dateTime:gl({formats:d6,defaultWidth:"full"})},f6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},p6=(t,e,n,r)=>f6[t];function Bi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const m6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},g6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},v6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},y6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},w6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},x6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},b6=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_6={ordinalNumber:b6,era:Bi({values:m6,defaultWidth:"wide"}),quarter:Bi({values:g6,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Bi({values:v6,defaultWidth:"wide"}),day:Bi({values:y6,defaultWidth:"wide"}),dayPeriod:Bi({values:w6,defaultWidth:"wide",formattingValues:x6,defaultFormattingWidth:"wide"})};function Ui(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?N6(o,m=>m.test(a)):S6(o,m=>m.test(a));let d;d=t.valueCallback?t.valueCallback(l):l,d=n.valueCallback?n.valueCallback(d):d;const g=e.slice(a.length);return{value:d,rest:g}}}function S6(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function N6(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function hw(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const k6=/^(\d+)(th|st|nd|rd)?/i,j6=/\d+/i,A6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},P6={any:[/^b/i,/^(a|c)/i]},E6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},C6={any:[/1/i,/2/i,/3/i,/4/i]},T6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},L6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},R6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},I6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},O6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},D6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},F6={ordinalNumber:hw({matchPattern:k6,parsePattern:j6,valueCallback:t=>parseInt(t,10)}),era:Ui({matchPatterns:A6,defaultMatchWidth:"wide",parsePatterns:P6,defaultParseWidth:"any"}),quarter:Ui({matchPatterns:E6,defaultMatchWidth:"wide",parsePatterns:C6,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ui({matchPatterns:T6,defaultMatchWidth:"wide",parsePatterns:L6,defaultParseWidth:"any"}),day:Ui({matchPatterns:R6,defaultMatchWidth:"wide",parsePatterns:I6,defaultParseWidth:"any"}),dayPeriod:Ui({matchPatterns:O6,defaultMatchWidth:"any",parsePatterns:D6,defaultParseWidth:"any"})},M6={code:"en-US",formatDistance:l6,formatLong:h6,formatRelative:p6,localize:_6,match:F6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function z6(t){const e=Pi(t);return n6(e,a6(e))+1}function B6(t){const e=Pi(t),n=+Eh(e)-+r6(e);return Math.round(n/cw)+1}function fw(t,e){var g,m,v,p;const n=Pi(t),r=n.getFullYear(),i=ef(),s=(e==null?void 0:e.firstWeekContainsDate)??((m=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(v=i.locale)==null?void 0:v.options)==null?void 0:p.firstWeekContainsDate)??1,a=Qa(t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Za(a,e),l=Qa(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const d=Za(l,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function U6(t,e){var o,l,d,g;const n=ef(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(d=n.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??1,i=fw(t,e),s=Qa(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Za(s,e)}function $6(t,e){const n=Pi(t),r=+Za(n,e)-+U6(n,e);return Math.round(r/cw)+1}function Bt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Is={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Bt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Bt(n+1,2)},d(t,e){return Bt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Bt(t.getHours()%12||12,e.length)},H(t,e){return Bt(t.getHours(),e.length)},m(t,e){return Bt(t.getMinutes(),e.length)},s(t,e){return Bt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Bt(i,e.length)}},zo={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fv={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Is.y(t,e)},Y:function(t,e,n,r){const i=fw(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Bt(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Bt(s,e.length)},R:function(t,e){const n=dw(t);return Bt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Bt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Bt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Bt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Is.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Bt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=$6(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Bt(i,e.length)},I:function(t,e,n){const r=B6(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Bt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Is.d(t,e)},D:function(t,e,n){const r=z6(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Bt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Bt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Bt(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Bt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=zo.noon:r===0?i=zo.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=zo.evening:r>=12?i=zo.afternoon:r>=4?i=zo.morning:i=zo.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Is.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Is.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Bt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Bt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Is.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Is.s(t,e)},S:function(t,e){return Is.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return zv(r);case"XXXX":case"XX":return La(r);case"XXXXX":case"XXX":default:return La(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return zv(r);case"xxxx":case"xx":return La(r);case"xxxxx":case"xxx":default:return La(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Mv(r,":");case"OOOO":default:return"GMT"+La(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Mv(r,":");case"zzzz":default:return"GMT"+La(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Bt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Bt(r,e.length)}};function Mv(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Bt(s,2)}function zv(t,e){return t%60===0?(t>0?"-":"+")+Bt(Math.abs(t)/60,2):La(t,e)}function La(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Bt(Math.trunc(r/60),2),s=Bt(r%60,2);return n+i+e+s}const Bv=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},pw=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},q6=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Bv(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Bv(r,e)).replace("{{time}}",pw(i,e))},W6={p:pw,P:q6},H6=/^D+$/,V6=/^Y+$/,G6=["D","DD","YY","YYYY"];function Y6(t){return H6.test(t)}function K6(t){return V6.test(t)}function J6(t,e,n){const r=X6(t,e,n);if(console.warn(r),G6.includes(t))throw new RangeError(r)}function X6(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Q6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Z6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ek=/^'([^]*?)'?$/,tk=/''/g,nk=/[a-zA-Z]/;function rk(t,e,n){var g,m,v,p,_,S,N,f;const r=ef(),i=(n==null?void 0:n.locale)??r.locale??M6,s=(n==null?void 0:n.firstWeekContainsDate)??((m=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(v=r.locale)==null?void 0:v.options)==null?void 0:p.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((S=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:S.weekStartsOn)??r.weekStartsOn??((f=(N=r.locale)==null?void 0:N.options)==null?void 0:f.weekStartsOn)??0,o=Pi(t);if(!s6(o))throw new RangeError("Invalid time value");let l=e.match(Z6).map(x=>{const w=x[0];if(w==="p"||w==="P"){const j=W6[w];return j(x,i.formatLong)}return x}).join("").match(Q6).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const w=x[0];if(w==="'")return{isToken:!1,value:ik(x)};if(Fv[w])return{isToken:!0,value:x};if(w.match(nk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:x}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const d={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(x=>{if(!x.isToken)return x.value;const w=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&K6(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Y6(w))&&J6(w,e,String(t));const j=Fv[w[0]];return j(o,w,i.localize,d)}).join("")}function ik(t){const e=t.match(ek);return e?e[1].replace(tk,"'"):t}function Uv(t,e,n){const r=Za(t,n),i=Za(e,n);return+r==+i}const sk={lessThanXSeconds:{one:"meno di un secondo",other:"meno di {{count}} secondi"},xSeconds:{one:"un secondo",other:"{{count}} secondi"},halfAMinute:"alcuni secondi",lessThanXMinutes:{one:"meno di un minuto",other:"meno di {{count}} minuti"},xMinutes:{one:"un minuto",other:"{{count}} minuti"},aboutXHours:{one:"circa un'ora",other:"circa {{count}} ore"},xHours:{one:"un'ora",other:"{{count}} ore"},xDays:{one:"un giorno",other:"{{count}} giorni"},aboutXWeeks:{one:"circa una settimana",other:"circa {{count}} settimane"},xWeeks:{one:"una settimana",other:"{{count}} settimane"},aboutXMonths:{one:"circa un mese",other:"circa {{count}} mesi"},xMonths:{one:"un mese",other:"{{count}} mesi"},aboutXYears:{one:"circa un anno",other:"circa {{count}} anni"},xYears:{one:"un anno",other:"{{count}} anni"},overXYears:{one:"pi di un anno",other:"pi di {{count}} anni"},almostXYears:{one:"quasi un anno",other:"quasi {{count}} anni"}},ak=(t,e,n)=>{let r;const i=sk[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"tra "+r:r+" fa":r},ok={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},lk={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},uk={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},ck={date:gl({formats:ok,defaultWidth:"full"}),time:gl({formats:lk,defaultWidth:"full"}),dateTime:gl({formats:uk,defaultWidth:"full"})},mg=["domenica","luned","marted","mercoled","gioved","venerd","sabato"];function dk(t){switch(t){case 0:return"'domenica scorsa alle' p";default:return"'"+mg[t]+" scorso alle' p"}}function $v(t){return"'"+mg[t]+" alle' p"}function hk(t){switch(t){case 0:return"'domenica prossima alle' p";default:return"'"+mg[t]+" prossimo alle' p"}}const fk={lastWeek:(t,e,n)=>{const r=t.getDay();return Uv(t,e,n)?$v(r):dk(r)},yesterday:"'ieri alle' p",today:"'oggi alle' p",tomorrow:"'domani alle' p",nextWeek:(t,e,n)=>{const r=t.getDay();return Uv(t,e,n)?$v(r):hk(r)},other:"P"},pk=(t,e,n,r)=>{const i=fk[t];return typeof i=="function"?i(e,n,r):i},mk={narrow:["aC","dC"],abbreviated:["a.C.","d.C."],wide:["avanti Cristo","dopo Cristo"]},gk={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},vk={narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],abbreviated:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],wide:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},yk={narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],abbreviated:["dom","lun","mar","mer","gio","ven","sab"],wide:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},wk={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"}},xk={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"}},bk=(t,e)=>{const n=Number(t);return String(n)},_k={ordinalNumber:bk,era:Bi({values:mk,defaultWidth:"wide"}),quarter:Bi({values:gk,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Bi({values:vk,defaultWidth:"wide"}),day:Bi({values:yk,defaultWidth:"wide"}),dayPeriod:Bi({values:wk,defaultWidth:"wide",formattingValues:xk,defaultFormattingWidth:"wide"})},Sk=/^(\d+)()?/i,Nk=/\d+/i,kk={narrow:/^(aC|dC)/i,abbreviated:/^(a\.?\s?C\.?|a\.?\s?e\.?\s?v\.?|d\.?\s?C\.?|e\.?\s?v\.?)/i,wide:/^(avanti Cristo|avanti Era Volgare|dopo Cristo|Era Volgare)/i},jk={any:[/^a/i,/^(d|e)/i]},Ak={narrow:/^[1234]/i,abbreviated:/^t[1234]/i,wide:/^[1234]()? trimestre/i},Pk={any:[/1/i,/2/i,/3/i,/4/i]},Ek={narrow:/^[gfmalsond]/i,abbreviated:/^(gen|feb|mar|apr|mag|giu|lug|ago|set|ott|nov|dic)/i,wide:/^(gennaio|febbraio|marzo|aprile|maggio|giugno|luglio|agosto|settembre|ottobre|novembre|dicembre)/i},Ck={narrow:[/^g/i,/^f/i,/^m/i,/^a/i,/^m/i,/^g/i,/^l/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ge/i,/^f/i,/^mar/i,/^ap/i,/^mag/i,/^gi/i,/^l/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},Tk={narrow:/^[dlmgvs]/i,short:/^(do|lu|ma|me|gi|ve|sa)/i,abbreviated:/^(dom|lun|mar|mer|gio|ven|sab)/i,wide:/^(domenica|luned[i|]|marted[i|]|mercoled[i|]|gioved[i|]|venerd[i|]|sabato)/i},Lk={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^g/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^me/i,/^g/i,/^v/i,/^s/i]},Rk={narrow:/^(a|m\.|p|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i,any:/^([ap]\.?\s?m\.?|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i},Ik={any:{am:/^a/i,pm:/^p/i,midnight:/^mezza/i,noon:/^mezzo/i,morning:/mattina/i,afternoon:/pomeriggio/i,evening:/sera/i,night:/notte/i}},Ok={ordinalNumber:hw({matchPattern:Sk,parsePattern:Nk,valueCallback:t=>parseInt(t,10)}),era:Ui({matchPatterns:kk,defaultMatchWidth:"wide",parsePatterns:jk,defaultParseWidth:"any"}),quarter:Ui({matchPatterns:Ak,defaultMatchWidth:"wide",parsePatterns:Pk,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ui({matchPatterns:Ek,defaultMatchWidth:"wide",parsePatterns:Ck,defaultParseWidth:"any"}),day:Ui({matchPatterns:Tk,defaultMatchWidth:"wide",parsePatterns:Lk,defaultParseWidth:"any"}),dayPeriod:Ui({matchPatterns:Rk,defaultMatchWidth:"any",parsePatterns:Ik,defaultParseWidth:"any"})},Dk={code:"it",formatDistance:ak,formatLong:ck,formatRelative:pk,localize:_k,match:Ok,options:{weekStartsOn:1,firstWeekContainsDate:4}},mw=fe.createContext(void 0),Fk=({children:t})=>{const[e,n]=fe.useState({people:[],vehicles:[],trips:[],savedRoutes:[],tollBooths:[],tripExpenses:[],accommodations:[],favoriteDestinations:[]}),[r,i]=fe.useState(!0);fe.useEffect(()=>{s()},[]);const s=async()=>{try{i(!0);const[P,H,J,Y,be,we,Pe,je,He,Ne]=await Promise.all([ct.from("people").select("*").order("surname",{ascending:!0}).order("name",{ascending:!0}),ct.from("vehicles").select("*").order("created_at",{ascending:!1}),ct.from("trips").select("*").order("date",{ascending:!1}),ct.from("saved_routes").select("*").order("created_at",{ascending:!1}),ct.from("route_distances").select("*"),ct.from("toll_booths").select("*").order("usage_count",{ascending:!1}),ct.from("trip_meals").select("*"),ct.from("trip_expenses").select("*").order("date",{ascending:!1}),ct.from("accommodations").select("*").order("date_from",{ascending:!1}),ct.from("favorite_destinations").select("*").order("name",{ascending:!0})]),se=(P.data||[]).map(me=>({id:me.id,name:me.name,surname:me.surname||"",isDocente:me.is_docente||!1,isAmministratore:me.is_amministratore||!1,isDipendente:me.is_dipendente||!1})),Qe=(H.data||[]).map(me=>({id:me.id,personId:me.person_id,make:me.make||"",model:me.model,plate:me.plate||me.license_plate,reimbursementRate:parseFloat(me.reimbursement_rate)})),Ue=new Map;(Pe.data||[]).forEach(me=>{Ue.has(me.trip_id)||Ue.set(me.trip_id,[]),Ue.get(me.trip_id).push({id:me.id,tripId:me.trip_id,mealType:me.meal_type,amount:parseFloat(me.amount)})});const Le=(J.data||[]).map(me=>({id:me.id,date:me.date,personId:me.person_id,vehicleId:me.vehicle_id,tripRole:me.trip_role,origin:me.origin,destination:me.destination,distance:parseFloat(me.distance),purpose:me.purpose||"",isRoundTrip:me.is_round_trip||!1,savedRouteId:me.saved_route_id,selectedDistanceId:me.selected_distance_id,hasToll:me.has_toll||!1,tollEntryStation:me.toll_entry_station,tollExitStation:me.toll_exit_station,tollAmount:me.toll_amount?parseFloat(me.toll_amount):void 0,returnTollEntryStation:me.return_toll_entry_station,returnTollExitStation:me.return_toll_exit_station,returnTollAmount:me.return_toll_amount?parseFloat(me.return_toll_amount):void 0,hasMeal:me.has_meal||!1,mealType:me.meal_type,mealAmount:me.meal_amount?parseFloat(me.meal_amount):void 0,meals:Ue.get(me.id)||[]})),Oe=new Map;(be.data||[]).forEach(me=>{Oe.has(me.route_id)||Oe.set(me.route_id,[]),Oe.get(me.route_id).push({id:me.id,label:me.label,distance:parseFloat(me.distance),tollEntryStation:me.toll_entry_station,tollExitStation:me.toll_exit_station,tollAmount:me.toll_amount?parseFloat(me.toll_amount):void 0})});const ae=(Y.data||[]).map(me=>({id:me.id,name:me.name,origin:me.origin,destination:me.destination,distances:Oe.get(me.id)||[]})),oe=(we.data||[]).map(me=>({id:me.id,entryStation:me.entry_station,exitStation:me.exit_station,amount:parseFloat(me.amount),usageCount:me.usage_count,lastUsed:me.last_used,createdAt:me.created_at,updatedAt:me.updated_at})),ye=(je.data||[]).map(me=>({id:me.id,personId:me.person_id,tripId:me.trip_id||void 0,date:me.date,expenseType:me.expense_type,description:me.description||"",fromLocation:me.from_location||"",toLocation:me.to_location||"",amount:parseFloat(me.amount),notes:me.notes||"",createdAt:me.created_at})),De=(He.data||[]).map(me=>({id:me.id,personId:me.person_id,dateFrom:me.date_from,dateTo:me.date_to,location:me.location||"",amount:parseFloat(me.amount),notes:me.notes||"",createdAt:me.created_at})),Me=(Ne.data||[]).map(me=>({id:me.id,name:me.name,address:me.address,defaultDistance:parseFloat(me.default_distance),createdAt:me.created_at,updatedAt:me.updated_at}));n({people:se,vehicles:Qe,trips:Le,savedRoutes:ae,tollBooths:oe,tripExpenses:ye,accommodations:De,favoriteDestinations:Me})}catch(P){console.error("Error loading data:",P)}finally{i(!1)}},a=async P=>{const{data:H,error:J}=await ct.from("people").insert([{name:P.name,surname:P.surname,is_docente:P.isDocente,is_amministratore:P.isAmministratore,is_dipendente:P.isDipendente}]).select().single();if(J)throw J;n(Y=>({...Y,people:[{id:H.id,name:H.name,surname:H.surname,isDocente:H.is_docente||!1,isAmministratore:H.is_amministratore||!1,isDipendente:H.is_dipendente||!1},...Y.people]}))},o=async P=>{const{error:H}=await ct.from("people").update({name:P.name,surname:P.surname,is_docente:P.isDocente,is_amministratore:P.isAmministratore,is_dipendente:P.isDipendente}).eq("id",P.id);if(H)throw H;n(J=>({...J,people:J.people.map(Y=>Y.id===P.id?P:Y)}))},l=async P=>{const{error:H}=await ct.from("people").delete().eq("id",P);if(H)throw H;n(J=>({...J,people:J.people.filter(Y=>Y.id!==P),vehicles:J.vehicles.filter(Y=>Y.personId!==P),trips:J.trips.filter(Y=>Y.personId!==P),tripExpenses:J.tripExpenses.filter(Y=>Y.personId!==P),accommodations:J.accommodations.filter(Y=>Y.personId!==P)}))},d=async P=>{const{data:H,error:J}=await ct.from("vehicles").insert([{person_id:P.personId,make:P.make,model:P.model,plate:P.plate,license_plate:P.plate,reimbursement_rate:P.reimbursementRate}]).select().single();if(J)throw J;n(Y=>({...Y,vehicles:[{id:H.id,personId:H.person_id,make:H.make,model:H.model,plate:H.plate,reimbursementRate:parseFloat(H.reimbursement_rate)},...Y.vehicles]}))},g=async P=>{const{error:H}=await ct.from("vehicles").update({person_id:P.personId,make:P.make,model:P.model,plate:P.plate,license_plate:P.plate,reimbursement_rate:P.reimbursementRate}).eq("id",P.id);if(H)throw H;n(J=>({...J,vehicles:J.vehicles.map(Y=>Y.id===P.id?P:Y)}))},m=async P=>{const{error:H}=await ct.from("vehicles").delete().eq("id",P);if(H)throw H;n(J=>({...J,vehicles:J.vehicles.filter(Y=>Y.id!==P),trips:J.trips.filter(Y=>Y.vehicleId!==P)}))},v=async(P,H)=>{const{data:J,error:Y}=await ct.from("trips").insert([{person_id:P.personId,vehicle_id:P.vehicleId,trip_role:P.tripRole,saved_route_id:P.savedRouteId,selected_distance_id:P.selectedDistanceId,date:P.date,origin:P.origin,destination:P.destination,distance:P.distance,purpose:P.purpose,is_round_trip:P.isRoundTrip,has_toll:P.hasToll||!1,toll_entry_station:P.tollEntryStation,toll_exit_station:P.tollExitStation,toll_amount:P.tollAmount,return_toll_entry_station:P.returnTollEntryStation,return_toll_exit_station:P.returnTollExitStation,return_toll_amount:P.returnTollAmount,has_meal:H&&H.length>0||P.hasMeal||!1,meal_type:P.mealType,meal_amount:P.mealAmount}]).select().single();if(Y)throw Y;let be=[];if(H&&H.length>0){const{data:we,error:Pe}=await ct.from("trip_meals").insert(H.map(je=>({trip_id:J.id,meal_type:je.mealType,amount:je.amount}))).select();if(Pe)throw Pe;be=(we||[]).map(je=>({id:je.id,tripId:je.trip_id,mealType:je.meal_type,amount:parseFloat(je.amount)}))}P.hasToll&&P.tollEntryStation&&P.tollExitStation&&P.tollAmount&&await E(P.tollEntryStation,P.tollExitStation,P.tollAmount),P.isRoundTrip&&P.returnTollEntryStation&&P.returnTollExitStation&&P.returnTollAmount&&await E(P.returnTollEntryStation,P.returnTollExitStation,P.returnTollAmount),n(we=>({...we,trips:[{id:J.id,date:J.date,personId:J.person_id,vehicleId:J.vehicle_id,tripRole:J.trip_role,origin:J.origin,destination:J.destination,distance:parseFloat(J.distance),purpose:J.purpose,isRoundTrip:J.is_round_trip,savedRouteId:J.saved_route_id,selectedDistanceId:J.selected_distance_id,hasToll:J.has_toll||!1,tollEntryStation:J.toll_entry_station,tollExitStation:J.toll_exit_station,tollAmount:J.toll_amount?parseFloat(J.toll_amount):void 0,returnTollEntryStation:J.return_toll_entry_station,returnTollExitStation:J.return_toll_exit_station,returnTollAmount:J.return_toll_amount?parseFloat(J.return_toll_amount):void 0,hasMeal:J.has_meal||!1,mealType:J.meal_type,mealAmount:J.meal_amount?parseFloat(J.meal_amount):void 0,meals:be},...we.trips]}))},p=async(P,H)=>{const{error:J}=await ct.from("trips").update({person_id:P.personId,vehicle_id:P.vehicleId,trip_role:P.tripRole,saved_route_id:P.savedRouteId,selected_distance_id:P.selectedDistanceId,date:P.date,origin:P.origin,destination:P.destination,distance:P.distance,purpose:P.purpose,is_round_trip:P.isRoundTrip,has_toll:P.hasToll||!1,toll_entry_station:P.tollEntryStation,toll_exit_station:P.tollExitStation,toll_amount:P.tollAmount,return_toll_entry_station:P.returnTollEntryStation,return_toll_exit_station:P.returnTollExitStation,return_toll_amount:P.returnTollAmount,has_meal:H&&H.length>0||P.hasMeal||!1,meal_type:P.mealType,meal_amount:P.mealAmount}).eq("id",P.id);if(J)throw J;let Y=P.meals||[];if(H!==void 0)if(await ct.from("trip_meals").delete().eq("trip_id",P.id),H.length>0){const{data:be,error:we}=await ct.from("trip_meals").insert(H.map(Pe=>({trip_id:P.id,meal_type:Pe.mealType,amount:Pe.amount}))).select();if(we)throw we;Y=(be||[]).map(Pe=>({id:Pe.id,tripId:Pe.trip_id,mealType:Pe.meal_type,amount:parseFloat(Pe.amount)}))}else Y=[];P.hasToll&&P.tollEntryStation&&P.tollExitStation&&P.tollAmount&&await E(P.tollEntryStation,P.tollExitStation,P.tollAmount),P.isRoundTrip&&P.returnTollEntryStation&&P.returnTollExitStation&&P.returnTollAmount&&await E(P.returnTollEntryStation,P.returnTollExitStation,P.returnTollAmount),n(be=>({...be,trips:be.trips.map(we=>we.id===P.id?{...P,meals:Y}:we)}))},_=async P=>{const{error:H}=await ct.from("trips").delete().eq("id",P);if(H)throw H;n(J=>({...J,trips:J.trips.filter(Y=>Y.id!==P)}))},S=async P=>{const{data:H,error:J}=await ct.from("saved_routes").insert([{name:P.name,origin:P.origin,destination:P.destination}]).select().single();if(J)throw J;const Y={id:H.id,name:H.name,origin:H.origin,destination:H.destination,distances:[]};if(P.distances&&P.distances.length>0){const be=P.distances.map(je=>({route_id:H.id,label:je.label,distance:je.distance,toll_entry_station:je.tollEntryStation,toll_exit_station:je.tollExitStation,toll_amount:je.tollAmount})),{data:we,error:Pe}=await ct.from("route_distances").insert(be).select();if(Pe)throw Pe;Y.distances=(we||[]).map(je=>({id:je.id,label:je.label,distance:parseFloat(je.distance),tollEntryStation:je.toll_entry_station,tollExitStation:je.toll_exit_station,tollAmount:je.toll_amount?parseFloat(je.toll_amount):void 0}))}n(be=>({...be,savedRoutes:[Y,...be.savedRoutes]}))},N=async P=>{const{error:H}=await ct.from("saved_routes").update({name:P.name,origin:P.origin,destination:P.destination}).eq("id",P.id);if(H)throw H;n(J=>({...J,savedRoutes:J.savedRoutes.map(Y=>Y.id===P.id?P:Y)}))},f=async P=>{const{error:H}=await ct.from("saved_routes").delete().eq("id",P);if(H)throw H;n(J=>({...J,savedRoutes:J.savedRoutes.filter(Y=>Y.id!==P)}))},x=async(P,H)=>{const{data:J,error:Y}=await ct.from("route_distances").insert([{route_id:P,label:H.label,distance:H.distance,toll_entry_station:H.tollEntryStation,toll_exit_station:H.tollExitStation,toll_amount:H.tollAmount}]).select().single();if(Y)throw Y;const be={id:J.id,label:J.label,distance:parseFloat(J.distance),tollEntryStation:J.toll_entry_station,tollExitStation:J.toll_exit_station,tollAmount:J.toll_amount?parseFloat(J.toll_amount):void 0};n(we=>({...we,savedRoutes:we.savedRoutes.map(Pe=>Pe.id===P?{...Pe,distances:[...Pe.distances,be]}:Pe)}))},w=async(P,H)=>{const{error:J}=await ct.from("route_distances").update({label:H.label,distance:H.distance,toll_entry_station:H.tollEntryStation,toll_exit_station:H.tollExitStation,toll_amount:H.tollAmount}).eq("id",H.id);if(J)throw J;n(Y=>({...Y,savedRoutes:Y.savedRoutes.map(be=>be.id===P?{...be,distances:be.distances.map(we=>we.id===H.id?H:we)}:be)}))},j=async(P,H)=>{const{error:J}=await ct.from("route_distances").delete().eq("id",H);if(J)throw J;n(Y=>({...Y,savedRoutes:Y.savedRoutes.map(be=>be.id===P?{...be,distances:be.distances.filter(we=>we.id!==H)}:be)}))},D=async P=>{const{data:H,error:J}=await ct.from("trip_expenses").insert([{person_id:P.personId,trip_id:P.tripId||null,date:P.date,expense_type:P.expenseType,description:P.description,from_location:P.fromLocation,to_location:P.toLocation,amount:P.amount,notes:P.notes}]).select().single();if(J)throw J;n(Y=>({...Y,tripExpenses:[{id:H.id,personId:H.person_id,tripId:H.trip_id||void 0,date:H.date,expenseType:H.expense_type,description:H.description||"",fromLocation:H.from_location||"",toLocation:H.to_location||"",amount:parseFloat(H.amount),notes:H.notes||"",createdAt:H.created_at},...Y.tripExpenses]}))},T=async P=>{const{error:H}=await ct.from("trip_expenses").update({person_id:P.personId,date:P.date,expense_type:P.expenseType,description:P.description,from_location:P.fromLocation,to_location:P.toLocation,amount:P.amount,notes:P.notes}).eq("id",P.id);if(H)throw H;n(J=>({...J,tripExpenses:J.tripExpenses.map(Y=>Y.id===P.id?P:Y)}))},L=async P=>{const{error:H}=await ct.from("trip_expenses").delete().eq("id",P);if(H)throw H;n(J=>({...J,tripExpenses:J.tripExpenses.filter(Y=>Y.id!==P)}))},C=async P=>{const{data:H,error:J}=await ct.from("accommodations").insert([{person_id:P.personId,date_from:P.dateFrom,date_to:P.dateTo,location:P.location,amount:P.amount,notes:P.notes}]).select().single();if(J)throw J;n(Y=>({...Y,accommodations:[{id:H.id,personId:H.person_id,dateFrom:H.date_from,dateTo:H.date_to,location:H.location||"",amount:parseFloat(H.amount),notes:H.notes||"",createdAt:H.created_at},...Y.accommodations]}))},G=async P=>{const{error:H}=await ct.from("accommodations").update({person_id:P.personId,date_from:P.dateFrom,date_to:P.dateTo,location:P.location,amount:P.amount,notes:P.notes}).eq("id",P.id);if(H)throw H;n(J=>({...J,accommodations:J.accommodations.map(Y=>Y.id===P.id?P:Y)}))},Z=async P=>{const{error:H}=await ct.from("accommodations").delete().eq("id",P);if(H)throw H;n(J=>({...J,accommodations:J.accommodations.filter(Y=>Y.id!==P)}))},R=async P=>{const{data:H,error:J}=await ct.from("favorite_destinations").insert([{name:P.name,address:P.address,default_distance:P.defaultDistance}]).select().single();if(J)throw J;n(Y=>({...Y,favoriteDestinations:[...Y.favoriteDestinations,{id:H.id,name:H.name,address:H.address,defaultDistance:parseFloat(H.default_distance),createdAt:H.created_at,updatedAt:H.updated_at}].sort((be,we)=>be.name.localeCompare(we.name))}))},A=async P=>{const{error:H}=await ct.from("favorite_destinations").update({name:P.name,address:P.address,default_distance:P.defaultDistance,updated_at:new Date().toISOString()}).eq("id",P.id);if(H)throw H;n(J=>({...J,favoriteDestinations:J.favoriteDestinations.map(Y=>Y.id===P.id?P:Y).sort((Y,be)=>Y.name.localeCompare(be.name))}))},q=async P=>{const{error:H}=await ct.from("favorite_destinations").delete().eq("id",P);if(H)throw H;n(J=>({...J,favoriteDestinations:J.favoriteDestinations.filter(Y=>Y.id!==P)}))},K=(P,H,J,Y)=>{if(!e.people.find(ye=>ye.id===P))return null;const we=new Date(H);we.setHours(0,0,0,0);const Pe=new Date(J);Pe.setHours(23,59,59,999);const je=ye=>{const De=new Date(ye);return De>=we&&De<=Pe},He=e.trips.filter(ye=>ye.personId===P&&je(ye.date)),Ne=e.tripExpenses.filter(ye=>ye.personId===P&&je(ye.date)),se=e.accommodations.filter(ye=>{const De=new Date(ye.dateFrom),Me=new Date(ye.dateTo);return ye.personId===P&&De<=Pe&&Me>=we});let Qe=0,Ue=0,Le=0,Oe=0;He.forEach(ye=>{const De=e.vehicles.find(Me=>Me.id===ye.vehicleId);if(De){const Me=ye.isRoundTrip?ye.distance*2:ye.distance;Qe+=Me,Ue+=Me*De.reimbursementRate}ye.hasToll&&ye.tollAmount&&(Le+=ye.isRoundTrip?ye.tollAmount*2:ye.tollAmount),ye.isRoundTrip&&ye.returnTollAmount&&(Le+=ye.returnTollAmount),ye.meals&&ye.meals.length>0?ye.meals.forEach(Me=>{Oe+=Me.amount}):ye.hasMeal&&ye.mealAmount&&(Oe+=ye.mealAmount)});const ae=Ne.reduce((ye,De)=>ye+De.amount,0),oe=se.reduce((ye,De)=>ye+De.amount,0);return He.length===0&&Ne.length===0&&se.length===0?null:{dateFrom:we,dateTo:Pe,periodLabel:Y,personId:P,trips:He,totalDistance:Qe,totalReimbursement:Ue,totalTollFees:Le,totalMealReimbursement:Oe,expenses:Ne,totalExpenses:ae,accommodations:se,totalAccommodations:oe}},te=P=>e.people.find(H=>H.id===P),$=P=>e.vehicles.find(H=>H.id===P),Q=P=>e.vehicles.filter(H=>H.personId===P),V=P=>e.savedRoutes.find(H=>H.id===P),B=(P,H)=>{var J;return(J=V(P))==null?void 0:J.distances.find(Y=>Y.id===H)},ie=(P,H)=>e.tollBooths.find(J=>J.entryStation.toLowerCase()===P.toLowerCase()&&J.exitStation.toLowerCase()===H.toLowerCase()),ve=async P=>{const H=P.toLowerCase(),J=new Set;return e.tollBooths.forEach(Y=>{Y.entryStation.toLowerCase().includes(H)&&J.add(Y.entryStation),Y.exitStation.toLowerCase().includes(H)&&J.add(Y.exitStation)}),Array.from(J).sort((Y,be)=>{const we=e.tollBooths.filter(je=>je.entryStation===Y||je.exitStation===Y).reduce((je,He)=>je+He.usageCount,0);return e.tollBooths.filter(je=>je.entryStation===be||je.exitStation===be).reduce((je,He)=>je+He.usageCount,0)-we})},E=async(P,H,J)=>{if(!P.trim()||!H.trim()||J<=0)return;const Y=ie(P,H);if(Y){const{data:be,error:we}=await ct.from("toll_booths").update({amount:J,usage_count:Y.usageCount+1,last_used:new Date().toISOString()}).eq("id",Y.id).select().single();if(we){console.error("Error updating toll booth:",we);return}n(Pe=>({...Pe,tollBooths:Pe.tollBooths.map(je=>je.id===Y.id?{...je,amount:parseFloat(be.amount),usageCount:be.usage_count,lastUsed:be.last_used,updatedAt:be.updated_at}:je)}))}else{const{data:be,error:we}=await ct.from("toll_booths").insert([{entry_station:P,exit_station:H,amount:J,usage_count:1,last_used:new Date().toISOString()}]).select().single();if(we){console.error("Error creating toll booth:",we);return}n(Pe=>({...Pe,tollBooths:[{id:be.id,entryStation:be.entry_station,exitStation:be.exit_station,amount:parseFloat(be.amount),usageCount:be.usage_count,lastUsed:be.last_used,createdAt:be.created_at,updatedAt:be.updated_at},...Pe.tollBooths]}))}},ne={state:e,addPerson:a,updatePerson:o,deletePerson:l,addVehicle:d,updateVehicle:g,deleteVehicle:m,addTrip:v,updateTrip:p,deleteTrip:_,addSavedRoute:S,updateSavedRoute:N,deleteSavedRoute:f,addRouteDistance:x,updateRouteDistance:w,deleteRouteDistance:j,addTripExpense:D,updateTripExpense:T,deleteTripExpense:L,addAccommodation:C,updateAccommodation:G,deleteAccommodation:Z,addFavoriteDestination:R,updateFavoriteDestination:A,deleteFavoriteDestination:q,generateMonthlyReport:(P,H,J)=>{if(!e.people.find(oe=>oe.id===P))return null;const be=new Date(J,H,1),we=new Date(J,H+1,0),Pe=oe=>{const ye=new Date(oe);return ye>=be&&ye<=we},je=e.trips.filter(oe=>oe.personId===P&&Pe(oe.date)),He=e.tripExpenses.filter(oe=>oe.personId===P&&Pe(oe.date)),Ne=e.accommodations.filter(oe=>{const ye=new Date(oe.dateFrom),De=new Date(oe.dateTo);return oe.personId===P&&ye<=we&&De>=be});let se=0,Qe=0,Ue=0,Le=0;je.forEach(oe=>{const ye=e.vehicles.find(De=>De.id===oe.vehicleId);if(ye){const De=oe.isRoundTrip?oe.distance*2:oe.distance;se+=De,Qe+=De*ye.reimbursementRate}oe.hasToll&&oe.tollAmount&&(Ue+=oe.isRoundTrip?oe.tollAmount*2:oe.tollAmount),oe.meals&&oe.meals.length>0?oe.meals.forEach(De=>{Le+=De.amount}):oe.hasMeal&&oe.mealAmount&&(Le+=oe.mealAmount)});const Oe=He.reduce((oe,ye)=>oe+ye.amount,0),ae=Ne.reduce((oe,ye)=>oe+ye.amount,0);return je.length===0&&He.length===0&&Ne.length===0?null:{month:H,year:J,personId:P,trips:je,totalDistance:se,totalReimbursement:Qe,totalTollFees:Ue,totalMealReimbursement:Le,expenses:He,totalExpenses:Oe,accommodations:Ne,totalAccommodations:ae}},generatePeriodReport:K,getPerson:te,getVehicle:$,getVehiclesForPerson:Q,getSavedRoute:V,getRouteDistance:B,getTollBooth:ie,searchTollStations:ve,handleTollBoothOnTripSave:E,formatDate:P=>rk(new Date(P),"dd MMMM yyyy",{locale:Dk}),loading:r};return c.jsx(mw.Provider,{value:ne,children:t})},Kr=()=>{const t=fe.useContext(mw);if(t===void 0)throw new Error("useAppContext must be used within an AppProvider");return t},Mk=()=>{const{state:t}=Kr(),e=new Date().getMonth(),n=new Date().getFullYear(),r=t.trips.filter(s=>{const a=new Date(s.date);return a.getMonth()===e&&a.getFullYear()===n}),i=[{title:"Persone",value:t.people.length,icon:c.jsx($5,{className:"h-8 w-8 text-blue-500"}),link:"/persone",color:"bg-blue-100"},{title:"Trasferte Totali",value:t.trips.length,icon:c.jsx(z5,{className:"h-8 w-8 text-purple-500"}),link:"/tragitti",color:"bg-purple-100"},{title:"Trasferte Questo Mese",value:r.length,icon:c.jsx(D5,{className:"h-8 w-8 text-amber-500"}),link:"/report",color:"bg-amber-100"},{title:"Destinazioni Abituali",value:t.favoriteDestinations.length,icon:c.jsx(Nh,{className:"h-8 w-8 text-rose-500"}),link:"/percorsi",color:"bg-rose-100"}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Gestione Rimborsi Spese di Trasferta"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Istituto Veneto di Terapia Familiare"})]}),c.jsx(Hn,{to:"/tragitti/nuovo",className:"block group",children:c.jsx("div",{className:"bg-gradient-to-r from-amber-400 to-amber-500 hover:from-amber-500 hover:to-amber-600 text-white rounded-xl shadow-xl p-8 transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl",children:c.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[c.jsxs("div",{className:"flex items-center space-x-6",children:[c.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-5 rounded-2xl",children:c.jsx(oi,{size:48,className:"text-white"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Nuova Trasferta"}),c.jsx("p",{className:"text-amber-50 text-lg",children:"Registra una nuova trasferta con chilometri, pedaggi e vitto"})]})]}),c.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-full group-hover:bg-white/30 transition-colors",children:c.jsx(r_,{size:32,className:"text-white"})})]})})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map(s=>c.jsx(Hn,{to:s.link,className:"transition-transform hover:scale-105",children:c.jsx(zn,{className:"h-full hover:shadow-lg transition-shadow",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`${s.color} p-4 rounded-lg mr-4`,children:s.icon}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s.title}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.value})]})]})})},s.title))}),c.jsxs(zn,{title:"Benvenuto nell'applicazione",children:[c.jsx("p",{className:"text-gray-600 mb-4",children:"Questa applicazione ti permette di gestire i rimborsi spese di trasferta (chilometri, pedaggi e vitto) per il personale dell'Istituto Veneto di Terapia Familiare."}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Funzionalit:"}),c.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[c.jsx("li",{children:"Gestione unificata di persone e veicoli"}),c.jsx("li",{children:"Tracciamento trasferte con calcolo automatico dei rimborsi"}),c.jsx("li",{children:"Supporto per chilometri, pedaggi autostradali e vitto"}),c.jsx("li",{children:"Percorsi salvati con opzioni multiple di distanza"}),c.jsx("li",{children:"Selezione automatica del veicolo per persona"}),c.jsx("li",{children:"Generazione di report mensili dettagliati"})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Per iniziare:"}),c.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[c.jsxs("li",{children:["Aggiungi il personale e i loro veicoli in ",c.jsx(Hn,{to:"/persone",className:"text-teal-600 hover:underline",children:"Persone"})]}),c.jsxs("li",{children:["Crea destinazioni abituali in ",c.jsx(Hn,{to:"/percorsi",className:"text-teal-600 hover:underline",children:"Destinazioni Abituali"})]}),c.jsxs("li",{children:["Registra le trasferte in ",c.jsx(Hn,{to:"/tragitti",className:"text-teal-600 hover:underline",children:"Trasferte"})]}),c.jsxs("li",{children:["Genera report mensili nella sezione ",c.jsx(Hn,{to:"/report",className:"text-teal-600 hover:underline",children:"Report"})]})]})]})]})]}),c.jsx(zn,{title:"Novit - Gestione Completa Trasferte",children:c.jsxs("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-teal-800 mb-2",children:" Rimborsi completi"}),c.jsx("p",{className:"text-teal-700 text-sm mb-3",children:"Ora puoi gestire tutte le spese di trasferta in un'unica soluzione: chilometri, pedaggi autostradali e rimborsi vitto (pranzo/cena)."}),c.jsx("h4",{className:"font-semibold text-teal-800 mb-2",children:" Veicoli integrati"}),c.jsx("p",{className:"text-teal-700 text-sm mb-3",children:"Gestisci i veicoli direttamente dalla pagina di ogni persona. Il veicolo viene automaticamente selezionato durante l'inserimento della trasferta."}),c.jsx("h4",{className:"font-semibold text-teal-800 mb-2",children:" Percorsi con opzioni multiple"}),c.jsx("p",{className:"text-teal-700 text-sm",children:"I percorsi salvati supportano pi opzioni di distanza (strada normale, autostrada, ecc.) con pedaggi preimpostati."})]})})]})},gt=({children:t,variant:e="primary",size:n="md",icon:r,iconPosition:i="left",fullWidth:s=!1,className:a,disabled:o,confirmMessage:l,onClick:d,...g})=>{const m=S=>{l&&!window.confirm(l)||d==null||d(S)},v={primary:"bg-teal-600 hover:bg-teal-700 text-white",secondary:"bg-gray-600 hover:bg-gray-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",warning:"bg-amber-500 hover:bg-amber-600 text-white",info:"bg-blue-600 hover:bg-blue-700 text-white"},p={sm:"text-xs py-1 px-2 rounded",md:"text-sm py-2 px-4 rounded-md",lg:"text-base py-3 px-6 rounded-lg"},_=fr("font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-opacity-50 inline-flex items-center justify-center",v[e],p[n],{"opacity-60 cursor-not-allowed":o,"w-full":s,"focus:ring-teal-400":e==="primary","focus:ring-gray-400":e==="secondary","focus:ring-green-400":e==="success","focus:ring-red-400":e==="danger","focus:ring-amber-400":e==="warning","focus:ring-blue-400":e==="info"},a);return c.jsxs("button",{className:_,disabled:o,onClick:m,...g,children:[r&&i==="left"&&c.jsx("span",{className:"mr-2",children:r}),t,r&&i==="right"&&c.jsx("span",{className:"ml-2",children:r})]})};function Km({columns:t,data:e,keyExtractor:n,onRowClick:r,className:i,emptyMessage:s="Nessun dato disponibile"}){return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:fr("min-w-full divide-y divide-gray-200",i),children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:t.map(a=>c.jsx("th",{scope:"col",className:fr("px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",a.className),children:a.header},a.key))})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length>0?e.map(a=>c.jsx("tr",{className:fr({"hover:bg-gray-50 cursor-pointer":r}),onClick:r?()=>r(a):void 0,children:t.map(o=>c.jsx("td",{className:fr("px-6 py-4 text-sm text-gray-500",o.className),children:o.render?o.render(a):a[o.key]},`${n(a)}-${o.key}`))},n(a))):c.jsx("tr",{children:c.jsx("td",{colSpan:t.length,className:"px-6 py-4 text-sm text-gray-500 text-center",children:s})})})]})})}const zk=()=>{const{state:t,deletePerson:e}=Kr(),n=Yr(),[r,i]=fe.useState(""),s=l=>{window.confirm("Sei sicuro di voler eliminare questa persona? Verranno eliminati anche tutti i veicoli e i tragitti associati.")&&e(l)},a=t.people.filter(l=>l.name.toLowerCase().includes(r.toLowerCase())||l.surname.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes("docent")&&l.isDocente||r.toLowerCase().includes("amministrat")&&l.isAmministratore||r.toLowerCase().includes("dipendent")&&l.isDipendente).sort((l,d)=>l.surname.localeCompare(d.surname)||l.name.localeCompare(d.name)),o=[{key:"name",header:"Nome",render:l=>c.jsxs("span",{className:"font-medium text-gray-900",children:[l.name," ",l.surname]})},{key:"roles",header:"Ruoli",render:l=>c.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.isDocente&&c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800",children:"Docente"}),l.isAmministratore&&c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Amministratore"}),l.isDipendente&&c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Dipendente"})]})},{key:"vehicles",header:"Veicoli",render:l=>{const d=t.vehicles.filter(g=>g.personId===l.id).length;return c.jsx("span",{children:d})}},{key:"actions",header:"Azioni",className:"text-right w-32",render:l=>c.jsxs("div",{className:"flex flex-col items-stretch space-y-2",children:[c.jsx(gt,{variant:"info",size:"sm",icon:c.jsx(lg,{size:16}),onClick:d=>{d.stopPropagation(),n(`/persone/${l.id}`)},className:"w-full",children:"Modifica"}),c.jsx(gt,{variant:"danger",size:"sm",icon:c.jsx(la,{size:16}),onClick:d=>{d.stopPropagation(),s(l.id)},className:"w-full",children:"Elimina"})]})}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestione Persone"}),c.jsx(Hn,{to:"/persone/nuovo",children:c.jsx(gt,{variant:"primary",icon:c.jsx(U5,{size:18}),children:"Aggiungi Persona"})})]}),c.jsxs(zn,{children:[c.jsxs("div",{className:"mb-4 relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(f_,{size:18,className:"text-gray-400"})}),c.jsx("input",{type:"text",placeholder:"Cerca per nome, cognome o ruolo...",className:"pl-10 shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border-gray-300 rounded-md",value:r,onChange:l=>i(l.target.value)})]}),c.jsx(Km,{columns:o,data:a,keyExtractor:l=>l.id,onRowClick:l=>n(`/persone/${l.id}`),emptyMessage:r?"Nessuna persona trovata con questi criteri di ricerca":"Nessuna persona aggiunta. Clicca su 'Aggiungi Persona' per iniziare."})]})]})},Pt=({label:t,error:e,fullWidth:n=!0,className:r,id:i,...s})=>c.jsxs("div",{className:fr("mb-4",{"w-full":n}),children:[t&&c.jsx("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),c.jsx("input",{id:i,className:fr("shadow-sm rounded-md border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm",{"border-red-300":e},r),...s}),e&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:e})]}),qv=()=>{const{id:t}=og(),e=Yr(),{state:n,addPerson:r,updatePerson:i,addVehicle:s,updateVehicle:a,deleteVehicle:o,getVehiclesForPerson:l}=Kr(),{showToast:d}=ma(),g=!!t,m=g?n.people.find(B=>B.id===t):null,v=g?l(t):[],[p,_]=fe.useState({name:"",surname:"",isDocente:!1,isAmministratore:!1,isDipendente:!1}),[S,N]=fe.useState({make:"",model:"",plate:"",reimbursementRate:"0.35"}),[f,x]=fe.useState({}),[w,j]=fe.useState({}),[D,T]=fe.useState(!1),[L,C]=fe.useState(null);fe.useEffect(()=>{m&&_({name:m.name,surname:m.surname,isDocente:m.isDocente,isAmministratore:m.isAmministratore,isDipendente:m.isDipendente})},[m]);const G=()=>{const B={};return p.name.trim()||(B.name="Il nome  obbligatorio"),p.surname.trim()||(B.surname="Il cognome  obbligatorio"),!p.isDocente&&!p.isAmministratore&&!p.isDipendente&&(B.roles="Seleziona almeno un ruolo"),x(B),Object.keys(B).length===0},Z=()=>{const B={};S.make.trim()||(B.make="La marca  obbligatoria"),S.model.trim()||(B.model="Il modello  obbligatorio"),S.plate.trim()?n.vehicles.find(E=>E.plate.toLowerCase()===S.plate.toLowerCase()&&E.id!==L)&&(B.plate="Questa targa  gi registrata per un altro veicolo"):B.plate="La targa  obbligatoria";const ie=parseFloat(S.reimbursementRate);return(isNaN(ie)||ie<=0)&&(B.reimbursementRate="La tariffa deve essere un numero positivo"),j(B),Object.keys(B).length===0},R=B=>{const{name:ie,value:ve,type:E}=B.target,U=B.target.checked;_(X=>({...X,[ie]:E==="checkbox"?U:ve}))},A=B=>{const{name:ie,value:ve}=B.target;N(E=>({...E,[ie]:ve}))},q=async B=>{if(B.preventDefault(),!G())return;const ie={name:p.name,surname:p.surname,isDocente:p.isDocente,isAmministratore:p.isAmministratore,isDipendente:p.isDipendente};try{g&&m?(await i({id:m.id,...ie}),d("Persona aggiornata con successo","success")):(await r(ie),d("Persona aggiunta con successo","success"),e("/persone"))}catch(ve){console.error("Errore durante il salvataggio della persona:",ve),d("Errore durante il salvataggio della persona","error")}},K=()=>{T(!0),C(null),N({make:"",model:"",plate:"",reimbursementRate:"0.35"}),j({})},te=B=>{T(!0),C(B.id),N({make:B.make,model:B.model,plate:B.plate,reimbursementRate:B.reimbursementRate.toString()}),j({})},$=async B=>{if(B.preventDefault(),!Z())return;if(!m&&!g){d("Salva prima la persona per aggiungere un veicolo","error");return}const ie={personId:(m==null?void 0:m.id)||"",make:S.make,model:S.model,plate:S.plate,reimbursementRate:parseFloat(S.reimbursementRate)};try{L?(await a({id:L,...ie}),d("Veicolo aggiornato con successo","success")):(await s(ie),d("Veicolo aggiunto con successo","success")),T(!1),C(null),N({make:"",model:"",plate:"",reimbursementRate:"0.35"})}catch(ve){console.error("Errore durante il salvataggio del veicolo:",ve),d("Errore durante il salvataggio del veicolo","error")}},Q=async B=>{if(window.confirm("Sei sicuro di voler eliminare questo veicolo? Verranno eliminati anche tutti i tragitti associati."))try{await o(B),d("Veicolo eliminato con successo","success")}catch(ie){console.error("Errore durante l'eliminazione del veicolo:",ie),d("Errore durante l'eliminazione del veicolo","error")}},V=()=>{T(!1),C(null),N({make:"",model:"",plate:"",reimbursementRate:"0.35"}),j({})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(gt,{variant:"secondary",icon:c.jsx(sc,{size:18}),onClick:()=>e("/persone"),children:"Torna all'elenco"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:g?"Modifica Persona":"Aggiungi Persona"})]}),c.jsx(zn,{title:"Informazioni Personali",children:c.jsxs("form",{onSubmit:q,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Pt,{id:"name",name:"name",label:"Nome",value:p.name,onChange:R,error:f.name,required:!0}),c.jsx(Pt,{id:"surname",name:"surname",label:"Cognome",value:p.surname,onChange:R,error:f.surname,required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ruoli ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"isDocente",checked:p.isDocente,onChange:R,className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Docente"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"isAmministratore",checked:p.isAmministratore,onChange:R,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Amministratore"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"isDipendente",checked:p.isDipendente,onChange:R,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Dipendente"})]})]}),f.roles&&c.jsx("p",{className:"mt-2 text-sm text-red-600",children:f.roles})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(gt,{type:"submit",variant:"primary",icon:c.jsx(kh,{size:18}),children:g?"Salva Modifiche":"Aggiungi Persona"})})]})}),g&&m&&c.jsxs(zn,{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(gu,{className:"h-5 w-5 text-teal-600"}),c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Veicoli di ",m.name," ",m.surname]})]}),!D&&c.jsx(gt,{variant:"primary",size:"sm",icon:c.jsx(oi,{size:16}),onClick:K,children:"Aggiungi Veicolo"})]}),D&&c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[c.jsx("h3",{className:"text-md font-medium text-blue-900 mb-4",children:L?"Modifica Veicolo":"Nuovo Veicolo"}),c.jsxs("form",{onSubmit:$,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Pt,{id:"make",name:"make",label:"Marca",value:S.make,onChange:A,error:w.make,required:!0}),c.jsx(Pt,{id:"model",name:"model",label:"Modello",value:S.model,onChange:A,error:w.model,required:!0})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Pt,{id:"plate",name:"plate",label:"Targa",value:S.plate,onChange:A,error:w.plate,required:!0}),c.jsx(Pt,{id:"reimbursementRate",name:"reimbursementRate",label:"Tariffa (/km)",type:"number",step:"0.01",min:"0.01",value:S.reimbursementRate,onChange:A,error:w.reimbursementRate,required:!0})]}),c.jsxs("div",{className:"flex justify-end space-x-2",children:[c.jsx(gt,{type:"button",variant:"secondary",onClick:V,children:"Annulla"}),c.jsx(gt,{type:"submit",variant:"primary",icon:c.jsx(kh,{size:18}),children:L?"Salva Modifiche":"Aggiungi Veicolo"})]})]})]}),c.jsx("div",{className:"space-y-3",children:v.length>0?v.map(B=>c.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex-grow",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(gu,{className:"h-5 w-5 text-gray-400"}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-md font-medium text-gray-900",children:[B.make," ",B.model]}),c.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:B.plate}),c.jsxs("span",{className:"font-medium text-teal-600",children:[B.reimbursementRate.toFixed(2)," /km"]})]})]})]})}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(gt,{variant:"info",size:"sm",icon:c.jsx(lg,{size:14}),onClick:()=>te(B),disabled:D,children:"Modifica"}),c.jsx(gt,{variant:"danger",size:"sm",icon:c.jsx(la,{size:14}),onClick:()=>Q(B.id),disabled:D,children:"Elimina"})]})]})},B.id)):c.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx(gu,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun veicolo registrato"}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["Aggiungi un veicolo per ",m.name," ",m.surname," per iniziare a tracciare i rimborsi chilometrici."]}),!D&&c.jsx(gt,{variant:"primary",icon:c.jsx(oi,{size:18}),onClick:K,children:"Aggiungi Primo Veicolo"})]})}),v.length>0&&c.jsx("div",{className:"mt-4 p-3 bg-teal-50 border border-teal-200 rounded-md",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(gu,{className:"h-5 w-5 text-teal-500"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-teal-800",children:"Gestione Semplificata"}),c.jsxs("p",{className:"text-sm text-teal-700 mt-1",children:["Ora quando crei un nuovo tragitto, il veicolo di ",m.name," verr selezionato automaticamente. Questo semplifica il processo e riduce gli errori di inserimento."]})]})]})})]}),!g&&c.jsx(zn,{children:c.jsxs("div",{className:"text-center py-6",children:[c.jsx(gu,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Gestione Veicoli"}),c.jsx("p",{className:"text-gray-600",children:"Dopo aver salvato la persona, potrai aggiungere e gestire i suoi veicoli direttamente da questa pagina."})]})})]})},Bk=({person:t})=>{const{state:e}=Kr(),n=Yr(),r=e.trips.filter(s=>s.personId===t.id),i=r.reduce((s,a)=>s+(a.isRoundTrip?a.distance*2:a.distance),0);return c.jsxs("button",{onClick:()=>n(`/tragitti/persona/${t.id}`),className:"w-full text-left bg-white rounded-xl border border-gray-200 shadow-sm px-5 py-4 flex items-center gap-4 hover:shadow-md hover:border-teal-200 transition-all group",children:[c.jsx("div",{className:"flex-shrink-0 w-11 h-11 rounded-full bg-teal-50 border border-teal-100 flex items-center justify-center",children:c.jsx(oc,{size:18,className:"text-teal-600"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("p",{className:"font-semibold text-gray-900 truncate",children:[t.surname," ",t.name]}),c.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[c.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[c.jsx(Nh,{size:11}),r.length," ",r.length===1?"trasferta":"trasferte"]}),i>0&&c.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[c.jsx(Nl,{size:11}),i.toFixed(0)," km"]})]})]}),c.jsx(l_,{size:16,className:"text-gray-300 group-hover:text-teal-500 transition-colors flex-shrink-0"})]})},Uk=()=>{const{state:t}=Kr(),e=Yr(),n=[...t.people].sort((r,i)=>r.surname.localeCompare(i.surname)||r.name.localeCompare(i.name));return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Trasferte"}),c.jsx(gt,{variant:"primary",icon:c.jsx(B5,{size:18}),onClick:()=>e("/tragitti/nuovo"),children:"Nuova Trasferta"})]}),n.length===0?c.jsxs("div",{className:"text-center py-16 text-gray-400",children:[c.jsx(oc,{size:40,className:"mx-auto mb-3 opacity-40"}),c.jsx("p",{className:"text-sm",children:"Nessuna persona registrata. Aggiungi persone dalla sezione Persone."})]}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map(r=>c.jsx(Bk,{person:r},r.id))})]})},hn=({label:t,options:e,error:n,fullWidth:r=!0,className:i,id:s,...a})=>c.jsxs("div",{className:fr("mb-4",{"w-full":r}),children:[t&&c.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),c.jsxs("select",{id:s,className:fr("shadow-sm rounded-md border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm",{"border-red-300":n},i),...a,children:[c.jsx("option",{value:"",children:"Seleziona..."}),e.map(o=>c.jsx("option",{value:o.value,children:o.label},o.value))]}),n&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:n})]});function $k(t,e){const[n,r]=fe.useState(t);return fe.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}const Rd=({id:t,name:e,label:n,value:r,onChange:i,onSelect:s,getSuggestions:a,placeholder:o,error:l,required:d=!1,disabled:g=!1})=>{const[m,v]=fe.useState([]),[p,_]=fe.useState(!1),[S,N]=fe.useState(-1),[f,x]=fe.useState(!1),w=$k(r,300),j=fe.useRef(null);fe.useEffect(()=>{(async()=>{if(w.trim().length<2){v([]),_(!1);return}x(!0);try{const C=await a(w);v(C),_(C.length>0),N(-1)}catch(C){console.error("Error fetching suggestions:",C),v([]),_(!1)}finally{x(!1)}})()},[w,a]),fe.useEffect(()=>{const L=C=>{j.current&&!j.current.contains(C.target)&&_(!1)};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[]);const D=L=>{if(p)switch(L.key){case"ArrowDown":L.preventDefault(),N(C=>C<m.length-1?C+1:C);break;case"ArrowUp":L.preventDefault(),N(C=>C>0?C-1:-1);break;case"Enter":L.preventDefault(),S>=0&&S<m.length&&T(m[S].value);break;case"Escape":L.preventDefault(),_(!1),N(-1);break}},T=L=>{i({target:{name:e,value:L,type:"text"}}),s&&s(L),_(!1),N(-1)};return c.jsxs("div",{ref:j,className:"relative",children:[c.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1",children:[n,d&&c.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",id:t,name:e,value:r,onChange:i,onKeyDown:D,onFocus:()=>{m.length>0&&r.trim().length>=2&&_(!0)},placeholder:o,disabled:g,required:d,className:fr("shadow-sm block w-full sm:text-sm rounded-md",{"border-red-300 focus:ring-red-500 focus:border-red-500":l,"border-gray-300 focus:ring-primary-500 focus:border-primary-500":!l,"bg-gray-100 cursor-not-allowed":g})}),f&&c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:c.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary-500 border-t-transparent rounded-full"})})]}),l&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:l}),p&&m.length>0&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:m.map((L,C)=>c.jsx("button",{type:"button",onClick:()=>T(L.value),className:fr("w-full text-left px-4 py-2 hover:bg-primary-50 focus:bg-primary-50 focus:outline-none",{"bg-primary-100":C===S}),children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-900",children:L.value}),L.usageCount!==void 0&&L.usageCount>0&&c.jsxs("span",{className:"text-xs text-gray-500",children:["usato ",L.usageCount," ",L.usageCount===1?"volta":"volte"]})]})},C))})]})},qk=(t,e)=>{if(!t.trim()||!e.trim())throw new Error("Both origin and destination addresses are required");const n=encodeURIComponent(t.trim()),r=encodeURIComponent(e.trim()),i=`https://www.google.it/maps/dir/${n}/${r}`;window.open(i,"_blank","noopener,noreferrer")},Wk=async(t,e)=>{throw qk(t,e),new Error(`Google Maps  stato aperto in una nuova scheda. Segui questi passaggi:

1. Verifica che il percorso mostrato sia corretto
2. Trova la distanza in chilometri (km) sotto il tempo di percorrenza
3. Torna a questa pagina e inserisci manualmente la distanza nel campo "Distanza (km)"
4. Se ci sono pi percorsi, scegli quello che intendi utilizzare per il rimborso`)},cs={treno:"Biglietto ferroviario",supplemento_treno:"Supplemento ferroviario",aereo:"Biglietto aereo",mezzi_pubblici:"Biglietti mezzi pubblici",taxi:"Taxi",parcheggio:"Parcheggio",altro:"Altro"},Go=[{id:"treviso",name:"Sede Treviso",address:"Via della Quercia 2/B, 31100 Treviso"},{id:"marcon",name:"Sede Marcon",address:"Viale della Stazione 3, 30020 Marcon"},{id:"vicenza",name:"Sede Vicenza",address:"Via Pola 30, Torri di Quartesolo, Vicenza"}],Os=Go[0],Id={ragioneSociale:"ISTITUTO VENETO DI TERAPIA FAMILIARE S.R.L.",partitaIva:"02034280269",codiceFiscale:"02034280269",rea:"184910"},Wv=()=>{var Qe,Ue,Le,Oe;const{id:t}=og(),e=Yr(),n=vs(),{state:r,addTrip:i,updateTrip:s,addTripExpense:a,deleteTripExpense:o,getPerson:l,getVehicle:d,getVehiclesForPerson:g,getTollBooth:m,searchTollStations:v}=Kr(),p=!!t,_=p?r.trips.find(ae=>ae.id===t):null,S=!!((Qe=n.state)!=null&&Qe.duplicateTrip),N=S?n.state.duplicateTrip:null,[f,x]=fe.useState({date:new Date().toISOString().split("T")[0],personId:"",vehicleId:"",tripRole:"docente",origin:Os.address,destination:"",distance:"",purpose:"",isRoundTrip:!1,selectedOfficeId:Os.id,useCustomOrigin:!1,useCustomDestination:!1,hasToll:!1,tollEntryStation:"",tollExitStation:"",tollAmount:"",hasReturnToll:!1,returnTollEntryStation:"",returnTollExitStation:"",returnTollAmount:"",meals:[],travelExpenses:[]}),[w,j]=fe.useState({}),[D,T]=fe.useState([]),[L,C]=fe.useState([]),[G,Z]=fe.useState(null),[R,A]=fe.useState(null),[q,K]=fe.useState(null),[te,$]=fe.useState(null);fe.useEffect(()=>{if(_){const ae=l(_.personId),oe=Go.find(De=>De.address===_.origin),ye=(ae==null?void 0:ae.homeAddress)||Os.address;_.personId&&(B(_.personId),ie(_.personId)),x({date:new Date(_.date).toISOString().split("T")[0],personId:_.personId,vehicleId:_.vehicleId,tripRole:_.tripRole||"docente",origin:_.origin,destination:_.destination,distance:_.distance.toString(),purpose:_.purpose,isRoundTrip:_.isRoundTrip,selectedOfficeId:oe?oe.id:Os.id,useCustomOrigin:!oe&&_.origin!==ye,useCustomDestination:!0,hasToll:_.hasToll||!1,tollEntryStation:_.tollEntryStation||"",tollExitStation:_.tollExitStation||"",tollAmount:_.tollAmount?_.tollAmount.toString():"",hasReturnToll:!!(_.returnTollEntryStation||_.returnTollExitStation),returnTollEntryStation:_.returnTollEntryStation||"",returnTollExitStation:_.returnTollExitStation||"",returnTollAmount:_.returnTollAmount?_.returnTollAmount.toString():"",meals:E(_),travelExpenses:ve(_.id)})}},[_]),fe.useEffect(()=>{f.personId&&D.length>0?(!f.vehicleId||!D.some(ae=>ae.value===f.vehicleId))&&x(ae=>({...ae,vehicleId:D[0].value})):f.personId||x(ae=>({...ae,vehicleId:""}))},[f.personId,D]),fe.useEffect(()=>{var ae;if(S&&N){const oe=l(N.personId);N.personId&&(B(N.personId),ie(N.personId)),x({date:new Date().toISOString().split("T")[0],personId:N.personId,vehicleId:N.vehicleId,tripRole:N.tripRole||"docente",origin:N.origin,destination:N.destination,distance:N.distance.toString(),purpose:N.purpose,isRoundTrip:N.isRoundTrip,selectedOfficeId:((ae=Go.find(ye=>ye.address===N.origin))==null?void 0:ae.id)||Os.id,useCustomOrigin:oe?N.origin!==oe.homeAddress:!1,useCustomDestination:!0,hasToll:N.hasToll||!1,tollEntryStation:N.tollEntryStation||"",tollExitStation:N.tollExitStation||"",tollAmount:N.tollAmount?N.tollAmount.toString():"",hasReturnToll:!!(N.returnTollEntryStation||N.returnTollExitStation),returnTollEntryStation:N.returnTollEntryStation||"",returnTollExitStation:N.returnTollExitStation||"",returnTollAmount:N.returnTollAmount?N.returnTollAmount.toString():"",meals:E(N),travelExpenses:[]})}},[S]),fe.useEffect(()=>{if(f.hasToll&&f.tollEntryStation&&f.tollExitStation){const ae=m(f.tollEntryStation,f.tollExitStation);ae?(K({amount:ae.amount,usageCount:ae.usageCount}),(!f.tollAmount||f.tollAmount==="")&&x(oe=>({...oe,tollAmount:ae.amount.toString()}))):K(null)}else K(null)},[f.tollEntryStation,f.tollExitStation,f.hasToll]),fe.useEffect(()=>{if(f.hasReturnToll&&f.returnTollEntryStation&&f.returnTollExitStation){const ae=m(f.returnTollEntryStation,f.returnTollExitStation);ae?($({amount:ae.amount,usageCount:ae.usageCount}),(!f.returnTollAmount||f.returnTollAmount==="")&&x(oe=>({...oe,returnTollAmount:ae.amount.toString()}))):$(null)}else $(null)},[f.returnTollEntryStation,f.returnTollExitStation,f.hasReturnToll]),fe.useEffect(()=>{Q(),V()},[f.distance,f.vehicleId,f.isRoundTrip,f.tollAmount,f.hasToll,f.returnTollAmount,f.hasReturnToll,f.meals]);const Q=()=>{if(!f.vehicleId||!f.distance){Z(null);return}const ae=d(f.vehicleId);if(!ae){Z(null);return}const oe=parseFloat(f.distance);if(isNaN(oe)){Z(null);return}const De=(f.isRoundTrip?oe*2:oe)*ae.reimbursementRate;Z(De)},V=()=>{if(!f.hasToll||!f.tollAmount){A(null);return}const ae=parseFloat(f.tollAmount);if(isNaN(ae)){A(null);return}let oe=ae;if(f.isRoundTrip)if(f.hasReturnToll&&f.returnTollAmount){const ye=parseFloat(f.returnTollAmount);oe+=isNaN(ye)?ae:ye}else oe+=ae;A(oe)},B=ae=>{const oe=g(ae);T(oe.map(ye=>({value:ye.id,label:`${ye.make} ${ye.model} (${ye.plate}) - ${ye.reimbursementRate.toFixed(2)} /km`})))},ie=ae=>{const oe=l(ae);if(!oe){C([]);return}const ye=[];oe.isDocente&&ye.push({value:"docente",label:"Docente"}),oe.isAmministratore&&ye.push({value:"amministratore",label:"Amministratore"}),oe.isDipendente&&ye.push({value:"dipendente",label:"Dipendente"}),C(ye),ye.length>0&&!ye.some(De=>De.value===f.tripRole)&&x(De=>({...De,tripRole:ye[0].value}))},ve=ae=>r.tripExpenses.filter(oe=>oe.tripId===ae).map(oe=>({expenseType:oe.expenseType,fromLocation:oe.fromLocation,toLocation:oe.toLocation,description:oe.description,amount:oe.amount.toString()})),E=ae=>ae.meals&&ae.meals.length>0?ae.meals.map(oe=>({mealType:oe.mealType,amount:oe.amount.toString()})):ae.hasMeal&&ae.mealAmount?[{mealType:ae.mealType||"pranzo",amount:ae.mealAmount.toString()}]:[],U=()=>{const oe=f.meals.map(ye=>ye.mealType).includes("pranzo")?"cena":"pranzo";x(ye=>({...ye,meals:[...ye.meals,{mealType:oe,amount:""}]}))},X=ae=>{x(oe=>({...oe,meals:oe.meals.filter((ye,De)=>De!==ae)}))},ne=(ae,oe,ye)=>{x(De=>({...De,meals:De.meals.map((Me,me)=>me===ae?{...Me,[oe]:ye}:Me)}))},P=()=>{x(ae=>({...ae,travelExpenses:[...ae.travelExpenses,{expenseType:"taxi",fromLocation:"",toLocation:"",description:"",amount:""}]}))},H=ae=>{x(oe=>({...oe,travelExpenses:oe.travelExpenses.filter((ye,De)=>De!==ae)}))},J=(ae,oe,ye)=>{x(De=>({...De,travelExpenses:De.travelExpenses.map((Me,me)=>me===ae?{...Me,[oe]:ye}:Me)}))},Y=ae=>ae==="treno"||ae==="supplemento_treno"||ae==="aereo"||ae==="mezzi_pubblici",be=()=>{const ae={};f.date||(ae.date="La data  obbligatoria"),f.personId||(ae.personId="La persona  obbligatoria"),f.vehicleId||(ae.vehicleId="Il veicolo  obbligatorio"),f.tripRole||(ae.tripRole="Il ruolo  obbligatorio"),f.origin.trim()||(ae.origin="L'indirizzo di origine  obbligatorio"),f.destination.trim()||(ae.destination="L'indirizzo di destinazione  obbligatorio");const oe=parseFloat(f.distance);return(isNaN(oe)||oe<=0)&&(ae.distance="La distanza deve essere un numero positivo"),f.purpose.trim()||(ae.purpose="Lo scopo della trasferta  obbligatorio"),j(ae),Object.keys(ae).length===0},we=ae=>{const{name:oe,value:ye,type:De}=ae.target;if(oe==="personId"&&ye){B(ye),ie(ye);const Me=l(ye);if(Me&&Me.homeAddress&&!f.useCustomOrigin){x(me=>({...me,personId:ye,origin:Me.homeAddress||Os.address}));return}}if(De==="checkbox"){const Me=ae.target.checked;if(oe==="useCustomOrigin"&&!Me){const me=f.personId?l(f.personId):null,bt=Go.find(tt=>tt.id===f.selectedOfficeId)||Os,Tt=(me==null?void 0:me.homeAddress)||bt.address;x(tt=>({...tt,[oe]:Me,origin:Tt}))}else x(oe==="useCustomDestination"?me=>({...me,[oe]:Me,destination:"",distance:""}):me=>({...me,[oe]:Me}))}else if(oe==="selectedOfficeId"){const Me=Go.find(me=>me.id===ye)||Os;x(me=>({...me,selectedOfficeId:ye,origin:Me.address}))}else x(Me=>({...Me,[oe]:ye}))},Pe=async ae=>(await v(ae)).map(ye=>({value:ye})),je=()=>{try{Wk(f.origin,f.destination)}catch(ae){ae instanceof Error&&alert(ae.message)}},He=async ae=>{if(ae.preventDefault(),!be())return;const oe=f.meals.filter(Me=>Me.amount&&parseFloat(Me.amount)>0).map(Me=>({mealType:Me.mealType,amount:parseFloat(Me.amount)})),ye={date:f.date,personId:f.personId,vehicleId:f.vehicleId,tripRole:f.tripRole,origin:f.origin,destination:f.destination,distance:parseFloat(f.distance),purpose:f.purpose,isRoundTrip:f.isRoundTrip,hasToll:f.hasToll,tollEntryStation:f.hasToll?f.tollEntryStation:void 0,tollExitStation:f.hasToll?f.tollExitStation:void 0,tollAmount:f.hasToll&&f.tollAmount?parseFloat(f.tollAmount):void 0,returnTollEntryStation:f.hasToll&&f.isRoundTrip&&f.hasReturnToll?f.returnTollEntryStation:void 0,returnTollExitStation:f.hasToll&&f.isRoundTrip&&f.hasReturnToll?f.returnTollExitStation:void 0,returnTollAmount:f.hasToll&&f.isRoundTrip&&f.hasReturnToll&&f.returnTollAmount?parseFloat(f.returnTollAmount):void 0},De=f.travelExpenses.filter(Me=>Me.amount&&parseFloat(Me.amount)>0);if(p&&_){await s({id:_.id,...ye},oe);const Me=r.tripExpenses.filter(me=>me.tripId===_.id);for(const me of Me)await o(me.id);for(const me of De)await a({personId:f.personId,tripId:_.id,date:f.date,expenseType:me.expenseType,description:me.description,fromLocation:me.fromLocation,toLocation:me.toLocation,amount:parseFloat(me.amount),notes:""})}else{await i(ye,oe);const Me=r.trips[0];if(Me&&De.length>0)for(const me of De)await a({personId:f.personId,tripId:Me.id,date:f.date,expenseType:me.expenseType,description:me.description,fromLocation:me.fromLocation,toLocation:me.toLocation,amount:parseFloat(me.amount),notes:""})}e("/tragitti")},Ne=f.origin.trim()&&f.destination.trim(),se=D.length>0;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(gt,{variant:"secondary",icon:c.jsx(sc,{size:18}),onClick:()=>e("/tragitti"),children:"Torna all'elenco"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:p?"Modifica Trasferta":S?"Duplica Trasferta":"Nuova Trasferta"})]}),S&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(F5,{className:"h-5 w-5 text-blue-500 mr-3 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"Creazione da duplicato"}),c.jsx("p",{className:"text-sm text-blue-700",children:"Stai creando una nuova trasferta basata su una esistente. La data  stata aggiornata a oggi. Modifica i dati necessari e salva per creare la nuova trasferta."})]})]})}),c.jsx(zn,{children:c.jsxs("form",{onSubmit:He,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Pt,{id:"date",name:"date",label:"Data",type:"date",value:f.date,onChange:we,error:w.date,required:!0}),c.jsx(hn,{id:"personId",name:"personId",label:"Persona",options:[...r.people].sort((ae,oe)=>ae.surname.localeCompare(oe.surname)||ae.name.localeCompare(oe.name)).map(ae=>{const oe=[];return ae.isDocente&&oe.push("D"),ae.isAmministratore&&oe.push("A"),ae.isDipendente&&oe.push("Dip"),{value:ae.id,label:`${ae.surname} ${ae.name} (${oe.join(", ")})`}}),value:f.personId,onChange:we,error:w.personId,required:!0})]}),f.personId&&L.length>0&&c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[c.jsx(hn,{id:"tripRole",name:"tripRole",label:"In qualit di",options:L,value:f.tripRole,onChange:we,error:w.tripRole,required:!0}),c.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Seleziona il ruolo in cui ",(Ue=r.people.find(ae=>ae.id===f.personId))==null?void 0:Ue.name," ha svolto questa trasferta"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(hn,{id:"vehicleId",name:"vehicleId",label:"Veicolo",options:D,value:f.vehicleId,onChange:we,error:w.vehicleId,required:!0,disabled:!f.personId}),f.personId&&!se&&c.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(is,{className:"h-5 w-5 text-amber-500 mr-2 mt-0.5 flex-shrink-0"}),c.jsx("div",{children:c.jsxs("p",{className:"text-sm text-amber-800",children:["Nessun veicolo registrato per questa persona."," ",c.jsx("a",{href:"/veicoli/nuovo",className:"font-medium underline hover:text-amber-900",target:"_blank",rel:"noopener noreferrer",children:"Aggiungi un veicolo"})," ","prima di continuare."]})})]})}),f.vehicleId&&c.jsx("div",{className:"bg-teal-50 border border-teal-200 rounded-md p-3",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(is,{className:"h-4 w-4 text-teal-500 mr-2"}),c.jsxs("span",{className:"text-sm text-teal-700",children:["Veicolo selezionato automaticamente per"," ",(Le=r.people.find(ae=>ae.id===f.personId))==null?void 0:Le.name," ",(Oe=r.people.find(ae=>ae.id===f.personId))==null?void 0:Oe.surname]})]})})]}),c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-4",children:[c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx(M5,{className:"h-5 w-5 text-blue-500 mr-2"}),c.jsx("span",{className:"font-medium text-blue-800",children:"Sede di Partenza"})]}),!f.useCustomOrigin&&c.jsx("div",{className:"mb-3 space-y-2",children:Go.map(ae=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"selectedOfficeId",value:ae.id,checked:f.selectedOfficeId===ae.id,onChange:we,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),c.jsxs("span",{className:"text-sm text-blue-800",children:[c.jsx("span",{className:"font-medium",children:ae.name}),c.jsxs("span",{className:"text-blue-600 ml-1",children:[" ",ae.address]})]})]},ae.id))}),c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx("input",{id:"useCustomOrigin",name:"useCustomOrigin",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:f.useCustomOrigin,onChange:we}),c.jsx("label",{htmlFor:"useCustomOrigin",className:"ml-2 block text-sm text-blue-700",children:"Usa un indirizzo di partenza personalizzato"})]}),f.useCustomOrigin&&c.jsx(Pt,{id:"origin",name:"origin",value:f.origin,onChange:we,error:w.origin,placeholder:"Inserisci l'indirizzo di partenza",required:!0})]}),c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-4",children:[c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx(Nl,{className:"h-5 w-5 text-blue-500 mr-2"}),c.jsx("span",{className:"font-medium text-blue-800",children:"Indirizzo di Destinazione"})]}),r.favoriteDestinations.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(ug,{className:"h-4 w-4 text-amber-500 mr-1.5"}),c.jsx("span",{className:"text-xs font-medium text-blue-700 uppercase tracking-wide",children:"Destinazioni abituali"})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:r.favoriteDestinations.map(ae=>{const oe=f.destination===ae.address&&f.useCustomDestination;return c.jsxs("button",{type:"button",onClick:()=>{x(ye=>({...ye,destination:ae.address,distance:String(ae.defaultDistance),useCustomDestination:!0})),w.destination&&j(ye=>({...ye,destination:void 0}))},className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium border transition-all duration-150 ${oe?"bg-amber-500 border-amber-500 text-white shadow-sm":"bg-white border-amber-200 text-amber-800 hover:bg-amber-50 hover:border-amber-400"}`,title:ae.address,children:[c.jsx("span",{children:ae.name}),c.jsxs("span",{className:`ml-1.5 text-xs ${oe?"text-amber-100":"text-amber-500"}`,children:[ae.defaultDistance," km"]})]},ae.id)})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{id:"useCustomDestination",name:"useCustomDestination",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:f.useCustomDestination,onChange:we}),c.jsx("label",{htmlFor:"useCustomDestination",className:"ml-2 block text-sm text-blue-700",children:"Inserisci manualmente l'indirizzo di destinazione"})]}),f.useCustomDestination&&c.jsx(Pt,{id:"destination",name:"destination",value:f.destination,onChange:we,error:w.destination,placeholder:"Inserisci l'indirizzo di destinazione",required:!0})]})]}),f.useCustomDestination&&c.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 mb-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(is,{className:"h-5 w-5 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Calcolo Distanza con Google Maps"}),c.jsx("p",{className:"text-sm text-green-700 mb-3",children:"Clicca il pulsante qui sotto per aprire Google Maps con il percorso tra gli indirizzi inseriti. Potrai vedere la distanza esatta e inserirla manualmente nel campo sottostante."}),c.jsx(gt,{type:"button",variant:"success",size:"sm",icon:c.jsx(Fm,{size:16}),onClick:je,disabled:!Ne,children:"Apri Google Maps"}),!Ne&&c.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Inserisci prima gli indirizzi di origine e destinazione"})]})]})}),c.jsx(Pt,{id:"distance",name:"distance",label:"Distanza (km)",type:"number",step:"0.1",min:"0.1",value:f.distance,onChange:we,error:w.distance,placeholder:"Inserisci la distanza da Google Maps",required:!0}),c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("input",{id:"isRoundTrip",name:"isRoundTrip",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:f.isRoundTrip,onChange:we}),c.jsx("label",{htmlFor:"isRoundTrip",className:"ml-2 block text-sm text-gray-900",children:"Viaggio di andata e ritorno (A/R)"})]}),c.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-100 mb-4",children:[c.jsx("div",{className:"mb-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{id:"hasToll",name:"hasToll",type:"checkbox",className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded",checked:f.hasToll,onChange:we}),c.jsx("label",{htmlFor:"hasToll",className:"text-sm font-medium text-amber-900",children:"Questa trasferta include pedaggi autostradali"})]})}),f.hasToll&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"p-3 bg-amber-100 rounded-md border border-amber-200",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(is,{className:"h-4 w-4 text-amber-600 mr-2 mt-0.5 flex-shrink-0"}),c.jsx("div",{className:"flex-grow",children:c.jsxs("p",{className:"text-xs text-amber-800",children:["I dati del pedaggio possono essere modificati per questo viaggio specifico."," ",c.jsxs("a",{href:"https://www.infoviaggiando.it/pedaggi",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-amber-900 inline-flex items-center",children:["Consulta qui gli importi aggiornati",c.jsx(Fm,{size:12,className:"ml-1"})]})]})})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx(Rd,{id:"tollEntryStation",name:"tollEntryStation",label:"Casello di Entrata",value:f.tollEntryStation,onChange:we,getSuggestions:Pe,placeholder:"es. Treviso"}),c.jsx(Rd,{id:"tollExitStation",name:"tollExitStation",label:"Casello di Uscita",value:f.tollExitStation,onChange:we,getSuggestions:Pe,placeholder:"es. Vicenza"}),c.jsxs("div",{children:[c.jsx(Pt,{id:"tollAmount",name:"tollAmount",label:"Importo Pedaggio ()",type:"number",step:"0.10",min:"0",value:f.tollAmount,onChange:we,placeholder:"es. 3.50"}),q&&c.jsxs("div",{className:"mt-1 flex items-center text-xs text-green-600",children:[c.jsx(is,{className:"h-3 w-3 mr-1"}),c.jsxs("span",{children:["Importo salvato: ",q.amount.toFixed(2),"  (usato ",q.usageCount," ",q.usageCount===1?"volta":"volte",")"]})]}),!q&&f.tollEntryStation&&f.tollExitStation&&c.jsxs("div",{className:"mt-1 flex items-center text-xs text-blue-600",children:[c.jsx(is,{className:"h-3 w-3 mr-1"}),c.jsx("span",{children:"Nuova combinazione caselli"})]})]})]})]})]}),f.hasToll&&f.isRoundTrip&&c.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-100 mb-4",children:[c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{id:"hasReturnToll",name:"hasReturnToll",type:"checkbox",className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded",checked:f.hasReturnToll,onChange:we}),c.jsx("label",{htmlFor:"hasReturnToll",className:"text-sm font-medium text-amber-900",children:"Il ritorno ha caselli diversi dall'andata"})]}),c.jsx("p",{className:"text-xs text-amber-700 mt-1 ml-6",children:"Se non spuntato, il pedaggio del ritorno sar uguale all'andata"})]}),f.hasReturnToll&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:"text-xs font-medium text-amber-800",children:"Caselli del ritorno"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx(Rd,{id:"returnTollEntryStation",name:"returnTollEntryStation",label:"Casello Entrata Ritorno",value:f.returnTollEntryStation,onChange:we,getSuggestions:Pe,placeholder:"es. Vicenza"}),c.jsx(Rd,{id:"returnTollExitStation",name:"returnTollExitStation",label:"Casello Uscita Ritorno",value:f.returnTollExitStation,onChange:we,getSuggestions:Pe,placeholder:"es. Treviso"}),c.jsxs("div",{children:[c.jsx(Pt,{id:"returnTollAmount",name:"returnTollAmount",label:"Importo Pedaggio Ritorno ()",type:"number",step:"0.10",min:"0",value:f.returnTollAmount,onChange:we,placeholder:"es. 3.50"}),te&&c.jsxs("div",{className:"mt-1 flex items-center text-xs text-green-600",children:[c.jsx(is,{className:"h-3 w-3 mr-1"}),c.jsxs("span",{children:["Importo salvato: ",te.amount.toFixed(2),"  (usato ",te.usageCount," ",te.usageCount===1?"volta":"volte",")"]})]}),!te&&f.returnTollEntryStation&&f.returnTollExitStation&&c.jsxs("div",{className:"mt-1 flex items-center text-xs text-blue-600",children:[c.jsx(is,{className:"h-3 w-3 mr-1"}),c.jsx("span",{children:"Nuova combinazione caselli"})]})]})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ac,{className:"h-5 w-5 text-gray-600"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Spese di Trasporto"}),c.jsx("span",{className:"text-xs text-gray-500",children:"(treno, aereo, taxi, bus, parcheggio, altro)"})]}),c.jsx(gt,{type:"button",variant:"secondary",size:"sm",icon:c.jsx(oi,{size:14}),onClick:P,children:"Aggiungi spesa"})]}),f.travelExpenses.length===0&&c.jsx("p",{className:"text-sm text-gray-500 italic",children:'Nessuna spesa aggiunta. Clicca "Aggiungi spesa" per inserire treno, aereo, taxi, parcheggio, ecc.'}),f.travelExpenses.length>0&&c.jsx("div",{className:"space-y-3",children:f.travelExpenses.map((ae,oe)=>c.jsxs("div",{className:"bg-white rounded-md p-3 border border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex-1 mr-3",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Tipo di spesa"}),c.jsx("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm",value:ae.expenseType,onChange:ye=>J(oe,"expenseType",ye.target.value),children:Object.keys(cs).map(ye=>c.jsx("option",{value:ye,children:cs[ye]},ye))})]}),c.jsxs("div",{className:"w-28",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Importo ()"}),c.jsx("input",{type:"number",step:"0.01",min:"0",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm",value:ae.amount,onChange:ye=>J(oe,"amount",ye.target.value),placeholder:"0.00"})]}),c.jsx("button",{type:"button",className:"ml-2 mt-5 p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",onClick:()=>H(oe),children:c.jsx(la,{size:16})})]}),Y(ae.expenseType)&&c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Da"}),c.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm",value:ae.fromLocation,onChange:ye=>J(oe,"fromLocation",ye.target.value),placeholder:"es. Treviso"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"A"}),c.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm",value:ae.toLocation,onChange:ye=>J(oe,"toLocation",ye.target.value),placeholder:"es. Milano"})]})]}),(ae.expenseType==="taxi"||ae.expenseType==="parcheggio"||ae.expenseType==="altro")&&c.jsxs("div",{className:"mt-1",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Descrizione"}),c.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm",value:ae.description,onChange:ye=>J(oe,"description",ye.target.value),placeholder:ae.expenseType==="altro"?"Specificare...":"Dettagli opzionali"})]})]},oe))})]}),c.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(q5,{className:"h-5 w-5 text-green-600"}),c.jsx("span",{className:"text-sm font-medium text-green-900",children:"Rimborso Pasti"})]}),c.jsx(gt,{type:"button",variant:"secondary",size:"sm",icon:c.jsx(oi,{size:14}),onClick:U,disabled:f.meals.length>=2,children:"Aggiungi pasto"})]}),f.meals.length===0&&c.jsx("p",{className:"text-sm text-green-700 italic",children:'Nessun pasto aggiunto. Clicca "Aggiungi pasto" per inserire pranzo o cena.'}),f.meals.length>0&&c.jsx("div",{className:"space-y-3",children:f.meals.map((ae,oe)=>{var Me;const ye=(Me=f.meals.find((me,bt)=>bt!==oe))==null?void 0:Me.mealType,De=[{value:"pranzo",label:"Pranzo"},{value:"cena",label:"Cena"}].filter(me=>me.value===ae.mealType||me.value!==ye);return c.jsxs("div",{className:"flex items-end gap-3 bg-white rounded-md p-3 border border-green-200",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Tipo di pasto"}),c.jsx("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm",value:ae.mealType,onChange:me=>ne(oe,"mealType",me.target.value),children:De.map(me=>c.jsx("option",{value:me.value,children:me.label},me.value))})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Importo ()"}),c.jsx("input",{type:"number",step:"0.01",min:"0",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm",value:ae.amount,onChange:me=>ne(oe,"amount",me.target.value),placeholder:"es. 15.00"})]}),c.jsx("button",{type:"button",className:"mb-0.5 p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",onClick:()=>X(oe),children:c.jsx(la,{size:16})})]},oe)})})]}),G!==null&&c.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(i_,{className:"h-5 w-5 text-primary-500 mr-3 mt-1"}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("h3",{className:"text-sm font-medium text-primary-800 mb-2",children:"Riepilogo Spese di Trasferta"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-primary-700",children:"Rimborso Chilometrico:"}),c.jsxs("span",{className:"text-lg font-semibold text-primary-900",children:[G.toFixed(2)," "]})]}),c.jsxs("p",{className:"text-xs text-primary-600",children:["(",f.isRoundTrip?parseFloat(f.distance)*2:f.distance," km totali)"]}),R!==null&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"border-t border-primary-200 pt-2 flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-primary-700",children:"Pedaggi Autostradali:"}),c.jsxs("span",{className:"text-lg font-semibold text-primary-900",children:[R.toFixed(2)," "]})]}),f.tollEntryStation&&f.tollExitStation&&c.jsxs("p",{className:"text-xs text-primary-600",children:[f.tollEntryStation,"  ",f.tollExitStation,f.isRoundTrip&&" (A/R)"]})]}),f.meals.filter(ae=>ae.amount&&parseFloat(ae.amount)>0).map((ae,oe)=>c.jsx("div",{children:c.jsxs("div",{className:"border-t border-primary-200 pt-2 flex justify-between items-center",children:[c.jsxs("span",{className:"text-sm text-primary-700",children:["Rimborso ",ae.mealType==="pranzo"?"Pranzo":"Cena",":"]}),c.jsxs("span",{className:"text-lg font-semibold text-primary-900",children:[parseFloat(ae.amount).toFixed(2)," "]})]})},oe)),f.travelExpenses.filter(ae=>ae.amount&&parseFloat(ae.amount)>0).map((ae,oe)=>c.jsx("div",{children:c.jsxs("div",{className:"border-t border-primary-200 pt-2 flex justify-between items-center",children:[c.jsxs("span",{className:"text-sm text-primary-700",children:[cs[ae.expenseType],":"]}),c.jsxs("span",{className:"text-lg font-semibold text-primary-900",children:[parseFloat(ae.amount).toFixed(2)," "]})]})},oe)),c.jsxs("div",{className:"border-t-2 border-primary-300 pt-2 mt-2 flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-medium text-primary-800",children:"Totale Generale:"}),c.jsxs("span",{className:"text-xl font-bold text-primary-900",children:[(G+(R||0)+f.meals.reduce((ae,oe)=>ae+(oe.amount&&parseFloat(oe.amount)>0?parseFloat(oe.amount):0),0)+f.travelExpenses.reduce((ae,oe)=>ae+(oe.amount&&parseFloat(oe.amount)>0?parseFloat(oe.amount):0),0)).toFixed(2)," "]})]})]})]})]})}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"purpose",className:"block text-sm font-medium text-gray-700 mb-1",children:"Scopo della trasferta"}),c.jsx("textarea",{id:"purpose",name:"purpose",rows:3,className:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md",value:f.purpose,onChange:we,placeholder:"Descrivi lo scopo della trasferta",required:!0}),w.purpose&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.purpose})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(gt,{type:"submit",variant:"primary",icon:c.jsx(kh,{size:18}),disabled:!se&&f.personId,children:p?"Salva Modifiche":"Registra Trasferta"})})]})})]})},Hk="modulepreload",Vk=function(t){return"/"+t},Hv={},Jm=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Vk(l),l in Hv)return;Hv[l]=!0;const d=l.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${g}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Hk,d||(m.as="script"),m.crossOrigin="",m.href=l,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((v,p)=>{m.addEventListener("load",v),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Ut(t){"@babel/helpers - typeof";return Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(t)}var sr=Uint8Array,qr=Uint16Array,gg=Int32Array,tf=new sr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nf=new sr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xm=new sr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gw=function(t,e){for(var n=new qr(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new gg(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},vw=gw(tf,2),yw=vw.b,Qm=vw.r;yw[28]=258,Qm[258]=28;var ww=gw(nf,0),Gk=ww.b,Vv=ww.r,Zm=new qr(32768);for(var Qt=0;Qt<32768;++Qt){var Ds=(Qt&43690)>>1|(Qt&21845)<<1;Ds=(Ds&52428)>>2|(Ds&13107)<<2,Ds=(Ds&61680)>>4|(Ds&3855)<<4,Zm[Qt]=((Ds&65280)>>8|(Ds&255)<<8)>>1}var Hi=function(t,e,n){for(var r=t.length,i=0,s=new qr(e);i<r;++i)t[i]&&++s[t[i]-1];var a=new qr(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(n){o=new qr(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var d=i<<4|t[i],g=e-t[i],m=a[t[i]-1]++<<g,v=m|(1<<g)-1;m<=v;++m)o[Zm[m]>>l]=d}else for(o=new qr(r),i=0;i<r;++i)t[i]&&(o[i]=Zm[a[t[i]-1]++]>>15-t[i]);return o},ua=new sr(288);for(var Qt=0;Qt<144;++Qt)ua[Qt]=8;for(var Qt=144;Qt<256;++Qt)ua[Qt]=9;for(var Qt=256;Qt<280;++Qt)ua[Qt]=7;for(var Qt=280;Qt<288;++Qt)ua[Qt]=8;var pc=new sr(32);for(var Qt=0;Qt<32;++Qt)pc[Qt]=5;var Yk=Hi(ua,9,0),Kk=Hi(ua,9,1),Jk=Hi(pc,5,0),Xk=Hi(pc,5,1),Tp=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},gi=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Lp=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},vg=function(t){return(t+7)/8|0},xw=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new sr(t.subarray(e,n))},Qk=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bi=function(t,e,n){var r=new Error(e||Qk[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,bi),!n)throw r;return r},Zk=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new sr(0);var a=!n,o=a||e.i!=2,l=e.i;a&&(n=new sr(i*3));var d=function(we){var Pe=n.length;if(we>Pe){var je=new sr(Math.max(Pe*2,we));je.set(n),n=je}},g=e.f||0,m=e.p||0,v=e.b||0,p=e.l,_=e.d,S=e.m,N=e.n,f=i*8;do{if(!p){g=gi(t,m,1);var x=gi(t,m+1,3);if(m+=3,x)if(x==1)p=Kk,_=Xk,S=9,N=5;else if(x==2){var T=gi(t,m,31)+257,L=gi(t,m+10,15)+4,C=T+gi(t,m+5,31)+1;m+=14;for(var G=new sr(C),Z=new sr(19),R=0;R<L;++R)Z[Xm[R]]=gi(t,m+R*3,7);m+=L*3;for(var A=Tp(Z),q=(1<<A)-1,K=Hi(Z,A,1),R=0;R<C;){var te=K[gi(t,m,q)];m+=te&15;var w=te>>4;if(w<16)G[R++]=w;else{var $=0,Q=0;for(w==16?(Q=3+gi(t,m,3),m+=2,$=G[R-1]):w==17?(Q=3+gi(t,m,7),m+=3):w==18&&(Q=11+gi(t,m,127),m+=7);Q--;)G[R++]=$}}var V=G.subarray(0,T),B=G.subarray(T);S=Tp(V),N=Tp(B),p=Hi(V,S,1),_=Hi(B,N,1)}else bi(1);else{var w=vg(m)+4,j=t[w-4]|t[w-3]<<8,D=w+j;if(D>i){l&&bi(0);break}o&&d(v+j),n.set(t.subarray(w,D),v),e.b=v+=j,e.p=m=D*8,e.f=g;continue}if(m>f){l&&bi(0);break}}o&&d(v+131072);for(var ie=(1<<S)-1,ve=(1<<N)-1,E=m;;E=m){var $=p[Lp(t,m)&ie],U=$>>4;if(m+=$&15,m>f){l&&bi(0);break}if($||bi(2),U<256)n[v++]=U;else if(U==256){E=m,p=null;break}else{var X=U-254;if(U>264){var R=U-257,ne=tf[R];X=gi(t,m,(1<<ne)-1)+yw[R],m+=ne}var P=_[Lp(t,m)&ve],H=P>>4;P||bi(3),m+=P&15;var B=Gk[H];if(H>3){var ne=nf[H];B+=Lp(t,m)&(1<<ne)-1,m+=ne}if(m>f){l&&bi(0);break}o&&d(v+131072);var J=v+X;if(v<B){var Y=s-B,be=Math.min(B,J);for(Y+v<0&&bi(3);v<be;++v)n[v]=r[Y+v]}for(;v<J;++v)n[v]=n[v-B]}}e.l=p,e.p=E,e.b=v,e.f=g,p&&(g=1,e.m=S,e.d=_,e.n=N)}while(!g);return v!=n.length&&a?xw(n,0,v):n.subarray(0,v)},rs=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},vu=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Rp=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:_w,l:0};if(i==1){var a=new sr(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(D,T){return D.f-T.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],d=0,g=1,m=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};g!=i-1;)o=n[n[d].f<n[m].f?d++:m++],l=n[d!=g&&n[d].f<n[m].f?d++:m++],n[g++]={s:-1,f:o.f+l.f,l:o,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var p=new qr(v+1),_=e0(n[g-1],p,0);if(_>e){var r=0,S=0,N=_-e,f=1<<N;for(s.sort(function(T,L){return p[L.s]-p[T.s]||T.f-L.f});r<i;++r){var x=s[r].s;if(p[x]>e)S+=f-(1<<_-p[x]),p[x]=e;else break}for(S>>=N;S>0;){var w=s[r].s;p[w]<e?S-=1<<e-p[w]++-1:++r}for(;r>=0&&S;--r){var j=s[r].s;p[j]==e&&(--p[j],++S)}_=e}return{t:new sr(p),l:_}},e0=function(t,e,n){return t.s==-1?Math.max(e0(t.l,e,n+1),e0(t.r,e,n+1)):e[t.s]=n},Gv=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new qr(++e),r=0,i=t[0],s=1,a=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:n.subarray(0,r),n:e}},yu=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},bw=function(t,e,n){var r=n.length,i=vg(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},Yv=function(t,e,n,r,i,s,a,o,l,d,g){rs(e,g++,n),++i[256];for(var m=Rp(i,15),v=m.t,p=m.l,_=Rp(s,15),S=_.t,N=_.l,f=Gv(v),x=f.c,w=f.n,j=Gv(S),D=j.c,T=j.n,L=new qr(19),C=0;C<x.length;++C)++L[x[C]&31];for(var C=0;C<D.length;++C)++L[D[C]&31];for(var G=Rp(L,7),Z=G.t,R=G.l,A=19;A>4&&!Z[Xm[A-1]];--A);var q=d+5<<3,K=yu(i,ua)+yu(s,pc)+a,te=yu(i,v)+yu(s,S)+a+14+3*A+yu(L,Z)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&q<=K&&q<=te)return bw(e,g,t.subarray(l,l+d));var $,Q,V,B;if(rs(e,g,1+(te<K)),g+=2,te<K){$=Hi(v,p,0),Q=v,V=Hi(S,N,0),B=S;var ie=Hi(Z,R,0);rs(e,g,w-257),rs(e,g+5,T-1),rs(e,g+10,A-4),g+=14;for(var C=0;C<A;++C)rs(e,g+3*C,Z[Xm[C]]);g+=3*A;for(var ve=[x,D],E=0;E<2;++E)for(var U=ve[E],C=0;C<U.length;++C){var X=U[C]&31;rs(e,g,ie[X]),g+=Z[X],X>15&&(rs(e,g,U[C]>>5&127),g+=U[C]>>12)}}else $=Yk,Q=ua,V=Jk,B=pc;for(var C=0;C<o;++C){var ne=r[C];if(ne>255){var X=ne>>18&31;vu(e,g,$[X+257]),g+=Q[X+257],X>7&&(rs(e,g,ne>>23&31),g+=tf[X]);var P=ne&31;vu(e,g,V[P]),g+=B[P],P>3&&(vu(e,g,ne>>5&8191),g+=nf[P])}else vu(e,g,$[ne]),g+=Q[ne]}return vu(e,g,$[256]),g+Q[256]},ej=new gg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_w=new sr(0),tj=function(t,e,n,r,i,s){var a=s.z||t.length,o=new sr(r+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(r,o.length-i),d=s.l,g=(s.r||0)&7;if(e){g&&(l[0]=s.r>>3);for(var m=ej[e-1],v=m>>13,p=m&8191,_=(1<<n)-1,S=s.p||new qr(32768),N=s.h||new qr(_+1),f=Math.ceil(n/3),x=2*f,w=function(He){return(t[He]^t[He+1]<<f^t[He+2]<<x)&_},j=new gg(25e3),D=new qr(288),T=new qr(32),L=0,C=0,G=s.i||0,Z=0,R=s.w||0,A=0;G+2<a;++G){var q=w(G),K=G&32767,te=N[q];if(S[K]=te,N[q]=K,R<=G){var $=a-G;if((L>7e3||Z>24576)&&($>423||!d)){g=Yv(t,l,0,j,D,T,C,Z,A,G-A,g),Z=L=C=0,A=G;for(var Q=0;Q<286;++Q)D[Q]=0;for(var Q=0;Q<30;++Q)T[Q]=0}var V=2,B=0,ie=p,ve=K-te&32767;if($>2&&q==w(G-ve))for(var E=Math.min(v,$)-1,U=Math.min(32767,G),X=Math.min(258,$);ve<=U&&--ie&&K!=te;){if(t[G+V]==t[G+V-ve]){for(var ne=0;ne<X&&t[G+ne]==t[G+ne-ve];++ne);if(ne>V){if(V=ne,B=ve,ne>E)break;for(var P=Math.min(ve,ne-2),H=0,Q=0;Q<P;++Q){var J=G-ve+Q&32767,Y=S[J],be=J-Y&32767;be>H&&(H=be,te=J)}}}K=te,te=S[K],ve+=K-te&32767}if(B){j[Z++]=268435456|Qm[V]<<18|Vv[B];var we=Qm[V]&31,Pe=Vv[B]&31;C+=tf[we]+nf[Pe],++D[257+we],++T[Pe],R=G+V,++L}else j[Z++]=t[G],++D[t[G]]}}for(G=Math.max(G,R);G<a;++G)j[Z++]=t[G],++D[t[G]];g=Yv(t,l,d,j,D,T,C,Z,A,G-A,g),d||(s.r=g&7|l[g/8|0]<<3,g-=7,s.h=N,s.p=S,s.i=G,s.w=R)}else{for(var G=s.w||0;G<a+d;G+=65535){var je=G+65535;je>=a&&(l[g/8|0]=d,je=a),g=bw(l,g+1,t.subarray(G,je))}s.i=a}return xw(o,0,r+vg(g)+i)},Sw=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},nj=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new sr(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return tj(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},Nw=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},rj=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=Sw();i.p(e.dictionary),Nw(t,2,i.d())}},ij=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&bi(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&bi(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function t0(t,e){e||(e={});var n=Sw();n.p(t);var r=nj(t,e,e.dictionary?6:2,4);return rj(r,e),Nw(r,r.length-4,n.d()),r}function sj(t,e){return Zk(t.subarray(ij(t,e),-4),{i:2},e,e)}var aj=typeof TextDecoder<"u"&&new TextDecoder,oj=0;try{aj.decode(_w,{stream:!0}),oj=1}catch{}var dt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Ip(){dt.console&&typeof dt.console.log=="function"&&dt.console.log.apply(dt.console,arguments)}var Ht={log:Ip,warn:function(t){dt.console&&(typeof dt.console.warn=="function"?dt.console.warn.apply(dt.console,arguments):Ip.call(null,arguments))},error:function(t){dt.console&&(typeof dt.console.error=="function"?dt.console.error.apply(dt.console,arguments):Ip(t))}};function Op(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Ra(r.response,e,n)},r.onerror=function(){Ht.error("could not download file")},r.send()}function Kv(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Od(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ou,n0,Ra=dt.saveAs||((typeof window>"u"?"undefined":Ut(window))!=="object"||window!==dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=dt.URL||dt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Kv(i.href)?Op(t,e,n):Od(i,i.target="_blank"):Od(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Od(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Kv(t))Op(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Od(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ut(s)!=="object"&&(Ht.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Op(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(dt.HTMLElement)||dt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Ut(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var g=o.result;g=a?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},o.readAsDataURL(t)}else{var l=dt.URL||dt.webkitURL,d=l.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout(function(){l.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function kw(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),"#"+o+l+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Dp(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=er(n,r,i,s,e[0],7,-680876936),s=er(s,n,r,i,e[1],12,-389564586),i=er(i,s,n,r,e[2],17,606105819),r=er(r,i,s,n,e[3],22,-1044525330),n=er(n,r,i,s,e[4],7,-176418897),s=er(s,n,r,i,e[5],12,1200080426),i=er(i,s,n,r,e[6],17,-1473231341),r=er(r,i,s,n,e[7],22,-45705983),n=er(n,r,i,s,e[8],7,1770035416),s=er(s,n,r,i,e[9],12,-1958414417),i=er(i,s,n,r,e[10],17,-42063),r=er(r,i,s,n,e[11],22,-1990404162),n=er(n,r,i,s,e[12],7,1804603682),s=er(s,n,r,i,e[13],12,-40341101),i=er(i,s,n,r,e[14],17,-1502002290),n=tr(n,r=er(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=tr(s,n,r,i,e[6],9,-1069501632),i=tr(i,s,n,r,e[11],14,643717713),r=tr(r,i,s,n,e[0],20,-373897302),n=tr(n,r,i,s,e[5],5,-701558691),s=tr(s,n,r,i,e[10],9,38016083),i=tr(i,s,n,r,e[15],14,-660478335),r=tr(r,i,s,n,e[4],20,-405537848),n=tr(n,r,i,s,e[9],5,568446438),s=tr(s,n,r,i,e[14],9,-1019803690),i=tr(i,s,n,r,e[3],14,-187363961),r=tr(r,i,s,n,e[8],20,1163531501),n=tr(n,r,i,s,e[13],5,-1444681467),s=tr(s,n,r,i,e[2],9,-51403784),i=tr(i,s,n,r,e[7],14,1735328473),n=nr(n,r=tr(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=nr(s,n,r,i,e[8],11,-2022574463),i=nr(i,s,n,r,e[11],16,1839030562),r=nr(r,i,s,n,e[14],23,-35309556),n=nr(n,r,i,s,e[1],4,-1530992060),s=nr(s,n,r,i,e[4],11,1272893353),i=nr(i,s,n,r,e[7],16,-155497632),r=nr(r,i,s,n,e[10],23,-1094730640),n=nr(n,r,i,s,e[13],4,681279174),s=nr(s,n,r,i,e[0],11,-358537222),i=nr(i,s,n,r,e[3],16,-722521979),r=nr(r,i,s,n,e[6],23,76029189),n=nr(n,r,i,s,e[9],4,-640364487),s=nr(s,n,r,i,e[12],11,-421815835),i=nr(i,s,n,r,e[15],16,530742520),n=rr(n,r=nr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=rr(s,n,r,i,e[7],10,1126891415),i=rr(i,s,n,r,e[14],15,-1416354905),r=rr(r,i,s,n,e[5],21,-57434055),n=rr(n,r,i,s,e[12],6,1700485571),s=rr(s,n,r,i,e[3],10,-1894986606),i=rr(i,s,n,r,e[10],15,-1051523),r=rr(r,i,s,n,e[1],21,-2054922799),n=rr(n,r,i,s,e[8],6,1873313359),s=rr(s,n,r,i,e[15],10,-30611744),i=rr(i,s,n,r,e[6],15,-1560198380),r=rr(r,i,s,n,e[13],21,1309151649),n=rr(n,r,i,s,e[4],6,-145523070),s=rr(s,n,r,i,e[11],10,-1120210379),i=rr(i,s,n,r,e[2],15,718787259),r=rr(r,i,s,n,e[9],21,-343485551),t[0]=Ks(n,t[0]),t[1]=Ks(r,t[1]),t[2]=Ks(i,t[2]),t[3]=Ks(s,t[3])}function rf(t,e,n,r,i,s){return e=Ks(Ks(e,t),Ks(r,s)),Ks(e<<i|e>>>32-i,n)}function er(t,e,n,r,i,s,a){return rf(e&n|~e&r,t,e,i,s,a)}function tr(t,e,n,r,i,s,a){return rf(e&r|n&~r,t,e,i,s,a)}function nr(t,e,n,r,i,s,a){return rf(e^n^r,t,e,i,s,a)}function rr(t,e,n,r,i,s,a){return rf(n^(e|~r),t,e,i,s,a)}function jw(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Dp(r,lj(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Dp(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Dp(r,i),r}function lj(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Ou=dt.atob.bind(dt),n0=dt.btoa.bind(dt);var Jv="0123456789abcdef".split("");function uj(t){for(var e="",n=0;n<4;n++)e+=Jv[t>>8*n+4&15]+Jv[t>>8*n&15];return e}function cj(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function r0(t){return jw(t).map(cj).join("")}var dj=function(t){for(var e=0;e<t.length;e++)t[e]=uj(t[e]);return t.join("")}(jw("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ks(t,e){if(dj){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function i0(t,e){var n,r,i,s;if(t!==n){for(var a=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var d=0;for(l=0;l<256;l++){var g=o[l];d=(d+g+a.charCodeAt(l))%256,o[l]=o[d],o[d]=g}n=t,r=o}else o=r;var m=e.length,v=0,p=0,_="";for(l=0;l<m;l++)p=(p+(g=o[v=(v+1)%256]))%256,o[v]=o[p],o[p]=g,a=o[(o[v]+o[p])%256],_+=String.fromCharCode(e.charCodeAt(l)^a);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Xv={print:4,modify:8,copy:16,"annot-forms":32};function Yo(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(Xv.perm!==void 0)throw new Error("Invalid permission: "+o);i+=Xv[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=r0(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=i0(this.encryptionKey,this.padding)}function Ko(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function Qv(t){if(Ut(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var a=e[n][s];try{a[0].apply(t,r)}catch(o){dt.console&&Ht.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function mc(t){if(!(this instanceof mc))return new mc(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Aw(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Hs(t,e,n,r,i){if(!(this instanceof Hs))return new Hs(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Aw.call(this,r,i)}function Ba(t,e,n,r,i){if(!(this instanceof Ba))return new Ba(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Aw.call(this,r,i)}function at(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,d="S",g=null;Ut(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(g=t.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),d=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,v={},p={internal:{},__private__:{}};p.__private__.PubSub=Qv;var _="1.3",S=p.__private__.getPdfVersion=function(){return _};p.__private__.setPdfVersion=function(y){_=y};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return N};var f=p.__private__.getPageFormat=function(y){return N[y]};i=i||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},w=x.COMPAT;function j(){this.saveGraphicsState(),se(new it(Be,0,0,-Be,0,bs()*Be).toString()+" cm"),this.setFontSize(this.getFontSize()/Be),d="n",w=x.ADVANCED}function D(){this.restoreGraphicsState(),d="S",w=x.COMPAT}var T=p.__private__.combineFontStyleAndFontWeight=function(y,O){if(y=="bold"&&O=="normal"||y=="bold"&&O==400||y=="normal"&&O=="italic"||y=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(y=O==400||O==="normal"?y==="italic"?"italic":"normal":O!=700&&O!=="bold"||y!=="normal"?(O==700?"bold":O)+""+y:"bold"),y};p.advancedAPI=function(y){var O=w===x.COMPAT;return O&&j.call(this),typeof y!="function"||(y(this),O&&D.call(this)),this},p.compatAPI=function(y){var O=w===x.ADVANCED;return O&&D.call(this),typeof y!="function"||(y(this),O&&j.call(this)),this},p.isAdvancedAPI=function(){return w===x.ADVANCED};var L,C=function(y){if(w!==x.ADVANCED)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},G=p.roundToPrecision=p.__private__.roundToPrecision=function(y,O){var re=e||O;if(isNaN(y)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(re).replace(/0+$/,"")};L=p.hpf=p.__private__.hpf=typeof l=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return G(y,l)}:l==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return G(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return G(y,16)};var Z=p.f2=p.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return G(y,2)},R=p.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return G(y,3)},A=p.scale=p.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return w===x.COMPAT?y*Be:w===x.ADVANCED?y:void 0},q=function(y){return w===x.COMPAT?bs()-y:w===x.ADVANCED?y:void 0},K=function(y){return A(q(y))};p.__private__.setPrecision=p.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(e=parseInt(y,10))};var te,$="00000000000000000000000000000000",Q=p.__private__.getFileId=function(){return $},V=p.__private__.setFileId=function(y){return $=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Jn=new Yo(g.userPermissions,g.userPassword,g.ownerPassword,$)),$};p.setFileId=function(y){return V(y),this},p.getFileId=function(){return Q()};var B=p.__private__.convertDateToPDFDate=function(y){var O=y.getTimezoneOffset(),re=O<0?"+":"-",ue=Math.floor(Math.abs(O/60)),xe=Math.abs(O%60),Ae=[re,X(ue),"'",X(xe),"'"].join("");return["D:",y.getFullYear(),X(y.getMonth()+1),X(y.getDate()),X(y.getHours()),X(y.getMinutes()),X(y.getSeconds()),Ae].join("")},ie=p.__private__.convertPDFDateToDate=function(y){var O=parseInt(y.substr(2,4),10),re=parseInt(y.substr(6,2),10)-1,ue=parseInt(y.substr(8,2),10),xe=parseInt(y.substr(10,2),10),Ae=parseInt(y.substr(12,2),10),Ie=parseInt(y.substr(14,2),10);return new Date(O,re,ue,xe,Ae,Ie,0)},ve=p.__private__.setCreationDate=function(y){var O;if(y===void 0&&(y=new Date),y instanceof Date)O=B(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=y}return te=O},E=p.__private__.getCreationDate=function(y){var O=te;return y==="jsDate"&&(O=ie(te)),O};p.setCreationDate=function(y){return ve(y),this},p.getCreationDate=function(y){return E(y)};var U,X=p.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},ne=p.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},P=0,H=[],J=[],Y=0,be=[],we=[],Pe=!1,je=J,He=function(){P=0,Y=0,J=[],H=[],be=[],vr=kt(),Yn=kt()};p.__private__.setCustomOutputDestination=function(y){Pe=!0,je=y};var Ne=function(y){Pe||(je=y)};p.__private__.resetCustomOutputDestination=function(){Pe=!1,je=J};var se=p.__private__.out=function(y){return y=y.toString(),Y+=y.length+1,je.push(y),je},Qe=p.__private__.write=function(y){return se(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},Ue=p.__private__.getArrayBuffer=function(y){for(var O=y.length,re=new ArrayBuffer(O),ue=new Uint8Array(re);O--;)ue[O]=y.charCodeAt(O);return re},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Le};var Oe=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(y){return Oe=w===x.ADVANCED?y/Be:y,this};var ae,oe=p.__private__.getFontSize=p.getFontSize=function(){return w===x.COMPAT?Oe:Oe*Be},ye=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(y){return ye=y,this},p.__private__.getR2L=p.getR2L=function(){return ye};var De,Me=p.__private__.setZoomMode=function(y){var O=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))ae=y;else if(isNaN(y)){if(O.indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');ae=y}else ae=parseInt(y,10)};p.__private__.getZoomMode=function(){return ae};var me,bt=p.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');De=y};p.__private__.getPageMode=function(){return De};var Tt=p.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');me=y};p.__private__.getLayoutMode=function(){return me},p.__private__.setDisplayMode=p.setDisplayMode=function(y,O,re){return Me(y),Tt(O),bt(re),this};var tt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(y){if(Object.keys(tt).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tt[y]},p.__private__.getDocumentProperties=function(){return tt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(y){for(var O in tt)tt.hasOwnProperty(O)&&y[O]&&(tt[O]=y[O]);return this},p.__private__.setDocumentProperty=function(y,O){if(Object.keys(tt).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tt[y]=O};var yt,Be,An,Et,de,le={},Ze={},Lt=[],Ge={},_t={},nt={},Ve={},ut=null,St=0,rt=[],Rt=new Qv(p),Ti=t.hotfixes||[],fn={},Je={},Cr=[],it=function y(O,re,ue,xe,Ae,Ie){if(!(this instanceof y))return new y(O,re,ue,xe,Ae,Ie);isNaN(O)&&(O=1),isNaN(re)&&(re=0),isNaN(ue)&&(ue=0),isNaN(xe)&&(xe=1),isNaN(Ae)&&(Ae=0),isNaN(Ie)&&(Ie=0),this._matrix=[O,re,ue,xe,Ae,Ie]};Object.defineProperty(it.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(it.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(it.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(it.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(it.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(it.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(it.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(it.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(it.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(it.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(it.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(it.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(it.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(it.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(it.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(it.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),it.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(y)},it.prototype.multiply=function(y){var O=y.sx*this.sx+y.shy*this.shx,re=y.sx*this.shy+y.shy*this.sy,ue=y.shx*this.sx+y.sy*this.shx,xe=y.shx*this.shy+y.sy*this.sy,Ae=y.tx*this.sx+y.ty*this.shx+this.tx,Ie=y.tx*this.shy+y.ty*this.sy+this.ty;return new it(O,re,ue,xe,Ae,Ie)},it.prototype.decompose=function(){var y=this.sx,O=this.shy,re=this.shx,ue=this.sy,xe=this.tx,Ae=this.ty,Ie=Math.sqrt(y*y+O*O),qe=(y/=Ie)*re+(O/=Ie)*ue;re-=y*qe,ue-=O*qe;var et=Math.sqrt(re*re+ue*ue);return qe/=et,y*(ue/=et)<O*(re/=et)&&(y=-y,O=-O,qe=-qe,Ie=-Ie),{scale:new it(Ie,0,0,et,0,0),translate:new it(1,0,0,1,xe,Ae),rotate:new it(y,O,-O,y,0,0),skew:new it(1,0,qe,1,0,0)}},it.prototype.toString=function(y){return this.join(" ")},it.prototype.inversed=function(){var y=this.sx,O=this.shy,re=this.shx,ue=this.sy,xe=this.tx,Ae=this.ty,Ie=1/(y*ue-O*re),qe=ue*Ie,et=-O*Ie,vt=-re*Ie,pt=y*Ie;return new it(qe,et,vt,pt,-qe*xe-vt*Ae,-et*xe-pt*Ae)},it.prototype.applyToPoint=function(y){var O=y.x*this.sx+y.y*this.shx+this.tx,re=y.x*this.shy+y.y*this.sy+this.ty;return new go(O,re)},it.prototype.applyToRectangle=function(y){var O=this.applyToPoint(y),re=this.applyToPoint(new go(y.x+y.w,y.y+y.h));return new $l(O.x,O.y,re.x-O.x,re.y-O.y)},it.prototype.clone=function(){var y=this.sx,O=this.shy,re=this.shx,ue=this.sy,xe=this.tx,Ae=this.ty;return new it(y,O,re,ue,xe,Ae)},p.Matrix=it;var Tr=p.matrixMult=function(y,O){return O.multiply(y)},Vt=new it(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Vt;var Ft=function(y,O){if(!_t[y]){var re=(O instanceof Hs?"Sh":"P")+(Object.keys(Ge).length+1).toString(10);O.id=re,_t[y]=re,Ge[re]=O,Rt.publish("addPattern",O)}};p.ShadingPattern=Hs,p.TilingPattern=Ba,p.addShadingPattern=function(y,O){return C("addShadingPattern()"),Ft(y,O),this},p.beginTilingPattern=function(y){C("beginTilingPattern()"),Bc(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},p.endTilingPattern=function(y,O){C("endTilingPattern()"),O.stream=we[U].join(`
`),Ft(y,O),Rt.publish("endTilingPattern",O),Cr.pop().restore()};var ht=p.__private__.newObject=function(){var y=kt();return jt(y,!0),y},kt=p.__private__.newObjectDeferred=function(){return P++,H[P]=function(){return Y},P},jt=function(y,O){return O=typeof O=="boolean"&&O,H[y]=Y,O&&se(y+" 0 obj"),y},Lr=p.__private__.newAdditionalObject=function(){var y={objId:kt(),content:""};return be.push(y),y},vr=kt(),Yn=kt(),or=p.__private__.decodeColorString=function(y){var O=y.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length===5&&(O[4]==="k"||O[4]==="K")&&(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var re=parseFloat(O[0]);O=[re,re,re,"r"]}for(var ue="#",xe=0;xe<3;xe++)ue+=("0"+Math.floor(255*parseFloat(O[xe])).toString(16)).slice(-2);return ue},Kn=p.__private__.encodeColorString=function(y){var O;typeof y=="string"&&(y={ch1:y});var re=y.ch1,ue=y.ch2,xe=y.ch3,Ae=y.ch4,Ie=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var qe=new kw(re);if(qe.ok)re=qe.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var et=parseInt(re.substr(1),16);re=et>>16&255,ue=et>>8&255,xe=255&et}if(ue===void 0||Ae===void 0&&re===ue&&ue===xe)if(typeof re=="string")O=re+" "+Ie[0];else switch(y.precision){case 2:O=Z(re/255)+" "+Ie[0];break;case 3:default:O=R(re/255)+" "+Ie[0]}else if(Ae===void 0||Ut(Ae)==="object"){if(Ae&&!isNaN(Ae.a)&&Ae.a===0)return O=["1.","1.","1.",Ie[1]].join(" ");if(typeof re=="string")O=[re,ue,xe,Ie[1]].join(" ");else switch(y.precision){case 2:O=[Z(re/255),Z(ue/255),Z(xe/255),Ie[1]].join(" ");break;default:case 3:O=[R(re/255),R(ue/255),R(xe/255),Ie[1]].join(" ")}}else if(typeof re=="string")O=[re,ue,xe,Ae,Ie[2]].join(" ");else switch(y.precision){case 2:O=[Z(re),Z(ue),Z(xe),Z(Ae),Ie[2]].join(" ");break;case 3:default:O=[R(re),R(ue),R(xe),R(Ae),Ie[2]].join(" ")}return O},lr=p.__private__.getFilters=function(){return a},yr=p.__private__.putStream=function(y){var O=(y=y||{}).data||"",re=y.filters||lr(),ue=y.alreadyAppliedFilters||[],xe=y.addLength1||!1,Ae=O.length,Ie=y.objectId,qe=function(Xn){return Xn};if(g!==null&&Ie===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(qe=Jn.encryptor(Ie,0));var et={};re===!0&&(re=["FlateEncode"]);var vt=y.additionalKeyValues||[],pt=(et=at.API.processDataByFilters!==void 0?at.API.processDataByFilters(O,re):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(ue)?ue.join(" "):ue.toString());if(et.data.length!==0&&(vt.push({key:"Length",value:et.data.length}),xe===!0&&vt.push({key:"Length1",value:Ae})),pt.length!=0)if(pt.split("/").length-1==1)vt.push({key:"Filter",value:pt});else{vt.push({key:"Filter",value:"["+pt+"]"});for(var Ct=0;Ct<vt.length;Ct+=1)if(vt[Ct].key==="DecodeParms"){for(var tn=[],on=0;on<et.reverseChain.split("/").length-1;on+=1)tn.push("null");tn.push(vt[Ct].value),vt[Ct].value="["+tn.join(" ")+"]"}}se("<<");for(var _n=0;_n<vt.length;_n++)se("/"+vt[_n].key+" "+vt[_n].value);se(">>"),et.data.length!==0&&(se("stream"),se(qe(et.data)),se("endstream"))},Rr=p.__private__.putPage=function(y){var O=y.number,re=y.data,ue=y.objId,xe=y.contentsObjId;jt(ue,!0),se("<</Type /Page"),se("/Parent "+y.rootDictionaryObjId+" 0 R"),se("/Resources "+y.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(L(y.mediaBox.bottomLeftX))+" "+parseFloat(L(y.mediaBox.bottomLeftY))+" "+L(y.mediaBox.topRightX)+" "+L(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&se("/CropBox ["+L(y.cropBox.bottomLeftX)+" "+L(y.cropBox.bottomLeftY)+" "+L(y.cropBox.topRightX)+" "+L(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&se("/BleedBox ["+L(y.bleedBox.bottomLeftX)+" "+L(y.bleedBox.bottomLeftY)+" "+L(y.bleedBox.topRightX)+" "+L(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&se("/TrimBox ["+L(y.trimBox.bottomLeftX)+" "+L(y.trimBox.bottomLeftY)+" "+L(y.trimBox.topRightX)+" "+L(y.trimBox.topRightY)+"]"),y.artBox!==null&&se("/ArtBox ["+L(y.artBox.bottomLeftX)+" "+L(y.artBox.bottomLeftY)+" "+L(y.artBox.topRightX)+" "+L(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&se("/UserUnit "+y.userUnit),Rt.publish("putPage",{objId:ue,pageContext:rt[O],pageNumber:O,page:re}),se("/Contents "+xe+" 0 R"),se(">>"),se("endobj");var Ae=re.join(`
`);return w===x.ADVANCED&&(Ae+=`
Q`),jt(xe,!0),yr({data:Ae,filters:lr(),objectId:xe}),se("endobj"),ue},ga=p.__private__.putPages=function(){var y,O,re=[];for(y=1;y<=St;y++)rt[y].objId=kt(),rt[y].contentsObjId=kt();for(y=1;y<=St;y++)re.push(Rr({number:y,data:we[y],objId:rt[y].objId,contentsObjId:rt[y].contentsObjId,mediaBox:rt[y].mediaBox,cropBox:rt[y].cropBox,bleedBox:rt[y].bleedBox,trimBox:rt[y].trimBox,artBox:rt[y].artBox,userUnit:rt[y].userUnit,rootDictionaryObjId:vr,resourceDictionaryObjId:Yn}));jt(vr,!0),se("<</Type /Pages");var ue="/Kids [";for(O=0;O<St;O++)ue+=re[O]+" 0 R ";se(ue+"]"),se("/Count "+St),se(">>"),se("endobj"),Rt.publish("postPutPages")},ro=function(y){Rt.publish("putFont",{font:y,out:se,newObject:ht,putStream:yr}),y.isAlreadyPutted!==!0&&(y.objectNumber=ht(),se("<<"),se("/Type /Font"),se("/BaseFont /"+Ko(y.postScriptName)),se("/Subtype /Type1"),typeof y.encoding=="string"&&se("/Encoding /"+y.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},io=function(){for(var y in le)le.hasOwnProperty(y)&&(m===!1||m===!0&&v.hasOwnProperty(y))&&ro(le[y])},so=function(y){y.objectNumber=ht();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[L(y.x),L(y.y),L(y.x+y.width),L(y.y+y.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var re=y.pages[1].join(`
`);yr({data:re,additionalKeyValues:O,objectId:y.objectNumber}),se("endobj")},ao=function(){for(var y in fn)fn.hasOwnProperty(y)&&so(fn[y])},_c=function(y,O){var re,ue=[],xe=1/(O-1);for(re=0;re<1;re+=xe)ue.push(re);if(ue.push(1),y[0].offset!=0){var Ae={offset:0,color:y[0].color};y.unshift(Ae)}if(y[y.length-1].offset!=1){var Ie={offset:1,color:y[y.length-1].color};y.push(Ie)}for(var qe="",et=0,vt=0;vt<ue.length;vt++){for(re=ue[vt];re>y[et+1].offset;)et++;var pt=y[et].offset,Ct=(re-pt)/(y[et+1].offset-pt),tn=y[et].color,on=y[et+1].color;qe+=ne(Math.round((1-Ct)*tn[0]+Ct*on[0]).toString(16))+ne(Math.round((1-Ct)*tn[1]+Ct*on[1]).toString(16))+ne(Math.round((1-Ct)*tn[2]+Ct*on[2]).toString(16))}return qe.trim()},sf=function(y,O){O||(O=21);var re=ht(),ue=_c(y.colors,O),xe=[];xe.push({key:"FunctionType",value:"0"}),xe.push({key:"Domain",value:"[0.0 1.0]"}),xe.push({key:"Size",value:"["+O+"]"}),xe.push({key:"BitsPerSample",value:"8"}),xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yr({data:ue,additionalKeyValues:xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),se("endobj"),y.objectNumber=ht(),se("<< /ShadingType "+y.type),se("/ColorSpace /DeviceRGB");var Ae="/Coords ["+L(parseFloat(y.coords[0]))+" "+L(parseFloat(y.coords[1]))+" ";y.type===2?Ae+=L(parseFloat(y.coords[2]))+" "+L(parseFloat(y.coords[3])):Ae+=L(parseFloat(y.coords[2]))+" "+L(parseFloat(y.coords[3]))+" "+L(parseFloat(y.coords[4]))+" "+L(parseFloat(y.coords[5])),se(Ae+="]"),y.matrix&&se("/Matrix ["+y.matrix.toString()+"]"),se("/Function "+re+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},af=function(y,O){var re=kt(),ue=ht();O.push({resourcesOid:re,objectOid:ue}),y.objectNumber=ue;var xe=[];xe.push({key:"Type",value:"/Pattern"}),xe.push({key:"PatternType",value:"1"}),xe.push({key:"PaintType",value:"1"}),xe.push({key:"TilingType",value:"1"}),xe.push({key:"BBox",value:"["+y.boundingBox.map(L).join(" ")+"]"}),xe.push({key:"XStep",value:L(y.xStep)}),xe.push({key:"YStep",value:L(y.yStep)}),xe.push({key:"Resources",value:re+" 0 R"}),y.matrix&&xe.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),yr({data:y.stream,additionalKeyValues:xe,objectId:y.objectNumber}),se("endobj")},oo=function(y){var O;for(O in Ge)Ge.hasOwnProperty(O)&&(Ge[O]instanceof Hs?sf(Ge[O]):Ge[O]instanceof Ba&&af(Ge[O],y))},Sc=function(y){for(var O in y.objectNumber=ht(),se("<<"),y)switch(O){case"opacity":se("/ca "+Z(y[O]));break;case"stroke-opacity":se("/CA "+Z(y[O]))}se(">>"),se("endobj")},of=function(){var y;for(y in nt)nt.hasOwnProperty(y)&&Sc(nt[y])},Ll=function(){for(var y in se("/XObject <<"),fn)fn.hasOwnProperty(y)&&fn[y].objectNumber>=0&&se("/"+y+" "+fn[y].objectNumber+" 0 R");Rt.publish("putXobjectDict"),se(">>")},lf=function(){Jn.oid=ht(),se("<<"),se("/Filter /Standard"),se("/V "+Jn.v),se("/R "+Jn.r),se("/U <"+Jn.toHexString(Jn.U)+">"),se("/O <"+Jn.toHexString(Jn.O)+">"),se("/P "+Jn.P),se(">>"),se("endobj")},Nc=function(){for(var y in se("/Font <<"),le)le.hasOwnProperty(y)&&(m===!1||m===!0&&v.hasOwnProperty(y))&&se("/"+y+" "+le[y].objectNumber+" 0 R");se(">>")},uf=function(){if(Object.keys(Ge).length>0){for(var y in se("/Shading <<"),Ge)Ge.hasOwnProperty(y)&&Ge[y]instanceof Hs&&Ge[y].objectNumber>=0&&se("/"+y+" "+Ge[y].objectNumber+" 0 R");Rt.publish("putShadingPatternDict"),se(">>")}},lo=function(y){if(Object.keys(Ge).length>0){for(var O in se("/Pattern <<"),Ge)Ge.hasOwnProperty(O)&&Ge[O]instanceof p.TilingPattern&&Ge[O].objectNumber>=0&&Ge[O].objectNumber<y&&se("/"+O+" "+Ge[O].objectNumber+" 0 R");Rt.publish("putTilingPatternDict"),se(">>")}},cf=function(){if(Object.keys(nt).length>0){var y;for(y in se("/ExtGState <<"),nt)nt.hasOwnProperty(y)&&nt[y].objectNumber>=0&&se("/"+y+" "+nt[y].objectNumber+" 0 R");Rt.publish("putGStateDict"),se(">>")}},pn=function(y){jt(y.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Nc(),uf(),lo(y.objectOid),cf(),Ll(),se(">>"),se("endobj")},kc=function(){var y=[];io(),of(),ao(),oo(y),Rt.publish("putResources"),y.forEach(pn),pn({resourcesOid:Yn,objectOid:Number.MAX_SAFE_INTEGER}),Rt.publish("postPutResources")},jc=function(){Rt.publish("putAdditionalObjects");for(var y=0;y<be.length;y++){var O=be[y];jt(O.objId,!0),se(O.content),se("endobj")}Rt.publish("postPutAdditionalObjects")},Ac=function(y){Ze[y.fontName]=Ze[y.fontName]||{},Ze[y.fontName][y.fontStyle]=y.id},Rl=function(y,O,re,ue,xe){var Ae={id:"F"+(Object.keys(le).length+1).toString(10),postScriptName:y,fontName:O,fontStyle:re,encoding:ue,isStandardFont:xe||!1,metadata:{}};return Rt.publish("addFont",{font:Ae,instance:this}),le[Ae.id]=Ae,Ac(Ae),Ae.id},df=function(y){for(var O=0,re=Le.length;O<re;O++){var ue=Rl.call(this,y[O][0],y[O][1],y[O][2],Le[O][3],!0);m===!1&&(v[ue]=!0);var xe=y[O][0].split("-");Ac({id:ue,fontName:xe[0],fontStyle:xe[1]||""})}Rt.publish("addFonts",{fonts:le,dictionary:Ze})},ci=function(y){return y.foo=function(){try{return y.apply(this,arguments)}catch(ue){var O=ue.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var re="Error in function "+O.split(`
`)[0].split("<")[0]+": "+ue.message;if(!dt.console)throw new Error(re);dt.console.error(re,ue),dt.alert&&alert(re)}},y.foo.bar=y,y.foo},uo=function(y,O){var re,ue,xe,Ae,Ie,qe,et,vt,pt;if(xe=(O=O||{}).sourceEncoding||"Unicode",Ie=O.outputEncoding,(O.autoencode||Ie)&&le[yt].metadata&&le[yt].metadata[xe]&&le[yt].metadata[xe].encoding&&(Ae=le[yt].metadata[xe].encoding,!Ie&&le[yt].encoding&&(Ie=le[yt].encoding),!Ie&&Ae.codePages&&(Ie=Ae.codePages[0]),typeof Ie=="string"&&(Ie=Ae[Ie]),Ie)){for(et=!1,qe=[],re=0,ue=y.length;re<ue;re++)(vt=Ie[y.charCodeAt(re)])?qe.push(String.fromCharCode(vt)):qe.push(y[re]),qe[re].charCodeAt(0)>>8&&(et=!0);y=qe.join("")}for(re=y.length;et===void 0&&re!==0;)y.charCodeAt(re-1)>>8&&(et=!0),re--;if(!et)return y;for(qe=O.noBOM?[]:[254,255],re=0,ue=y.length;re<ue;re++){if((pt=(vt=y.charCodeAt(re))>>8)>>8)throw new Error("Character at position "+re+" of string '"+y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qe.push(pt),qe.push(vt-(pt<<8))}return String.fromCharCode.apply(void 0,qe)},wr=p.__private__.pdfEscape=p.pdfEscape=function(y,O){return uo(y,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Il=p.__private__.beginPage=function(y){we[++St]=[],rt[St]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},Ec(St),Ne(we[U])},Pc=function(y,O){var re,ue,xe;switch(n=O||n,typeof y=="string"&&(re=f(y.toLowerCase()),Array.isArray(re)&&(ue=re[0],xe=re[1])),Array.isArray(y)&&(ue=y[0]*Be,xe=y[1]*Be),isNaN(ue)&&(ue=i[0],xe=i[1]),(ue>14400||xe>14400)&&(Ht.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ue=Math.min(14400,ue),xe=Math.min(14400,xe)),i=[ue,xe],n.substr(0,1)){case"l":xe>ue&&(i=[xe,ue]);break;case"p":ue>xe&&(i=[xe,ue])}Il(i),Oc(Ml),se(di),Bl!==0&&se(Bl+" J"),Ul!==0&&se(Ul+" j"),Rt.publish("addPage",{pageNumber:St})},hf=function(y){y>0&&y<=St&&(we.splice(y,1),rt.splice(y,1),St--,U>St&&(U=St),this.setPage(U))},Ec=function(y){y>0&&y<=St&&(U=y)},ff=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return we.length-1},Cc=function(y,O,re){var ue,xe=void 0;return re=re||{},y=y!==void 0?y:le[yt].fontName,O=O!==void 0?O:le[yt].fontStyle,ue=y.toLowerCase(),Ze[ue]!==void 0&&Ze[ue][O]!==void 0?xe=Ze[ue][O]:Ze[y]!==void 0&&Ze[y][O]!==void 0?xe=Ze[y][O]:re.disableWarning===!1&&Ht.warn("Unable to look up font label for font '"+y+"', '"+O+"'. Refer to getFontList() for available fonts."),xe||re.noFallback||(xe=Ze.times[O])==null&&(xe=Ze.times.normal),xe},pf=p.__private__.putInfo=function(){var y=ht(),O=function(ue){return ue};for(var re in g!==null&&(O=Jn.encryptor(y,0)),se("<<"),se("/Producer ("+wr(O("jsPDF "+at.version))+")"),tt)tt.hasOwnProperty(re)&&tt[re]&&se("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+wr(O(tt[re]))+")");se("/CreationDate ("+wr(O(te))+")"),se(">>"),se("endobj")},Ol=p.__private__.putCatalog=function(y){var O=(y=y||{}).rootDictionaryObjId||vr;switch(ht(),se("<<"),se("/Type /Catalog"),se("/Pages "+O+" 0 R"),ae||(ae="fullwidth"),ae){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+ae;re.substr(re.length-1)==="%"&&(ae=parseInt(ae)/100),typeof ae=="number"&&se("/OpenAction [3 0 R /XYZ null null "+Z(ae)+"]")}switch(me||(me="continuous"),me){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}De&&se("/PageMode /"+De),Rt.publish("putCatalog"),se(">>"),se("endobj")},mf=p.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(P+1)),se("/Root "+P+" 0 R"),se("/Info "+(P-1)+" 0 R"),g!==null&&se("/Encrypt "+Jn.oid+" 0 R"),se("/ID [ <"+$+"> <"+$+"> ]"),se(">>")},gf=p.__private__.putHeader=function(){se("%PDF-"+_),se("%")},vf=p.__private__.putXRef=function(){var y="0000000000";se("xref"),se("0 "+(P+1)),se("0000000000 65535 f ");for(var O=1;O<=P;O++)typeof H[O]=="function"?se((y+H[O]()).slice(-10)+" 00000 n "):H[O]!==void 0?se((y+H[O]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},Yi=p.__private__.buildDocument=function(){He(),Ne(J),Rt.publish("buildDocument"),gf(),ga(),jc(),kc(),g!==null&&lf(),pf(),Ol();var y=Y;return vf(),mf(),se("startxref"),se(""+y),se("%%EOF"),Ne(we[U]),J.join(`
`)},co=p.__private__.getBlob=function(y){return new Blob([Ue(y)],{type:"application/pdf"})},ho=p.output=p.__private__.output=ci(function(y,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",y){case void 0:return Yi();case"save":p.save(O.filename);break;case"arraybuffer":return Ue(Yi());case"blob":return co(Yi());case"bloburi":case"bloburl":if(dt.URL!==void 0&&typeof dt.URL.createObjectURL=="function")return dt.URL&&dt.URL.createObjectURL(co(Yi()))||void 0;Ht.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",ue=Yi();try{re=n0(ue)}catch{re=n0(unescape(encodeURIComponent(ue)))}return"data:application/pdf;filename="+O.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(dt)==="[object Window]"){var xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ae=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(xe=O.pdfObjectUrl,Ae="");var Ie='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xe+'"'+Ae+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",qe=dt.open();return qe!==null&&qe.document.write(Ie),qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(dt)==="[object Window]"){var et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',vt=dt.open();if(vt!==null){vt.document.write(et);var pt=this;vt.document.documentElement.querySelector("#pdfViewer").onload=function(){vt.document.title=O.filename,vt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(pt.output("bloburl"))}}return vt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(dt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',tn=dt.open();if(tn!==null&&(tn.document.write(Ct),tn.document.title=O.filename),tn||typeof safari>"u")return tn;break;case"datauri":case"dataurl":return dt.document.location.href=this.output("datauristring",O);default:return null}}),Tc=function(y){return Array.isArray(Ti)===!0&&Ti.indexOf(y)>-1};switch(r){case"pt":Be=1;break;case"mm":Be=72/25.4;break;case"cm":Be=72/2.54;break;case"in":Be=72;break;case"px":Be=Tc("px_scaling")==1?.75:96/72;break;case"pc":case"em":Be=12;break;case"ex":Be=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Be=r}var Jn=null;ve(),V();var yf=function(y){return g!==null?Jn.encryptor(y,0):function(O){return O}},Lc=p.__private__.getPageInfo=p.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:rt[y].objId,pageNumber:y,pageContext:rt[y]}},ft=p.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in rt)if(rt[O].objId===y)break;return Lc(O)},wf=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:rt[U].objId,pageNumber:U,pageContext:rt[U]}};p.addPage=function(){return Pc.apply(this,arguments),this},p.setPage=function(){return Ec.apply(this,arguments),Ne.call(this,we[U]),this},p.insertPage=function(y){return this.addPage(),this.movePage(U,y),this},p.movePage=function(y,O){var re,ue;if(y>O){re=we[y],ue=rt[y];for(var xe=y;xe>O;xe--)we[xe]=we[xe-1],rt[xe]=rt[xe-1];we[O]=re,rt[O]=ue,this.setPage(O)}else if(y<O){re=we[y],ue=rt[y];for(var Ae=y;Ae<O;Ae++)we[Ae]=we[Ae+1],rt[Ae]=rt[Ae+1];we[O]=re,rt[O]=ue,this.setPage(O)}return this},p.deletePage=function(){return hf.apply(this,arguments),this},p.__private__.text=p.text=function(y,O,re,ue,xe){var Ae,Ie,qe,et,vt,pt,Ct,tn,on,_n=(ue=ue||{}).scope||this;if(typeof y=="number"&&typeof O=="number"&&(typeof re=="string"||Array.isArray(re))){var Xn=re;re=O,O=y,y=Xn}if(arguments[3]instanceof it?(C("The transform parameter of text() with a Matrix value"),on=xe):(qe=arguments[4],et=arguments[5],Ut(Ct=arguments[3])==="object"&&Ct!==null||(typeof qe=="string"&&(et=qe,qe=null),typeof Ct=="string"&&(et=Ct,Ct=null),typeof Ct=="number"&&(qe=Ct,Ct=null),ue={flags:Ct,angle:qe,align:et})),isNaN(O)||isNaN(re)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return _n;var Rn="",hi=!1,Ir=typeof ue.lineHeightFactor=="number"?ue.lineHeightFactor:ya,Ii=_n.internal.scaleFactor;function Uc(Gt){return Gt=Gt.split("	").join(Array(ue.TabLen||9).join(" ")),wr(Gt,Ct)}function Vl(Gt){for(var Yt,gn=Gt.concat(),Pn=[],Zi=gn.length;Zi--;)typeof(Yt=gn.shift())=="string"?Pn.push(Yt):Array.isArray(Gt)&&(Yt.length===1||Yt[1]===void 0&&Yt[2]===void 0)?Pn.push(Yt[0]):Pn.push([Yt[0],Yt[1],Yt[2]]);return Pn}function Gl(Gt,Yt){var gn;if(typeof Gt=="string")gn=Yt(Gt)[0];else if(Array.isArray(Gt)){for(var Pn,Zi,tu=Gt.concat(),Ao=[],Vc=tu.length;Vc--;)typeof(Pn=tu.shift())=="string"?Ao.push(Yt(Pn)[0]):Array.isArray(Pn)&&typeof Pn[0]=="string"&&(Zi=Yt(Pn[0],Pn[1],Pn[2]),Ao.push([Zi[0],Zi[1],Zi[2]]));gn=Ao}return gn}var yo=!1,Yl=!0;if(typeof y=="string")yo=!0;else if(Array.isArray(y)){var Kl=y.concat();Ie=[];for(var wo,Bn=Kl.length;Bn--;)(typeof(wo=Kl.shift())!="string"||Array.isArray(wo)&&typeof wo[0]!="string")&&(Yl=!1);yo=Yl}if(yo===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var xo=Oe/_n.internal.scaleFactor,bo=xo*(Ir-1);switch(ue.baseline){case"bottom":re-=bo;break;case"top":re+=xo-bo;break;case"hanging":re+=xo-2*bo;break;case"middle":re+=xo/2-bo}if((pt=ue.maxWidth||0)>0&&(typeof y=="string"?y=_n.splitTextToSize(y,pt):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(Gt,Yt){return Gt.concat(_n.splitTextToSize(Yt,pt))},[]))),Ae={text:y,x:O,y:re,options:ue,mutex:{pdfEscape:wr,activeFontKey:yt,fonts:le,activeFontSize:Oe}},Rt.publish("preProcessText",Ae),y=Ae.text,qe=(ue=Ae.options).angle,!(on instanceof it)&&qe&&typeof qe=="number"){qe*=Math.PI/180,ue.rotationDirection===0&&(qe=-qe),w===x.ADVANCED&&(qe=-qe);var _o=Math.cos(qe),Jl=Math.sin(qe);on=new it(_o,Jl,-Jl,_o,0,0)}else qe&&qe instanceof it&&(on=qe);w!==x.ADVANCED||on||(on=Vt),(vt=ue.charSpace||mo)!==void 0&&(Rn+=L(A(vt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(tn=ue.horizontalScale)!==void 0&&(Rn+=L(100*tn)+` Tz
`),ue.lang;var xr=-1,Ef=ue.renderingMode!==void 0?ue.renderingMode:ue.stroke,Xl=_n.internal.getCurrentPageInfo().pageContext;switch(Ef){case 0:case!1:case"fill":xr=0;break;case 1:case!0:case"stroke":xr=1;break;case 2:case"fillThenStroke":xr=2;break;case 3:case"invisible":xr=3;break;case 4:case"fillAndAddForClipping":xr=4;break;case 5:case"strokeAndAddPathForClipping":xr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":xr=6;break;case 7:case"addToPathForClipping":xr=7}var $c=Xl.usedRenderingMode!==void 0?Xl.usedRenderingMode:-1;xr!==-1?Rn+=xr+` Tr
`:$c!==-1&&(Rn+=`0 Tr
`),xr!==-1&&(Xl.usedRenderingMode=xr),et=ue.align||"left";var Jr,So=Oe*Ir,qc=_n.internal.pageSize.getWidth(),Wc=le[yt];vt=ue.charSpace||mo,pt=ue.maxWidth||0,Ct=Object.assign({autoencode:!0,noBOM:!0},ue.flags);var _s=[],ba=function(Gt){return _n.getStringUnitWidth(Gt,{font:Wc,charSpace:vt,fontSize:Oe,doKerning:!1})*Oe/Ii};if(Object.prototype.toString.call(y)==="[object Array]"){var br;Ie=Vl(y),et!=="left"&&(Jr=Ie.map(ba));var ur,Ss=0;if(et==="right"){O-=Jr[0],y=[],Bn=Ie.length;for(var Ji=0;Ji<Bn;Ji++)Ji===0?(ur=Ri(O),br=Ki(re)):(ur=A(Ss-Jr[Ji]),br=-So),y.push([Ie[Ji],ur,br]),Ss=Jr[Ji]}else if(et==="center"){O-=Jr[0]/2,y=[],Bn=Ie.length;for(var Xi=0;Xi<Bn;Xi++)Xi===0?(ur=Ri(O),br=Ki(re)):(ur=A((Ss-Jr[Xi])/2),br=-So),y.push([Ie[Xi],ur,br]),Ss=Jr[Xi]}else if(et==="left"){y=[],Bn=Ie.length;for(var No=0;No<Bn;No++)y.push(Ie[No])}else if(et==="justify"&&Wc.encoding==="Identity-H"){y=[],Bn=Ie.length,pt=pt!==0?pt:qc;for(var Qi=0,mn=0;mn<Bn;mn++)if(br=mn===0?Ki(re):-So,ur=mn===0?Ri(O):Qi,mn<Bn-1){var Ql=A((pt-Jr[mn])/(Ie[mn].split(" ").length-1)),cr=Ie[mn].split(" ");y.push([cr[0]+" ",ur,br]),Qi=0;for(var Xr=1;Xr<cr.length;Xr++){var ko=(ba(cr[Xr-1]+" "+cr[Xr])-ba(cr[Xr]))*Ii+Ql;Xr==cr.length-1?y.push([cr[Xr],ko,0]):y.push([cr[Xr]+" ",ko,0]),Qi-=ko}}else y.push([Ie[mn],ur,br]);y.push(["",Qi,0])}else{if(et!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],Bn=Ie.length,pt=pt!==0?pt:qc,mn=0;mn<Bn;mn++)br=mn===0?Ki(re):-So,ur=mn===0?Ri(O):0,mn<Bn-1?_s.push(L(A((pt-Jr[mn])/(Ie[mn].split(" ").length-1)))):_s.push(0),y.push([Ie[mn],ur,br])}}var Hc=typeof ue.R2L=="boolean"?ue.R2L:ye;Hc===!0&&(y=Gl(y,function(Gt,Yt,gn){return[Gt.split("").reverse().join(""),Yt,gn]})),Ae={text:y,x:O,y:re,options:ue,mutex:{pdfEscape:wr,activeFontKey:yt,fonts:le,activeFontSize:Oe}},Rt.publish("postProcessText",Ae),y=Ae.text,hi=Ae.mutex.isHex||!1;var Zl=le[yt].encoding;Zl!=="WinAnsiEncoding"&&Zl!=="StandardEncoding"||(y=Gl(y,function(Gt,Yt,gn){return[Uc(Gt),Yt,gn]})),Ie=Vl(y),y=[];for(var _a,Sa,Ns,Na=0,jo=1,ka=Array.isArray(Ie[0])?jo:Na,ks="",eu=function(Gt,Yt,gn){var Pn="";return gn instanceof it?(gn=typeof ue.angle=="number"?Tr(gn,new it(1,0,0,1,Gt,Yt)):Tr(new it(1,0,0,1,Gt,Yt),gn),w===x.ADVANCED&&(gn=Tr(new it(1,0,0,-1,0,0),gn)),Pn=gn.join(" ")+` Tm
`):Pn=L(Gt)+" "+L(Yt)+` Td
`,Pn},Qr=0;Qr<Ie.length;Qr++){switch(ks="",ka){case jo:Ns=(hi?"<":"(")+Ie[Qr][0]+(hi?">":")"),_a=parseFloat(Ie[Qr][1]),Sa=parseFloat(Ie[Qr][2]);break;case Na:Ns=(hi?"<":"(")+Ie[Qr]+(hi?">":")"),_a=Ri(O),Sa=Ki(re)}_s!==void 0&&_s[Qr]!==void 0&&(ks=_s[Qr]+` Tw
`),Qr===0?y.push(ks+eu(_a,Sa,on)+Ns):ka===Na?y.push(ks+Ns):ka===jo&&y.push(ks+eu(_a,Sa,on)+Ns)}y=ka===Na?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var Zr=`BT
/`;return Zr+=yt+" "+Oe+` Tf
`,Zr+=L(Oe*Ir)+` TL
`,Zr+=wa+`
`,Zr+=Rn,Zr+=y,se(Zr+="ET"),v[yt]=!0,_n};var xf=p.__private__.clip=p.clip=function(y){return se(y==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return xf("evenodd")},p.__private__.discardPath=p.discardPath=function(){return se("n"),this};var Li=p.__private__.isValidStyle=function(y){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(O=!0),O};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(y){return Li(y)&&(d=y),this};var Rc=p.__private__.getStyle=p.getStyle=function(y){var O=d;switch(y){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=y}return O},Ic=p.close=function(){return se("h"),this};p.stroke=function(){return se("S"),this},p.fill=function(y){return fo("f",y),this},p.fillEvenOdd=function(y){return fo("f*",y),this},p.fillStroke=function(y){return fo("B",y),this},p.fillStrokeEvenOdd=function(y){return fo("B*",y),this};var fo=function(y,O){Ut(O)==="object"?_f(O,y):se(y)},Dl=function(y){y===null||w===x.ADVANCED&&y===void 0||(y=Rc(y),se(y))};function bf(y,O,re,ue,xe){var Ae=new Ba(O||this.boundingBox,re||this.xStep,ue||this.yStep,this.gState,xe||this.matrix);Ae.stream=this.stream;var Ie=y+"$$"+this.cloneIndex+++"$$";return Ft(Ie,Ae),Ae}var _f=function(y,O){var re=_t[y.key],ue=Ge[re];if(ue instanceof Hs)se("q"),se(Sf(O)),ue.gState&&p.setGState(ue.gState),se(y.matrix.toString()+" cm"),se("/"+re+" sh"),se("Q");else if(ue instanceof Ba){var xe=new it(1,0,0,-1,0,bs());y.matrix&&(xe=xe.multiply(y.matrix||Vt),re=bf.call(ue,y.key,y.boundingBox,y.xStep,y.yStep,xe).id),se("q"),se("/Pattern cs"),se("/"+re+" scn"),ue.gState&&p.setGState(ue.gState),se(O),se("Q")}},Sf=function(y){switch(y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Fl=p.moveTo=function(y,O){return se(L(A(y))+" "+L(K(O))+" m"),this},va=p.lineTo=function(y,O){return se(L(A(y))+" "+L(K(O))+" l"),this},ws=p.curveTo=function(y,O,re,ue,xe,Ae){return se([L(A(y)),L(K(O)),L(A(re)),L(K(ue)),L(A(xe)),L(K(Ae)),"c"].join(" ")),this};p.__private__.line=p.line=function(y,O,re,ue,xe){if(isNaN(y)||isNaN(O)||isNaN(re)||isNaN(ue)||!Li(xe))throw new Error("Invalid arguments passed to jsPDF.line");return w===x.COMPAT?this.lines([[re-y,ue-O]],y,O,[1,1],xe||"S"):this.lines([[re-y,ue-O]],y,O,[1,1]).stroke()},p.__private__.lines=p.lines=function(y,O,re,ue,xe,Ae){var Ie,qe,et,vt,pt,Ct,tn,on,_n,Xn,Rn,hi;if(typeof y=="number"&&(hi=re,re=O,O=y,y=hi),ue=ue||[1,1],Ae=Ae||!1,isNaN(O)||isNaN(re)||!Array.isArray(y)||!Array.isArray(ue)||!Li(xe)||typeof Ae!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fl(O,re),Ie=ue[0],qe=ue[1],vt=y.length,Xn=O,Rn=re,et=0;et<vt;et++)(pt=y[et]).length===2?(Xn=pt[0]*Ie+Xn,Rn=pt[1]*qe+Rn,va(Xn,Rn)):(Ct=pt[0]*Ie+Xn,tn=pt[1]*qe+Rn,on=pt[2]*Ie+Xn,_n=pt[3]*qe+Rn,Xn=pt[4]*Ie+Xn,Rn=pt[5]*qe+Rn,ws(Ct,tn,on,_n,Xn,Rn));return Ae&&Ic(),Dl(xe),this},p.path=function(y){for(var O=0;O<y.length;O++){var re=y[O],ue=re.c;switch(re.op){case"m":Fl(ue[0],ue[1]);break;case"l":va(ue[0],ue[1]);break;case"c":ws.apply(this,ue);break;case"h":Ic()}}return this},p.__private__.rect=p.rect=function(y,O,re,ue,xe){if(isNaN(y)||isNaN(O)||isNaN(re)||isNaN(ue)||!Li(xe))throw new Error("Invalid arguments passed to jsPDF.rect");return w===x.COMPAT&&(ue=-ue),se([L(A(y)),L(K(O)),L(A(re)),L(A(ue)),"re"].join(" ")),Dl(xe),this},p.__private__.triangle=p.triangle=function(y,O,re,ue,xe,Ae,Ie){if(isNaN(y)||isNaN(O)||isNaN(re)||isNaN(ue)||isNaN(xe)||isNaN(Ae)||!Li(Ie))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-y,ue-O],[xe-re,Ae-ue],[y-xe,O-Ae]],y,O,[1,1],Ie,!0),this},p.__private__.roundedRect=p.roundedRect=function(y,O,re,ue,xe,Ae,Ie){if(isNaN(y)||isNaN(O)||isNaN(re)||isNaN(ue)||isNaN(xe)||isNaN(Ae)||!Li(Ie))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qe=4/3*(Math.SQRT2-1);return xe=Math.min(xe,.5*re),Ae=Math.min(Ae,.5*ue),this.lines([[re-2*xe,0],[xe*qe,0,xe,Ae-Ae*qe,xe,Ae],[0,ue-2*Ae],[0,Ae*qe,-xe*qe,Ae,-xe,Ae],[2*xe-re,0],[-xe*qe,0,-xe,-Ae*qe,-xe,-Ae],[0,2*Ae-ue],[0,-Ae*qe,xe*qe,-Ae,xe,-Ae]],y+xe,O,[1,1],Ie,!0),this},p.__private__.ellipse=p.ellipse=function(y,O,re,ue,xe){if(isNaN(y)||isNaN(O)||isNaN(re)||isNaN(ue)||!Li(xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ae=4/3*(Math.SQRT2-1)*re,Ie=4/3*(Math.SQRT2-1)*ue;return Fl(y+re,O),ws(y+re,O-Ie,y+Ae,O-ue,y,O-ue),ws(y-Ae,O-ue,y-re,O-Ie,y-re,O),ws(y-re,O+Ie,y-Ae,O+ue,y,O+ue),ws(y+Ae,O+ue,y+re,O+Ie,y+re,O),Dl(xe),this},p.__private__.circle=p.circle=function(y,O,re,ue){if(isNaN(y)||isNaN(O)||isNaN(re)||!Li(ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,O,re,re,ue)},p.setFont=function(y,O,re){return re&&(O=T(O,re)),yt=Cc(y,O,{disableWarning:!1}),this};var Nf=p.__private__.getFont=p.getFont=function(){return le[Cc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var y,O,re={};for(y in Ze)if(Ze.hasOwnProperty(y))for(O in re[y]=[],Ze[y])Ze[y].hasOwnProperty(O)&&re[y].push(O);return re},p.addFont=function(y,O,re,ue,xe){var Ae=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ae.indexOf(arguments[3])!==-1?xe=arguments[3]:arguments[3]&&Ae.indexOf(arguments[3])==-1&&(re=T(re,ue)),xe=xe||"Identity-H",Rl.call(this,y,O,re,xe)};var ya,Ml=t.lineWidth||.200025,po=p.__private__.getLineWidth=p.getLineWidth=function(){return Ml},Oc=p.__private__.setLineWidth=p.setLineWidth=function(y){return Ml=y,se(L(A(y))+" w"),this};p.__private__.setLineDash=at.API.setLineDash=at.API.setLineDashPattern=function(y,O){if(y=y||[],O=O||0,isNaN(O)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(re){return L(A(re))}).join(" "),O=L(A(O)),se("["+y+"] "+O+" d"),this};var Dc=p.__private__.getLineHeight=p.getLineHeight=function(){return Oe*ya};p.__private__.getLineHeight=p.getLineHeight=function(){return Oe*ya};var Fc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(ya=y),this},Mc=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return ya};Fc(t.lineHeight);var Ri=p.__private__.getHorizontalCoordinate=function(y){return A(y)},Ki=p.__private__.getVerticalCoordinate=function(y){return w===x.ADVANCED?y:rt[U].mediaBox.topRightY-rt[U].mediaBox.bottomLeftY-A(y)},kf=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(y){return L(Ri(y))},xs=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(y){return L(Ki(y))},di=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return or(di)},p.__private__.setStrokeColor=p.setDrawColor=function(y,O,re,ue){return di=Kn({ch1:y,ch2:O,ch3:re,ch4:ue,pdfColorType:"draw",precision:2}),se(di),this};var zl=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return or(zl)},p.__private__.setFillColor=p.setFillColor=function(y,O,re,ue){return zl=Kn({ch1:y,ch2:O,ch3:re,ch4:ue,pdfColorType:"fill",precision:2}),se(zl),this};var wa=t.textColor||"0 g",jf=p.__private__.getTextColor=p.getTextColor=function(){return or(wa)};p.__private__.setTextColor=p.setTextColor=function(y,O,re,ue){return wa=Kn({ch1:y,ch2:O,ch3:re,ch4:ue,pdfColorType:"text",precision:3}),this};var mo=t.charSpace,Af=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(mo||0)};p.__private__.setCharSpace=p.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return mo=y,this};var Bl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(y){var O=p.CapJoinStyles[y];if(O===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bl=O,se(O+" J"),this};var Ul=0;p.__private__.setLineJoin=p.setLineJoin=function(y){var O=p.CapJoinStyles[y];if(O===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ul=O,se(O+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(L(A(y))+" M"),this},p.GState=mc,p.setGState=function(y){(y=typeof y=="string"?nt[Ve[y]]:zc(null,y)).equals(ut)||(se("/"+y.id+" gs"),ut=y)};var zc=function(y,O){if(!y||!Ve[y]){var re=!1;for(var ue in nt)if(nt.hasOwnProperty(ue)&&nt[ue].equals(O)){re=!0;break}if(re)O=nt[ue];else{var xe="GS"+(Object.keys(nt).length+1).toString(10);nt[xe]=O,O.id=xe}return y&&(Ve[y]=O.id),Rt.publish("addGState",O),O}};p.addGState=function(y,O){return zc(y,O),this},p.saveGraphicsState=function(){return se("q"),Lt.push({key:yt,size:Oe,color:wa}),this},p.restoreGraphicsState=function(){se("Q");var y=Lt.pop();return yt=y.key,Oe=y.size,wa=y.color,ut=null,this},p.setCurrentTransformationMatrix=function(y){return se(y.toString()+" cm"),this},p.comment=function(y){return se("#"+y),this};var go=function(y,O){var re=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(Ae){isNaN(Ae)||(re=parseFloat(Ae))}});var ue=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ue},set:function(Ae){isNaN(Ae)||(ue=parseFloat(Ae))}});var xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xe},set:function(Ae){xe=Ae.toString()}}),this},$l=function(y,O,re,ue){go.call(this,y,O),this.type="rect";var xe=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xe},set:function(Ie){isNaN(Ie)||(xe=parseFloat(Ie))}});var Ae=ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ae},set:function(Ie){isNaN(Ie)||(Ae=parseFloat(Ie))}}),this},ql=function(){this.page=St,this.currentPage=U,this.pages=we.slice(0),this.pagesContext=rt.slice(0),this.x=An,this.y=Et,this.matrix=de,this.width=xa(U),this.height=bs(U),this.outputDestination=je,this.id="",this.objectNumber=-1};ql.prototype.restore=function(){St=this.page,U=this.currentPage,rt=this.pagesContext,we=this.pages,An=this.x,Et=this.y,de=this.matrix,Wl(U,this.width),Hl(U,this.height),je=this.outputDestination};var Bc=function(y,O,re,ue,xe){Cr.push(new ql),St=U=0,we=[],An=y,Et=O,de=xe,Il([re,ue])},Pf=function(y){if(Je[y])Cr.pop().restore();else{var O=new ql,re="Xo"+(Object.keys(fn).length+1).toString(10);O.id=re,Je[y]=re,fn[re]=O,Rt.publish("addFormObject",O),Cr.pop().restore()}};for(var vo in p.beginFormObject=function(y,O,re,ue,xe){return Bc(y,O,re,ue,xe),this},p.endFormObject=function(y){return Pf(y),this},p.doFormObject=function(y,O){var re=fn[Je[y]];return se("q"),se(O.toString()+" cm"),se("/"+re.id+" Do"),se("Q"),this},p.getFormObject=function(y){var O=fn[Je[y]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},p.save=function(y,O){return y=y||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(Ra(co(Yi()),y),typeof Ra.unload=="function"&&dt.setTimeout&&setTimeout(Ra.unload,911),this):new Promise(function(re,ue){try{var xe=Ra(co(Yi()),y);typeof Ra.unload=="function"&&dt.setTimeout&&setTimeout(Ra.unload,911),re(xe)}catch(Ae){ue(Ae.message)}})},at.API)at.API.hasOwnProperty(vo)&&(vo==="events"&&at.API.events.length?function(y,O){var re,ue,xe;for(xe=O.length-1;xe!==-1;xe--)re=O[xe][0],ue=O[xe][1],y.subscribe.apply(y,[re].concat(typeof ue=="function"?[ue]:ue))}(Rt,at.API.events):p[vo]=at.API[vo]);var xa=p.getPageWidth=function(y){return(rt[y=y||U].mediaBox.topRightX-rt[y].mediaBox.bottomLeftX)/Be},Wl=p.setPageWidth=function(y,O){rt[y].mediaBox.topRightX=O*Be+rt[y].mediaBox.bottomLeftX},bs=p.getPageHeight=function(y){return(rt[y=y||U].mediaBox.topRightY-rt[y].mediaBox.bottomLeftY)/Be},Hl=p.setPageHeight=function(y,O){rt[y].mediaBox.topRightY=O*Be+rt[y].mediaBox.bottomLeftY};return p.internal={pdfEscape:wr,getStyle:Rc,getFont:Nf,getFontSize:oe,getCharSpace:Af,getTextColor:jf,getLineHeight:Dc,getLineHeightFactor:Mc,getLineWidth:po,write:Qe,getHorizontalCoordinate:Ri,getVerticalCoordinate:Ki,getCoordinateString:kf,getVerticalCoordinateString:xs,collections:{},newObject:ht,newAdditionalObject:Lr,newObjectDeferred:kt,newObjectDeferredBegin:jt,getFilters:lr,putStream:yr,events:Rt,scaleFactor:Be,pageSize:{getWidth:function(){return xa(U)},setWidth:function(y){Wl(U,y)},getHeight:function(){return bs(U)},setHeight:function(y){Hl(U,y)}},encryptionOptions:g,encryption:Jn,getEncryptor:yf,output:ho,getNumberOfPages:ff,pages:we,out:se,f2:Z,f3:R,getPageInfo:Lc,getPageInfoByObjId:ft,getCurrentPageInfo:wf,getPDFVersion:S,Point:go,Rectangle:$l,Matrix:it,hasHotfix:Tc},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return xa(U)},set:function(y){Wl(U,y)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return bs(U)},set:function(y){Hl(U,y)},enumerable:!0,configurable:!0}),df.call(p,Le),yt="F1",Pc(i,n),Rt.publish("initialized"),p}Yo.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Yo.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Yo.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Yo.prototype.processOwnerPassword=function(t,e){return i0(r0(e).substr(0,5),t)},Yo.prototype.encryptor=function(t,e){var n=r0(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return i0(n,r)}},mc.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Ut(t)!==Ut(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},at.API={events:[]},at.version="2.5.2";var un=at.API,yg=1,no=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bo=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mt=function(t){return t.toFixed(2)},Fs=function(t){return t.toFixed(5)};un.__acroform__={};var Er=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Zv=function(t){return t*yg},Fi=function(t){var e=new Ew,n=Ke.internal.getHeight(t)||0,r=Ke.internal.getWidth(t)||0;return e.BBox=[0,0,Number(mt(r)),Number(mt(n))],e},hj=un.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},fj=un.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},pj=un.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},yn=un.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return pj(t,e-1)},wn=un.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hj(t,e-1)},xn=un.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fj(t,e-1)},mj=un.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(s)||0,[Number(mt(l.lowerLeft_X)),Number(mt(l.lowerLeft_Y)),Number(mt(l.upperRight_X)),Number(mt(l.upperRight_Y))]},gj=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=s0(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+mt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Fi(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},s0=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var s=n,a=Ke.internal.getHeight(t)||0;a=a<0?-a:a;var o=Ke.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(R,A,q){if(R+1<i.length){var K=A+" "+i[R+1][0];return Dd(K,t,q).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var d,g,m=Dd("3",t,s).height,v=t.multiline?a-s:(a-m)/2,p=v+=2,_=0,S=0,N=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Dd(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var f="",x=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var j=!1;if(i[w].length!==1&&N!==i[w].length-1){if((m+2)*(x+2)+2>a)continue e;f+=i[w][N],j=!0,S=w,w--}else{f=(f+=i[w][N]+" ").substr(f.length-1)==" "?f.substr(0,f.length-1):f;var D=parseInt(w),T=l(D,f,s),L=w>=i.length-1;if(T&&!L){f+=" ",N=0;continue}if(T||L){if(L)S=D;else if(t.multiline&&(m+2)*(x+2)+2>a)continue e}else{if(!t.multiline||(m+2)*(x+2)+2>a)continue e;S=D}}for(var C="",G=_;G<=S;G++){var Z=i[G];if(t.multiline){if(G===S){C+=Z[N]+" ",N=(N+1)%Z.length;continue}if(G===_){C+=Z[Z.length-1]+" ";continue}}C+=Z[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,g=Dd(C,t,s).width,t.textAlign){case"right":d=o-g-2;break;case"center":d=(o-g)/2;break;case"left":default:d=2}e+=mt(d)+" "+mt(p)+` Td
`,e+="("+no(C)+`) Tj
`,e+=-mt(d)+` 0 Td
`,p=-(s+2),g=0,_=j?S:S+1,x++,f=""}break}return r.text=e,r.fontSize=s,r},Dd=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},vj={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},yj=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},wj=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Ut(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},xj=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ei.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(vj)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");yg=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Cw,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&yj(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],d=o.Rect;if(o.Rect&&(o.Rect=mj(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ke.createDefaultAppearanceStream(o),Ut(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var g=gj(o);l.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(o.appearanceStreamContent){var m="";for(var v in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(v)){var p=o.appearanceStreamContent[v];if(m+="/"+v+" ",m+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var _=p[a];typeof _=="function"&&(_=_.call(i,o)),m+="/"+a+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=p)=="function"&&(_=_.call(i,o)),m+="/"+a+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);m+=">>"}l.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&wj(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Pw=un.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Ut(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+no(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Fp=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+no(r(t))+")"},$i=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};$i.prototype.toString=function(){return this.objId+" 0 R"},$i.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},$i.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:Pw(i,this.objId,this.scope)}):i instanceof $i?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Ew=function(){$i.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Er(Ew,$i);var Cw=function(){$i.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+no(n(t))+")"}},set:function(n){t=n}})};Er(Cw,$i);var Ei=function t(){$i.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(f){if(isNaN(f))throw new Error('Invalid value "'+f+'" for attribute F supplied.');e=f}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!yn(e,3)},set:function(f){f?this.F=wn(e,3):this.F=xn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(f){if(isNaN(f))throw new Error('Invalid value "'+f+'" for attribute Ff supplied.');n=f}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(f){r=f!==void 0?f:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(f){r[0]=f}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(f){r[1]=f}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(f){r[2]=f}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(f){r[3]=f}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(f){switch(f){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=f;break;default:throw new Error('Invalid value "'+f+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Ch)return;s="FieldObject"+t.FieldNum++}var f=function(x){return x};return this.scope&&(f=this.scope.internal.getEncryptor(this.objId)),"("+no(f(s))+")"},set:function(f){s=f.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(f){s=f}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(f){a=f}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(f){o=f}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(f){l=f}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/yg:d},set:function(f){d=f}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(f){g=f}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof Ch||this instanceof sa))return Fp(m,this.objId,this.scope)},set:function(f){f=f.toString(),m=f}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Tn?v:Fp(v,this.objId,this.scope)},set:function(f){f=f.toString(),v=this instanceof Tn?f:f.substr(0,1)==="("?Bo(f.substr(1,f.length-2)):Bo(f)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Tn?Bo(v.substr(1,v.length-1)):v},set:function(f){f=f.toString(),v=this instanceof Tn?"/"+f:f}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(f){this.V=f}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Tn?p:Fp(p,this.objId,this.scope)},set:function(f){f=f.toString(),p=this instanceof Tn?f:f.substr(0,1)==="("?Bo(f.substr(1,f.length-2)):Bo(f)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Tn?Bo(p.substr(1,p.length-1)):p},set:function(f){f=f.toString(),p=this instanceof Tn?"/"+f:f}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(f){f=!!f,S=f}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(f){_=f}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,1)},set:function(f){f?this.Ff=wn(this.Ff,1):this.Ff=xn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,2)},set:function(f){f?this.Ff=wn(this.Ff,2):this.Ff=xn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,3)},set:function(f){f?this.Ff=wn(this.Ff,3):this.Ff=xn(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(f){if([0,1,2].indexOf(f)===-1)throw new Error('Invalid value "'+f+'" for attribute Q supplied.');N=f}}),Object.defineProperty(this,"textAlign",{get:function(){var f;switch(N){case 0:default:f="left";break;case 1:f="center";break;case 2:f="right"}return f},configurable:!0,enumerable:!0,set:function(f){switch(f){case"right":case 2:N=2;break;case"center":case 1:N=1;break;case"left":case 0:default:N=0}}})};Er(Ei,$i);var qa=function(){Ei.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Pw(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,d=[];l=a.exec(s);)d.push(l[o]);return d}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,18)},set:function(n){n?this.Ff=wn(this.Ff,18):this.Ff=xn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=wn(this.Ff,19):this.Ff=xn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,20)},set:function(n){n?(this.Ff=wn(this.Ff,20),e.sort()):this.Ff=xn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,22)},set:function(n){n?this.Ff=wn(this.Ff,22):this.Ff=xn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,23)},set:function(n){n?this.Ff=wn(this.Ff,23):this.Ff=xn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,27)},set:function(n){n?this.Ff=wn(this.Ff,27):this.Ff=xn(this.Ff,27)}}),this.hasAppearanceStream=!1};Er(qa,Ei);var Wa=function(){qa.call(this),this.fontName="helvetica",this.combo=!1};Er(Wa,qa);var Ha=function(){Wa.call(this),this.combo=!0};Er(Ha,Wa);var Du=function(){Ha.call(this),this.edit=!0};Er(Du,Ha);var Tn=function(){Ei.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,15)},set:function(n){n?this.Ff=wn(this.Ff,15):this.Ff=xn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,16)},set:function(n){n?this.Ff=wn(this.Ff,16):this.Ff=xn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,17)},set:function(n){n?this.Ff=wn(this.Ff,17):this.Ff=xn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,26)},set:function(n){n?this.Ff=wn(this.Ff,26):this.Ff=xn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+no(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ut(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Er(Tn,Ei);var Fu=function(){Tn.call(this),this.pushButton=!0};Er(Fu,Tn);var Va=function(){Tn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Er(Va,Tn);var Ch=function(){var t,e;Ei.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+no(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Ut(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ke.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Er(Ch,Ei),Va.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Va.prototype.createOption=function(t){var e=new Ch;return e.Parent=this,e.optionName=t,this.Kids.push(e),bj.call(this.scope,e),e};var Mu=function(){Tn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ke.CheckBox.createAppearanceStream()};Er(Mu,Tn);var sa=function(){Ei.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,13)},set:function(e){e?this.Ff=wn(this.Ff,13):this.Ff=xn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,21)},set:function(e){e?this.Ff=wn(this.Ff,21):this.Ff=xn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,23)},set:function(e){e?this.Ff=wn(this.Ff,23):this.Ff=xn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,24)},set:function(e){e?this.Ff=wn(this.Ff,24):this.Ff=xn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,25)},set:function(e){e?this.Ff=wn(this.Ff,25):this.Ff=xn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,26)},set:function(e){e?this.Ff=wn(this.Ff,26):this.Ff=xn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Er(sa,Ei);var zu=function(){sa.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,14)},set:function(t){t?this.Ff=wn(this.Ff,14):this.Ff=xn(this.Ff,14)}}),this.password=!0};Er(zu,sa);var Ke={CheckBox:{createAppearanceStream:function(){return{N:{On:Ke.CheckBox.YesNormal},D:{On:Ke.CheckBox.YesPushDown,Off:Ke.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=s0(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+mt(Ke.internal.getWidth(t))+" "+mt(Ke.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+mt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Fi(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Ke.internal.getHeight(t),a=Ke.internal.getWidth(t),o=s0(t,t.caption);return i.push("1 g"),i.push("0 0 "+mt(a)+" "+mt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+mt(a-1)+" "+mt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+mt(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+mt(Ke.internal.getWidth(t))+" "+mt(Ke.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ke.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ke.RadioButton.Circle.YesNormal,e.D[t]=Ke.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Fi(t);e.scope=t.scope;var n=[],r=Ke.internal.getWidth(t)<=Ke.internal.getHeight(t)?Ke.internal.getWidth(t)/4:Ke.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Ke.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Fs(Ke.internal.getWidth(t)/2)+" "+Fs(Ke.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=[],r=Ke.internal.getWidth(t)<=Ke.internal.getHeight(t)?Ke.internal.getWidth(t)/4:Ke.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ke.internal.Bezier_C).toFixed(5)),a=Number((r*Ke.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Fs(Ke.internal.getWidth(t)/2)+" "+Fs(Ke.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Fs(Ke.internal.getWidth(t)/2)+" "+Fs(Ke.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=[],r=Ke.internal.getWidth(t)<=Ke.internal.getHeight(t)?Ke.internal.getWidth(t)/4:Ke.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ke.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Fs(Ke.internal.getWidth(t)/2)+" "+Fs(Ke.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ke.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ke.RadioButton.Cross.YesNormal,e.D[t]=Ke.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Fi(t);e.scope=t.scope;var n=[],r=Ke.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+mt(Ke.internal.getWidth(t)-2)+" "+mt(Ke.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(mt(r.x1.x)+" "+mt(r.x1.y)+" m"),n.push(mt(r.x2.x)+" "+mt(r.x2.y)+" l"),n.push(mt(r.x4.x)+" "+mt(r.x4.y)+" m"),n.push(mt(r.x3.x)+" "+mt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=Ke.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+mt(Ke.internal.getWidth(t))+" "+mt(Ke.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+mt(Ke.internal.getWidth(t)-2)+" "+mt(Ke.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(mt(n.x1.x)+" "+mt(n.x1.y)+" m"),r.push(mt(n.x2.x)+" "+mt(n.x2.y)+" l"),r.push(mt(n.x4.x)+" "+mt(n.x4.y)+" m"),r.push(mt(n.x3.x)+" "+mt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Fi(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+mt(Ke.internal.getWidth(t))+" "+mt(Ke.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Ke.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ke.internal.getWidth(t),n=Ke.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Ke.internal.getWidth=function(t){var e=0;return Ut(t)==="object"&&(e=Zv(t.Rect[2])),e},Ke.internal.getHeight=function(t){var e=0;return Ut(t)==="object"&&(e=Zv(t.Rect[3])),e};var bj=un.addField=function(t){if(xj(this,t),!(t instanceof Ei))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};un.AcroFormChoiceField=qa,un.AcroFormListBox=Wa,un.AcroFormComboBox=Ha,un.AcroFormEditBox=Du,un.AcroFormButton=Tn,un.AcroFormPushButton=Fu,un.AcroFormRadioButton=Va,un.AcroFormCheckBox=Mu,un.AcroFormTextField=sa,un.AcroFormPasswordField=zu,un.AcroFormAppearance=Ke,un.AcroForm={ChoiceField:qa,ListBox:Wa,ComboBox:Ha,EditBox:Du,Button:Tn,PushButton:Fu,RadioButton:Va,CheckBox:Mu,TextField:sa,PasswordField:zu,Appearance:Ke},at.AcroForm={ChoiceField:qa,ListBox:Wa,ComboBox:Ha,EditBox:Du,Button:Tn,PushButton:Fu,RadioButton:Va,CheckBox:Mu,TextField:sa,PasswordField:zu,Appearance:Ke};var _j=at.AcroForm;function Tw(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(R,A){var q,K,te,$,Q,V=e;if((A=A||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(T(R))for(Q in n)for(te=n[Q],q=0;q<te.length;q+=1){for($=!0,K=0;K<te[q].length;K+=1)if(te[q][K]!==void 0&&te[q][K]!==R[K]){$=!1;break}if($===!0){V=Q;break}}else for(Q in n)for(te=n[Q],q=0;q<te.length;q+=1){for($=!0,K=0;K<te[q].length;K+=1)if(te[q][K]!==void 0&&te[q][K]!==R.charCodeAt(K)){$=!1;break}if($===!0){V=Q;break}}return V===e&&A!==e&&(V=A),V},i=function R(A){for(var q=this.internal.write,K=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:A.width}),$.push({key:"Height",value:A.height}),A.colorSpace===N.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===N.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var Q="",V=0,B=A.transparency.length;V<B;V++)Q+=A.transparency[V]+" "+A.transparency[V]+" ";$.push({key:"Mask",value:"["+Q+"]"})}A.sMask!==void 0&&$.push({key:"SMask",value:A.objectId+1+" 0 R"});var ie=A.filter!==void 0?["/"+A.filter]:void 0;if(K({data:A.data,additionalKeyValues:$,alreadyAppliedFilters:ie,objectId:A.objectId}),q("endobj"),"sMask"in A&&A.sMask!==void 0){var ve="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,E={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:ve,data:A.sMask};"filter"in A&&(E.filter=A.filter),R.call(this,E)}if(A.colorSpace===N.INDEXED){var U=this.internal.newObject();K({data:C(new Uint8Array(A.palette)),objectId:U}),q("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var A in R)i.call(this,R[A])},a=function(){var R,A=this.internal.collections.addImage_images,q=this.internal.write;for(var K in A)q("/I"+(R=A[K]).index,R.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var R=this.internal.collections.addImage_images;return o.call(this),R},d=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(R){return typeof t["process"+R.toUpperCase()]=="function"},m=function(R){return Ut(R)==="object"&&R.nodeType===1},v=function(R,A){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var q=""+R.getAttribute("src");if(q.indexOf("data:image/")===0)return Ou(unescape(q).split("base64,").pop());var K=t.loadFile(q,!0);if(K!==void 0)return K}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var te;switch(A){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return Ou(R.toDataURL(te,1).split("base64,").pop())}},p=function(R){var A=this.internal.collections.addImage_images;if(A){for(var q in A)if(R===A[q].alias)return A[q]}},_=function(R,A,q){return R||A||(R=-96,A=-96),R<0&&(R=-1*q.width*72/R/this.internal.scaleFactor),A<0&&(A=-1*q.height*72/A/this.internal.scaleFactor),R===0&&(R=A*q.width/q.height),A===0&&(A=R*q.height/q.width),[R,A]},S=function(R,A,q,K,te,$){var Q=_.call(this,q,K,te),V=this.internal.getCoordinateString,B=this.internal.getVerticalCoordinateString,ie=l.call(this);if(q=Q[0],K=Q[1],ie[te.index]=te,$){$*=Math.PI/180;var ve=Math.cos($),E=Math.sin($),U=function(ne){return ne.toFixed(4)},X=[U(ve),U(E),U(-1*E),U(ve),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,V(R),B(A+K),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([V(q),"0","0",V(K),"0","0","cm"].join(" "))):this.internal.write([V(q),"0","0",V(K),V(R),B(A+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},N=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var f=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=t.__addimage__.sHashCode=function(R){var A,q,K=0;if(typeof R=="string")for(q=R.length,A=0;A<q;A++)K=(K<<5)-K+R.charCodeAt(A),K|=0;else if(T(R))for(q=R.byteLength/2,A=0;A<q;A++)K=(K<<5)-K+R[A],K|=0;return K},w=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var A=!0;return R.length===0&&(A=!1),R.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(A=!1),A},j=t.__addimage__.extractImageFromDataUrl=function(R){var A=(R=R||"").split("base64,"),q=null;if(A.length===2){var K=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(K)&&(q={mimeType:K[1],charset:K[2],data:A[1]})}return q},D=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return D()&&R instanceof ArrayBuffer};var T=t.__addimage__.isArrayBufferView=function(R){return D()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},L=t.__addimage__.binaryStringToUint8Array=function(R){for(var A=R.length,q=new Uint8Array(A),K=0;K<A;K++)q[K]=R.charCodeAt(K);return q},C=t.__addimage__.arrayBufferToBinaryString=function(R){for(var A="",q=T(R)?R:new Uint8Array(R),K=0;K<q.length;K+=8192)A+=String.fromCharCode.apply(null,q.subarray(K,K+8192));return A};t.addImage=function(){var R,A,q,K,te,$,Q,V,B;if(typeof arguments[1]=="number"?(A=e,q=arguments[1],K=arguments[2],te=arguments[3],$=arguments[4],Q=arguments[5],V=arguments[6],B=arguments[7]):(A=arguments[1],q=arguments[2],K=arguments[3],te=arguments[4],$=arguments[5],Q=arguments[6],V=arguments[7],B=arguments[8]),Ut(R=arguments[0])==="object"&&!m(R)&&"imageData"in R){var ie=R;R=ie.imageData,A=ie.format||A||e,q=ie.x||q||0,K=ie.y||K||0,te=ie.w||ie.width||te,$=ie.h||ie.height||$,Q=ie.alias||Q,V=ie.compression||V,B=ie.rotation||ie.angle||B}var ve=this.internal.getFilters();if(V===void 0&&ve.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(q)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var E=G.call(this,R,A,Q,V);return S.call(this,q,K,te,$,E,B),this};var G=function(R,A,q,K){var te,$,Q;if(typeof R=="string"&&r(R)===e){R=unescape(R);var V=Z(R,!1);(V!==""||(V=t.loadFile(R,!0))!==void 0)&&(R=V)}if(m(R)&&(R=v(R,A)),A=r(R,A),!g(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((Q=q)==null||Q.length===0)&&(q=function(B){return typeof B=="string"||T(B)?x(B):T(B.data)?x(B.data):null}(R)),(te=p.call(this,q))||(D()&&(R instanceof Uint8Array||A==="RGBA"||($=R,R=L(R))),te=this["process"+A.toUpperCase()](R,d.call(this),q,function(B){return B&&typeof B=="string"&&(B=B.toUpperCase()),B in t.image_compression?B:f.NONE}(K),$)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},Z=t.__addimage__.convertBase64ToBinaryString=function(R,A){var q;A=typeof A!="boolean"||A;var K,te="";if(typeof R=="string"){K=(q=j(R))!==null?q.data:R;try{te=Ou(K)}catch($){if(A)throw w(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};t.getImageProperties=function(R){var A,q,K="";if(m(R)&&(R=v(R)),typeof R=="string"&&r(R)===e&&((K=Z(R,!1))===""&&(K=t.loadFile(R)||""),R=K),q=r(R),!g(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(!D()||R instanceof Uint8Array||(R=L(R)),!(A=this["process"+q.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=q,A}})(at.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};at.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,g=!1,m=0;m<d.length&&!g;m++)switch((r=d[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var v=0;v<d.length;v++){r=d[v];var p=this.internal.pdfEscape,_=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),f=this.internal.getEncryptor(S.objId),x=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+p(f(r.contents))+")",s+=" /Popup "+N.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(f(x))+") >>",S.content=s;var w=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+w,r.open&&(s+=" /Open true"),s+=" >>",N.content=s,this.internal.write(S.objId,"0 R",N.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var j=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(_(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var D=this.annotations._nameMap[r.options.name];r.options.pageNumber=D.page,r.options.top=D.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(_(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var T=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+T+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:d(r),w:l(n+i),h:d(r+s)},options:a,type:"link"})},t.textWithLink=function(n,r,i,s){var a,o,l=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var g=this.splitTextToSize(n,o).length;a=Math.ceil(d*g)}else o=l,a=d;return this.text(n,r,i,s),i+=.2*d,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-d,o,a,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(at.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},o=t.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&i.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=3};var g=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(S){var N=0,f=n,x="",w=0;for(N=0;N<S.length;N+=1)f[S.charCodeAt(N)]!==void 0?(w++,typeof(f=f[S.charCodeAt(N)])=="number"&&(x+=String.fromCharCode(f),f=n,w=0),N===S.length-1&&(f=n,x+=S.charAt(N-(w-1)),N-=w-1,w=0)):(f=n,x+=S.charAt(N-w),N-=w,w=0);return x};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(S,N,f){return a(S)?s(S)===!1?-1:!d(S)||!a(N)&&!a(f)||!a(f)&&o(N)||o(S)&&!a(N)||o(S)&&l(N)||o(S)&&o(N)?0:g(S)&&a(N)&&!o(N)&&a(f)&&d(f)?3:o(S)||!a(f)?1:2:-1},p=function(S){var N=0,f=0,x=0,w="",j="",D="",T=(S=S||"").split("\\s+"),L=[];for(N=0;N<T.length;N+=1){for(L.push(""),f=0;f<T[N].length;f+=1)w=T[N][f],j=T[N][f-1],D=T[N][f+1],a(w)?(x=v(w,j,D),L[N]+=x!==-1?String.fromCharCode(e[w.charCodeAt(0)][x]):w):L[N]+=w;L[N]=m(L[N])}return L.join(" ")},_=t.__arabicParser__.processArabic=t.processArabic=function(){var S,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,f=[];if(Array.isArray(N)){var x=0;for(f=[],x=0;x<N.length;x+=1)Array.isArray(N[x])?f.push([p(N[x][0]),N[x][1],N[x][2]]):f.push([p(N[x])]);S=f}else S=p(N);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",_])}(at.API),at.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(at.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(S){d=S}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(S){g=S}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(S){v=S}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(S){_=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,d){r.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),v=d.scaleFactor||this.internal.scaleFactor,p=0,_=0,S=0,N=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var f=d.maxWidth;f>0?typeof l=="string"?l=this.splitTextToSize(l,f):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(w,j){return w.concat(N.splitTextToSize(j,f))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)p<(S=this.getStringUnitWidth(l[x],{font:m})*g)&&(p=S);return p!==0&&(_=l.length),{w:p/=v,h:Math.max((_*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===l.lineNumber?(l.x=(d.x||0)+(d.width||0),l.y=d.y||0):d.y+d.height+l.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=m.top,p&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=d.y+d.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-g,l.y+g,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+g,{align:"center",baseline:"top",maxWidth:l.width-g-g}):this.text(l.text,l.x+g,l.y+g,{align:"left",baseline:"top",maxWidth:l.width-g-g})),this.internal.__cell__.lastCell=l,this};t.table=function(l,d,g,m,v){if(r.call(this),!g)throw new Error("No data for PDF table.");var p,_,S,N,f=[],x=[],w=[],j={},D={},T=[],L=[],C=(v=v||{}).autoSize||!1,G=v.printHeaders!==!1,Z=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,R=v.margins||Object.assign({width:this.getPageWidth()},e),A=typeof v.padding=="number"?v.padding:3,q=v.headerBackgroundColor||"#c8c8c8",K=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=G,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=K,this.setFontSize(Z),m==null)x=f=Object.keys(g[0]),w=f.map(function(){return"left"});else if(Array.isArray(m)&&Ut(m[0])==="object")for(f=m.map(function(ie){return ie.name}),x=m.map(function(ie){return ie.prompt||ie.name||""}),w=m.map(function(ie){return ie.align||"left"}),p=0;p<m.length;p+=1)D[m[p].name]=m[p].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(x=f=m,w=f.map(function(){return"left"}));if(C||Array.isArray(m)&&typeof m[0]=="string")for(p=0;p<f.length;p+=1){for(j[N=f[p]]=g.map(function(ie){return ie[N]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(x[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=j[N],this.setFont(void 0,"normal"),S=0;S<_.length;S+=1)T.push(this.getTextDimensions(_[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[N]=Math.max.apply(null,T)+A+A,T=[]}if(G){var te={};for(p=0;p<f.length;p+=1)te[f[p]]={},te[f[p]].text=x[p],te[f[p]].align=w[p];var $=o.call(this,te,D);L=f.map(function(ie){return new s(l,d,D[ie],$,te[ie].text,void 0,te[ie].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var Q=m.reduce(function(ie,ve){return ie[ve.name]=ve.align,ie},{});for(p=0;p<g.length;p+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:p,data:g[p]},this);var V=o.call(this,g[p],D);for(S=0;S<f.length;S+=1){var B=g[p][f[S]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:p,col:S,data:B},this),a.call(this,new s(l,d,D[f[S]],V,B,p+2,Q[f[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=d,this};var o=function(l,d){var g=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(p){var _=l[p];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,d[p]-g-g)},this).map(function(p){return this.getLineHeightFactor()*p.length*m/v+g+g},this).reduce(function(p,_){return Math.max(p,_)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){g=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,v.push(g)),g.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,g),this.setTextColor(_)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(at.API);var Lw={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Rw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],a0=Tw(Rw),Iw=[100,200,300,400,500,600,700,800,900],Sj=Tw(Iw);function o0(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return Lw[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof a0[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function e2(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Nj={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},t2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function n2(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function kj(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Nj,n.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=o0(e[o])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){a=t[s.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+n2(s)+"' and default family '"+r+"'.");if(a=function(l,d){if(d[l])return d[l];var g=a0[l],m=g<=a0.normal?-1:1,v=e2(d,Rw,g,m);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,a),a=function(l,d){if(d[l])return d[l];for(var g=Lw[l],m=0;m<g.length;++m)if(d[g[m]])return d[g[m]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,d){if(d[l])return d[l];if(l===400&&d[500])return d[500];if(l===500&&d[400])return d[400];var g=Sj[l],m=e2(d,Iw,g,l<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+l);return m}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+n2(s)+"'.");return a}function r2(t){return t.trimLeft()}function jj(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Aj(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Fd,i2,s2,Mp=["times"];(function(t){var e,n,r,i,s,a,o,l,d,g=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new l,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new a,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new a,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,d=new g}]);var m=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=E;Object.defineProperty(this,"pdf",{get:function(){return U}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Ne){X=!!Ne}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(Ne){ne=!!Ne}});var P=0;Object.defineProperty(this,"posX",{get:function(){return P},set:function(Ne){isNaN(Ne)||(P=Ne)}});var H=0;Object.defineProperty(this,"posY",{get:function(){return H},set:function(Ne){isNaN(Ne)||(H=Ne)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Ne){var se;typeof Ne=="number"?se=[Ne,Ne,Ne,Ne]:((se=new Array(4))[0]=Ne[0],se[1]=Ne.length>=2?Ne[1]:se[0],se[2]=Ne.length>=3?Ne[2]:se[0],se[3]=Ne.length>=4?Ne[3]:se[1]),d.margin=se}});var J=!1;Object.defineProperty(this,"autoPaging",{get:function(){return J},set:function(Ne){J=Ne}});var Y=0;Object.defineProperty(this,"lastBreak",{get:function(){return Y},set:function(Ne){Y=Ne}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(Ne){be=Ne}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Ne){Ne instanceof g&&(d=Ne)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Ne){d.path=Ne}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(Ne){we=Ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ne){var se;se=v(Ne),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ne){var se=v(Ne);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ne){["butt","round","square"].indexOf(Ne)!==-1&&(this.ctx.lineCap=Ne,this.pdf.setLineCap(Ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ne){isNaN(Ne)||(this.ctx.lineWidth=Ne,this.pdf.setLineWidth(Ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ne){["bevel","round","miter"].indexOf(Ne)!==-1&&(this.ctx.lineJoin=Ne,this.pdf.setLineJoin(Ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ne){isNaN(Ne)||(this.ctx.miterLimit=Ne,this.pdf.setMiterLimit(Ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ne){this.ctx.textBaseline=Ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ne){["right","end","center","left","start"].indexOf(Ne)!==-1&&(this.ctx.textAlign=Ne)}});var Pe=null;function je(Ne,se){if(Pe===null){var Qe=function(Ue){var Le=[];return Object.keys(Ue).forEach(function(Oe){Ue[Oe].forEach(function(ae){var oe=null;switch(ae){case"bold":oe={family:Oe,weight:"bold"};break;case"italic":oe={family:Oe,style:"italic"};break;case"bolditalic":oe={family:Oe,weight:"bold",style:"italic"};break;case"":case"normal":oe={family:Oe}}oe!==null&&(oe.ref={name:Oe,style:ae},Le.push(oe))})}),Le}(Ne.getFontList());Pe=function(Ue){for(var Le={},Oe=0;Oe<Ue.length;++Oe){var ae=o0(Ue[Oe]),oe=ae.family,ye=ae.stretch,De=ae.style,Me=ae.weight;Le[oe]=Le[oe]||{},Le[oe][ye]=Le[oe][ye]||{},Le[oe][ye][De]=Le[oe][ye][De]||{},Le[oe][ye][De][Me]=ae}return Le}(Qe.concat(se))}return Pe}var He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(Ne){Pe=null,He=Ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ne){var se;if(this.ctx.font=Ne,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ne))!==null){var Qe=se[1],Ue=(se[2],se[3]),Le=se[4],Oe=(se[5],se[6]),ae=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(ae==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:ae==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var oe=function(tt){var yt,Be,An=[],Et=tt.trim();if(Et==="")return Mp;if(Et in t2)return[t2[Et]];for(;Et!=="";){switch(Be=null,yt=(Et=r2(Et)).charAt(0)){case'"':case"'":Be=jj(Et.substring(1),yt);break;default:Be=Aj(Et)}if(Be===null||(An.push(Be[0]),(Et=r2(Be[1]))!==""&&Et.charAt(0)!==","))return Mp;Et=Et.replace(/^,/,"")}return An}(Oe);if(this.fontFaces){var ye=kj(je(this.pdf,this.fontFaces),oe.map(function(tt){return{family:tt,stretch:"normal",weight:Ue,style:Qe}}));this.pdf.setFont(ye.ref.name,ye.ref.style)}else{var De="";(Ue==="bold"||parseInt(Ue,10)>=700||Qe==="bold")&&(De="bold"),Qe==="italic"&&(De+="italic"),De.length===0&&(De="normal");for(var Me="",me={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},bt=0;bt<oe.length;bt++){if(this.pdf.internal.getFont(oe[bt],De,{noFallback:!0,disableWarning:!0})!==void 0){Me=oe[bt];break}if(De==="bolditalic"&&this.pdf.internal.getFont(oe[bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Me=oe[bt],De="bold";else if(this.pdf.internal.getFont(oe[bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Me=oe[bt],De="normal";break}}if(Me===""){for(var Tt=0;Tt<oe.length;Tt++)if(me[oe[Tt]]){Me=me[oe[Tt]];break}}Me=Me===""?"Times":Me,this.pdf.setFont(Me,De)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ne){this.ctx.globalCompositeOperation=Ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ne){this.ctx.globalAlpha=Ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ne){this.ctx.lineDashOffset=Ne,ve.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ne){this.ctx.lineDash=Ne,ve.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ne){this.ctx.ignoreClearRect=!!Ne}})};m.prototype.setLineDash=function(E){this.lineDash=E},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){j.call(this,"fill",!1)},m.prototype.stroke=function(){j.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(E,U){if(isNaN(E)||isNaN(U))throw Ht.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new a(E,U));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new a(E,U)},m.prototype.closePath=function(){var E=new a(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&Ut(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){E=new a(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(E.x,E.y)},m.prototype.lineTo=function(E,U){if(isNaN(E)||isNaN(U))throw Ht.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new a(E,U));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new a(X.x,X.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},m.prototype.quadraticCurveTo=function(E,U,X,ne){if(isNaN(X)||isNaN(ne)||isNaN(E)||isNaN(U))throw Ht.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var P=this.ctx.transform.applyToPoint(new a(X,ne)),H=this.ctx.transform.applyToPoint(new a(E,U));this.path.push({type:"qct",x1:H.x,y1:H.y,x:P.x,y:P.y}),this.ctx.lastPoint=new a(P.x,P.y)},m.prototype.bezierCurveTo=function(E,U,X,ne,P,H){if(isNaN(P)||isNaN(H)||isNaN(E)||isNaN(U)||isNaN(X)||isNaN(ne))throw Ht.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var J=this.ctx.transform.applyToPoint(new a(P,H)),Y=this.ctx.transform.applyToPoint(new a(E,U)),be=this.ctx.transform.applyToPoint(new a(X,ne));this.path.push({type:"bct",x1:Y.x,y1:Y.y,x2:be.x,y2:be.y,x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},m.prototype.arc=function(E,U,X,ne,P,H){if(isNaN(E)||isNaN(U)||isNaN(X)||isNaN(ne)||isNaN(P))throw Ht.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(H=!!H,!this.ctx.transform.isIdentity){var J=this.ctx.transform.applyToPoint(new a(E,U));E=J.x,U=J.y;var Y=this.ctx.transform.applyToPoint(new a(0,X)),be=this.ctx.transform.applyToPoint(new a(0,0));X=Math.sqrt(Math.pow(Y.x-be.x,2)+Math.pow(Y.y-be.y,2))}Math.abs(P-ne)>=2*Math.PI&&(ne=0,P=2*Math.PI),this.path.push({type:"arc",x:E,y:U,radius:X,startAngle:ne,endAngle:P,counterclockwise:H})},m.prototype.arcTo=function(E,U,X,ne,P){throw new Error("arcTo not implemented.")},m.prototype.rect=function(E,U,X,ne){if(isNaN(E)||isNaN(U)||isNaN(X)||isNaN(ne))throw Ht.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,U),this.lineTo(E+X,U),this.lineTo(E+X,U+ne),this.lineTo(E,U+ne),this.lineTo(E,U),this.lineTo(E+X,U),this.lineTo(E,U)},m.prototype.fillRect=function(E,U,X,ne){if(isNaN(E)||isNaN(U)||isNaN(X)||isNaN(ne))throw Ht.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var P={};this.lineCap!=="butt"&&(P.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(P.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,U,X,ne),this.fill(),P.hasOwnProperty("lineCap")&&(this.lineCap=P.lineCap),P.hasOwnProperty("lineJoin")&&(this.lineJoin=P.lineJoin)}},m.prototype.strokeRect=function(E,U,X,ne){if(isNaN(E)||isNaN(U)||isNaN(X)||isNaN(ne))throw Ht.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(E,U,X,ne),this.stroke())},m.prototype.clearRect=function(E,U,X,ne){if(isNaN(E)||isNaN(U)||isNaN(X)||isNaN(ne))throw Ht.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,U,X,ne))},m.prototype.save=function(E){E=typeof E!="boolean"||E;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},m.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(U),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(E){var U,X,ne,P;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))U=0,X=0,ne=0,P=0;else{var H=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(H!==null)U=parseInt(H[1]),X=parseInt(H[2]),ne=parseInt(H[3]),P=1;else if((H=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)U=parseInt(H[1]),X=parseInt(H[2]),ne=parseInt(H[3]),P=parseFloat(H[4]);else{if(P=1,typeof E=="string"&&E.charAt(0)!=="#"){var J=new kw(E);E=J.ok?J.toHex():"#000000"}E.length===4?(U=E.substring(1,2),U+=U,X=E.substring(2,3),X+=X,ne=E.substring(3,4),ne+=ne):(U=E.substring(1,3),X=E.substring(3,5),ne=E.substring(5,7)),U=parseInt(U,16),X=parseInt(X,16),ne=parseInt(ne,16)}}return{r:U,g:X,b:ne,a:P,style:E}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(E,U,X,ne){if(isNaN(U)||isNaN(X)||typeof E!="string")throw Ht.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!p.call(this)){var P=V(this.ctx.transform.rotation),H=this.ctx.transform.scaleX;A.call(this,{text:E,x:U,y:X,scale:H,angle:P,align:this.textAlign,maxWidth:ne})}},m.prototype.strokeText=function(E,U,X,ne){if(isNaN(U)||isNaN(X)||typeof E!="string")throw Ht.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){ne=isNaN(ne)?void 0:ne;var P=V(this.ctx.transform.rotation),H=this.ctx.transform.scaleX;A.call(this,{text:E,x:U,y:X,scale:H,renderingMode:"stroke",angle:P,align:this.textAlign,maxWidth:ne})}},m.prototype.measureText=function(E){if(typeof E!="string")throw Ht.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,X=this.pdf.internal.scaleFactor,ne=U.internal.getFontSize(),P=U.getStringUnitWidth(E)*ne/U.internal.scaleFactor,H=function(J){var Y=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Y}}),this};return new H({width:P*=Math.round(96*X/72*1e4)/1e4})},m.prototype.scale=function(E,U){if(isNaN(E)||isNaN(U))throw Ht.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(E,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},m.prototype.rotate=function(E){if(isNaN(E))throw Ht.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new l(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},m.prototype.translate=function(E,U){if(isNaN(E)||isNaN(U))throw Ht.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,E,U);this.ctx.transform=this.ctx.transform.multiply(X)},m.prototype.transform=function(E,U,X,ne,P,H){if(isNaN(E)||isNaN(U)||isNaN(X)||isNaN(ne)||isNaN(P)||isNaN(H))throw Ht.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var J=new l(E,U,X,ne,P,H);this.ctx.transform=this.ctx.transform.multiply(J)},m.prototype.setTransform=function(E,U,X,ne,P,H){E=isNaN(E)?1:E,U=isNaN(U)?0:U,X=isNaN(X)?0:X,ne=isNaN(ne)?1:ne,P=isNaN(P)?0:P,H=isNaN(H)?0:H,this.ctx.transform=new l(E,U,X,ne,P,H)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(E,U,X,ne,P,H,J,Y,be){var we=this.pdf.getImageProperties(E),Pe=1,je=1,He=1,Ne=1;ne!==void 0&&Y!==void 0&&(He=Y/ne,Ne=be/P,Pe=we.width/ne*Y/ne,je=we.height/P*be/P),H===void 0&&(H=U,J=X,U=0,X=0),ne!==void 0&&Y===void 0&&(Y=ne,be=P),ne===void 0&&Y===void 0&&(Y=we.width,be=we.height);for(var se,Qe=this.ctx.transform.decompose(),Ue=V(Qe.rotate.shx),Le=new l,Oe=(Le=(Le=(Le=Le.multiply(Qe.translate)).multiply(Qe.skew)).multiply(Qe.scale)).applyToRectangle(new o(H-U*He,J-X*Ne,ne*Pe,P*je)),ae=N.call(this,Oe),oe=[],ye=0;ye<ae.length;ye+=1)oe.indexOf(ae[ye])===-1&&oe.push(ae[ye]);if(w(oe),this.autoPaging)for(var De=oe[0],Me=oe[oe.length-1],me=De;me<Me+1;me++){this.pdf.setPage(me);var bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=me===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Be=me===1?0:tt+(me-2)*yt;if(this.ctx.clip_path.length!==0){var An=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(se,this.posX+this.margin[3],-Be+Tt+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=An}var Et=JSON.parse(JSON.stringify(Oe));Et=x([Et],this.posX+this.margin[3],-Be+Tt+this.ctx.prevPageLastElemOffset)[0];var de=(me>De||me<Me)&&S.call(this);de&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,yt,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",Et.x,Et.y,Et.w,Et.h,null,null,Ue),de&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",Oe.x,Oe.y,Oe.w,Oe.h,null,null,Ue)};var N=function(E,U,X){var ne=[];U=U||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var P=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":ne.push(Math.floor((E.y+P)/X)+1);break;case"arc":ne.push(Math.floor((E.y+P-E.radius)/X)+1),ne.push(Math.floor((E.y+P+E.radius)/X)+1);break;case"qct":var H=B(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);ne.push(Math.floor((H.y+P)/X)+1),ne.push(Math.floor((H.y+H.h+P)/X)+1);break;case"bct":var J=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);ne.push(Math.floor((J.y+P)/X)+1),ne.push(Math.floor((J.y+J.h+P)/X)+1);break;case"rect":ne.push(Math.floor((E.y+P)/X)+1),ne.push(Math.floor((E.y+E.h+P)/X)+1)}for(var Y=0;Y<ne.length;Y+=1)for(;this.pdf.internal.getNumberOfPages()<ne[Y];)f.call(this);return ne},f=function(){var E=this.fillStyle,U=this.strokeStyle,X=this.font,ne=this.lineCap,P=this.lineWidth,H=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=U,this.font=X,this.lineCap=ne,this.lineWidth=P,this.lineJoin=H},x=function(E,U,X){for(var ne=0;ne<E.length;ne++)switch(E[ne].type){case"bct":E[ne].x2+=U,E[ne].y2+=X;case"qct":E[ne].x1+=U,E[ne].y1+=X;case"mt":case"lt":case"arc":default:E[ne].x+=U,E[ne].y+=X}return E},w=function(E){return E.sort(function(U,X){return U-X})},j=function(E,U){for(var X,ne,P=this.fillStyle,H=this.strokeStyle,J=this.lineCap,Y=this.lineWidth,be=Math.abs(Y*this.ctx.transform.scaleX),we=this.lineJoin,Pe=JSON.parse(JSON.stringify(this.path)),je=JSON.parse(JSON.stringify(this.path)),He=[],Ne=0;Ne<je.length;Ne++)if(je[Ne].x!==void 0)for(var se=N.call(this,je[Ne]),Qe=0;Qe<se.length;Qe+=1)He.indexOf(se[Qe])===-1&&He.push(se[Qe]);for(var Ue=0;Ue<He.length;Ue++)for(;this.pdf.internal.getNumberOfPages()<He[Ue];)f.call(this);if(w(He),this.autoPaging)for(var Le=He[0],Oe=He[He.length-1],ae=Le;ae<Oe+1;ae++){this.pdf.setPage(ae),this.fillStyle=P,this.strokeStyle=H,this.lineCap=J,this.lineWidth=be,this.lineJoin=we;var oe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ye=ae===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],me=ae===1?0:De+(ae-2)*Me;if(this.ctx.clip_path.length!==0){var bt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(X,this.posX+this.margin[3],-me+ye+this.ctx.prevPageLastElemOffset),D.call(this,E,!0),this.path=bt}if(ne=JSON.parse(JSON.stringify(Pe)),this.path=x(ne,this.posX+this.margin[3],-me+ye+this.ctx.prevPageLastElemOffset),U===!1||ae===0){var Tt=(ae>Le||ae<Oe)&&S.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],oe,Me,null).clip().discardPath()),D.call(this,E,U),Tt&&this.pdf.restoreGraphicsState()}this.lineWidth=Y}else this.lineWidth=be,D.call(this,E,U),this.lineWidth=Y;this.path=Pe},D=function(E,U){if((E!=="stroke"||U||!_.call(this))&&(E==="stroke"||U||!p.call(this))){for(var X,ne,P=[],H=this.path,J=0;J<H.length;J++){var Y=H[J];switch(Y.type){case"begin":P.push({begin:!0});break;case"close":P.push({close:!0});break;case"mt":P.push({start:Y,deltas:[],abs:[]});break;case"lt":var be=P.length;if(H[J-1]&&!isNaN(H[J-1].x)&&(X=[Y.x-H[J-1].x,Y.y-H[J-1].y],be>0)){for(;be>=0;be--)if(P[be-1].close!==!0&&P[be-1].begin!==!0){P[be-1].deltas.push(X),P[be-1].abs.push(Y);break}}break;case"bct":X=[Y.x1-H[J-1].x,Y.y1-H[J-1].y,Y.x2-H[J-1].x,Y.y2-H[J-1].y,Y.x-H[J-1].x,Y.y-H[J-1].y],P[P.length-1].deltas.push(X);break;case"qct":var we=H[J-1].x+2/3*(Y.x1-H[J-1].x),Pe=H[J-1].y+2/3*(Y.y1-H[J-1].y),je=Y.x+2/3*(Y.x1-Y.x),He=Y.y+2/3*(Y.y1-Y.y),Ne=Y.x,se=Y.y;X=[we-H[J-1].x,Pe-H[J-1].y,je-H[J-1].x,He-H[J-1].y,Ne-H[J-1].x,se-H[J-1].y],P[P.length-1].deltas.push(X);break;case"arc":P.push({deltas:[],abs:[],arc:!0}),Array.isArray(P[P.length-1].abs)&&P[P.length-1].abs.push(Y)}}ne=U?null:E==="stroke"?"stroke":"fill";for(var Qe=!1,Ue=0;Ue<P.length;Ue++)if(P[Ue].arc)for(var Le=P[Ue].abs,Oe=0;Oe<Le.length;Oe++){var ae=Le[Oe];ae.type==="arc"?C.call(this,ae.x,ae.y,ae.radius,ae.startAngle,ae.endAngle,ae.counterclockwise,void 0,U,!Qe):q.call(this,ae.x,ae.y),Qe=!0}else if(P[Ue].close===!0)this.pdf.internal.out("h"),Qe=!1;else if(P[Ue].begin!==!0){var oe=P[Ue].start.x,ye=P[Ue].start.y;K.call(this,P[Ue].deltas,oe,ye),Qe=!0}ne&&G.call(this,ne),U&&Z.call(this)}},T=function(E){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-X;case"top":return E+U-X;case"hanging":return E+U-2*X;case"middle":return E+U/2-X;case"ideographic":return E;case"alphabetic":default:return E}},L=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(U,X){this.colorStops.push([U,X])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(E,U,X,ne,P,H,J,Y,be){for(var we=$.call(this,X,ne,P,H),Pe=0;Pe<we.length;Pe++){var je=we[Pe];Pe===0&&(be?R.call(this,je.x1+E,je.y1+U):q.call(this,je.x1+E,je.y1+U)),te.call(this,E,U,je.x2,je.y2,je.x3,je.y3,je.x4,je.y4)}Y?Z.call(this):G.call(this,J)},G=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(E,U){this.pdf.internal.out(n(E)+" "+r(U)+" m")},A=function(E){var U;switch(E.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var X=this.pdf.getTextDimensions(E.text),ne=T.call(this,E.y),P=L.call(this,ne)-X.h,H=this.ctx.transform.applyToPoint(new a(E.x,ne)),J=this.ctx.transform.decompose(),Y=new l;Y=(Y=(Y=Y.multiply(J.translate)).multiply(J.skew)).multiply(J.scale);for(var be,we,Pe,je=this.ctx.transform.applyToRectangle(new o(E.x,ne,X.w,X.h)),He=Y.applyToRectangle(new o(E.x,P,X.w,X.h)),Ne=N.call(this,He),se=[],Qe=0;Qe<Ne.length;Qe+=1)se.indexOf(Ne[Qe])===-1&&se.push(Ne[Qe]);if(w(se),this.autoPaging)for(var Ue=se[0],Le=se[se.length-1],Oe=Ue;Oe<Le+1;Oe++){this.pdf.setPage(Oe);var ae=Oe===1?this.posY+this.margin[0]:this.margin[0],oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ye=this.pdf.internal.pageSize.height-this.margin[2],De=ye-this.margin[0],Me=this.pdf.internal.pageSize.width-this.margin[1],me=Me-this.margin[3],bt=Oe===1?0:oe+(Oe-2)*De;if(this.ctx.clip_path.length!==0){var Tt=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(be,this.posX+this.margin[3],-1*bt+ae),D.call(this,"fill",!0),this.path=Tt}var tt=x([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-bt+ae+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*E.scale),Pe=this.lineWidth,this.lineWidth=Pe*E.scale);var yt=this.autoPaging!=="text";if(yt||tt.y+tt.h<=ye){if(yt||tt.y>=ae&&tt.x<=Me){var Be=yt?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||Me-tt.x)[0],An=x([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-bt+ae+this.ctx.prevPageLastElemOffset)[0],Et=yt&&(Oe>Ue||Oe<Le)&&S.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],me,De,null).clip().discardPath()),this.pdf.text(Be,An.x,An.y,{angle:E.angle,align:U,renderingMode:E.renderingMode}),Et&&this.pdf.restoreGraphicsState()}}else tt.y<ye&&(this.ctx.prevPageLastElemOffset+=ye-tt.y);E.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Pe)}else E.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*E.scale),Pe=this.lineWidth,this.lineWidth=Pe*E.scale),this.pdf.text(E.text,H.x+this.posX,H.y+this.posY,{angle:E.angle,align:U,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Pe)},q=function(E,U,X,ne){X=X||0,ne=ne||0,this.pdf.internal.out(n(E+X)+" "+r(U+ne)+" l")},K=function(E,U,X){return this.pdf.lines(E,U,X,null,null)},te=function(E,U,X,ne,P,H,J,Y){this.pdf.internal.out([e(i(X+E)),e(s(ne+U)),e(i(P+E)),e(s(H+U)),e(i(J+E)),e(s(Y+U)),"c"].join(" "))},$=function(E,U,X,ne){for(var P=2*Math.PI,H=Math.PI/2;U>X;)U-=P;var J=Math.abs(X-U);J<P&&ne&&(J=P-J);for(var Y=[],be=ne?-1:1,we=U;J>1e-5;){var Pe=we+be*Math.min(J,H);Y.push(Q.call(this,E,we,Pe)),J-=Math.abs(Pe-we),we=Pe}return Y},Q=function(E,U,X){var ne=(X-U)/2,P=E*Math.cos(ne),H=E*Math.sin(ne),J=P,Y=-H,be=J*J+Y*Y,we=be+J*P+Y*H,Pe=4/3*(Math.sqrt(2*be*we)-we)/(J*H-Y*P),je=J-Pe*Y,He=Y+Pe*J,Ne=je,se=-He,Qe=ne+U,Ue=Math.cos(Qe),Le=Math.sin(Qe);return{x1:E*Math.cos(U),y1:E*Math.sin(U),x2:je*Ue-He*Le,y2:je*Le+He*Ue,x3:Ne*Ue-se*Le,y3:Ne*Le+se*Ue,x4:E*Math.cos(X),y4:E*Math.sin(X)}},V=function(E){return 180*E/Math.PI},B=function(E,U,X,ne,P,H){var J=E+.5*(X-E),Y=U+.5*(ne-U),be=P+.5*(X-P),we=H+.5*(ne-H),Pe=Math.min(E,P,J,be),je=Math.max(E,P,J,be),He=Math.min(U,H,Y,we),Ne=Math.max(U,H,Y,we);return new o(Pe,He,je-Pe,Ne-He)},ie=function(E,U,X,ne,P,H,J,Y){var be,we,Pe,je,He,Ne,se,Qe,Ue,Le,Oe,ae,oe,ye,De=X-E,Me=ne-U,me=P-X,bt=H-ne,Tt=J-P,tt=Y-H;for(we=0;we<41;we++)Ue=(se=(Pe=E+(be=we/40)*De)+be*((He=X+be*me)-Pe))+be*(He+be*(P+be*Tt-He)-se),Le=(Qe=(je=U+be*Me)+be*((Ne=ne+be*bt)-je))+be*(Ne+be*(H+be*tt-Ne)-Qe),we==0?(Oe=Ue,ae=Le,oe=Ue,ye=Le):(Oe=Math.min(Oe,Ue),ae=Math.min(ae,Le),oe=Math.max(oe,Ue),ye=Math.max(ye,Le));return new o(Math.round(Oe),Math.round(ae),Math.round(oe-Oe),Math.round(ye-ae))},ve=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,U,X=(E=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:U}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(at.API),function(t){var e=function(s){var a,o,l,d,g,m,v,p,_,S;for(o=[],l=0,d=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;d>l;l+=4)(g=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(m=(g=((g=((g=((g=(g-(S=g%85))/85)-(_=g%85))/85)-(p=g%85))/85)-(v=g%85))/85)%85,o.push(m+33,v+33,p+33,_+33,S+33)):o.push(122);return function(N,f){for(var x=f;x>0;x--)N.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},n=function(s){var a,o,l,d,g,m=String,v="length",p=255,_="charCodeAt",S="slice",N="replace";for(s[S](-2),s=s[S](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),l=[],d=0,g=(s+=a="uuuuu"[S](s[v]%5||5))[v];g>d;d+=5)o=52200625*(s[_](d)-33)+614125*(s[_](d+1)-33)+7225*(s[_](d+2)-33)+85*(s[_](d+3)-33)+(s[_](d+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(f,x){for(var w=x;w>0;w--)f.pop()}(l,a[v]),m.fromCharCode.apply(m,l)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=t0(a)).reduce(function(l,d){return l+String.fromCharCode(d)},"")};t.processDataByFilters=function(s,a){var o=0,l=s||"",d=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:d.reverse().join(" ")}}}(at.API),function(t){t.loadFile=function(e,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,d,g){var m=new XMLHttpRequest,v=0,p=function(_){var S=_.length,N=[],f=String.fromCharCode;for(v=0;v<S;v+=1)N.push(f(255&_.charCodeAt(v)));return N.join("")};if(m.open("GET",l,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?g(p(this.responseText)):g(void 0)}),m.send(null),d&&m.status===200)return p(m.responseText)}(i,s,a)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(at.API),function(t){function e(){return(dt.html2canvas?Promise.resolve(dt.html2canvas):Jm(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(dt.DOMPurify?Promise.resolve(dt.DOMPurify):Jm(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=Ut(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var l=document.createElement(a);for(var d in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[d]=o.style[d];return l},s=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),d=a.convert(Promise.resolve(),l);return d=(d=d.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(d,g){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),v=d.firstChild;v;v=v.nextSibling)g!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||m.appendChild(l(v,g));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,d=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=d,d)for(var v=0;v<d.length;++v){var p=d[v],_=p.src.find(function(S){return S.format==="truetype"});_&&l.addFont(_.url,p.ref.name,p.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),o(this.prop.container,m)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(l,d){return Math.floor(l*d/72*96)}return this.then(function(){(a=a||at.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,l,d){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,l,d){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(d,g){return l.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(m){return l.updateProgress(null,d),m}).then(d,g).then(function(m){return l.updateProgress(1),m})})},s.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),g=l.call(d,a,o);return s.convert(g,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,at.getPageSize=function(a,o,l){if(Ut(a)==="object"){var d=a;a=d.orientation,o=d.unit||o,l=d.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var g,m=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+o}var p,_=0,S=0;if(v.hasOwnProperty(m))_=v[m][1]/g,S=v[m][0]/g;else try{_=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",S>_&&(p=S,S=_,_=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",_>S&&(p=S,S=_,_=p)}return{width:S,height:_,unit:o,k:g,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(o0):null;var l=new s(o);return o.worker?l:l.from(a).doCallback()}}(at.API),at.API.addJS=function(t){return s2=t,this.internal.events.subscribe("postPutResources",function(){Fd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Fd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),i2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+s2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Fd!==void 0&&i2!==void 0&&this.internal.out("/Names <</JavaScript "+Fd+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(s=0;s<d;s++){var m=n.internal.newObject();g.push(m);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<g.length;s++)n.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(at.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,a,o){var l,d=this.decode.DCT_DECODE,g=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(m){for(var v,p=256*m.charCodeAt(4)+m.charCodeAt(5),_=m.length,S={width:0,height:0,numcomponents:1},N=4;N<_;N+=2){if(N+=p,e.indexOf(m.charCodeAt(N+1))!==-1){v=256*m.charCodeAt(N+5)+m.charCodeAt(N+6),S={width:256*m.charCodeAt(N+7)+m.charCodeAt(N+8),height:v,numcomponents:m.charCodeAt(N+9)};break}p=256*m.charCodeAt(N+2)+m.charCodeAt(N+3)}return S}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}g={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:d,index:r,alias:i}}return g}}(at.API);var Uo,Md,a2,o2,l2,Pj=function(){var t,e,n;function r(s){var a,o,l,d,g,m,v,p,_,S,N,f,x,w;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),_=(function(){var j,D;for(D=[],j=0;j<4;++j)D.push(String.fromCharCode(this.data[this.pos++]));return D}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),d=this.readUInt16()||100,m.delay=1e3*g/d,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,a-=4),s=(m!=null?m.data:void 0)||this.imgData,f=0;0<=a?f<a:f>a;0<=a?++f:--f)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((S=l-this.transparency.indexed.length)>0)for(x=0;0<=S?x<S:x>S;0<=S?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":v=(N=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,N.slice(0,v)),this.text[p]=String.fromCharCode.apply(String,N.slice(v+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function g(m,v,p,_){var S,N,f,x,w,j,D,T,L,C,G,Z,R,A,q,K,te,$,Q,V,B,ie=Math.ceil((d.width-m)/p),ve=Math.ceil((d.height-v)/_),E=d.width==ie&&d.height==ve;for(A=a*ie,Z=E?o:new Uint8Array(A*ve),j=s.length,R=0,N=0;R<ve&&l<j;){switch(s[l++]){case 0:for(x=te=0;te<A;x=te+=1)Z[N++]=s[l++];break;case 1:for(x=$=0;$<A;x=$+=1)S=s[l++],w=x<a?0:Z[N-a],Z[N++]=(S+w)%256;break;case 2:for(x=Q=0;Q<A;x=Q+=1)S=s[l++],f=(x-x%a)/a,q=R&&Z[(R-1)*A+f*a+x%a],Z[N++]=(q+S)%256;break;case 3:for(x=V=0;V<A;x=V+=1)S=s[l++],f=(x-x%a)/a,w=x<a?0:Z[N-a],q=R&&Z[(R-1)*A+f*a+x%a],Z[N++]=(S+Math.floor((w+q)/2))%256;break;case 4:for(x=B=0;B<A;x=B+=1)S=s[l++],f=(x-x%a)/a,w=x<a?0:Z[N-a],R===0?q=K=0:(q=Z[(R-1)*A+f*a+x%a],K=f&&Z[(R-1)*A+(f-1)*a+x%a]),D=w+q-K,T=Math.abs(D-w),C=Math.abs(D-q),G=Math.abs(D-K),L=T<=C&&T<=G?w:C<=G?q:K,Z[N++]=(S+L)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!E){var U=((v+R*_)*d.width+m)*a,X=R*A;for(x=0;x<ie;x+=1){for(var ne=0;ne<a;ne+=1)o[U++]=Z[X++];U+=(p-1)*a}}R++}}return s=sj(s),d.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),o},r.prototype.decodePalette=function(){var s,a,o,l,d,g,m,v,p;for(o=this.palette,g=this.transparency.indexed||[],d=new Uint8Array((g.length||0)+o.length),l=0,s=0,a=m=0,v=o.length;m<v;a=m+=3)d[l++]=o[a],d[l++]=o[a+1],d[l++]=o[a+2],d[l++]=(p=g[s++])!=null?p:255;return d},r.prototype.copyToImageData=function(s,a){var o,l,d,g,m,v,p,_,S,N,f;if(l=this.colors,S=null,o=this.hasAlphaChannel,this.palette.length&&(S=(f=this._decodedPalette)!=null?f:this._decodedPalette=this.decodePalette(),l=4,o=!0),_=(d=s.data||s).length,m=S||a,g=v=0,l===1)for(;g<_;)p=S?4*a[g/4]:v,N=m[p++],d[g++]=N,d[g++]=N,d[g++]=N,d[g++]=o?m[p++]:255,v=p;else for(;g<_;)p=S?4*a[g/4]:v,d[g++]=m[p++],d[g++]=m[p++],d[g++]=m[p++],d[g++]=o?m[p++]:255,v=p},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(dt)==="[object Window]"){try{e=dt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,o,l,d,g,m,v,p;if(this.animation){for(p=[],o=g=0,m=(v=this.animation.frames).length;g<m;o=++g)a=v[o],l=s.createImageData(a.width,a.height),d=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,d),a.imageData=l,p.push(a.image=t(l));return p}},r.prototype.renderFrame=function(s,a){var o,l,d;return o=(l=this.animation.frames)[a],d=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var a,o,l,d,g,m,v=this;return o=0,m=this.animation,d=m.numFrames,l=m.frames,g=m.numPlays,(a=function(){var p,_;if(p=o++%d,_=l[p],v.renderFrame(s,p),d>1&&o/d<g)return v.animation._timeout=setTimeout(a,_.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Ej(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<(7&i)+1;t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var d=!0,g=[],m=0,v=null,p=0,_=null;for(this.width=n,this.height=r;d&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,_=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];m=t[e++]|t[e++]<<8,v=t[e++],!(1&S)&&(v=null),p=S>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var N=t[e++]|t[e++]<<8,f=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,j=t[e++],D=j>>6&1,T=1<<(7&j)+1,L=o,C=l,G=!1;j>>7&&(G=!0,L=e,C=T,e+=3*T);var Z=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}g.push({x:N,y:f,width:x,height:w,has_local_palette:G,palette_offset:L,palette_size:C,data_offset:Z,data_length:e-Z,transparent_index:v,interlaced:!!D,delay:m,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return _},this.frameInfo=function(A){if(A<0||A>=g.length)throw new Error("Frame index out of range.");return g[A]},this.decodeAndBlitFrameBGRA=function(A,q){var K=this.frameInfo(A),te=K.width*K.height,$=new Uint8Array(te);u2(t,K.data_offset,$,te);var Q=K.palette_offset,V=K.transparent_index;V===null&&(V=256);var B=K.width,ie=n-B,ve=B,E=4*(K.y*n+K.x),U=4*((K.y+K.height)*n+K.x),X=E,ne=4*ie;K.interlaced===!0&&(ne+=4*n*7);for(var P=8,H=0,J=$.length;H<J;++H){var Y=$[H];if(ve===0&&(ve=B,(X+=ne)>=U&&(ne=4*ie+4*n*(P-1),X=E+(B+ie)*(P<<1),P>>=1)),Y===V)X+=4;else{var be=t[Q+3*Y],we=t[Q+3*Y+1],Pe=t[Q+3*Y+2];q[X++]=Pe,q[X++]=we,q[X++]=be,q[X++]=255}--ve}},this.decodeAndBlitFrameRGBA=function(A,q){var K=this.frameInfo(A),te=K.width*K.height,$=new Uint8Array(te);u2(t,K.data_offset,$,te);var Q=K.palette_offset,V=K.transparent_index;V===null&&(V=256);var B=K.width,ie=n-B,ve=B,E=4*(K.y*n+K.x),U=4*((K.y+K.height)*n+K.x),X=E,ne=4*ie;K.interlaced===!0&&(ne+=4*n*7);for(var P=8,H=0,J=$.length;H<J;++H){var Y=$[H];if(ve===0&&(ve=B,(X+=ne)>=U&&(ne=4*ie+4*n*(P-1),X=E+(B+ie)*(P<<1),P>>=1)),Y===V)X+=4;else{var be=t[Q+3*Y],we=t[Q+3*Y+1],Pe=t[Q+3*Y+2];q[X++]=be,q[X++]=we,q[X++]=Pe,q[X++]=255}--ve}}}function u2(t,e,n,r){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,d=(1<<l)-1,g=0,m=0,v=0,p=t[e++],_=new Int32Array(4096),S=null;;){for(;g<16&&p!==0;)m|=t[e++]<<g,g+=8,p===1?p=t[e++]:--p;if(g<l)break;var N=m&d;if(m>>=l,g-=l,N!==s){if(N===a)break;for(var f=N<o?N:S,x=0,w=f;w>s;)w=_[w]>>8,++x;var j=w;if(v+x+(f!==N?1:0)>r)return void Ht.log("Warning, gif stream longer than expected.");n[v++]=j;var D=v+=x;for(f!==N&&(n[v++]=j),w=f;x--;)w=_[w],n[--D]=255&w,w>>=8;S!==null&&o<4096&&(_[o++]=S<<8|j,o>=d+1&&l<12&&(++l,d=d<<1|1)),S=N}else o=a+1,d=(1<<(l=i+1))-1,S=null}return v!==r&&Ht.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function zp(t){var e,n,r,i,s,a=Math.floor,o=new Array(64),l=new Array(64),d=new Array(64),g=new Array(64),m=new Array(65535),v=new Array(65535),p=new Array(64),_=new Array(64),S=[],N=0,f=7,x=new Array(64),w=new Array(64),j=new Array(64),D=new Array(256),T=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(E,U){for(var X=0,ne=0,P=new Array,H=1;H<=16;H++){for(var J=1;J<=E[H];J++)P[U[ne]]=[],P[U[ne]][0]=X,P[U[ne]][1]=H,ne++,X++;X*=2}return P}function Q(E){for(var U=E[0],X=E[1]-1;X>=0;)U&1<<X&&(N|=1<<f),X--,--f<0&&(N==255?(V(255),V(0)):V(N),f=7,N=0)}function V(E){S.push(E)}function B(E){V(E>>8&255),V(255&E)}function ie(E,U,X,ne,P){for(var H,J=P[0],Y=P[240],be=function(Le,Oe){var ae,oe,ye,De,Me,me,bt,Tt,tt,yt,Be=0;for(tt=0;tt<8;++tt){ae=Le[Be],oe=Le[Be+1],ye=Le[Be+2],De=Le[Be+3],Me=Le[Be+4],me=Le[Be+5],bt=Le[Be+6];var An=ae+(Tt=Le[Be+7]),Et=ae-Tt,de=oe+bt,le=oe-bt,Ze=ye+me,Lt=ye-me,Ge=De+Me,_t=De-Me,nt=An+Ge,Ve=An-Ge,ut=de+Ze,St=de-Ze;Le[Be]=nt+ut,Le[Be+4]=nt-ut;var rt=.707106781*(St+Ve);Le[Be+2]=Ve+rt,Le[Be+6]=Ve-rt;var Rt=.382683433*((nt=_t+Lt)-(St=le+Et)),Ti=.5411961*nt+Rt,fn=1.306562965*St+Rt,Je=.707106781*(ut=Lt+le),Cr=Et+Je,it=Et-Je;Le[Be+5]=it+Ti,Le[Be+3]=it-Ti,Le[Be+1]=Cr+fn,Le[Be+7]=Cr-fn,Be+=8}for(Be=0,tt=0;tt<8;++tt){ae=Le[Be],oe=Le[Be+8],ye=Le[Be+16],De=Le[Be+24],Me=Le[Be+32],me=Le[Be+40],bt=Le[Be+48];var Tr=ae+(Tt=Le[Be+56]),Vt=ae-Tt,Ft=oe+bt,ht=oe-bt,kt=ye+me,jt=ye-me,Lr=De+Me,vr=De-Me,Yn=Tr+Lr,or=Tr-Lr,Kn=Ft+kt,lr=Ft-kt;Le[Be]=Yn+Kn,Le[Be+32]=Yn-Kn;var yr=.707106781*(lr+or);Le[Be+16]=or+yr,Le[Be+48]=or-yr;var Rr=.382683433*((Yn=vr+jt)-(lr=ht+Vt)),ga=.5411961*Yn+Rr,ro=1.306562965*lr+Rr,io=.707106781*(Kn=jt+ht),so=Vt+io,ao=Vt-io;Le[Be+40]=ao+ga,Le[Be+24]=ao-ga,Le[Be+8]=so+ro,Le[Be+56]=so-ro,Be++}for(tt=0;tt<64;++tt)yt=Le[tt]*Oe[tt],p[tt]=yt>0?yt+.5|0:yt-.5|0;return p}(E,U),we=0;we<64;++we)_[L[we]]=be[we];var Pe=_[0]-X;X=_[0],Pe==0?Q(ne[0]):(Q(ne[v[H=32767+Pe]]),Q(m[H]));for(var je=63;je>0&&_[je]==0;)je--;if(je==0)return Q(J),X;for(var He,Ne=1;Ne<=je;){for(var se=Ne;_[Ne]==0&&Ne<=je;)++Ne;var Qe=Ne-se;if(Qe>=16){He=Qe>>4;for(var Ue=1;Ue<=He;++Ue)Q(Y);Qe&=15}H=32767+_[Ne],Q(P[(Qe<<4)+v[H]]),Q(m[H]),Ne++}return je!=63&&Q(J),X}function ve(E){E=Math.min(Math.max(E,1),100),s!=E&&(function(U){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var P=a((X[ne]*U+50)/100);P=Math.min(Math.max(P,1),255),o[L[ne]]=P}for(var H=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],J=0;J<64;J++){var Y=a((H[J]*U+50)/100);Y=Math.min(Math.max(Y,1),255),l[L[J]]=Y}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,Pe=0;Pe<8;Pe++)for(var je=0;je<8;je++)d[we]=1/(o[L[we]]*be[Pe]*be[je]*8),g[we]=1/(l[L[we]]*be[Pe]*be[je]*8),we++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),s=E)}this.encode=function(E,U){U&&ve(U),S=new Array,N=0,f=7,B(65496),B(65504),B(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),B(1),B(1),V(0),V(0),function(){B(65499),B(132),V(0);for(var oe=0;oe<64;oe++)V(o[oe]);V(1);for(var ye=0;ye<64;ye++)V(l[ye])}(),function(oe,ye){B(65472),B(17),V(8),B(ye),B(oe),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(E.width,E.height),function(){B(65476),B(418),V(0);for(var oe=0;oe<16;oe++)V(C[oe+1]);for(var ye=0;ye<=11;ye++)V(G[ye]);V(16);for(var De=0;De<16;De++)V(Z[De+1]);for(var Me=0;Me<=161;Me++)V(R[Me]);V(1);for(var me=0;me<16;me++)V(A[me+1]);for(var bt=0;bt<=11;bt++)V(q[bt]);V(17);for(var Tt=0;Tt<16;Tt++)V(K[Tt+1]);for(var tt=0;tt<=161;tt++)V(te[tt])}(),B(65498),B(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var X=0,ne=0,P=0;N=0,f=7,this.encode.displayName="_encode_";for(var H,J,Y,be,we,Pe,je,He,Ne,se=E.data,Qe=E.width,Ue=E.height,Le=4*Qe,Oe=0;Oe<Ue;){for(H=0;H<Le;){for(we=Le*Oe+H,je=-1,He=0,Ne=0;Ne<64;Ne++)Pe=we+(He=Ne>>3)*Le+(je=4*(7&Ne)),Oe+He>=Ue&&(Pe-=Le*(Oe+1+He-Ue)),H+je>=Le&&(Pe-=H+je-Le+4),J=se[Pe++],Y=se[Pe++],be=se[Pe++],x[Ne]=(T[J]+T[Y+256>>0]+T[be+512>>0]>>16)-128,w[Ne]=(T[J+768>>0]+T[Y+1024>>0]+T[be+1280>>0]>>16)-128,j[Ne]=(T[J+1280>>0]+T[Y+1536>>0]+T[be+1792>>0]>>16)-128;X=ie(x,d,X,e,r),ne=ie(w,g,ne,n,i),P=ie(j,g,P,n,i),H+=32}Oe+=8}if(f>=0){var ae=[];ae[1]=f+1,ae[0]=(1<<f+1)-1,Q(ae)}return B(65497),new Uint8Array(S)},t=t||50,function(){for(var E=String.fromCharCode,U=0;U<256;U++)D[U]=E(U)}(),e=$(C,G),n=$(A,q),r=$(Z,R),i=$(K,te),function(){for(var E=1,U=2,X=1;X<=15;X++){for(var ne=E;ne<U;ne++)v[32767+ne]=X,m[32767+ne]=[],m[32767+ne][1]=X,m[32767+ne][0]=ne;for(var P=-(U-1);P<=-E;P++)v[32767+P]=X,m[32767+P]=[],m[32767+P][1]=X,m[32767+P][0]=U-1+P;E<<=1,U<<=1}}(),function(){for(var E=0;E<256;E++)T[E]=19595*E,T[E+256>>0]=38470*E,T[E+512>>0]=7471*E+32768,T[E+768>>0]=-11059*E,T[E+1024>>0]=-21709*E,T[E+1280>>0]=32768*E+8421375,T[E+1536>>0]=-27439*E,T[E+1792>>0]=-5329*E}(),ve(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function vi(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function c2(t){function e(C){if(!C)throw Error("assert :P")}function n(C,G,Z){for(var R=0;4>R;R++)if(C[G+R]!=Z.charCodeAt(R))return!0;return!1}function r(C,G,Z,R,A){for(var q=0;q<A;q++)C[G+q]=Z[R+q]}function i(C,G,Z,R){for(var A=0;A<R;A++)C[G+A]=Z}function s(C){return new Int32Array(C)}function a(C,G){for(var Z=[],R=0;R<C;R++)Z.push(new G);return Z}function o(C,G){var Z=[];return function R(A,q,K){for(var te=K[q],$=0;$<te&&(A.push(K.length>q+1?[]:new G),!(K.length<q+1));$++)R(A[$],q+1,K)}(Z,0,C),Z}var l=function(){var C=this;function G(u,h){for(var b=1<<h-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function Z(u,h,b,k,I){e(!(k%b));do u[h+(k-=b)]=I;while(0<k)}function R(u,h,b,k,I){if(e(2328>=I),512>=I)var F=s(512);else if((F=s(I))==null)return 0;return function(M,z,W,ee,ce,_e){var Se,ge,Te=z,ke=1<<W,he=s(16),pe=s(16);for(e(ce!=0),e(ee!=null),e(M!=null),e(0<W),ge=0;ge<ce;++ge){if(15<ee[ge])return 0;++he[ee[ge]]}if(he[0]==ce)return 0;for(pe[1]=0,Se=1;15>Se;++Se){if(he[Se]>1<<Se)return 0;pe[Se+1]=pe[Se]+he[Se]}for(ge=0;ge<ce;++ge)Se=ee[ge],0<ee[ge]&&(_e[pe[Se]++]=ge);if(pe[15]==1)return(ee=new A).g=0,ee.value=_e[0],Z(M,Te,1,ke,ee),ke;var Ee,Re=-1,Ce=ke-1,We=0,ze=1,st=1,$e=1<<W;for(ge=0,Se=1,ce=2;Se<=W;++Se,ce<<=1){if(ze+=st<<=1,0>(st-=he[Se]))return 0;for(;0<he[Se];--he[Se])(ee=new A).g=Se,ee.value=_e[ge++],Z(M,Te+We,ce,$e,ee),We=G(We,Se)}for(Se=W+1,ce=2;15>=Se;++Se,ce<<=1){if(ze+=st<<=1,0>(st-=he[Se]))return 0;for(;0<he[Se];--he[Se]){if(ee=new A,(We&Ce)!=Re){for(Te+=$e,Ee=1<<(Re=Se)-W;15>Re&&!(0>=(Ee-=he[Re]));)++Re,Ee<<=1;ke+=$e=1<<(Ee=Re-W),M[z+(Re=We&Ce)].g=Ee+W,M[z+Re].value=Te-z-Re}ee.g=Se-W,ee.value=_e[ge++],Z(M,Te+(We>>W),ce,$e,ee),We=G(We,Se)}}return ze!=2*pe[15]-1?0:ke}(u,h,b,k,I,F)}function A(){this.value=this.g=0}function q(){this.value=this.g=0}function K(){this.G=a(5,A),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Bn,q)}function te(u,h,b,k){e(u!=null),e(h!=null),e(2147483648>k),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=h,u.pa=b,u.Jd=h,u.Yc=b+k,u.Zc=4<=k?b+k-4+1:b,H(u)}function $(u,h){for(var b=0;0<h--;)b|=Y(u,128)<<h;return b}function Q(u,h){var b=$(u,h);return J(u)?-b:b}function V(u,h,b,k){var I,F=0;for(e(u!=null),e(h!=null),e(4294967288>k),u.Sb=k,u.Ra=0,u.u=0,u.h=0,4<k&&(k=4),I=0;I<k;++I)F+=h[b+I]<<8*I;u.Ra=F,u.bb=k,u.oa=h,u.pa=b}function B(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<_o-8>>>0,++u.bb,u.u-=8;X(u)&&(u.h=1,u.u=0)}function ie(u,h){if(e(0<=h),!u.h&&h<=bo){var b=U(u)&xo[h];return u.u+=h,B(u),b}return u.h=1,u.u=0}function ve(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(u){return u.Ra>>>(u.u&_o-1)>>>0}function X(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>_o}function ne(u,h){u.u=h,u.h=X(u)}function P(u){u.u>=Jl&&(e(u.u>=Jl),B(u))}function H(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function J(u){return $(u,1)}function Y(u,h){var b=u.Ca;0>u.b&&H(u);var k=u.b,I=b*h>>>8,F=(u.I>>>k>I)+0;for(F?(b-=I,u.I-=I+1<<k>>>0):b=I+1,k=b,I=0;256<=k;)I+=8,k>>=8;return k=7^I+xr[k],u.b-=k,u.Ca=(b<<k)-1,F}function be(u,h,b){u[h+0]=b>>24&255,u[h+1]=b>>16&255,u[h+2]=b>>8&255,u[h+3]=b>>0&255}function we(u,h){return u[h+0]<<0|u[h+1]<<8}function Pe(u,h){return we(u,h)|u[h+2]<<16}function je(u,h){return we(u,h)|we(u,h+2)<<16}function He(u,h){var b=1<<h;return e(u!=null),e(0<h),u.X=s(b),u.X==null?0:(u.Mb=32-h,u.Xa=h,1)}function Ne(u,h){e(u!=null),e(h!=null),e(u.Xa==h.Xa),r(h.X,0,u.X,0,1<<h.Xa)}function se(){this.X=[],this.Xa=this.Mb=0}function Qe(u,h,b,k){e(b!=null),e(k!=null);var I=b[0],F=k[0];return I==0&&(I=(u*F+h/2)/h),F==0&&(F=(h*I+u/2)/u),0>=I||0>=F?0:(b[0]=I,k[0]=F,1)}function Ue(u,h){return u+(1<<h)-1>>>h}function Le(u,h){return((4278255360&u)+(4278255360&h)>>>0&4278255360)+((16711935&u)+(16711935&h)>>>0&16711935)>>>0}function Oe(u,h){C[h]=function(b,k,I,F,M,z,W){var ee;for(ee=0;ee<M;++ee){var ce=C[u](z[W+ee-1],I,F+ee);z[W+ee]=Le(b[k+ee],ce)}}}function ae(){this.ud=this.hd=this.jd=0}function oe(u,h){return((4278124286&(u^h))>>>1)+(u&h)>>>0}function ye(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function De(u,h){return ye(u+(u-h+.5>>1))}function Me(u,h,b){return Math.abs(h-b)-Math.abs(u-b)}function me(u,h,b,k,I,F,M){for(k=F[M-1],b=0;b<I;++b)F[M+b]=k=Le(u[h+b],k)}function bt(u,h,b,k,I){var F;for(F=0;F<b;++F){var M=u[h+F],z=M>>8&255,W=16711935&(W=(W=16711935&M)+((z<<16)+z));k[I+F]=(4278255360&M)+W>>>0}}function Tt(u,h){h.jd=u>>0&255,h.hd=u>>8&255,h.ud=u>>16&255}function tt(u,h,b,k,I,F){var M;for(M=0;M<k;++M){var z=h[b+M],W=z>>>8,ee=z,ce=255&(ce=(ce=z>>>16)+((u.jd<<24>>24)*(W<<24>>24)>>>5));ee=255&(ee=(ee=ee+((u.hd<<24>>24)*(W<<24>>24)>>>5))+((u.ud<<24>>24)*(ce<<24>>24)>>>5)),I[F+M]=(4278255360&z)+(ce<<16)+ee}}function yt(u,h,b,k,I){C[h]=function(F,M,z,W,ee,ce,_e,Se,ge){for(W=_e;W<Se;++W)for(_e=0;_e<ge;++_e)ee[ce++]=I(z[k(F[M++])])},C[u]=function(F,M,z,W,ee,ce,_e){var Se=8>>F.b,ge=F.Ea,Te=F.K[0],ke=F.w;if(8>Se)for(F=(1<<F.b)-1,ke=(1<<Se)-1;M<z;++M){var he,pe=0;for(he=0;he<ge;++he)he&F||(pe=k(W[ee++])),ce[_e++]=I(Te[pe&ke]),pe>>=Se}else C["VP8LMapColor"+b](W,ee,Te,ke,ce,_e,M,z,ge)}}function Be(u,h,b,k,I){for(b=h+b;h<b;){var F=u[h++];k[I++]=F>>16&255,k[I++]=F>>8&255,k[I++]=F>>0&255}}function An(u,h,b,k,I){for(b=h+b;h<b;){var F=u[h++];k[I++]=F>>16&255,k[I++]=F>>8&255,k[I++]=F>>0&255,k[I++]=F>>24&255}}function Et(u,h,b,k,I){for(b=h+b;h<b;){var F=(M=u[h++])>>16&240|M>>12&15,M=M>>0&240|M>>28&15;k[I++]=F,k[I++]=M}}function de(u,h,b,k,I){for(b=h+b;h<b;){var F=(M=u[h++])>>16&248|M>>13&7,M=M>>5&224|M>>3&31;k[I++]=F,k[I++]=M}}function le(u,h,b,k,I){for(b=h+b;h<b;){var F=u[h++];k[I++]=F>>0&255,k[I++]=F>>8&255,k[I++]=F>>16&255}}function Ze(u,h,b,k,I,F){if(F==0)for(b=h+b;h<b;)be(k,((F=u[h++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),I+=32;else r(k,I,u,h,b)}function Lt(u,h){C[h][0]=C[u+"0"],C[h][1]=C[u+"1"],C[h][2]=C[u+"2"],C[h][3]=C[u+"3"],C[h][4]=C[u+"4"],C[h][5]=C[u+"5"],C[h][6]=C[u+"6"],C[h][7]=C[u+"7"],C[h][8]=C[u+"8"],C[h][9]=C[u+"9"],C[h][10]=C[u+"10"],C[h][11]=C[u+"11"],C[h][12]=C[u+"12"],C[h][13]=C[u+"13"],C[h][14]=C[u+"0"],C[h][15]=C[u+"0"]}function Ge(u){return u==Lf||u==Rf||u==Qc||u==If}function _t(){this.eb=[],this.size=this.A=this.fb=0}function nt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ve(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new _t,this.f.kb=new nt,this.sd=null}function ut(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function St(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function rt(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Rt(u,h){var b=u.T,k=h.ba.f.RGBA,I=k.eb,F=k.fb+u.ka*k.A,M=ti[h.ba.S],z=u.y,W=u.O,ee=u.f,ce=u.N,_e=u.ea,Se=u.W,ge=h.cc,Te=h.dc,ke=h.Mc,he=h.Nc,pe=u.ka,Ee=u.ka+u.T,Re=u.U,Ce=Re+1>>1;for(pe==0?M(z,W,null,null,ee,ce,_e,Se,ee,ce,_e,Se,I,F,null,null,Re):(M(h.ec,h.fc,z,W,ge,Te,ke,he,ee,ce,_e,Se,I,F-k.A,I,F,Re),++b);pe+2<Ee;pe+=2)ge=ee,Te=ce,ke=_e,he=Se,ce+=u.Rc,Se+=u.Rc,F+=2*k.A,M(z,(W+=2*u.fa)-u.fa,z,W,ge,Te,ke,he,ee,ce,_e,Se,I,F-k.A,I,F,Re);return W+=u.fa,u.j+Ee<u.o?(r(h.ec,h.fc,z,W,Re),r(h.cc,h.dc,ee,ce,Ce),r(h.Mc,h.Nc,_e,Se,Ce),b--):1&Ee||M(z,W,null,null,ee,ce,_e,Se,ee,ce,_e,Se,I,F+k.A,null,null,Re),b}function Ti(u,h,b){var k=u.F,I=[u.J];if(k!=null){var F=u.U,M=h.ba.S,z=M==Xc||M==Qc;h=h.ba.f.RGBA;var W=[0],ee=u.ka;W[0]=u.T,u.Kb&&(ee==0?--W[0]:(--ee,I[0]-=u.width),u.j+u.ka+u.T==u.o&&(W[0]=u.o-u.j-ee));var ce=h.eb;ee=h.fb+ee*h.A,u=Yt(k,I[0],u.width,F,W,ce,ee+(z?0:3),h.A),e(b==W),u&&Ge(M)&&Zr(ce,ee,z,F,W,h.A)}return 0}function fn(u){var h=u.ma,b=h.ba.S,k=11>b,I=b==Kc||b==Jc||b==Xc||b==Tf||b==12||Ge(b);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Yl(h.Oa,u,I?11:12))return 0;if(I&&Ge(b)&&Ie(),u.da)alert("todo:use_scaling");else{if(k){if(h.Ib=rt,u.Kb){if(b=u.U+1>>1,h.memory=s(u.U+2*b),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+u.U,h.Mc=h.cc,h.Nc=h.dc+b,h.Ib=Rt,Ie()}}else alert("todo:EmitYUV");I&&(h.Jb=Ti,k&&xe())}if(k&&!Eg){for(u=0;256>u;++u)nx[u]=89858*(u-128)+ed>>Zc,sx[u]=-22014*(u-128)+ed,ix[u]=-45773*(u-128),rx[u]=113618*(u-128)+ed>>Zc;for(u=ru;u<Ff;++u)h=76283*(u-16)+ed>>Zc,ax[u-ru]=Ir(h,255),ox[u-ru]=Ir(h+8>>4,15);Eg=1}return 1}function Je(u){var h=u.ma,b=u.U,k=u.T;return e(!(1&u.ka)),0>=b||0>=k?0:(b=h.Ib(u,h),h.Jb!=null&&h.Jb(u,h,b),h.Dc+=b,1)}function Cr(u){u.ma.memory=null}function it(u,h,b,k){return ie(u,8)!=47?0:(h[0]=ie(u,14)+1,b[0]=ie(u,14)+1,k[0]=ie(u,1),ie(u,3)!=0?0:!u.h)}function Tr(u,h){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+ie(h,b)+1}function Vt(u,h){return 120<h?h-120:1<=(b=((b=$w[h-1])>>4)*u+(8-(15&b)))?b:1;var b}function Ft(u,h,b){var k=U(b),I=u[h+=255&k].g-8;return 0<I&&(ne(b,b.u+8),k=U(b),h+=u[h].value,h+=k&(1<<I)-1),ne(b,b.u+u[h].g),u[h].value}function ht(u,h,b){return b.g+=u.g,b.value+=u.value<<h>>>0,e(8>=b.g),u.g}function kt(u,h,b){var k=u.xc;return e((h=k==0?0:u.vc[u.md*(b>>k)+(h>>k)])<u.Wb),u.Ya[h]}function jt(u,h,b,k){var I=u.ab,F=u.c*h,M=u.C;h=M+h;var z=b,W=k;for(k=u.Ta,b=u.Ua;0<I--;){var ee=u.gc[I],ce=M,_e=h,Se=z,ge=W,Te=(W=k,z=b,ee.Ea);switch(e(ce<_e),e(_e<=ee.nc),ee.hc){case 2:$c(Se,ge,(_e-ce)*Te,W,z);break;case 0:var ke=ce,he=_e,pe=W,Ee=z,Re=($e=ee).Ea;ke==0&&(Ef(Se,ge,null,null,1,pe,Ee),me(Se,ge+1,0,0,Re-1,pe,Ee+1),ge+=Re,Ee+=Re,++ke);for(var Ce=1<<$e.b,We=Ce-1,ze=Ue(Re,$e.b),st=$e.K,$e=$e.w+(ke>>$e.b)*ze;ke<he;){var Dt=st,Mt=$e,It=1;for(Xl(Se,ge,pe,Ee-Re,1,pe,Ee);It<Re;){var At=(It&~We)+Ce;At>Re&&(At=Re),(0,_s[Dt[Mt++]>>8&15])(Se,ge+ +It,pe,Ee+It-Re,At-It,pe,Ee+It),It=At}ge+=Re,Ee+=Re,++ke&We||($e+=ze)}_e!=ee.nc&&r(W,z-Te,W,z+(_e-ce-1)*Te,Te);break;case 1:for(Te=Se,he=ge,Re=(Se=ee.Ea)-(Ee=Se&~(pe=(ge=1<<ee.b)-1)),ke=Ue(Se,ee.b),Ce=ee.K,ee=ee.w+(ce>>ee.b)*ke;ce<_e;){for(We=Ce,ze=ee,st=new ae,$e=he+Ee,Dt=he+Se;he<$e;)Tt(We[ze++],st),ba(st,Te,he,ge,W,z),he+=ge,z+=ge;he<Dt&&(Tt(We[ze++],st),ba(st,Te,he,Re,W,z),he+=Re,z+=Re),++ce&pe||(ee+=ke)}break;case 3:if(Se==W&&ge==z&&0<ee.b){for(he=W,Se=Te=z+(_e-ce)*Te-(Ee=(_e-ce)*Ue(ee.Ea,ee.b)),ge=W,pe=z,ke=[],Ee=(Re=Ee)-1;0<=Ee;--Ee)ke[Ee]=ge[pe+Ee];for(Ee=Re-1;0<=Ee;--Ee)he[Se+Ee]=ke[Ee];Jr(ee,ce,_e,W,Te,W,z)}else Jr(ee,ce,_e,Se,ge,W,z)}z=k,W=b}W!=b&&r(k,b,z,W,F)}function Lr(u,h){var b=u.V,k=u.Ba+u.c*u.C,I=h-u.C;if(e(h<=u.l.o),e(16>=I),0<I){var F=u.l,M=u.Ta,z=u.Ua,W=F.width;if(jt(u,I,b,k),I=z=[z],e((b=u.C)<(k=h)),e(F.v<F.va),k>F.o&&(k=F.o),b<F.j){var ee=F.j-b;b=F.j,I[0]+=ee*W}if(b>=k?b=0:(I[0]+=4*F.v,F.ka=b-F.j,F.U=F.va-F.v,F.T=k-b,b=1),b){if(z=z[0],11>(b=u.ca).S){var ce=b.f.RGBA,_e=(k=b.S,I=F.U,F=F.T,ee=ce.eb,ce.A),Se=F;for(ce=ce.fb+u.Ma*ce.A;0<Se--;){var ge=M,Te=z,ke=I,he=ee,pe=ce;switch(k){case Yc:br(ge,Te,ke,he,pe);break;case Kc:ur(ge,Te,ke,he,pe);break;case Lf:ur(ge,Te,ke,he,pe),Zr(he,pe,0,ke,1,0);break;case wg:Xi(ge,Te,ke,he,pe);break;case Jc:Ze(ge,Te,ke,he,pe,1);break;case Rf:Ze(ge,Te,ke,he,pe,1),Zr(he,pe,0,ke,1,0);break;case Xc:Ze(ge,Te,ke,he,pe,0);break;case Qc:Ze(ge,Te,ke,he,pe,0),Zr(he,pe,1,ke,1,0);break;case Tf:Ss(ge,Te,ke,he,pe);break;case If:Ss(ge,Te,ke,he,pe),Gt(he,pe,ke,1,0);break;case xg:Ji(ge,Te,ke,he,pe);break;default:e(0)}z+=W,ce+=_e}u.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=b.height)}}u.C=h,e(u.C<=u.i)}function vr(u){var h;if(0<u.ua)return 0;for(h=0;h<u.Wb;++h){var b=u.Ya[h].G,k=u.Ya[h].H;if(0<b[1][k[1]+0].g||0<b[2][k[2]+0].g||0<b[3][k[3]+0].g)return 0}return 1}function Yn(u,h,b,k,I,F){if(u.Z!=0){var M=u.qd,z=u.rd;for(e(As[u.Z]!=null);h<b;++h)As[u.Z](M,z,k,I,k,I,F),M=k,z=I,I+=F;u.qd=M,u.rd=z}}function or(u,h){var b=u.l.ma,k=b.Z==0||b.Z==1?u.l.j:u.C;if(k=u.C<k?k:u.C,e(h<=u.l.o),h>k){var I=u.l.width,F=b.ca,M=b.tb+I*k,z=u.V,W=u.Ba+u.c*k,ee=u.gc;e(u.ab==1),e(ee[0].hc==3),qc(ee[0],k,h,z,W,F,M),Yn(b,k,h,F,M,I)}u.C=u.Ma=h}function Kn(u,h,b,k,I,F,M){var z=u.$/k,W=u.$%k,ee=u.m,ce=u.s,_e=b+u.$,Se=_e;I=b+k*I;var ge=b+k*F,Te=280+ce.ua,ke=u.Pb?z:16777216,he=0<ce.ua?ce.Wa:null,pe=ce.wc,Ee=_e<ge?kt(ce,W,z):null;e(u.C<F),e(ge<=I);var Re=!1;e:for(;;){for(;Re||_e<ge;){var Ce=0;if(z>=ke){var We=_e-b;e((ke=u).Pb),ke.wd=ke.m,ke.xd=We,0<ke.s.ua&&Ne(ke.s.Wa,ke.s.vb),ke=z+Ww}if(W&pe||(Ee=kt(ce,W,z)),e(Ee!=null),Ee.Qb&&(h[_e]=Ee.qb,Re=!0),!Re)if(P(ee),Ee.jc){Ce=ee,We=h;var ze=_e,st=Ee.pd[U(Ce)&Bn-1];e(Ee.jc),256>st.g?(ne(Ce,Ce.u+st.g),We[ze]=st.value,Ce=0):(ne(Ce,Ce.u+st.g-256),e(256<=st.value),Ce=st.value),Ce==0&&(Re=!0)}else Ce=Ft(Ee.G[0],Ee.H[0],ee);if(ee.h)break;if(Re||256>Ce){if(!Re)if(Ee.nd)h[_e]=(Ee.qb|Ce<<8)>>>0;else{if(P(ee),Re=Ft(Ee.G[1],Ee.H[1],ee),P(ee),We=Ft(Ee.G[2],Ee.H[2],ee),ze=Ft(Ee.G[3],Ee.H[3],ee),ee.h)break;h[_e]=(ze<<24|Re<<16|Ce<<8|We)>>>0}if(Re=!1,++_e,++W>=k&&(W=0,++z,M!=null&&z<=F&&!(z%16)&&M(u,z),he!=null))for(;Se<_e;)Ce=h[Se++],he.X[(506832829*Ce&4294967295)>>>he.Mb]=Ce}else if(280>Ce){if(Ce=Tr(Ce-256,ee),We=Ft(Ee.G[4],Ee.H[4],ee),P(ee),We=Vt(k,We=Tr(We,ee)),ee.h)break;if(_e-b<We||I-_e<Ce)break e;for(ze=0;ze<Ce;++ze)h[_e+ze]=h[_e+ze-We];for(_e+=Ce,W+=Ce;W>=k;)W-=k,++z,M!=null&&z<=F&&!(z%16)&&M(u,z);if(e(_e<=I),W&pe&&(Ee=kt(ce,W,z)),he!=null)for(;Se<_e;)Ce=h[Se++],he.X[(506832829*Ce&4294967295)>>>he.Mb]=Ce}else{if(!(Ce<Te))break e;for(Re=Ce-280,e(he!=null);Se<_e;)Ce=h[Se++],he.X[(506832829*Ce&4294967295)>>>he.Mb]=Ce;Ce=_e,e(!(Re>>>(We=he).Xa)),h[Ce]=We.X[Re],Re=!0}Re||e(ee.h==X(ee))}if(u.Pb&&ee.h&&_e<I)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&Ne(u.s.vb,u.s.Wa);else{if(ee.h)break e;M!=null&&M(u,z>F?F:z),u.a=0,u.$=_e-b}return 1}return u.a=3,0}function lr(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var h=u.Wa;h!=null&&(h.X=null),u.vb=null,e(u!=null)}function yr(){var u=new Pf;return u==null?null:(u.a=0,u.xb=Sg,Lt("Predictor","VP8LPredictors"),Lt("Predictor","VP8LPredictors_C"),Lt("PredictorAdd","VP8LPredictorsAdd"),Lt("PredictorAdd","VP8LPredictorsAdd_C"),$c=bt,ba=tt,br=Be,ur=An,Ss=Et,Ji=de,Xi=le,C.VP8LMapColor32b=So,C.VP8LMapColor8b=Wc,u)}function Rr(u,h,b,k,I){var F=1,M=[u],z=[h],W=k.m,ee=k.s,ce=null,_e=0;e:for(;;){if(b)for(;F&&ie(W,1);){var Se=M,ge=z,Te=k,ke=1,he=Te.m,pe=Te.gc[Te.ab],Ee=ie(he,2);if(Te.Oc&1<<Ee)F=0;else{switch(Te.Oc|=1<<Ee,pe.hc=Ee,pe.Ea=Se[0],pe.nc=ge[0],pe.K=[null],++Te.ab,e(4>=Te.ab),Ee){case 0:case 1:pe.b=ie(he,3)+2,ke=Rr(Ue(pe.Ea,pe.b),Ue(pe.nc,pe.b),0,Te,pe.K),pe.K=pe.K[0];break;case 3:var Re,Ce=ie(he,8)+1,We=16<Ce?0:4<Ce?1:2<Ce?2:3;if(Se[0]=Ue(pe.Ea,We),pe.b=We,Re=ke=Rr(Ce,1,0,Te,pe.K)){var ze,st=Ce,$e=pe,Dt=1<<(8>>$e.b),Mt=s(Dt);if(Mt==null)Re=0;else{var It=$e.K[0],At=$e.w;for(Mt[0]=$e.K[0][0],ze=1;ze<1*st;++ze)Mt[ze]=Le(It[At+ze],Mt[ze-1]);for(;ze<4*Dt;++ze)Mt[ze]=0;$e.K[0]=null,$e.K[0]=Mt,Re=1}}ke=Re;break;case 2:break;default:e(0)}F=ke}}if(M=M[0],z=z[0],F&&ie(W,1)&&!(F=1<=(_e=ie(W,4))&&11>=_e)){k.a=3;break e}var Wt;if(Wt=F)t:{var qt,wt,Sn,_r=k,Nn=M,Sr=z,zt=_e,Dr=b,Fr=_r.m,In=_r.s,Un=[null],dr=1,ni=0,Oi=qw[zt];n:for(;;){if(Dr&&ie(Fr,1)){var On=ie(Fr,3)+2,ts=Ue(Nn,On),ja=Ue(Sr,On),Po=ts*ja;if(!Rr(ts,ja,0,_r,Un))break n;for(Un=Un[0],In.xc=On,qt=0;qt<Po;++qt){var Ps=Un[qt]>>8&65535;Un[qt]=Ps,Ps>=dr&&(dr=Ps+1)}}if(Fr.h)break n;for(wt=0;5>wt;++wt){var ln=bg[wt];!wt&&0<zt&&(ln+=1<<zt),ni<ln&&(ni=ln)}var Mf=a(dr*Oi,A),Lg=dr,Rg=a(Lg,K);if(Rg==null)var nd=null;else e(65536>=Lg),nd=Rg;var iu=s(ni);if(nd==null||iu==null||Mf==null){_r.a=1;break n}var rd=Mf;for(qt=Sn=0;qt<dr;++qt){var pi=nd[qt],Eo=pi.G,Co=pi.H,Ig=0,id=1,Og=0;for(wt=0;5>wt;++wt){ln=bg[wt],Eo[wt]=rd,Co[wt]=Sn,!wt&&0<zt&&(ln+=1<<zt);i:{var sd,zf=ln,ad=_r,su=iu,cx=rd,dx=Sn,Bf=0,Es=ad.m,hx=ie(Es,1);if(i(su,0,0,zf),hx){var fx=ie(Es,1)+1,px=ie(Es,1),Dg=ie(Es,px==0?1:8);su[Dg]=1,fx==2&&(su[Dg=ie(Es,8)]=1);var od=1}else{var Fg=s(19),Mg=ie(Es,4)+4;if(19<Mg){ad.a=3;var ld=0;break i}for(sd=0;sd<Mg;++sd)Fg[Uw[sd]]=ie(Es,3);var Uf=void 0,au=void 0,zg=ad,mx=Fg,ud=zf,Bg=su,$f=0,Cs=zg.m,Ug=8,$g=a(128,A);r:for(;R($g,0,7,mx,19);){if(ie(Cs,1)){var gx=2+2*ie(Cs,3);if((Uf=2+ie(Cs,gx))>ud)break r}else Uf=ud;for(au=0;au<ud&&Uf--;){P(Cs);var qg=$g[0+(127&U(Cs))];ne(Cs,Cs.u+qg.g);var To=qg.value;if(16>To)Bg[au++]=To,To!=0&&(Ug=To);else{var vx=To==16,Wg=To-16,yx=zw[Wg],Hg=ie(Cs,Mw[Wg])+yx;if(au+Hg>ud)break r;for(var wx=vx?Ug:0;0<Hg--;)Bg[au++]=wx}}$f=1;break r}$f||(zg.a=3),od=$f}(od=od&&!Es.h)&&(Bf=R(cx,dx,8,su,zf)),od&&Bf!=0?ld=Bf:(ad.a=3,ld=0)}if(ld==0)break n;if(id&&Bw[wt]==1&&(id=rd[Sn].g==0),Ig+=rd[Sn].g,Sn+=ld,3>=wt){var ou,qf=iu[0];for(ou=1;ou<ln;++ou)iu[ou]>qf&&(qf=iu[ou]);Og+=qf}}if(pi.nd=id,pi.Qb=0,id&&(pi.qb=(Eo[3][Co[3]+0].value<<24|Eo[1][Co[1]+0].value<<16|Eo[2][Co[2]+0].value)>>>0,Ig==0&&256>Eo[0][Co[0]+0].value&&(pi.Qb=1,pi.qb+=Eo[0][Co[0]+0].value<<8)),pi.jc=!pi.Qb&&6>Og,pi.jc){var cd,ns=pi;for(cd=0;cd<Bn;++cd){var Ts=cd,Ls=ns.pd[Ts],dd=ns.G[0][ns.H[0]+Ts];256<=dd.value?(Ls.g=dd.g+256,Ls.value=dd.value):(Ls.g=0,Ls.value=0,Ts>>=ht(dd,8,Ls),Ts>>=ht(ns.G[1][ns.H[1]+Ts],16,Ls),Ts>>=ht(ns.G[2][ns.H[2]+Ts],0,Ls),ht(ns.G[3][ns.H[3]+Ts],24,Ls))}}}In.vc=Un,In.Wb=dr,In.Ya=nd,In.yc=Mf,Wt=1;break t}Wt=0}if(!(F=Wt)){k.a=3;break e}if(0<_e){if(ee.ua=1<<_e,!He(ee.Wa,_e)){k.a=1,F=0;break e}}else ee.ua=0;var Wf=k,Vg=M,xx=z,Hf=Wf.s,Vf=Hf.xc;if(Wf.c=Vg,Wf.i=xx,Hf.md=Ue(Vg,Vf),Hf.wc=Vf==0?-1:(1<<Vf)-1,b){k.xb=Xw;break e}if((ce=s(M*z))==null){k.a=1,F=0;break e}F=(F=Kn(k,ce,0,M,z,z,null))&&!W.h;break e}return F?(I!=null?I[0]=ce:(e(ce==null),e(b)),k.$=0,b||lr(ee)):lr(ee),F}function ga(u,h){var b=u.c*u.i,k=b+h+16*h;return e(u.c<=h),u.V=s(k),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+h,1)}function ro(u,h){var b=u.C,k=h-b,I=u.V,F=u.Ba+u.c*b;for(e(h<=u.l.o);0<k;){var M=16<k?16:k,z=u.l.ma,W=u.l.width,ee=W*M,ce=z.ca,_e=z.tb+W*b,Se=u.Ta,ge=u.Ua;jt(u,M,I,F),gn(Se,ge,ce,_e,ee),Yn(z,b,b+M,ce,_e,W),k-=M,I+=M*u.c,b+=M}e(b==h),u.C=u.Ma=h}function io(){this.ub=this.yd=this.td=this.Rb=0}function so(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ao(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function _c(){this.Yb=function(){var u=[];return function h(b,k,I){for(var F=I[k],M=0;M<F&&(b.push(I.length>k+1?[]:0),!(I.length<k+1));M++)h(b[M],k+1,I)}(u,0,[3,11]),u}()}function sf(){this.jb=s(3),this.Wc=o([4,8],_c),this.Xc=o([4,17],_c)}function af(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function oo(){this.ld=this.La=this.dd=this.tc=0}function Sc(){this.Na=this.la=0}function of(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ll(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function lf(){this.uc=this.M=this.Nb=0,this.wa=Array(new oo),this.Y=0,this.ya=Array(new Ll),this.aa=0,this.l=new lo}function Nc(){this.y=s(16),this.f=s(8),this.ea=s(8)}function uf(){this.cb=this.a=0,this.sc="",this.m=new ve,this.Od=new io,this.Kc=new so,this.ed=new af,this.Qa=new ao,this.Ic=this.$c=this.Aa=0,this.D=new lf,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,ve),this.ia=0,this.pb=a(4,of),this.Pa=new sf,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Nc),this.Hd=0,this.rb=Array(new Sc),this.sb=0,this.wa=Array(new oo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ll),this.L=this.aa=0,this.gd=o([4,2],oo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function lo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function cf(){var u=new uf;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,nu||(nu=Ac)),u}function pn(u,h,b){return u.a==0&&(u.a=h,u.sc=b,u.cb=0),0}function kc(u,h,b){return 3<=b&&u[h+0]==157&&u[h+1]==1&&u[h+2]==42}function jc(u,h){if(u==null)return 0;if(u.a=0,u.sc="OK",h==null)return pn(u,2,"null VP8Io passed to VP8GetHeaders()");var b=h.data,k=h.w,I=h.ha;if(4>I)return pn(u,7,"Truncated header.");var F=b[k+0]|b[k+1]<<8|b[k+2]<<16,M=u.Od;if(M.Rb=!(1&F),M.td=F>>1&7,M.yd=F>>4&1,M.ub=F>>5,3<M.td)return pn(u,3,"Incorrect keyframe parameters.");if(!M.yd)return pn(u,4,"Frame not displayable.");k+=3,I-=3;var z=u.Kc;if(M.Rb){if(7>I)return pn(u,7,"cannot parse picture header");if(!kc(b,k,I))return pn(u,3,"Bad code word");z.c=16383&(b[k+4]<<8|b[k+3]),z.Td=b[k+4]>>6,z.i=16383&(b[k+6]<<8|b[k+5]),z.Ud=b[k+6]>>6,k+=7,I-=7,u.za=z.c+15>>4,u.Ub=z.i+15>>4,h.width=z.c,h.height=z.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((F=u.Pa).jb,0,255,F.jb.length),e((F=u.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,i(F.Zb,0,0,F.Zb.length),i(F.Lb,0,0,F.Lb)}if(M.ub>I)return pn(u,7,"bad partition length");te(F=u.m,b,k,M.ub),k+=M.ub,I-=M.ub,M.Rb&&(z.Ld=J(F),z.Kd=J(F)),z=u.Qa;var W,ee=u.Pa;if(e(F!=null),e(z!=null),z.Cb=J(F),z.Cb){if(z.Bb=J(F),J(F)){for(z.Fb=J(F),W=0;4>W;++W)z.Zb[W]=J(F)?Q(F,7):0;for(W=0;4>W;++W)z.Lb[W]=J(F)?Q(F,6):0}if(z.Bb)for(W=0;3>W;++W)ee.jb[W]=J(F)?$(F,8):255}else z.Bb=0;if(F.Ka)return pn(u,3,"cannot parse segment header");if((z=u.ed).zd=J(F),z.Tb=$(F,6),z.wb=$(F,3),z.Pc=J(F),z.Pc&&J(F)){for(ee=0;4>ee;++ee)J(F)&&(z.vd[ee]=Q(F,6));for(ee=0;4>ee;++ee)J(F)&&(z.od[ee]=Q(F,6))}if(u.L=z.Tb==0?0:z.zd?1:2,F.Ka)return pn(u,3,"cannot parse filter header");var ce=I;if(I=W=k,k=W+ce,z=ce,u.Xb=(1<<$(u.m,2))-1,ce<3*(ee=u.Xb))b=7;else{for(W+=3*ee,z-=3*ee,ce=0;ce<ee;++ce){var _e=b[I+0]|b[I+1]<<8|b[I+2]<<16;_e>z&&(_e=z),te(u.Jc[+ce],b,W,_e),W+=_e,z-=_e,I+=3}te(u.Jc[+ee],b,W,z),b=W<k?0:5}if(b!=0)return pn(u,b,"cannot parse partitions");for(b=$(W=u.m,7),I=J(W)?Q(W,4):0,k=J(W)?Q(W,4):0,z=J(W)?Q(W,4):0,ee=J(W)?Q(W,4):0,W=J(W)?Q(W,4):0,ce=u.Qa,_e=0;4>_e;++_e){if(ce.Cb){var Se=ce.Zb[_e];ce.Fb||(Se+=b)}else{if(0<_e){u.pb[_e]=u.pb[0];continue}Se=b}var ge=u.pb[_e];ge.Sc[0]=Of[Ir(Se+I,127)],ge.Sc[1]=Df[Ir(Se+0,127)],ge.Eb[0]=2*Of[Ir(Se+k,127)],ge.Eb[1]=101581*Df[Ir(Se+z,127)]>>16,8>ge.Eb[1]&&(ge.Eb[1]=8),ge.Qc[0]=Of[Ir(Se+ee,117)],ge.Qc[1]=Df[Ir(Se+W,127)],ge.lc=Se+W}if(!M.Rb)return pn(u,4,"Not a key frame.");for(J(F),M=u.Pa,b=0;4>b;++b){for(I=0;8>I;++I)for(k=0;3>k;++k)for(z=0;11>z;++z)ee=Y(F,Kw[b][I][k][z])?$(F,8):Gw[b][I][k][z],M.Wc[b][I].Yb[k][z]=ee;for(I=0;17>I;++I)M.Xc[b][I]=M.Wc[b][Jw[I]]}return u.kc=J(F),u.kc&&(u.Bd=$(F,8)),u.cb=1}function Ac(u,h,b,k,I,F,M){var z=h[I].Yb[b];for(b=0;16>I;++I){if(!Y(u,z[b+0]))return I;for(;!Y(u,z[b+1]);)if(z=h[++I].Yb[0],b=0,I==16)return 16;var W=h[I+1].Yb;if(Y(u,z[b+2])){var ee=u,ce=0;if(Y(ee,(Se=z)[(_e=b)+3]))if(Y(ee,Se[_e+6])){for(z=0,_e=2*(ce=Y(ee,Se[_e+8]))+(Se=Y(ee,Se[_e+9+ce])),ce=0,Se=Hw[_e];Se[z];++z)ce+=ce+Y(ee,Se[z]);ce+=3+(8<<_e)}else Y(ee,Se[_e+7])?(ce=7+2*Y(ee,165),ce+=Y(ee,145)):ce=5+Y(ee,159);else ce=Y(ee,Se[_e+4])?3+Y(ee,Se[_e+5]):2;z=W[2]}else ce=1,z=W[1];W=M+Vw[I],0>(ee=u).b&&H(ee);var _e,Se=ee.b,ge=(_e=ee.Ca>>1)-(ee.I>>Se)>>31;--ee.b,ee.Ca+=ge,ee.Ca|=1,ee.I-=(_e+1&ge)<<Se,F[W]=((ce^ge)-ge)*k[(0<I)+0]}return 16}function Rl(u){var h=u.rb[u.sb-1];h.la=0,h.Na=0,i(u.zc,0,0,u.zc.length),u.ja=0}function df(u,h){if(u==null)return 0;if(h==null)return pn(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!jc(u,h))return 0;if(e(u.cb),h.ac==null||h.ac(h)){h.ob&&(u.L=0);var b=td[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=h.v-b>>4,u.zb=h.j-b>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=h.o+15+b>>4,u.Hb=h.va+15+b>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var k=u.ed;for(b=0;4>b;++b){var I;if(u.Qa.Cb){var F=u.Qa.Lb[b];u.Qa.Fb||(F+=k.Tb)}else F=k.Tb;for(I=0;1>=I;++I){var M=u.gd[b][I],z=F;if(k.Pc&&(z+=k.vd[0],I&&(z+=k.od[0])),0<(z=0>z?0:63<z?63:z)){var W=z;0<k.wb&&(W=4<k.wb?W>>2:W>>1)>9-k.wb&&(W=9-k.wb),1>W&&(W=1),M.dd=W,M.tc=2*z+W,M.ld=40<=z?2:15<=z?1:0}else M.tc=0;M.La=I}}}b=0}else pn(u,6,"Frame setup failed"),b=u.a;if(b=b==0){if(b){u.$c=0,0<u.Aa||(u.Ic=ux);e:{b=u.Ic,k=4*(W=u.za);var ee=32*W,ce=W+1,_e=0<u.L?W*(0<u.Aa?2:1):0,Se=(u.Aa==2?2:1)*W;if((M=k+832+(I=3*(16*b+td[u.L])/2*ee)+(F=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=M)b=0;else{if(M>u.Vb){if(u.Vb=0,u.Ec=s(M),u.Fc=0,u.Ec==null){b=pn(u,1,"no memory during frame initialization.");break e}u.Vb=M}M=u.Ec,z=u.Fc,u.Ac=M,u.Bc=z,z+=k,u.Gd=a(ee,Nc),u.Hd=0,u.rb=a(ce+1,Sc),u.sb=1,u.wa=_e?a(_e,oo):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=W),e(!0),u.oc=M,u.pc=z,z+=832,u.ya=a(Se,Ll),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=W),u.R=16*W,u.B=8*W,W=(ee=td[u.L])*u.R,ee=ee/2*u.B,u.sa=M,u.ta=z+W,u.qa=u.sa,u.ra=u.ta+16*b*u.R+ee,u.Ha=u.qa,u.Ia=u.ra+8*b*u.B+ee,u.$c=0,z+=I,u.mb=F?M:null,u.nb=F?z:null,e(z+F<=u.Fc+u.Vb),Rl(u),i(u.Ac,u.Bc,0,k),b=1}}if(b){if(h.ka=0,h.y=u.sa,h.O=u.ta,h.f=u.qa,h.N=u.ra,h.ea=u.Ha,h.Vd=u.Ia,h.fa=u.R,h.Rc=u.B,h.F=null,h.J=0,!Vc){for(b=-255;255>=b;++b)Pn[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)Zi[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)tu[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)Ao[255+b]=0>b?0:255<b?255:b;Vc=1}No=pf,Qi=hf,Ql=Ec,cr=ff,Xr=Cc,mn=Pc,ko=zl,Hc=wa,Zl=Af,_a=Bl,Sa=jf,Ns=mo,Na=Ul,jo=zc,ka=Mc,ks=Ri,eu=Ki,Qr=kf,fi[0]=Li,fi[1]=mf,fi[2]=wf,fi[3]=xf,fi[4]=Rc,fi[5]=fo,fi[6]=Ic,fi[7]=Dl,fi[8]=_f,fi[9]=bf,js[0]=Tc,js[1]=vf,js[2]=Yi,js[3]=co,js[4]=Jn,js[5]=yf,js[6]=Lc,es[0]=ws,es[1]=gf,es[2]=Sf,es[3]=Fl,es[4]=ya,es[5]=Nf,es[6]=Ml,b=1}else b=0}b&&(b=function(ge,Te){for(ge.M=0;ge.M<ge.Va;++ge.M){var ke,he=ge.Jc[ge.M&ge.Xb],pe=ge.m,Ee=ge;for(ke=0;ke<Ee.za;++ke){var Re=pe,Ce=Ee,We=Ce.Ac,ze=Ce.Bc+4*ke,st=Ce.zc,$e=Ce.ya[Ce.aa+ke];if(Ce.Qa.Bb?$e.$b=Y(Re,Ce.Pa.jb[0])?2+Y(Re,Ce.Pa.jb[2]):Y(Re,Ce.Pa.jb[1]):$e.$b=0,Ce.kc&&($e.Ad=Y(Re,Ce.Bd)),$e.Za=!Y(Re,145)+0,$e.Za){var Dt=$e.Ob,Mt=0;for(Ce=0;4>Ce;++Ce){var It,At=st[0+Ce];for(It=0;4>It;++It){At=Yw[We[ze+It]][At];for(var Wt=_g[Y(Re,At[0])];0<Wt;)Wt=_g[2*Wt+Y(Re,At[Wt])];At=-Wt,We[ze+It]=At}r(Dt,Mt,We,ze,4),Mt+=4,st[0+Ce]=At}}else At=Y(Re,156)?Y(Re,128)?1:3:Y(Re,163)?2:0,$e.Ob[0]=At,i(We,ze,At,4),i(st,0,At,4);$e.Dd=Y(Re,142)?Y(Re,114)?Y(Re,183)?1:3:2:0}if(Ee.m.Ka)return pn(ge,7,"Premature end-of-partition0 encountered.");for(;ge.ja<ge.za;++ge.ja){if(Ee=he,Re=(pe=ge).rb[pe.sb-1],We=pe.rb[pe.sb+pe.ja],ke=pe.ya[pe.aa+pe.ja],ze=pe.kc?ke.Ad:0)Re.la=We.la=0,ke.Za||(Re.Na=We.Na=0),ke.Hc=0,ke.Gc=0,ke.ia=0;else{var qt,wt;if(Re=We,We=Ee,ze=pe.Pa.Xc,st=pe.ya[pe.aa+pe.ja],$e=pe.pb[st.$b],Ce=st.ad,Dt=0,Mt=pe.rb[pe.sb-1],At=It=0,i(Ce,Dt,0,384),st.Za)var Sn=0,_r=ze[3];else{Wt=s(16);var Nn=Re.Na+Mt.Na;if(Nn=nu(We,ze[1],Nn,$e.Eb,0,Wt,0),Re.Na=Mt.Na=(0<Nn)+0,1<Nn)No(Wt,0,Ce,Dt);else{var Sr=Wt[0]+3>>3;for(Wt=0;256>Wt;Wt+=16)Ce[Dt+Wt]=Sr}Sn=1,_r=ze[0]}var zt=15&Re.la,Dr=15&Mt.la;for(Wt=0;4>Wt;++Wt){var Fr=1&Dr;for(Sr=wt=0;4>Sr;++Sr)zt=zt>>1|(Fr=(Nn=nu(We,_r,Nn=Fr+(1&zt),$e.Sc,Sn,Ce,Dt))>Sn)<<7,wt=wt<<2|(3<Nn?3:1<Nn?2:Ce[Dt+0]!=0),Dt+=16;zt>>=4,Dr=Dr>>1|Fr<<7,It=(It<<8|wt)>>>0}for(_r=zt,Sn=Dr>>4,qt=0;4>qt;qt+=2){for(wt=0,zt=Re.la>>4+qt,Dr=Mt.la>>4+qt,Wt=0;2>Wt;++Wt){for(Fr=1&Dr,Sr=0;2>Sr;++Sr)Nn=Fr+(1&zt),zt=zt>>1|(Fr=0<(Nn=nu(We,ze[2],Nn,$e.Qc,0,Ce,Dt)))<<3,wt=wt<<2|(3<Nn?3:1<Nn?2:Ce[Dt+0]!=0),Dt+=16;zt>>=2,Dr=Dr>>1|Fr<<5}At|=wt<<4*qt,_r|=zt<<4<<qt,Sn|=(240&Dr)<<qt}Re.la=_r,Mt.la=Sn,st.Hc=It,st.Gc=At,st.ia=43690&At?0:$e.ia,ze=!(It|At)}if(0<pe.L&&(pe.wa[pe.Y+pe.ja]=pe.gd[ke.$b][ke.Za],pe.wa[pe.Y+pe.ja].La|=!ze),Ee.Ka)return pn(ge,7,"Premature end-of-file encountered.")}if(Rl(ge),pe=Te,Ee=1,ke=(he=ge).D,Re=0<he.L&&he.M>=he.zb&&he.M<=he.Va,he.Aa==0)e:{if(ke.M=he.M,ke.uc=Re,Gl(he,ke),Ee=1,ke=(wt=he.D).Nb,Re=(At=td[he.L])*he.R,We=At/2*he.B,Wt=16*ke*he.R,Sr=8*ke*he.B,ze=he.sa,st=he.ta-Re+Wt,$e=he.qa,Ce=he.ra-We+Sr,Dt=he.Ha,Mt=he.Ia-We+Sr,Dr=(zt=wt.M)==0,It=zt>=he.Va-1,he.Aa==2&&Gl(he,wt),wt.uc)for(Fr=(Nn=he).D.M,e(Nn.D.uc),wt=Nn.yb;wt<Nn.Hb;++wt){Sn=wt,_r=Fr;var In=(Un=(ln=Nn).D).Nb;qt=ln.R;var Un=Un.wa[Un.Y+Sn],dr=ln.sa,ni=ln.ta+16*In*qt+16*Sn,Oi=Un.dd,On=Un.tc;if(On!=0)if(e(3<=On),ln.L==1)0<Sn&&ks(dr,ni,qt,On+4),Un.La&&Qr(dr,ni,qt,On),0<_r&&ka(dr,ni,qt,On+4),Un.La&&eu(dr,ni,qt,On);else{var ts=ln.B,ja=ln.qa,Po=ln.ra+8*In*ts+8*Sn,Ps=ln.Ha,ln=ln.Ia+8*In*ts+8*Sn;In=Un.ld,0<Sn&&(Hc(dr,ni,qt,On+4,Oi,In),_a(ja,Po,Ps,ln,ts,On+4,Oi,In)),Un.La&&(Ns(dr,ni,qt,On,Oi,In),jo(ja,Po,Ps,ln,ts,On,Oi,In)),0<_r&&(ko(dr,ni,qt,On+4,Oi,In),Zl(ja,Po,Ps,ln,ts,On+4,Oi,In)),Un.La&&(Sa(dr,ni,qt,On,Oi,In),Na(ja,Po,Ps,ln,ts,On,Oi,In))}}if(he.ia&&alert("todo:DitherRow"),pe.put!=null){if(wt=16*zt,zt=16*(zt+1),Dr?(pe.y=he.sa,pe.O=he.ta+Wt,pe.f=he.qa,pe.N=he.ra+Sr,pe.ea=he.Ha,pe.W=he.Ia+Sr):(wt-=At,pe.y=ze,pe.O=st,pe.f=$e,pe.N=Ce,pe.ea=Dt,pe.W=Mt),It||(zt-=At),zt>pe.o&&(zt=pe.o),pe.F=null,pe.J=null,he.Fa!=null&&0<he.Fa.length&&wt<zt&&(pe.J=Hl(he,pe,wt,zt-wt),pe.F=he.mb,pe.F==null&&pe.F.length==0)){Ee=pn(he,3,"Could not decode alpha data.");break e}wt<pe.j&&(At=pe.j-wt,wt=pe.j,e(!(1&At)),pe.O+=he.R*At,pe.N+=he.B*(At>>1),pe.W+=he.B*(At>>1),pe.F!=null&&(pe.J+=pe.width*At)),wt<zt&&(pe.O+=pe.v,pe.N+=pe.v>>1,pe.W+=pe.v>>1,pe.F!=null&&(pe.J+=pe.v),pe.ka=wt-pe.j,pe.U=pe.va-pe.v,pe.T=zt-wt,Ee=pe.put(pe))}ke+1!=he.Ic||It||(r(he.sa,he.ta-Re,ze,st+16*he.R,Re),r(he.qa,he.ra-We,$e,Ce+8*he.B,We),r(he.Ha,he.Ia-We,Dt,Mt+8*he.B,We))}if(!Ee)return pn(ge,6,"Output aborted.")}return 1}(u,h)),h.bc!=null&&h.bc(h),b&=1}return b?(u.cb=0,b):0}function ci(u,h,b,k,I){I=u[h+b+32*k]+(I>>3),u[h+b+32*k]=-256&I?0>I?0:255:I}function uo(u,h,b,k,I,F){ci(u,h,0,b,k+I),ci(u,h,1,b,k+F),ci(u,h,2,b,k-F),ci(u,h,3,b,k-I)}function wr(u){return(20091*u>>16)+u}function Il(u,h,b,k){var I,F=0,M=s(16);for(I=0;4>I;++I){var z=u[h+0]+u[h+8],W=u[h+0]-u[h+8],ee=(35468*u[h+4]>>16)-wr(u[h+12]),ce=wr(u[h+4])+(35468*u[h+12]>>16);M[F+0]=z+ce,M[F+1]=W+ee,M[F+2]=W-ee,M[F+3]=z-ce,F+=4,h++}for(I=F=0;4>I;++I)z=(u=M[F+0]+4)+M[F+8],W=u-M[F+8],ee=(35468*M[F+4]>>16)-wr(M[F+12]),ci(b,k,0,0,z+(ce=wr(M[F+4])+(35468*M[F+12]>>16))),ci(b,k,1,0,W+ee),ci(b,k,2,0,W-ee),ci(b,k,3,0,z-ce),F++,k+=32}function Pc(u,h,b,k){var I=u[h+0]+4,F=35468*u[h+4]>>16,M=wr(u[h+4]),z=35468*u[h+1]>>16;uo(b,k,0,I+M,u=wr(u[h+1]),z),uo(b,k,1,I+F,u,z),uo(b,k,2,I-F,u,z),uo(b,k,3,I-M,u,z)}function hf(u,h,b,k,I){Il(u,h,b,k),I&&Il(u,h+16,b,k+4)}function Ec(u,h,b,k){Qi(u,h+0,b,k,1),Qi(u,h+32,b,k+128,1)}function ff(u,h,b,k){var I;for(u=u[h+0]+4,I=0;4>I;++I)for(h=0;4>h;++h)ci(b,k,h,I,u)}function Cc(u,h,b,k){u[h+0]&&cr(u,h+0,b,k),u[h+16]&&cr(u,h+16,b,k+4),u[h+32]&&cr(u,h+32,b,k+128),u[h+48]&&cr(u,h+48,b,k+128+4)}function pf(u,h,b,k){var I,F=s(16);for(I=0;4>I;++I){var M=u[h+0+I]+u[h+12+I],z=u[h+4+I]+u[h+8+I],W=u[h+4+I]-u[h+8+I],ee=u[h+0+I]-u[h+12+I];F[0+I]=M+z,F[8+I]=M-z,F[4+I]=ee+W,F[12+I]=ee-W}for(I=0;4>I;++I)M=(u=F[0+4*I]+3)+F[3+4*I],z=F[1+4*I]+F[2+4*I],W=F[1+4*I]-F[2+4*I],ee=u-F[3+4*I],b[k+0]=M+z>>3,b[k+16]=ee+W>>3,b[k+32]=M-z>>3,b[k+48]=ee-W>>3,k+=64}function Ol(u,h,b){var k,I=h-32,F=Or,M=255-u[I-1];for(k=0;k<b;++k){var z,W=F,ee=M+u[h-1];for(z=0;z<b;++z)u[h+z]=W[ee+u[I+z]];h+=32}}function mf(u,h){Ol(u,h,4)}function gf(u,h){Ol(u,h,8)}function vf(u,h){Ol(u,h,16)}function Yi(u,h){var b;for(b=0;16>b;++b)r(u,h+32*b,u,h-32,16)}function co(u,h){var b;for(b=16;0<b;--b)i(u,h,u[h-1],16),h+=32}function ho(u,h,b){var k;for(k=0;16>k;++k)i(h,b+32*k,u,16)}function Tc(u,h){var b,k=16;for(b=0;16>b;++b)k+=u[h-1+32*b]+u[h+b-32];ho(k>>5,u,h)}function Jn(u,h){var b,k=8;for(b=0;16>b;++b)k+=u[h-1+32*b];ho(k>>4,u,h)}function yf(u,h){var b,k=8;for(b=0;16>b;++b)k+=u[h+b-32];ho(k>>4,u,h)}function Lc(u,h){ho(128,u,h)}function ft(u,h,b){return u+2*h+b+2>>2}function wf(u,h){var b,k=h-32;for(k=new Uint8Array([ft(u[k-1],u[k+0],u[k+1]),ft(u[k+0],u[k+1],u[k+2]),ft(u[k+1],u[k+2],u[k+3]),ft(u[k+2],u[k+3],u[k+4])]),b=0;4>b;++b)r(u,h+32*b,k,0,k.length)}function xf(u,h){var b=u[h-1],k=u[h-1+32],I=u[h-1+64],F=u[h-1+96];be(u,h+0,16843009*ft(u[h-1-32],b,k)),be(u,h+32,16843009*ft(b,k,I)),be(u,h+64,16843009*ft(k,I,F)),be(u,h+96,16843009*ft(I,F,F))}function Li(u,h){var b,k=4;for(b=0;4>b;++b)k+=u[h+b-32]+u[h-1+32*b];for(k>>=3,b=0;4>b;++b)i(u,h+32*b,k,4)}function Rc(u,h){var b=u[h-1+0],k=u[h-1+32],I=u[h-1+64],F=u[h-1-32],M=u[h+0-32],z=u[h+1-32],W=u[h+2-32],ee=u[h+3-32];u[h+0+96]=ft(k,I,u[h-1+96]),u[h+1+96]=u[h+0+64]=ft(b,k,I),u[h+2+96]=u[h+1+64]=u[h+0+32]=ft(F,b,k),u[h+3+96]=u[h+2+64]=u[h+1+32]=u[h+0+0]=ft(M,F,b),u[h+3+64]=u[h+2+32]=u[h+1+0]=ft(z,M,F),u[h+3+32]=u[h+2+0]=ft(W,z,M),u[h+3+0]=ft(ee,W,z)}function Ic(u,h){var b=u[h+1-32],k=u[h+2-32],I=u[h+3-32],F=u[h+4-32],M=u[h+5-32],z=u[h+6-32],W=u[h+7-32];u[h+0+0]=ft(u[h+0-32],b,k),u[h+1+0]=u[h+0+32]=ft(b,k,I),u[h+2+0]=u[h+1+32]=u[h+0+64]=ft(k,I,F),u[h+3+0]=u[h+2+32]=u[h+1+64]=u[h+0+96]=ft(I,F,M),u[h+3+32]=u[h+2+64]=u[h+1+96]=ft(F,M,z),u[h+3+64]=u[h+2+96]=ft(M,z,W),u[h+3+96]=ft(z,W,W)}function fo(u,h){var b=u[h-1+0],k=u[h-1+32],I=u[h-1+64],F=u[h-1-32],M=u[h+0-32],z=u[h+1-32],W=u[h+2-32],ee=u[h+3-32];u[h+0+0]=u[h+1+64]=F+M+1>>1,u[h+1+0]=u[h+2+64]=M+z+1>>1,u[h+2+0]=u[h+3+64]=z+W+1>>1,u[h+3+0]=W+ee+1>>1,u[h+0+96]=ft(I,k,b),u[h+0+64]=ft(k,b,F),u[h+0+32]=u[h+1+96]=ft(b,F,M),u[h+1+32]=u[h+2+96]=ft(F,M,z),u[h+2+32]=u[h+3+96]=ft(M,z,W),u[h+3+32]=ft(z,W,ee)}function Dl(u,h){var b=u[h+0-32],k=u[h+1-32],I=u[h+2-32],F=u[h+3-32],M=u[h+4-32],z=u[h+5-32],W=u[h+6-32],ee=u[h+7-32];u[h+0+0]=b+k+1>>1,u[h+1+0]=u[h+0+64]=k+I+1>>1,u[h+2+0]=u[h+1+64]=I+F+1>>1,u[h+3+0]=u[h+2+64]=F+M+1>>1,u[h+0+32]=ft(b,k,I),u[h+1+32]=u[h+0+96]=ft(k,I,F),u[h+2+32]=u[h+1+96]=ft(I,F,M),u[h+3+32]=u[h+2+96]=ft(F,M,z),u[h+3+64]=ft(M,z,W),u[h+3+96]=ft(z,W,ee)}function bf(u,h){var b=u[h-1+0],k=u[h-1+32],I=u[h-1+64],F=u[h-1+96];u[h+0+0]=b+k+1>>1,u[h+2+0]=u[h+0+32]=k+I+1>>1,u[h+2+32]=u[h+0+64]=I+F+1>>1,u[h+1+0]=ft(b,k,I),u[h+3+0]=u[h+1+32]=ft(k,I,F),u[h+3+32]=u[h+1+64]=ft(I,F,F),u[h+3+64]=u[h+2+64]=u[h+0+96]=u[h+1+96]=u[h+2+96]=u[h+3+96]=F}function _f(u,h){var b=u[h-1+0],k=u[h-1+32],I=u[h-1+64],F=u[h-1+96],M=u[h-1-32],z=u[h+0-32],W=u[h+1-32],ee=u[h+2-32];u[h+0+0]=u[h+2+32]=b+M+1>>1,u[h+0+32]=u[h+2+64]=k+b+1>>1,u[h+0+64]=u[h+2+96]=I+k+1>>1,u[h+0+96]=F+I+1>>1,u[h+3+0]=ft(z,W,ee),u[h+2+0]=ft(M,z,W),u[h+1+0]=u[h+3+32]=ft(b,M,z),u[h+1+32]=u[h+3+64]=ft(k,b,M),u[h+1+64]=u[h+3+96]=ft(I,k,b),u[h+1+96]=ft(F,I,k)}function Sf(u,h){var b;for(b=0;8>b;++b)r(u,h+32*b,u,h-32,8)}function Fl(u,h){var b;for(b=0;8>b;++b)i(u,h,u[h-1],8),h+=32}function va(u,h,b){var k;for(k=0;8>k;++k)i(h,b+32*k,u,8)}function ws(u,h){var b,k=8;for(b=0;8>b;++b)k+=u[h+b-32]+u[h-1+32*b];va(k>>4,u,h)}function Nf(u,h){var b,k=4;for(b=0;8>b;++b)k+=u[h+b-32];va(k>>3,u,h)}function ya(u,h){var b,k=4;for(b=0;8>b;++b)k+=u[h-1+32*b];va(k>>3,u,h)}function Ml(u,h){va(128,u,h)}function po(u,h,b){var k=u[h-b],I=u[h+0],F=3*(I-k)+Cf[1020+u[h-2*b]-u[h+b]],M=Gc[112+(F+4>>3)];u[h-b]=Or[255+k+Gc[112+(F+3>>3)]],u[h+0]=Or[255+I-M]}function Oc(u,h,b,k){var I=u[h+0],F=u[h+b];return ei[255+u[h-2*b]-u[h-b]]>k||ei[255+F-I]>k}function Dc(u,h,b,k){return 4*ei[255+u[h-b]-u[h+0]]+ei[255+u[h-2*b]-u[h+b]]<=k}function Fc(u,h,b,k,I){var F=u[h-3*b],M=u[h-2*b],z=u[h-b],W=u[h+0],ee=u[h+b],ce=u[h+2*b],_e=u[h+3*b];return 4*ei[255+z-W]+ei[255+M-ee]>k?0:ei[255+u[h-4*b]-F]<=I&&ei[255+F-M]<=I&&ei[255+M-z]<=I&&ei[255+_e-ce]<=I&&ei[255+ce-ee]<=I&&ei[255+ee-W]<=I}function Mc(u,h,b,k){var I=2*k+1;for(k=0;16>k;++k)Dc(u,h+k,b,I)&&po(u,h+k,b)}function Ri(u,h,b,k){var I=2*k+1;for(k=0;16>k;++k)Dc(u,h+k*b,1,I)&&po(u,h+k*b,1)}function Ki(u,h,b,k){var I;for(I=3;0<I;--I)Mc(u,h+=4*b,b,k)}function kf(u,h,b,k){var I;for(I=3;0<I;--I)Ri(u,h+=4,b,k)}function xs(u,h,b,k,I,F,M,z){for(F=2*F+1;0<I--;){if(Fc(u,h,b,F,M))if(Oc(u,h,b,z))po(u,h,b);else{var W=u,ee=h,ce=b,_e=W[ee-2*ce],Se=W[ee-ce],ge=W[ee+0],Te=W[ee+ce],ke=W[ee+2*ce],he=27*(Ee=Cf[1020+3*(ge-Se)+Cf[1020+_e-Te]])+63>>7,pe=18*Ee+63>>7,Ee=9*Ee+63>>7;W[ee-3*ce]=Or[255+W[ee-3*ce]+Ee],W[ee-2*ce]=Or[255+_e+pe],W[ee-ce]=Or[255+Se+he],W[ee+0]=Or[255+ge-he],W[ee+ce]=Or[255+Te-pe],W[ee+2*ce]=Or[255+ke-Ee]}h+=k}}function di(u,h,b,k,I,F,M,z){for(F=2*F+1;0<I--;){if(Fc(u,h,b,F,M))if(Oc(u,h,b,z))po(u,h,b);else{var W=u,ee=h,ce=b,_e=W[ee-ce],Se=W[ee+0],ge=W[ee+ce],Te=Gc[112+((ke=3*(Se-_e))+4>>3)],ke=Gc[112+(ke+3>>3)],he=Te+1>>1;W[ee-2*ce]=Or[255+W[ee-2*ce]+he],W[ee-ce]=Or[255+_e+ke],W[ee+0]=Or[255+Se-Te],W[ee+ce]=Or[255+ge-he]}h+=k}}function zl(u,h,b,k,I,F){xs(u,h,b,1,16,k,I,F)}function wa(u,h,b,k,I,F){xs(u,h,1,b,16,k,I,F)}function jf(u,h,b,k,I,F){var M;for(M=3;0<M;--M)di(u,h+=4*b,b,1,16,k,I,F)}function mo(u,h,b,k,I,F){var M;for(M=3;0<M;--M)di(u,h+=4,1,b,16,k,I,F)}function Af(u,h,b,k,I,F,M,z){xs(u,h,I,1,8,F,M,z),xs(b,k,I,1,8,F,M,z)}function Bl(u,h,b,k,I,F,M,z){xs(u,h,1,I,8,F,M,z),xs(b,k,1,I,8,F,M,z)}function Ul(u,h,b,k,I,F,M,z){di(u,h+4*I,I,1,8,F,M,z),di(b,k+4*I,I,1,8,F,M,z)}function zc(u,h,b,k,I,F,M,z){di(u,h+4,1,I,8,F,M,z),di(b,k+4,1,I,8,F,M,z)}function go(){this.ba=new Ve,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new St,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $l(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ql(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bc(){this.ua=0,this.Wa=new se,this.vb=new se,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new A}function Pf(){this.xb=this.a=0,this.l=new lo,this.ca=new Ve,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bc,this.ab=0,this.gc=a(4,ql),this.Oc=0}function vo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new lo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xa(u,h,b,k,I,F,M){for(u=u==null?0:u[h+0],h=0;h<M;++h)I[F+h]=u+b[k+h]&255,u=I[F+h]}function Wl(u,h,b,k,I,F,M){var z;if(u==null)xa(null,null,b,k,I,F,M);else for(z=0;z<M;++z)I[F+z]=u[h+z]+b[k+z]&255}function bs(u,h,b,k,I,F,M){if(u==null)xa(null,null,b,k,I,F,M);else{var z,W=u[h+0],ee=W,ce=W;for(z=0;z<M;++z)ee=ce+(W=u[h+z])-ee,ce=b[k+z]+(-256&ee?0>ee?0:255:ee)&255,ee=W,I[F+z]=ce}}function Hl(u,h,b,k){var I=h.width,F=h.o;if(e(u!=null&&h!=null),0>b||0>=k||b+k>F)return null;if(!u.Cc){if(u.ga==null){var M;if(u.ga=new vo,(M=u.ga==null)||(M=h.width*h.o,e(u.Gb.length==0),u.Gb=s(M),u.Uc=0,u.Gb==null?M=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,M=1),M=!M),!M){M=u.ga;var z=u.Fa,W=u.P,ee=u.qc,ce=u.mb,_e=u.nb,Se=W+1,ge=ee-1,Te=M.l;if(e(z!=null&&ce!=null&&h!=null),As[0]=null,As[1]=xa,As[2]=Wl,As[3]=bs,M.ca=ce,M.tb=_e,M.c=h.width,M.i=h.height,e(0<M.c&&0<M.i),1>=ee)h=0;else if(M.$a=z[W+0]>>0&3,M.Z=z[W+0]>>2&3,M.Lc=z[W+0]>>4&3,W=z[W+0]>>6&3,0>M.$a||1<M.$a||4<=M.Z||1<M.Lc||W)h=0;else if(Te.put=Je,Te.ac=fn,Te.bc=Cr,Te.ma=M,Te.width=h.width,Te.height=h.height,Te.Da=h.Da,Te.v=h.v,Te.va=h.va,Te.j=h.j,Te.o=h.o,M.$a)e:{e(M.$a==1),h=yr();t:for(;;){if(h==null){h=0;break e}if(e(M!=null),M.mc=h,h.c=M.c,h.i=M.i,h.l=M.l,h.l.ma=M,h.l.width=M.c,h.l.height=M.i,h.a=0,V(h.m,z,Se,ge),!Rr(M.c,M.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&vr(h.s)?(M.ic=1,z=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(z),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(M.ic=0,h=ga(h,M.c)),!h))break t;h=1;break e}M.mc=null,h=0}else h=ge>=M.c*M.i;M=!h}if(M)return null;u.ga.Lc!=1?u.Ga=0:k=F-b}e(u.ga!=null),e(b+k<=F);e:{if(h=(z=u.ga).c,F=z.l.o,z.$a==0){if(Se=u.rc,ge=u.Vc,Te=u.Fa,W=u.P+1+b*h,ee=u.mb,ce=u.nb+b*h,e(W<=u.P+u.qc),z.Z!=0)for(e(As[z.Z]!=null),M=0;M<k;++M)As[z.Z](Se,ge,Te,W,ee,ce,h),Se=ee,ge=ce,ce+=h,W+=h;else for(M=0;M<k;++M)r(ee,ce,Te,W,h),Se=ee,ge=ce,ce+=h,W+=h;u.rc=Se,u.Vc=ge}else{if(e(z.mc!=null),h=b+k,e((M=z.mc)!=null),e(h<=M.i),M.C>=h)h=1;else if(z.ic||xe(),z.ic){z=M.V,Se=M.Ba,ge=M.c;var ke=M.i,he=(Te=1,W=M.$/ge,ee=M.$%ge,ce=M.m,_e=M.s,M.$),pe=ge*ke,Ee=ge*h,Re=_e.wc,Ce=he<Ee?kt(_e,ee,W):null;e(he<=pe),e(h<=ke),e(vr(_e));t:for(;;){for(;!ce.h&&he<Ee;){if(ee&Re||(Ce=kt(_e,ee,W)),e(Ce!=null),P(ce),256>(ke=Ft(Ce.G[0],Ce.H[0],ce)))z[Se+he]=ke,++he,++ee>=ge&&(ee=0,++W<=h&&!(W%16)&&or(M,W));else{if(!(280>ke)){Te=0;break t}ke=Tr(ke-256,ce);var We,ze=Ft(Ce.G[4],Ce.H[4],ce);if(P(ce),!(he>=(ze=Vt(ge,ze=Tr(ze,ce)))&&pe-he>=ke)){Te=0;break t}for(We=0;We<ke;++We)z[Se+he+We]=z[Se+he+We-ze];for(he+=ke,ee+=ke;ee>=ge;)ee-=ge,++W<=h&&!(W%16)&&or(M,W);he<Ee&&ee&Re&&(Ce=kt(_e,ee,W))}e(ce.h==X(ce))}or(M,W>h?h:W);break t}!Te||ce.h&&he<pe?(Te=0,M.a=ce.h?5:3):M.$=he,h=Te}else h=Kn(M,M.V,M.Ba,M.c,M.i,h,ro);if(!h){k=0;break e}}b+k>=F&&(u.Cc=1),k=1}if(!k)return null;if(u.Cc&&((k=u.ga)!=null&&(k.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*I}function y(u,h,b,k,I,F){for(;0<I--;){var M,z=u,W=h+(b?1:0),ee=u,ce=h+(b?0:3);for(M=0;M<k;++M){var _e=ee[ce+4*M];_e!=255&&(_e*=32897,z[W+4*M+0]=z[W+4*M+0]*_e>>23,z[W+4*M+1]=z[W+4*M+1]*_e>>23,z[W+4*M+2]=z[W+4*M+2]*_e>>23)}h+=F}}function O(u,h,b,k,I){for(;0<k--;){var F;for(F=0;F<b;++F){var M=u[h+2*F+0],z=15&(ee=u[h+2*F+1]),W=4369*z,ee=(240&ee|ee>>4)*W>>16;u[h+2*F+0]=(240&M|M>>4)*W>>16&240|(15&M|M<<4)*W>>16>>4&15,u[h+2*F+1]=240&ee|z}h+=I}}function re(u,h,b,k,I,F,M,z){var W,ee,ce=255;for(ee=0;ee<I;++ee){for(W=0;W<k;++W){var _e=u[h+W];F[M+4*W]=_e,ce&=_e}h+=b,M+=z}return ce!=255}function ue(u,h,b,k,I){var F;for(F=0;F<I;++F)b[k+F]=u[h+F]>>8}function xe(){Zr=y,Gt=O,Yt=re,gn=ue}function Ae(u,h,b){C[u]=function(k,I,F,M,z,W,ee,ce,_e,Se,ge,Te,ke,he,pe,Ee,Re){var Ce,We=Re-1>>1,ze=z[W+0]|ee[ce+0]<<16,st=_e[Se+0]|ge[Te+0]<<16;e(k!=null);var $e=3*ze+st+131074>>2;for(h(k[I+0],255&$e,$e>>16,ke,he),F!=null&&($e=3*st+ze+131074>>2,h(F[M+0],255&$e,$e>>16,pe,Ee)),Ce=1;Ce<=We;++Ce){var Dt=z[W+Ce]|ee[ce+Ce]<<16,Mt=_e[Se+Ce]|ge[Te+Ce]<<16,It=ze+Dt+st+Mt+524296,At=It+2*(Dt+st)>>3;$e=At+ze>>1,ze=(It=It+2*(ze+Mt)>>3)+Dt>>1,h(k[I+2*Ce-1],255&$e,$e>>16,ke,he+(2*Ce-1)*b),h(k[I+2*Ce-0],255&ze,ze>>16,ke,he+(2*Ce-0)*b),F!=null&&($e=It+st>>1,ze=At+Mt>>1,h(F[M+2*Ce-1],255&$e,$e>>16,pe,Ee+(2*Ce-1)*b),h(F[M+2*Ce+0],255&ze,ze>>16,pe,Ee+(2*Ce+0)*b)),ze=Dt,st=Mt}1&Re||($e=3*ze+st+131074>>2,h(k[I+Re-1],255&$e,$e>>16,ke,he+(Re-1)*b),F!=null&&($e=3*st+ze+131074>>2,h(F[M+Re-1],255&$e,$e>>16,pe,Ee+(Re-1)*b)))}}function Ie(){ti[Yc]=Qw,ti[Kc]=Ng,ti[wg]=Zw,ti[Jc]=kg,ti[Xc]=jg,ti[Tf]=Ag,ti[xg]=ex,ti[Lf]=Ng,ti[Rf]=kg,ti[Qc]=jg,ti[If]=Ag}function qe(u){return u&~tx?0>u?0:255:u>>Pg}function et(u,h){return qe((19077*u>>8)+(26149*h>>8)-14234)}function vt(u,h,b){return qe((19077*u>>8)-(6419*h>>8)-(13320*b>>8)+8708)}function pt(u,h){return qe((19077*u>>8)+(33050*h>>8)-17685)}function Ct(u,h,b,k,I){k[I+0]=et(u,b),k[I+1]=vt(u,h,b),k[I+2]=pt(u,h)}function tn(u,h,b,k,I){k[I+0]=pt(u,h),k[I+1]=vt(u,h,b),k[I+2]=et(u,b)}function on(u,h,b,k,I){var F=vt(u,h,b);h=F<<3&224|pt(u,h)>>3,k[I+0]=248&et(u,b)|F>>5,k[I+1]=h}function _n(u,h,b,k,I){var F=240&pt(u,h)|15;k[I+0]=240&et(u,b)|vt(u,h,b)>>4,k[I+1]=F}function Xn(u,h,b,k,I){k[I+0]=255,Ct(u,h,b,k,I+1)}function Rn(u,h,b,k,I){tn(u,h,b,k,I),k[I+3]=255}function hi(u,h,b,k,I){Ct(u,h,b,k,I),k[I+3]=255}function Ir(u,h){return 0>u?0:u>h?h:u}function Ii(u,h,b){C[u]=function(k,I,F,M,z,W,ee,ce,_e){for(var Se=ce+(-2&_e)*b;ce!=Se;)h(k[I+0],F[M+0],z[W+0],ee,ce),h(k[I+1],F[M+0],z[W+0],ee,ce+b),I+=2,++M,++W,ce+=2*b;1&_e&&h(k[I+0],F[M+0],z[W+0],ee,ce)}}function Uc(u,h,b){return b==0?u==0?h==0?6:5:h==0?4:0:b}function Vl(u,h,b,k,I){switch(u>>>30){case 3:Qi(h,b,k,I,0);break;case 2:mn(h,b,k,I);break;case 1:cr(h,b,k,I)}}function Gl(u,h){var b,k,I=h.M,F=h.Nb,M=u.oc,z=u.pc+40,W=u.oc,ee=u.pc+584,ce=u.oc,_e=u.pc+600;for(b=0;16>b;++b)M[z+32*b-1]=129;for(b=0;8>b;++b)W[ee+32*b-1]=129,ce[_e+32*b-1]=129;for(0<I?M[z-1-32]=W[ee-1-32]=ce[_e-1-32]=129:(i(M,z-32-1,127,21),i(W,ee-32-1,127,9),i(ce,_e-32-1,127,9)),k=0;k<u.za;++k){var Se=h.ya[h.aa+k];if(0<k){for(b=-1;16>b;++b)r(M,z+32*b-4,M,z+32*b+12,4);for(b=-1;8>b;++b)r(W,ee+32*b-4,W,ee+32*b+4,4),r(ce,_e+32*b-4,ce,_e+32*b+4,4)}var ge=u.Gd,Te=u.Hd+k,ke=Se.ad,he=Se.Hc;if(0<I&&(r(M,z-32,ge[Te].y,0,16),r(W,ee-32,ge[Te].f,0,8),r(ce,_e-32,ge[Te].ea,0,8)),Se.Za){var pe=M,Ee=z-32+16;for(0<I&&(k>=u.za-1?i(pe,Ee,ge[Te].y[15],4):r(pe,Ee,ge[Te+1].y,0,4)),b=0;4>b;b++)pe[Ee+128+b]=pe[Ee+256+b]=pe[Ee+384+b]=pe[Ee+0+b];for(b=0;16>b;++b,he<<=2)pe=M,Ee=z+Cg[b],fi[Se.Ob[b]](pe,Ee),Vl(he,ke,16*+b,pe,Ee)}else if(pe=Uc(k,I,Se.Ob[0]),js[pe](M,z),he!=0)for(b=0;16>b;++b,he<<=2)Vl(he,ke,16*+b,M,z+Cg[b]);for(b=Se.Gc,pe=Uc(k,I,Se.Dd),es[pe](W,ee),es[pe](ce,_e),he=ke,pe=W,Ee=ee,255&(Se=b>>0)&&(170&Se?Ql(he,256,pe,Ee):Xr(he,256,pe,Ee)),Se=ce,he=_e,255&(b>>=8)&&(170&b?Ql(ke,320,Se,he):Xr(ke,320,Se,he)),I<u.Ub-1&&(r(ge[Te].y,0,M,z+480,16),r(ge[Te].f,0,W,ee+224,8),r(ge[Te].ea,0,ce,_e+224,8)),b=8*F*u.B,ge=u.sa,Te=u.ta+16*k+16*F*u.R,ke=u.qa,Se=u.ra+8*k+b,he=u.Ha,pe=u.Ia+8*k+b,b=0;16>b;++b)r(ge,Te+b*u.R,M,z+32*b,16);for(b=0;8>b;++b)r(ke,Se+b*u.B,W,ee+32*b,8),r(he,pe+b*u.B,ce,_e+32*b,8)}}function yo(u,h,b,k,I,F,M,z,W){var ee=[0],ce=[0],_e=0,Se=W!=null?W.kd:0,ge=W??new $l;if(u==null||12>b)return 7;ge.data=u,ge.w=h,ge.ha=b,h=[h],b=[b],ge.gb=[ge.gb];e:{var Te=h,ke=b,he=ge.gb;if(e(u!=null),e(ke!=null),e(he!=null),he[0]=0,12<=ke[0]&&!n(u,Te[0],"RIFF")){if(n(u,Te[0]+8,"WEBP")){he=3;break e}var pe=je(u,Te[0]+4);if(12>pe||4294967286<pe){he=3;break e}if(Se&&pe>ke[0]-8){he=7;break e}he[0]=pe,Te[0]+=12,ke[0]-=12}he=0}if(he!=0)return he;for(pe=0<ge.gb[0],b=b[0];;){e:{var Ee=u;ke=h,he=b;var Re=ee,Ce=ce,We=Te=[0];if(($e=_e=[_e])[0]=0,8>he[0])he=7;else{if(!n(Ee,ke[0],"VP8X")){if(je(Ee,ke[0]+4)!=10){he=3;break e}if(18>he[0]){he=7;break e}var ze=je(Ee,ke[0]+8),st=1+Pe(Ee,ke[0]+12);if(2147483648<=st*(Ee=1+Pe(Ee,ke[0]+15))){he=3;break e}We!=null&&(We[0]=ze),Re!=null&&(Re[0]=st),Ce!=null&&(Ce[0]=Ee),ke[0]+=18,he[0]-=18,$e[0]=1}he=0}}if(_e=_e[0],Te=Te[0],he!=0)return he;if(ke=!!(2&Te),!pe&&_e)return 3;if(F!=null&&(F[0]=!!(16&Te)),M!=null&&(M[0]=ke),z!=null&&(z[0]=0),M=ee[0],Te=ce[0],_e&&ke&&W==null){he=0;break}if(4>b){he=7;break}if(pe&&_e||!pe&&!_e&&!n(u,h[0],"ALPH")){b=[b],ge.na=[ge.na],ge.P=[ge.P],ge.Sa=[ge.Sa];e:{ze=u,he=h,pe=b;var $e=ge.gb;Re=ge.na,Ce=ge.P,We=ge.Sa,st=22,e(ze!=null),e(pe!=null),Ee=he[0];var Dt=pe[0];for(e(Re!=null),e(We!=null),Re[0]=null,Ce[0]=null,We[0]=0;;){if(he[0]=Ee,pe[0]=Dt,8>Dt){he=7;break e}var Mt=je(ze,Ee+4);if(4294967286<Mt){he=3;break e}var It=8+Mt+1&-2;if(st+=It,0<$e&&st>$e){he=3;break e}if(!n(ze,Ee,"VP8 ")||!n(ze,Ee,"VP8L")){he=0;break e}if(Dt[0]<It){he=7;break e}n(ze,Ee,"ALPH")||(Re[0]=ze,Ce[0]=Ee+8,We[0]=Mt),Ee+=It,Dt-=It}}if(b=b[0],ge.na=ge.na[0],ge.P=ge.P[0],ge.Sa=ge.Sa[0],he!=0)break}b=[b],ge.Ja=[ge.Ja],ge.xa=[ge.xa];e:if($e=u,he=h,pe=b,Re=ge.gb[0],Ce=ge.Ja,We=ge.xa,ze=he[0],Ee=!n($e,ze,"VP8 "),st=!n($e,ze,"VP8L"),e($e!=null),e(pe!=null),e(Ce!=null),e(We!=null),8>pe[0])he=7;else{if(Ee||st){if($e=je($e,ze+4),12<=Re&&$e>Re-12){he=3;break e}if(Se&&$e>pe[0]-8){he=7;break e}Ce[0]=$e,he[0]+=8,pe[0]-=8,We[0]=st}else We[0]=5<=pe[0]&&$e[ze+0]==47&&!($e[ze+4]>>5),Ce[0]=pe[0];he=0}if(b=b[0],ge.Ja=ge.Ja[0],ge.xa=ge.xa[0],h=h[0],he!=0)break;if(4294967286<ge.Ja)return 3;if(z==null||ke||(z[0]=ge.xa?2:1),M=[M],Te=[Te],ge.xa){if(5>b){he=7;break}z=M,Se=Te,ke=F,u==null||5>b?u=0:5<=b&&u[h+0]==47&&!(u[h+4]>>5)?(pe=[0],$e=[0],Re=[0],V(Ce=new E,u,h,b),it(Ce,pe,$e,Re)?(z!=null&&(z[0]=pe[0]),Se!=null&&(Se[0]=$e[0]),ke!=null&&(ke[0]=Re[0]),u=1):u=0):u=0}else{if(10>b){he=7;break}z=Te,u==null||10>b||!kc(u,h+3,b-3)?u=0:(Se=u[h+0]|u[h+1]<<8|u[h+2]<<16,ke=16383&(u[h+7]<<8|u[h+6]),u=16383&(u[h+9]<<8|u[h+8]),1&Se||3<(Se>>1&7)||!(Se>>4&1)||Se>>5>=ge.Ja||!ke||!u?u=0:(M&&(M[0]=ke),z&&(z[0]=u),u=1))}if(!u||(M=M[0],Te=Te[0],_e&&(ee[0]!=M||ce[0]!=Te)))return 3;W!=null&&(W[0]=ge,W.offset=h-W.w,e(4294967286>h-W.w),e(W.offset==W.ha-b));break}return he==0||he==7&&_e&&W==null?(F!=null&&(F[0]|=ge.na!=null&&0<ge.na.length),k!=null&&(k[0]=M),I!=null&&(I[0]=Te),0):he}function Yl(u,h,b){var k=h.width,I=h.height,F=0,M=0,z=k,W=I;if(h.Da=u!=null&&0<u.Da,h.Da&&(z=u.cd,W=u.bd,F=u.v,M=u.j,11>b||(F&=-2,M&=-2),0>F||0>M||0>=z||0>=W||F+z>k||M+W>I))return 0;if(h.v=F,h.j=M,h.va=F+z,h.o=M+W,h.U=z,h.T=W,h.da=u!=null&&0<u.da,h.da){if(!Qe(z,W,b=[u.ib],F=[u.hb]))return 0;h.ib=b[0],h.hb=F[0]}return h.ob=u!=null&&u.ob,h.Kb=u==null||!u.Sd,h.da&&(h.ob=h.ib<3*k/4&&h.hb<3*I/4,h.Kb=0),1}function Kl(u){if(u==null)return 2;if(11>u.S){var h=u.f.RGBA;h.fb+=(u.height-1)*h.A,h.A=-h.A}else h=u.f.kb,u=u.height,h.O+=(u-1)*h.fa,h.fa=-h.fa,h.N+=(u-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(u-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(u-1)*h.lb,h.lb=-h.lb);return 0}function wo(u,h,b,k){if(k==null||0>=u||0>=h)return 2;if(b!=null){if(b.Da){var I=b.cd,F=b.bd,M=-2&b.v,z=-2&b.j;if(0>M||0>z||0>=I||0>=F||M+I>u||z+F>h)return 2;u=I,h=F}if(b.da){if(!Qe(u,h,I=[b.ib],F=[b.hb]))return 2;u=I[0],h=F[0]}}k.width=u,k.height=h;e:{var W=k.width,ee=k.height;if(u=k.S,0>=W||0>=ee||!(u>=Yc&&13>u))u=2;else{if(0>=k.Rd&&k.sd==null){M=F=I=h=0;var ce=(z=W*Tg[u])*ee;if(11>u||(F=(ee+1)/2*(h=(W+1)/2),u==12&&(M=(I=W)*ee)),(ee=s(ce+2*F+M))==null){u=1;break e}k.sd=ee,11>u?((W=k.f.RGBA).eb=ee,W.fb=0,W.A=z,W.size=ce):((W=k.f.kb).y=ee,W.O=0,W.fa=z,W.Fd=ce,W.f=ee,W.N=0+ce,W.Ab=h,W.Cd=F,W.ea=ee,W.W=0+ce+F,W.Db=h,W.Ed=F,u==12&&(W.F=ee,W.J=0+ce+2*F),W.Tc=M,W.lb=I)}if(h=1,I=k.S,F=k.width,M=k.height,I>=Yc&&13>I)if(11>I)u=k.f.RGBA,h&=(z=Math.abs(u.A))*(M-1)+F<=u.size,h&=z>=F*Tg[I],h&=u.eb!=null;else{u=k.f.kb,z=(F+1)/2,ce=(M+1)/2,W=Math.abs(u.fa),ee=Math.abs(u.Ab);var _e=Math.abs(u.Db),Se=Math.abs(u.lb),ge=Se*(M-1)+F;h&=W*(M-1)+F<=u.Fd,h&=ee*(ce-1)+z<=u.Cd,h=(h&=_e*(ce-1)+z<=u.Ed)&W>=F&ee>=z&_e>=z,h&=u.y!=null,h&=u.f!=null,h&=u.ea!=null,I==12&&(h&=Se>=F,h&=ge<=u.Tc,h&=u.F!=null)}else h=0;u=h?0:2}}return u!=0||b!=null&&b.fd&&(u=Kl(k)),u}var Bn=64,xo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],bo=24,_o=32,Jl=8,xr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Oe("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(u){return u},C.Predictor2=function(u,h,b){return h[b+0]},C.Predictor3=function(u,h,b){return h[b+1]},C.Predictor4=function(u,h,b){return h[b-1]},C.Predictor5=function(u,h,b){return oe(oe(u,h[b+1]),h[b+0])},C.Predictor6=function(u,h,b){return oe(u,h[b-1])},C.Predictor7=function(u,h,b){return oe(u,h[b+0])},C.Predictor8=function(u,h,b){return oe(h[b-1],h[b+0])},C.Predictor9=function(u,h,b){return oe(h[b+0],h[b+1])},C.Predictor10=function(u,h,b){return oe(oe(u,h[b-1]),oe(h[b+0],h[b+1]))},C.Predictor11=function(u,h,b){var k=h[b+0];return 0>=Me(k>>24&255,u>>24&255,(h=h[b-1])>>24&255)+Me(k>>16&255,u>>16&255,h>>16&255)+Me(k>>8&255,u>>8&255,h>>8&255)+Me(255&k,255&u,255&h)?k:u},C.Predictor12=function(u,h,b){var k=h[b+0];return(ye((u>>24&255)+(k>>24&255)-((h=h[b-1])>>24&255))<<24|ye((u>>16&255)+(k>>16&255)-(h>>16&255))<<16|ye((u>>8&255)+(k>>8&255)-(h>>8&255))<<8|ye((255&u)+(255&k)-(255&h)))>>>0},C.Predictor13=function(u,h,b){var k=h[b-1];return(De((u=oe(u,h[b+0]))>>24&255,k>>24&255)<<24|De(u>>16&255,k>>16&255)<<16|De(u>>8&255,k>>8&255)<<8|De(u>>0&255,k>>0&255))>>>0};var Ef=C.PredictorAdd0;C.PredictorAdd1=me,Oe("Predictor2","PredictorAdd2"),Oe("Predictor3","PredictorAdd3"),Oe("Predictor4","PredictorAdd4"),Oe("Predictor5","PredictorAdd5"),Oe("Predictor6","PredictorAdd6"),Oe("Predictor7","PredictorAdd7"),Oe("Predictor8","PredictorAdd8"),Oe("Predictor9","PredictorAdd9"),Oe("Predictor10","PredictorAdd10"),Oe("Predictor11","PredictorAdd11"),Oe("Predictor12","PredictorAdd12"),Oe("Predictor13","PredictorAdd13");var Xl=C.PredictorAdd2;yt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),yt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var $c,Jr=C.ColorIndexInverseTransform,So=C.MapARGB,qc=C.VP8LColorIndexInverseTransformAlpha,Wc=C.MapAlpha,_s=C.VP8LPredictorsAdd=[];_s.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var ba,br,ur,Ss,Ji,Xi,No,Qi,mn,Ql,cr,Xr,ko,Hc,Zl,_a,Sa,Ns,Na,jo,ka,ks,eu,Qr,Zr,Gt,Yt,gn,Pn=s(511),Zi=s(2041),tu=s(225),Ao=s(767),Vc=0,Cf=Zi,Gc=tu,Or=Ao,ei=Pn,Yc=0,Kc=1,wg=2,Jc=3,Xc=4,Tf=5,xg=6,Lf=7,Rf=8,Qc=9,If=10,Mw=[2,3,7],zw=[3,3,11],bg=[280,256,256,256,40],Bw=[0,1,1,1,0],Uw=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$w=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qw=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ww=8,Of=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Df=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nu=null,Hw=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Vw=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],_g=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Gw=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Yw=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Kw=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Jw=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],js=[],fi=[],es=[],Xw=1,Sg=2,As=[],ti=[];Ae("UpsampleRgbLinePair",Ct,3),Ae("UpsampleBgrLinePair",tn,3),Ae("UpsampleRgbaLinePair",hi,4),Ae("UpsampleBgraLinePair",Rn,4),Ae("UpsampleArgbLinePair",Xn,4),Ae("UpsampleRgba4444LinePair",_n,2),Ae("UpsampleRgb565LinePair",on,2);var Qw=C.UpsampleRgbLinePair,Zw=C.UpsampleBgrLinePair,Ng=C.UpsampleRgbaLinePair,kg=C.UpsampleBgraLinePair,jg=C.UpsampleArgbLinePair,Ag=C.UpsampleRgba4444LinePair,ex=C.UpsampleRgb565LinePair,Zc=16,ed=1<<Zc-1,ru=-227,Ff=482,Pg=6,tx=(256<<Pg)-1,Eg=0,nx=s(256),rx=s(256),ix=s(256),sx=s(256),ax=s(Ff-ru),ox=s(Ff-ru);Ii("YuvToRgbRow",Ct,3),Ii("YuvToBgrRow",tn,3),Ii("YuvToRgbaRow",hi,4),Ii("YuvToBgraRow",Rn,4),Ii("YuvToArgbRow",Xn,4),Ii("YuvToRgba4444Row",_n,2),Ii("YuvToRgb565Row",on,2);var Cg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],td=[0,2,8],lx=[8,7,6,4,4,2,2,2,1,1,1,1],ux=1;this.WebPDecodeRGBA=function(u,h,b,k,I){var F=Kc,M=new go,z=new Ve;M.ba=z,z.S=F,z.width=[z.width],z.height=[z.height];var W=z.width,ee=z.height,ce=new ut;if(ce==null||u==null)var _e=2;else e(ce!=null),_e=yo(u,h,b,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(_e!=0?W=0:(W!=null&&(W[0]=ce.width[0]),ee!=null&&(ee[0]=ce.height[0]),W=1),W){z.width=z.width[0],z.height=z.height[0],k!=null&&(k[0]=z.width),I!=null&&(I[0]=z.height);e:{if(k=new lo,(I=new $l).data=u,I.w=h,I.ha=b,I.kd=1,h=[0],e(I!=null),((u=yo(I.data,I.w,I.ha,null,null,null,h,null,I))==0||u==7)&&h[0]&&(u=4),(h=u)==0){if(e(M!=null),k.data=I.data,k.w=I.w+I.offset,k.ha=I.ha-I.offset,k.put=Je,k.ac=fn,k.bc=Cr,k.ma=M,I.xa){if((u=yr())==null){M=1;break e}if(function(Se,ge){var Te=[0],ke=[0],he=[0];t:for(;;){if(Se==null)return 0;if(ge==null)return Se.a=2,0;if(Se.l=ge,Se.a=0,V(Se.m,ge.data,ge.w,ge.ha),!it(Se.m,Te,ke,he)){Se.a=3;break t}if(Se.xb=Sg,ge.width=Te[0],ge.height=ke[0],!Rr(Te[0],ke[0],1,Se,null))break t;return 1}return e(Se.a!=0),0}(u,k)){if(k=(h=wo(k.width,k.height,M.Oa,M.ba))==0){t:{k=u;n:for(;;){if(k==null){k=0;break t}if(e(k.s.yc!=null),e(k.s.Ya!=null),e(0<k.s.Wb),e((b=k.l)!=null),e((I=b.ma)!=null),k.xb!=0){if(k.ca=I.ba,k.tb=I.tb,e(k.ca!=null),!Yl(I.Oa,b,Jc)){k.a=2;break n}if(!ga(k,b.width)||b.da)break n;if((b.da||Ge(k.ca.S))&&xe(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&xe()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!He(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!Kn(k,k.V,k.Ba,k.c,k.i,b.o,Lr))break n;I.Dc=k.Ma,k=1;break t}e(k.a!=0),k=0}k=!k}k&&(h=u.a)}else h=u.a}else{if((u=new cf)==null){M=1;break e}if(u.Fa=I.na,u.P=I.P,u.qc=I.Sa,jc(u,k)){if((h=wo(k.width,k.height,M.Oa,M.ba))==0){if(u.Aa=0,b=M.Oa,e((I=u)!=null),b!=null){if(0<(W=0>(W=b.Md)?0:100<W?255:255*W/100)){for(ee=ce=0;4>ee;++ee)12>(_e=I.pb[ee]).lc&&(_e.ia=W*lx[0>_e.lc?0:_e.lc]>>3),ce|=_e.ia;ce&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=b.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}df(u,k)||(h=u.a)}}else h=u.a}h==0&&M.Oa!=null&&M.Oa.fd&&(h=Kl(M.ba))}M=h}F=M!=0?null:11>F?z.f.RGBA.eb:z.f.kb.y}else F=null;return F};var Tg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(C,G){for(var Z="",R=0;R<4;R++)Z+=String.fromCharCode(C[G++]);return Z}function g(C,G){return(C[G+0]<<0|C[G+1]<<8|C[G+2]<<16)>>>0}function m(C,G){return(C[G+0]<<0|C[G+1]<<8|C[G+2]<<16|C[G+3]<<24)>>>0}new l;var v=[0],p=[0],_=[],S=new l,N=t,f=function(C,G){var Z={},R=0,A=!1,q=0,K=0;if(Z.frames=[],!function(U,X,ne,P){for(var H=0;H<P;H++)if(U[X+H]!=ne.charCodeAt(H))return!0;return!1}(C,G,"RIFF",4)){var te,$;for(m(C,G+=4),G+=8;G<C.length;){var Q=d(C,G),V=m(C,G+=4);G+=4;var B=V+(1&V);switch(Q){case"VP8 ":case"VP8L":Z.frames[R]===void 0&&(Z.frames[R]={}),(E=Z.frames[R]).src_off=A?K:G-8,E.src_size=q+V+8,R++,A&&(A=!1,q=0,K=0);break;case"VP8X":(E=Z.header={}).feature_flags=C[G];var ie=G+4;E.canvas_width=1+g(C,ie),ie+=3,E.canvas_height=1+g(C,ie),ie+=3;break;case"ALPH":A=!0,q=B+8,K=G-8;break;case"ANIM":(E=Z.header).bgcolor=m(C,G),ie=G+4,E.loop_count=(te=C)[($=ie)+0]<<0|te[$+1]<<8,ie+=2;break;case"ANMF":var ve,E;(E=Z.frames[R]={}).offset_x=2*g(C,G),G+=3,E.offset_y=2*g(C,G),G+=3,E.width=1+g(C,G),G+=3,E.height=1+g(C,G),G+=3,E.duration=g(C,G),G+=3,ve=C[G++],E.dispose=1&ve,E.blend=ve>>1&1}Q!="ANMF"&&(G+=B)}return Z}}(N,0);f.response=N,f.rgbaoutput=!0,f.dataurl=!1;var x=f.header?f.header:null,w=f.frames?f.frames:null;if(x){x.loop_counter=x.loop_count,v=[x.canvas_height],p=[x.canvas_width];for(var j=0;j<w.length&&w[j].blend!=0;j++);}var D=w[0],T=S.WebPDecodeRGBA(N,D.src_off,D.src_size,p,v);D.rgba=T,D.imgwidth=p[0],D.imgheight=v[0];for(var L=0;L<p[0]*v[0]*4;L++)_[L]=T[L];return this.width=p,this.height=v,this.data=_,this}(function(t){var e=function(){return typeof t0=="function"},n=function(v,p,_,S){var N=4,f=a;switch(S){case t.image_compression.FAST:N=1,f=s;break;case t.image_compression.MEDIUM:N=6,f=o;break;case t.image_compression.SLOW:N=9,f=l}v=r(v,p,_,f);var x=t0(v,{level:N});return t.__addimage__.arrayBufferToBinaryString(x)},r=function(v,p,_,S){for(var N,f,x,w=v.length/p,j=new Uint8Array(v.length+w),D=g(),T=0;T<w;T+=1){if(x=T*p,N=v.subarray(x,x+p),S)j.set(S(N,_,f),x+T);else{for(var L,C=D.length,G=[];L<C;L+=1)G[L]=D[L](N,_,f);var Z=m(G.concat());j.set(G[Z],x+T)}f=N}return j},i=function(v){var p=Array.apply([],v);return p.unshift(0),p},s=function(v,p){var _,S=[],N=v.length;S[0]=1;for(var f=0;f<N;f+=1)_=v[f-p]||0,S[f+1]=v[f]-_+256&255;return S},a=function(v,p,_){var S,N=[],f=v.length;N[0]=2;for(var x=0;x<f;x+=1)S=_&&_[x]||0,N[x+1]=v[x]-S+256&255;return N},o=function(v,p,_){var S,N,f=[],x=v.length;f[0]=3;for(var w=0;w<x;w+=1)S=v[w-p]||0,N=_&&_[w]||0,f[w+1]=v[w]+256-(S+N>>>1)&255;return f},l=function(v,p,_){var S,N,f,x,w=[],j=v.length;w[0]=4;for(var D=0;D<j;D+=1)S=v[D-p]||0,N=_&&_[D]||0,f=_&&_[D-p]||0,x=d(S,N,f),w[D+1]=v[D]-x+256&255;return w},d=function(v,p,_){if(v===p&&p===_)return v;var S=Math.abs(p-_),N=Math.abs(v-_),f=Math.abs(v+p-_-_);return S<=N&&S<=f?v:N<=f?p:_},g=function(){return[i,s,a,o,l]},m=function(v){var p=v.map(function(_){return _.reduce(function(S,N){return S+Math.abs(N)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(v,p,_,S){var N,f,x,w,j,D,T,L,C,G,Z,R,A,q,K,te=this.decode.FLATE_DECODE,$="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(x=new Pj(v)).imgData,f=x.bits,N=x.colorSpace,j=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){C=(L=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,Z=new Uint8Array(C*x.colors),G=new Uint8Array(C);var Q,V=x.pixelBitlength-x.bits;for(q=0,K=0;q<C;q++){for(A=L[q],Q=0;Q<V;)Z[K++]=A>>>Q&255,Q+=x.bits;G[q]=A>>>Q&255}}if(x.bits===16){C=(L=new Uint32Array(x.decodePixels().buffer)).length,Z=new Uint8Array(C*(32/x.pixelBitlength)*x.colors),G=new Uint8Array(C*(32/x.pixelBitlength)),R=x.colors>1,q=0,K=0;for(var B=0;q<C;)A=L[q++],Z[K++]=A>>>0&255,R&&(Z[K++]=A>>>16&255,A=L[q++],Z[K++]=A>>>0&255),G[B++]=A>>>16&255;f=8}S!==t.image_compression.NONE&&e()?(v=n(Z,x.width*x.colors,x.colors,S),T=n(G,x.width,1,S)):(v=Z,T=G,te=void 0)}if(x.colorType===3&&(N=this.color_spaces.INDEXED,D=x.palette,x.transparency.indexed)){var ie=x.transparency.indexed,ve=0;for(q=0,C=ie.length;q<C;++q)ve+=ie[q];if((ve/=255)===C-1&&ie.indexOf(0)!==-1)w=[ie.indexOf(0)];else if(ve!==C){for(L=x.decodePixels(),G=new Uint8Array(L.length),q=0,C=L.length;q<C;q++)G[q]=ie[L[q]];T=n(G,x.width,1)}}var E=function(U){var X;switch(U){case t.image_compression.FAST:X=11;break;case t.image_compression.MEDIUM:X=13;break;case t.image_compression.SLOW:X=14;break;default:X=12}return X}(S);return te===this.decode.FLATE_DECODE&&($="/Predictor "+E+" "),$+="/Colors "+j+" /BitsPerComponent "+f+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(T&&this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),{alias:_,data:v,index:p,filter:te,decodeParameters:$,transparency:w,palette:D,sMask:T,predictor:E,width:x.width,height:x.height,bitsPerComponent:f,colorSpace:N}}}})(at.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new Ej(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var d={data:l,width:a,height:o},g=new zp(100).encode(d,100);return t.processJPEG.call(this,g,n,r,i)},t.processGIF87A=t.processGIF89A}(at.API),vi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},vi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Ht.log("bit decode error:"+n)}},vi.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},vi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,l=15&s,d=this.palette[o];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*i+1>=this.width)break;d=this.palette[l],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},vi.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},vi.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,d=s>>15?255:0,g=r*this.width*4+4*i;this.data[g]=l,this.data[g+1]=o,this.data[g+2]=a,this.data[g+3]=d}this.pos+=t}},vi.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&n)/n*255|0,d=(a>>11)/e*255|0,g=i*this.width*4+4*s;this.data[g]=d,this.data[g+1]=l,this.data[g+2]=o,this.data[g+3]=255}this.pos+=t}},vi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},vi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},vi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new vi(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},d=new zp(100).encode(l,100);return t.processJPEG.call(this,d,n,r,i)}}(at.API),c2.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new c2(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},d=new zp(100).encode(l,100);return t.processJPEG.call(this,d,n,r,i)}}(at.API),at.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,d=0;d<i;d+=4){var g=r[d],m=r[d+1],v=r[d+2],p=r[d+3];s[o++]=g,s[o++]=m,s[o++]=v,a[l++]=p}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:_,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},at.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Uo=at.API,Md=Uo.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,g=d.fof?d.fof:1,m=e.doKerning!==!1,v=0,p=t.length,_=0,S=o[0]||l,N=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?N.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(v=m&&Ut(d[r])==="object"&&!isNaN(parseInt(d[r][_],10))?d[r][_]/g:0,N.push((o[r]||S)/l+v)),_=r;return N},a2=Uo.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Uo.processArabic&&(t=Uo.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:Md.apply(this,arguments).reduce(function(s,a){return s+a},0)},o2=function(t,e,n,r){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<n;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>r&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},l2=function(t,e,n){n||(n={});var r,i,s,a,o,l,d,g=[],m=[g],v=n.textIndent||0,p=0,_=0,S=t.split(" "),N=Md.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var f=Array(l).join(" "),x=[];S.map(function(j){(j=j.split(/\s*\n/)).length>1?x=x.concat(j.map(function(D,T){return(T&&D.length?`
`:"")+D})):x.push(j[0])}),S=x,l=a2.apply(this,[f,n])}for(s=0,a=S.length;s<a;s++){var w=0;if(r=S[s],l&&r[0]==`
`&&(r=r.substr(1),w=1),v+p+(_=(i=Md.apply(this,[r,n])).reduce(function(j,D){return j+D},0))>e||w){if(_>e){for(o=o2.apply(this,[r,i,e-(v+p),e]),g.push(o.shift()),g=[o.pop()];o.length;)m.push([o.shift()]);_=i.slice(r.length-(g[0]?g[0].length:0)).reduce(function(j,D){return j+D},0)}else g=[r];m.push(g),v=_+l,p=N}else g.push(r),v+=p+_,p=N}return d=l?function(j,D){return(D?f:"")+j.join(" ")}:function(j){return j.join(" ")},m.map(d)},Uo.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var m=this.internal.getFont(g.fontName,g.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var o,l,d=[];for(o=0,l=r.length;o<l;o++)d=d.concat(l2.apply(this,[r[o],a,s]));return d},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=t.__fontmetrics__.compress=function(m){var v,p,_,S,N=["{"];for(var f in m){if(v=m[f],isNaN(parseInt(f,10))?p="'"+f+"'":(f=parseInt(f,10),p=(p=s(f).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof v=="number")v<0?(_=s(v).slice(3),S="-"):(_=s(v).slice(2),S=""),_=S+_.slice(0,-1)+r[_.slice(-1)];else{if(Ut(v)!=="object")throw new Error("Don't know what to do with value type "+Ut(v)+".");_=a(v)}N.push(p+_)}return N.push("}"),N.join("")},o=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,p,_,S,N={},f=1,x=N,w=[],j="",D="",T=m.length-1,L=1;L<T;L+=1)(S=m[L])=="'"?v?(_=v.join(""),v=void 0):v=[]:v?v.push(S):S=="{"?(w.push([x,_]),x={},_=void 0):S=="}"?((p=w.pop())[0][p[1]]=x,_=void 0,x=p[0]):S=="-"?f=-1:_===void 0?n.hasOwnProperty(S)?(j+=n[S],_=parseInt(j,16)*f,f=1,j=""):j+=S:n.hasOwnProperty(S)?(D+=n[S],x[_]=parseInt(D,16)*f,f=1,_=void 0,D=""):D+=S;return N},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},g={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var v=m.font,p=g.Unicode[v.postScriptName];p&&(v.metadata.Unicode={},v.metadata.Unicode.widths=p.widths,v.metadata.Unicode.kerning=p.kerning);var _=d.Unicode[v.postScriptName];_&&(v.metadata.Unicode.encoding=_,v.encoding=_.codePages[0])}])}(at.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Ou(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(at),function(t){function e(){return(dt.canvg?Promise.resolve(dt.canvg):Jm(()=>import("./index.es-D3h9WQYl.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}at.API.addSvgAsImage=function(n,r,i,s,a,o,l,d){if(isNaN(r)||isNaN(i))throw Ht.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Ht.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=s,g.height=a;var m=g.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,g.width,g.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(_){return _.fromString(m,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(v)}).then(function(){p.addImage(g.toDataURL("image/jpeg",1),r,i,s,a,l,d)})}}(),at.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},at.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],d=0,g=0,m=0;function v(_,S){var N,f=!1;for(N=0;N<_.length;N+=1)_[N]===S&&(f=!0);return f}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=o.length;for(m=0;m<p;m+=1)n[o[m]].value=n[o[m]].defaultValue,n[o[m]].explicitSet=!1}if(Ut(t)==="object"){for(i in t)if(s=t[i],v(o,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")l.push(String(s[d]-1));else if(s[d].length>1){for(g=0;g<s[d].length;g+=1)typeof s[d][g]!="number"&&(r=!1);r===!0&&l.push([s[d][0]-1,s[d][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,S=[];for(_ in n)n[_].explicitSet===!0&&(n[_].type==="name"?S.push("/"+_+" /"+n[_].value):S.push("/"+_+" "+n[_].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(at.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],m=0,v=s.length;m<v;++m){if(o=a.metadata.characterToGlyph(s.charCodeAt(m)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(m),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return g.join("");o=o.toString(16),g.push(d[4-o.length],o)}return g.join("")},r=function(s){var a,o,l,d,g,m,v;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],m=0,v=(o=Object.keys(s).sort(function(p,_){return p-_})).length;m<v;m++)a=o[m],l.length>=100&&(g+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(d=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+d+">"));return l.length&&(g+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,d=a.newObject,g=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var m=o.metadata.Unicode.widths,v=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",_=0;_<v.length;_++)p+=String.fromCharCode(v[_]);var S=d();g({data:p,addLength1:!0,objectId:S}),l("endobj");var N=d();g({data:r(o.metadata.toUnicode),addLength1:!0,objectId:N}),l("endobj");var f=d();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ko(o.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var x=d();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ko(o.fontName)),l("/FontDescriptor "+f+" 0 R"),l("/W "+t.API.PDFObject.convert(m)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=d(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+N+" 0 R"),l("/BaseFont /"+Ko(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,d=a.newObject,g=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var m=o.metadata.rawData,v="",p=0;p<m.length;p++)v+=String.fromCharCode(m[p]);var _=d();g({data:v,addLength1:!0,objectId:_}),l("endobj");var S=d();g({data:r(o.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var N=d();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Ko(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=d();for(var f=0;f<o.metadata.hmtx.widths.length;f++)o.metadata.hmtx.widths[f]=parseInt(o.metadata.hmtx.widths[f]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Ko(o.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,d=s.y,g=s.options||{},m=s.mutex||{},v=m.pdfEscape,p=m.activeFontKey,_=m.fonts,S=p,N="",f=0,x="",w=_[S].encoding;if(_[S].encoding!=="Identity-H")return{text:o,x:l,y:d,options:g,mutex:m};for(x=o,S=p,Array.isArray(o)&&(x=o[0]),f=0;f<x.length;f+=1)_[S].metadata.hasOwnProperty("cmap")&&(a=_[S].metadata.cmap.unicode.codeMap[x[f].charCodeAt(0)]),a||x[f].charCodeAt(0)<256&&_[S].metadata.hasOwnProperty("Unicode")?N+=x[f]:N+="";var j="";return parseInt(S.slice(1))<14||w==="WinAnsiEncoding"?j=v(N,S).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(j=n(N,_[S])),m.isHex=!0,{text:j,x:l,y:d,options:g,mutex:m}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?o.push([i(Object.assign({},l,{text:a[d][0]})).text,a[d][1],a[d][2]]):o.push(i(Object.assign({},l,{text:a[d]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(at),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(at.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,a,o,l,d,g,m=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,w=0;this.__bidiEngine__={};var j=function(R){var A=R.charCodeAt(),q=A>>8,K=S[q];return K!==void 0?m[256*K+(255&A)]:q===252||q===253?"AL":f.test(q)?"L":q===8?"R":"N"},D=function(R){for(var A,q=0;q<R.length;q++){if((A=j(R.charAt(q)))==="L")return!1;if(A==="R")return!0}return!1},T=function(R,A,q,K){var te,$,Q,V,B=A[K];switch(B){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(B="AN");break;case"AL":x=!0,B="R";break;case"WS":B="N";break;case"CS":K<1||K+1>=A.length||(te=q[K-1])!=="EN"&&te!=="AN"||($=A[K+1])!=="EN"&&$!=="AN"?B="N":x&&($="AN"),B=$===te?$:"N";break;case"ES":B=(te=K>0?q[K-1]:"B")==="EN"&&K+1<A.length&&A[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&q[K-1]==="EN"){B="EN";break}if(x){B="N";break}for(Q=K+1,V=A.length;Q<V&&A[Q]==="ET";)Q++;B=Q<V&&A[Q]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(V=A.length,Q=K+1;Q<V&&A[Q]==="NSM";)Q++;if(Q<V){var ie=R[K],ve=ie>=1425&&ie<=2303||ie===64286;if(te=A[Q],ve&&(te==="R"||te==="AL")){B="R";break}}}B=K<1||(te=A[K-1])==="B"?"N":q[K-1];break;case"B":x=!1,i=!0,B=w;break;case"S":s=!0,B="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":B="N"}return B},L=function(R,A,q){var K=R.split("");return q&&C(K,q,{hiLevel:w}),K.reverse(),A&&A.reverse(),K.join("")},C=function(R,A,q){var K,te,$,Q,V,B=-1,ie=R.length,ve=0,E=[],U=w?p:v,X=[];for(x=!1,i=!1,s=!1,te=0;te<ie;te++)X[te]=j(R[te]);for($=0;$<ie;$++){if(V=ve,E[$]=T(R,X,E,$),K=240&(ve=U[V][_[E[$]]]),ve&=15,A[$]=Q=U[ve][5],K>0)if(K===16){for(te=B;te<$;te++)A[te]=1;B=-1}else B=-1;if(U[ve][6])B===-1&&(B=$);else if(B>-1){for(te=B;te<$;te++)A[te]=Q;B=-1}X[$]==="B"&&(A[$]=0),q.hiLevel|=Q}s&&function(ne,P,H){for(var J=0;J<H;J++)if(ne[J]==="S"){P[J]=w;for(var Y=J-1;Y>=0&&ne[Y]==="WS";Y--)P[Y]=w}}(X,A,ie)},G=function(R,A,q,K,te){if(!(te.hiLevel<R)){if(R===1&&w===1&&!i)return A.reverse(),void(q&&q.reverse());for(var $,Q,V,B,ie=A.length,ve=0;ve<ie;){if(K[ve]>=R){for(V=ve+1;V<ie&&K[V]>=R;)V++;for(B=ve,Q=V-1;B<Q;B++,Q--)$=A[B],A[B]=A[Q],A[Q]=$,q&&($=q[B],q[B]=q[Q],q[Q]=$);ve=V}ve++}}},Z=function(R,A,q){var K=R.split(""),te={hiLevel:w};return q||(q=[]),C(K,q,te),function($,Q,V){if(V.hiLevel!==0&&g)for(var B,ie=0;ie<$.length;ie++)Q[ie]===1&&(B=N.indexOf($[ie]))>=0&&($[ie]=N[B+1])}(K,q,te),G(2,K,A,q,te),G(1,K,A,q,te),K.join("")};return this.__bidiEngine__.doBidiReorder=function(R,A,q){if(function(te,$){if($)for(var Q=0;Q<te.length;Q++)$[Q]=Q;o===void 0&&(o=D(te)),d===void 0&&(d=D(te))}(R,A),a||!l||d)if(a&&l&&o^d)w=o?1:0,R=L(R,A,q);else if(!a&&l&&d)w=o?1:0,R=Z(R,A,q),R=L(R,A);else if(!a||o||l||d){if(a&&!l&&o^d)R=L(R,A),o?(w=0,R=Z(R,A,q)):(w=1,R=Z(R,A,q),R=L(R,A));else if(a&&o&&!l&&d)w=1,R=Z(R,A,q),R=L(R,A);else if(!a&&!l&&o^d){var K=g;o?(w=1,R=Z(R,A,q),w=0,g=!1,R=Z(R,A,q),g=K):(w=0,R=Z(R,A,q),R=L(R,A),w=1,g=!1,R=Z(R,A,q),g=K,R=L(R,A))}}else w=0,R=Z(R,A,q);else w=o?1:0,R=Z(R,A,q);return R},this.__bidiEngine__.setOptions=function(R){R&&(a=R.isInputVisual,l=R.isOutputVisual,o=R.isInputRtl,d=R.isOutputRtl,g=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),a=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([n.doBidiReorder(i[o])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(at),at.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new ca(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Wj(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Cj(this.contents),this.head=new Lj(this),this.name=new Fj(this),this.cmap=new Ow(this),this.toUnicode={},this.hhea=new Rj(this),this.maxp=new Mj(this),this.hmtx=new zj(this),this.post=new Oj(this),this.os2=new Ij(this),this.loca=new qj(this),this.glyf=new Bj(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,d;for(d=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Ci,ca=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,a,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),Cj=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,a,o,l,d,g,m,v,p,_,S;for(S in p=Object.keys(n).length,l=Math.log(2),m=16*Math.floor(Math.log(p)/l),a=Math.floor(m/l),g=16*p-m,(i=new ca).writeInt(this.scalarType),i.writeShort(p),i.writeShort(m),i.writeShort(a),i.writeShort(g),s=16*p,d=i.pos+s,o=null,_=[],n)for(v=n[S],i.writeString(S),i.writeInt(t(v)),i.writeInt(d),i.writeInt(v.length),_=_.concat(v),S==="head"&&(o=d),d+=v.length;d%4;)_.push(0),d++;return i.write(_),r=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,a;for(n=Dw.call(n);n.length%4;)n.push(0);for(s=new ca(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),Tj={}.hasOwnProperty,Gi=function(t,e){for(var n in e)Tj.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ci=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Lj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gi(e,Ci),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new ca).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),d2=function(){function t(e,n){var r,i,s,a,o,l,d,g,m,v,p,_,S,N,f,x,w;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),v=p/2,e.pos+=6,s=function(){var j,D;for(D=[],l=j=0;0<=v?j<v:j>v;l=0<=v?++j:--j)D.push(e.readUInt16());return D}(),e.pos+=2,S=function(){var j,D;for(D=[],l=j=0;0<=v?j<v:j>v;l=0<=v?++j:--j)D.push(e.readUInt16());return D}(),d=function(){var j,D;for(D=[],l=j=0;0<=v?j<v:j>v;l=0<=v?++j:--j)D.push(e.readUInt16());return D}(),g=function(){var j,D;for(D=[],l=j=0;0<=v?j<v:j>v;l=0<=v?++j:--j)D.push(e.readUInt16());return D}(),i=(this.length-e.pos+this.offset)/2,o=function(){var j,D;for(D=[],l=j=0;0<=i?j<i:j>i;l=0<=i?++j:--j)D.push(e.readUInt16());return D}(),l=f=0,w=s.length;f<w;l=++f)for(N=s[l],r=x=_=S[l];_<=N?x<=N:x>=N;r=_<=N?++x:--x)g[l]===0?a=r+d[l]:(a=o[g[l]/2+(r-_)-(v-l)]||0)!==0&&(a+=d[l]),this.codeMap[r]=65535&a}e.pos=m}return t.encode=function(e,n){var r,i,s,a,o,l,d,g,m,v,p,_,S,N,f,x,w,j,D,T,L,C,G,Z,R,A,q,K,te,$,Q,V,B,ie,ve,E,U,X,ne,P,H,J,Y,be,we,Pe;switch(K=new ca,a=Object.keys(e).sort(function(je,He){return je-He}),n){case"macroman":for(S=0,N=function(){var je=[];for(_=0;_<256;++_)je.push(0);return je}(),x={0:0},s={},te=0,B=a.length;te<B;te++)x[Y=e[i=a[te]]]==null&&(x[Y]=++S),s[i]={old:e[i],new:x[e[i]]},N[i]=x[e[i]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(N),{charMap:s,subtable:K.data,maxGlyphID:S+1};case"unicode":for(A=[],m=[],w=0,x={},r={},f=d=null,$=0,ie=a.length;$<ie;$++)x[D=e[i=a[$]]]==null&&(x[D]=++w),r[i]={old:D,new:x[D]},o=x[D]-i,f!=null&&o===d||(f&&m.push(f),A.push(i),d=o),f=i;for(f&&m.push(f),m.push(65535),A.push(65535),Z=2*(G=A.length),C=2*Math.pow(Math.log(G)/Math.LN2,2),v=Math.log(C/2)/Math.LN2,L=2*G-C,l=[],T=[],p=[],_=Q=0,ve=A.length;Q<ve;_=++Q){if(R=A[_],g=m[_],R===65535){l.push(0),T.push(0);break}if(R-(q=r[R].new)>=32768)for(l.push(0),T.push(2*(p.length+G-_)),i=V=R;R<=g?V<=g:V>=g;i=R<=g?++V:--V)p.push(r[i].new);else l.push(q-R),T.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*G+2*p.length),K.writeUInt16(0),K.writeUInt16(Z),K.writeUInt16(C),K.writeUInt16(v),K.writeUInt16(L),H=0,E=m.length;H<E;H++)i=m[H],K.writeUInt16(i);for(K.writeUInt16(0),J=0,U=A.length;J<U;J++)i=A[J],K.writeUInt16(i);for(be=0,X=l.length;be<X;be++)o=l[be],K.writeUInt16(o);for(we=0,ne=T.length;we<ne;we++)j=T[we],K.writeUInt16(j);for(Pe=0,P=p.length;Pe<P;Pe++)S=p[Pe],K.writeUInt16(S);return{charMap:r,subtable:K.data,maxGlyphID:w+1}}},t}(),Ow=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gi(e,Ci),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new d2(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=d2.encode(n,r),(s=new ca).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),Rj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gi(e,Ci),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),Ij=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gi(e,Ci),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Oj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gi(e,Ci),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var o,l,d;for(d=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)d.push(n.readUInt32());return d}).call(this)}},e}(),Dj=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Fj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gi(e,Ci),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,a,o,l,d,g,m,v,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(d={},a=m=0,v=i.length;m<v;a=++m)s=i[a],n.pos=s.offset,g=n.readString(s.length),o=new Dj(g,s),d[p=s.nameID]==null&&(d[p]=[]),d[s.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),Mj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gi(e,Ci),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),zj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gi(e,Ci),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,a,o,l,d;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,m;for(m=[],r=g=0;0<=s?g<s:g>s;r=0<=s?++g:--g)m.push(n.readInt16());return m}(),this.widths=(function(){var g,m,v,p;for(p=[],g=0,m=(v=this.metrics).length;g<m;g++)a=v[g],p.push(a.advance);return p}).call(this),i=this.widths[this.widths.length-1],d=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)d.push(this.widths.push(i));return d},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),Dw=[].slice,Bj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gi(e,Ci),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,a,o,l,d,g,m,v;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,o=(l=new ca(r.read(s))).readShort(),g=l.readShort(),v=l.readShort(),d=l.readShort(),m=l.readShort(),this.cache[n]=o===-1?new $j(l,g,v,d,m):new Uj(l,o,g,v,d,m),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,a,o,l,d;for(o=[],a=[],l=0,d=r.length;l<d;l++)s=n[r[l]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),Uj=function(){function t(e,n,r,i,s,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),$j=function(){function t(e,n,r,i,s){var a,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new ca(Dw.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),qj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gi(e,Ci),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<r.length&&r[a]==o){++a,i[o]=s;var l=this.offsets[o],d=this.offsets[o+1]-l;d>0&&(s+=d)}for(var g=new Array(4*i.length),m=0;m<i.length;++m)g[4*m+3]=255&i[m],g[4*m+2]=(65280&i[m])>>8,g[4*m+1]=(16711680&i[m])>>16,g[4*m]=(4278190080&i[m])>>24;return g},e}(),Wj=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,a,o,l,d,g,m,v,p,_,S,N,f;for(i in r=Ow.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},f=r.charMap)p[(l=f[i]).old]=l.new;for(_ in v=r.maxGlyphID,a)_ in p||(p[_]=v++);return g=function(x){var w,j;for(w in j={},x)j[x[w]]=w;return j}(p),m=Object.keys(g).sort(function(x,w){return x-w}),S=function(){var x,w,j;for(j=[],x=0,w=m.length;x<w;x++)o=m[x],j.push(g[o]);return j}(),s=this.font.glyf.encode(a,S,p),d=this.font.loca.encode(s.offsets,S),N={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},t}();at.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var o,l,d;for(d=[],o=0,l=n.length;o<l;o++)r=n[o],d.push(e.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+n},e}();const Hj=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:_j,AcroFormAppearance:Ke,AcroFormButton:Tn,AcroFormCheckBox:Mu,AcroFormChoiceField:qa,AcroFormComboBox:Ha,AcroFormEditBox:Du,AcroFormListBox:Wa,AcroFormPasswordField:zu,AcroFormPushButton:Fu,AcroFormRadioButton:Va,AcroFormTextField:sa,GState:mc,ShadingPattern:Hs,TilingPattern:Ba,default:at,jsPDF:at},Symbol.toStringTag,{value:"Module"}));var Fw={exports:{}};const Vj=_x(Hj);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(r,i){t.exports=i(function(){try{return Vj}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Gf<"u"?Gf:typeof window<"u"?window:typeof self<"u"?self:Gf,function(n){return function(){var r={172:function(o,l){var d=this&&this.__extends||function(){var v=function(p,_){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,N){S.__proto__=N}||function(S,N){for(var f in N)Object.prototype.hasOwnProperty.call(N,f)&&(S[f]=N[f])},v(p,_)};return function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");v(p,_);function S(){this.constructor=p}p.prototype=_===null?Object.create(_):(S.prototype=_.prototype,new S)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var g=function(){function v(p,_,S){this.table=_,this.pageNumber=_.pageNumber,this.pageCount=this.pageNumber,this.settings=_.settings,this.cursor=S,this.doc=p.getDocument()}return v}();l.HookData=g;var m=function(v){d(p,v);function p(_,S,N,f,x,w){var j=v.call(this,_,S,w)||this;return j.cell=N,j.row=f,j.column=x,j.section=f.section,j}return p}(g);l.CellHookData=m},340:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0});var g=d(4),m=d(136),v=d(744),p=d(776),_=d(664),S=d(972);function N(f){f.API.autoTable=function(){for(var x=[],w=0;w<arguments.length;w++)x[w]=arguments[w];var j;x.length===1?j=x[0]:(console.error("Use of deprecated autoTable initiation"),j=x[2]||{},j.columns=x[0],j.body=x[1]);var D=(0,p.parseInput)(this,j),T=(0,S.createTable)(this,D);return(0,_.drawTable)(this,T),this},f.API.lastAutoTable=!1,f.API.previousAutoTable=!1,f.API.autoTable.previous=!1,f.API.autoTableText=function(x,w,j,D){(0,m.default)(x,w,j,D,this)},f.API.autoTableSetDefaults=function(x){return v.DocHandler.setDefaults(x,this),this},f.autoTableSetDefaults=function(x,w){v.DocHandler.setDefaults(x,w)},f.API.autoTableHtmlToJson=function(x,w){var j;if(w===void 0&&(w=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var D=new v.DocHandler(this),T=(0,g.parseHtml)(D,x,window,w,!1),L=T.head,C=T.body,G=((j=L[0])===null||j===void 0?void 0:j.map(function(Z){return Z.content}))||[];return{columns:G,rows:C,data:C}},f.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var x=this.lastAutoTable;return x&&x.finalY?x.finalY:0},f.API.autoTableAddPageContent=function(x){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),f.API.autoTable.globalDefaults||(f.API.autoTable.globalDefaults={}),f.API.autoTable.globalDefaults.addPageContent=x,this},f.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=N},136:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function d(g,m,v,p,_){p=p||{};var S=1.15,N=_.internal.scaleFactor,f=_.internal.getFontSize()/N,x=_.getLineHeightFactor?_.getLineHeightFactor():S,w=f*x,j=/\r\n|\r|\n/g,D="",T=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(D=typeof g=="string"?g.split(j):g,T=D.length||1),v+=f*(2-S),p.valign==="middle"?v-=T/2*w:p.valign==="bottom"&&(v-=T*w),p.halign==="center"||p.halign==="right"){var L=f;if(p.halign==="center"&&(L*=.5),D&&T>=1){for(var C=0;C<D.length;C++)_.text(D[C],m-_.getStringUnitWidth(D[C])*L,v),v+=w;return _}m-=_.getStringUnitWidth(g)*L}return p.halign==="justify"?_.text(g,m,v,{maxWidth:p.maxWidth||100,align:"justify"}):_.text(g,m,v),_}l.default=d},420:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function d(_,S,N){N.applyStyles(S,!0);var f=Array.isArray(_)?_:[_],x=f.map(function(w){return N.getTextWidth(w)}).reduce(function(w,j){return Math.max(w,j)},0);return x}l.getStringWidth=d;function g(_,S,N,f){var x=S.settings.tableLineWidth,w=S.settings.tableLineColor;_.applyStyles({lineWidth:x,lineColor:w});var j=m(x,!1);j&&_.rect(N.x,N.y,S.getWidth(_.pageSize().width),f.y-N.y,j)}l.addTableBorder=g;function m(_,S){var N=_>0,f=S||S===0;return N&&f?"DF":N?"S":f?"F":null}l.getFillStyle=m;function v(_,S){var N,f,x,w;if(_=_||S,Array.isArray(_)){if(_.length>=4)return{top:_[0],right:_[1],bottom:_[2],left:_[3]};if(_.length===3)return{top:_[0],right:_[1],bottom:_[2],left:_[1]};if(_.length===2)return{top:_[0],right:_[1],bottom:_[0],left:_[1]};_.length===1?_=_[0]:_=S}return typeof _=="object"?(typeof _.vertical=="number"&&(_.top=_.vertical,_.bottom=_.vertical),typeof _.horizontal=="number"&&(_.right=_.horizontal,_.left=_.horizontal),{left:(N=_.left)!==null&&N!==void 0?N:S,top:(f=_.top)!==null&&f!==void 0?f:S,right:(x=_.right)!==null&&x!==void 0?x:S,bottom:(w=_.bottom)!==null&&w!==void 0?w:S}):(typeof _!="number"&&(_=S),{top:_,right:_,bottom:_,left:_})}l.parseSpacing=v;function p(_,S){var N=v(S.settings.margin,0);return _.pageSize().width-(N.left+N.right)}l.getPageAvailableWidth=p},796:function(o,l){var d=this&&this.__extends||function(){var p=function(_,S){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,f){N.__proto__=f}||function(N,f){for(var x in f)Object.prototype.hasOwnProperty.call(f,x)&&(N[x]=f[x])},p(_,S)};return function(_,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");p(_,S);function N(){this.constructor=_}_.prototype=S===null?Object.create(S):(N.prototype=S.prototype,new N)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var g=function(p){d(_,p);function _(S){var N=p.call(this)||this;return N._element=S,N}return _}(Array);l.HtmlRowInput=g;function m(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=m;function v(p){var _={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return _[p]}l.getTheme=v},903:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var g=d(420);function m(N,f,x,w,j){var D={},T=1.3333333333333333,L=p(f,function(B){return j.getComputedStyle(B).backgroundColor});L!=null&&(D.fillColor=L);var C=p(f,function(B){return j.getComputedStyle(B).color});C!=null&&(D.textColor=C);var G=S(w,x);G&&(D.cellPadding=G);var Z="borderTopColor",R=T*x,A=w.borderTopWidth;if(w.borderBottomWidth===A&&w.borderRightWidth===A&&w.borderLeftWidth===A){var q=(parseFloat(A)||0)/R;q&&(D.lineWidth=q)}else D.lineWidth={top:(parseFloat(w.borderTopWidth)||0)/R,right:(parseFloat(w.borderRightWidth)||0)/R,bottom:(parseFloat(w.borderBottomWidth)||0)/R,left:(parseFloat(w.borderLeftWidth)||0)/R},D.lineWidth.top||(D.lineWidth.right?Z="borderRightColor":D.lineWidth.bottom?Z="borderBottomColor":D.lineWidth.left&&(Z="borderLeftColor"));var K=p(f,function(B){return j.getComputedStyle(B)[Z]});K!=null&&(D.lineColor=K);var te=["left","right","center","justify"];te.indexOf(w.textAlign)!==-1&&(D.halign=w.textAlign),te=["middle","bottom","top"],te.indexOf(w.verticalAlign)!==-1&&(D.valign=w.verticalAlign);var $=parseInt(w.fontSize||"");isNaN($)||(D.fontSize=$/T);var Q=v(w);Q&&(D.fontStyle=Q);var V=(w.fontFamily||"").toLowerCase();return N.indexOf(V)!==-1&&(D.font=V),D}l.parseCss=m;function v(N){var f="";return(N.fontWeight==="bold"||N.fontWeight==="bolder"||parseInt(N.fontWeight)>=700)&&(f="bold"),(N.fontStyle==="italic"||N.fontStyle==="oblique")&&(f+="italic"),f}function p(N,f){var x=_(N,f);if(!x)return null;var w=x.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!w||!Array.isArray(w))return null;var j=[parseInt(w[1]),parseInt(w[2]),parseInt(w[3])],D=parseInt(w[4]);return D===0||isNaN(j[0])||isNaN(j[1])||isNaN(j[2])?null:j}function _(N,f){var x=f(N);return x==="rgba(0, 0, 0, 0)"||x==="transparent"||x==="initial"||x==="inherit"?N.parentElement==null?null:_(N.parentElement,f):x}function S(N,f){var x=[N.paddingTop,N.paddingRight,N.paddingBottom,N.paddingLeft],w=96/(72/f),j=(parseInt(N.lineHeight)-parseInt(N.fontSize))/f/2,D=x.map(function(L){return parseInt(L||"0")/w}),T=(0,g.parseSpacing)(D,0);return j>T.top&&(T.top=j),j>T.bottom&&(T.bottom=j),T}},744:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var d={},g=function(){function m(v){this.jsPDFDocument=v,this.userStyles={textColor:v.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:v.internal.getFontSize(),fontStyle:v.internal.getFont().fontStyle,font:v.internal.getFont().fontName,lineWidth:v.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:v.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return m.setDefaults=function(v,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=v:d=v},m.unifyColor=function(v){return Array.isArray(v)?v:typeof v=="number"?[v,v,v]:typeof v=="string"?[v]:null},m.prototype.applyStyles=function(v,p){var _,S,N;p===void 0&&(p=!1),v.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(v.fontStyle);var f=this.jsPDFDocument.internal.getFont(),x=f.fontStyle,w=f.fontName;if(v.font&&(w=v.font),v.fontStyle){x=v.fontStyle;var j=this.getFontList()[w];j&&j.indexOf(x)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(j[0]),x=j[0])}if(this.jsPDFDocument.setFont(w,x),v.fontSize&&this.jsPDFDocument.setFontSize(v.fontSize),!p){var D=m.unifyColor(v.fillColor);D&&(_=this.jsPDFDocument).setFillColor.apply(_,D),D=m.unifyColor(v.textColor),D&&(S=this.jsPDFDocument).setTextColor.apply(S,D),D=m.unifyColor(v.lineColor),D&&(N=this.jsPDFDocument).setDrawColor.apply(N,D),typeof v.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(v.lineWidth)}},m.prototype.splitTextToSize=function(v,p,_){return this.jsPDFDocument.splitTextToSize(v,p,_)},m.prototype.rect=function(v,p,_,S,N){return this.jsPDFDocument.rect(v,p,_,S,N)},m.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},m.prototype.getTextWidth=function(v){return this.jsPDFDocument.getTextWidth(v)},m.prototype.getDocument=function(){return this.jsPDFDocument},m.prototype.setPage=function(v){this.jsPDFDocument.setPage(v)},m.prototype.addPage=function(){return this.jsPDFDocument.addPage()},m.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},m.prototype.getGlobalOptions=function(){return d||{}},m.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},m.prototype.pageSize=function(){var v=this.jsPDFDocument.internal.pageSize;return v.width==null&&(v={width:v.getWidth(),height:v.getHeight()}),v},m.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},m.prototype.getLineHeightFactor=function(){var v=this.jsPDFDocument;return v.getLineHeightFactor?v.getLineHeightFactor():1.15},m.prototype.getLineHeight=function(v){return v/this.scaleFactor()*this.getLineHeightFactor()},m.prototype.pageNumber=function(){var v=this.jsPDFDocument.internal.getCurrentPageInfo();return v?v.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},m}();l.DocHandler=g},4:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var g=d(903),m=d(796);function v(S,N,f,x,w){var j,D;x===void 0&&(x=!1),w===void 0&&(w=!1);var T;typeof N=="string"?T=f.document.querySelector(N):T=N;var L=Object.keys(S.getFontList()),C=S.scaleFactor(),G=[],Z=[],R=[];if(!T)return console.error("Html table could not be found with input: ",N),{head:G,body:Z,foot:R};for(var A=0;A<T.rows.length;A++){var q=T.rows[A],K=(D=(j=q==null?void 0:q.parentElement)===null||j===void 0?void 0:j.tagName)===null||D===void 0?void 0:D.toLowerCase(),te=p(L,C,f,q,x,w);te&&(K==="thead"?G.push(te):K==="tfoot"?R.push(te):Z.push(te))}return{head:G,body:Z,foot:R}}l.parseHtml=v;function p(S,N,f,x,w,j){for(var D=new m.HtmlRowInput(x),T=0;T<x.cells.length;T++){var L=x.cells[T],C=f.getComputedStyle(L);if(w||C.display!=="none"){var G=void 0;j&&(G=(0,g.parseCss)(S,L,N,C,f)),D.push({rowSpan:L.rowSpan,colSpan:L.colSpan,styles:G,_element:L,content:_(L)})}}var Z=f.getComputedStyle(x);if(D.length>0&&(w||Z.display!=="none"))return D}function _(S){var N=S.cloneNode(!0);return N.innerHTML=N.innerHTML.replace(/\n/g,"").replace(/ +/g," "),N.innerHTML=N.innerHTML.split(/<br.*?>/).map(function(f){return f.trim()}).join(`
`),N.innerText||N.textContent||""}},776:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var g=d(4),m=d(356),v=d(420),p=d(744),_=d(792);function S(T,L){var C=new p.DocHandler(T),G=C.getDocumentOptions(),Z=C.getGlobalOptions();(0,_.default)(C,Z,G,L);var R=(0,m.assign)({},Z,G,L),A;typeof window<"u"&&(A=window);var q=N(Z,G,L),K=f(Z,G,L),te=x(C,R),$=j(C,R,A);return{id:L.tableId,content:$,hooks:K,styles:q,settings:te}}l.parseInput=S;function N(T,L,C){for(var G={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},Z=function(K){if(K==="columnStyles"){var te=T[K],$=L[K],Q=C[K];G.columnStyles=(0,m.assign)({},te,$,Q)}else{var V=[T,L,C],B=V.map(function(ie){return ie[K]||{}});G[K]=(0,m.assign)({},B[0],B[1],B[2])}},R=0,A=Object.keys(G);R<A.length;R++){var q=A[R];Z(q)}return G}function f(T,L,C){for(var G=[T,L,C],Z={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},R=0,A=G;R<A.length;R++){var q=A[R];q.didParseCell&&Z.didParseCell.push(q.didParseCell),q.willDrawCell&&Z.willDrawCell.push(q.willDrawCell),q.didDrawCell&&Z.didDrawCell.push(q.didDrawCell),q.willDrawPage&&Z.willDrawPage.push(q.willDrawPage),q.didDrawPage&&Z.didDrawPage.push(q.didDrawPage)}return Z}function x(T,L){var C,G,Z,R,A,q,K,te,$,Q,V,B,ie=(0,v.parseSpacing)(L.margin,40/T.scaleFactor()),ve=(C=w(T,L.startY))!==null&&C!==void 0?C:ie.top,E;L.showFoot===!0?E="everyPage":L.showFoot===!1?E="never":E=(G=L.showFoot)!==null&&G!==void 0?G:"everyPage";var U;L.showHead===!0?U="everyPage":L.showHead===!1?U="never":U=(Z=L.showHead)!==null&&Z!==void 0?Z:"everyPage";var X=(R=L.useCss)!==null&&R!==void 0?R:!1,ne=L.theme||(X?"plain":"striped"),P=!!L.horizontalPageBreak,H=(A=L.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(q=L.includeHiddenHtml)!==null&&q!==void 0?q:!1,useCss:X,theme:ne,startY:ve,margin:ie,pageBreak:(K=L.pageBreak)!==null&&K!==void 0?K:"auto",rowPageBreak:(te=L.rowPageBreak)!==null&&te!==void 0?te:"auto",tableWidth:($=L.tableWidth)!==null&&$!==void 0?$:"auto",showHead:U,showFoot:E,tableLineWidth:(Q=L.tableLineWidth)!==null&&Q!==void 0?Q:0,tableLineColor:(V=L.tableLineColor)!==null&&V!==void 0?V:200,horizontalPageBreak:P,horizontalPageBreakRepeat:H,horizontalPageBreakBehaviour:(B=L.horizontalPageBreakBehaviour)!==null&&B!==void 0?B:"afterAllRows"}}function w(T,L){var C=T.getLastAutoTable(),G=T.scaleFactor(),Z=T.pageNumber(),R=!1;if(C&&C.startPageNumber){var A=C.startPageNumber+C.pageNumber-1;R=A===Z}return typeof L=="number"?L:(L==null||L===!1)&&R&&(C==null?void 0:C.finalY)!=null?C.finalY+20/G:null}function j(T,L,C){var G=L.head||[],Z=L.body||[],R=L.foot||[];if(L.html){var A=L.includeHiddenHtml;if(C){var q=(0,g.parseHtml)(T,L.html,C,A,L.useCss)||{};G=q.head||G,Z=q.body||G,R=q.foot||G}else console.error("Cannot parse html in non browser environment")}var K=L.columns||D(G,Z,R);return{columns:K,head:G,body:Z,foot:R}}function D(T,L,C){var G=T[0]||L[0]||C[0]||[],Z=[];return Object.keys(G).filter(function(R){return R!=="_element"}).forEach(function(R){var A=1,q;Array.isArray(G)?q=G[parseInt(R)]:q=G[R],typeof q=="object"&&!Array.isArray(q)&&(A=(q==null?void 0:q.colSpan)||1);for(var K=0;K<A;K++){var te=void 0;Array.isArray(G)?te=Z.length:te=R+(K>0?"_".concat(K):"");var $={dataKey:te};Z.push($)}}),Z}},792:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function d(m,v,p,_){for(var S=function(w){w&&typeof w!="object"&&console.error("The options parameter should be of type object, is: "+typeof w),typeof w.extendWidth<"u"&&(w.tableWidth=w.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof w.margins<"u"&&(typeof w.margin>"u"&&(w.margin=w.margins),console.error("Use of deprecated option: margins, use margin instead.")),w.startY&&typeof w.startY!="number"&&(console.error("Invalid value for startY option",w.startY),delete w.startY),!w.didDrawPage&&(w.afterPageContent||w.beforePageContent||w.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),w.didDrawPage=function(R){m.applyStyles(m.userStyles),w.beforePageContent&&w.beforePageContent(R),m.applyStyles(m.userStyles),w.afterPageContent&&w.afterPageContent(R),m.applyStyles(m.userStyles),w.afterPageAdd&&R.pageNumber>1&&R.afterPageAdd(R),m.applyStyles(m.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(R){w[R]&&console.error('The "'.concat(R,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(R){var A=R[0],q=R[1];w[q]&&(console.error("Use of deprecated option ".concat(q,". Use ").concat(A," instead")),w[A]=w[q])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(R){var A=typeof R=="string"?R:R[0],q=typeof R=="string"?R:R[1];typeof w[A]<"u"&&(typeof w.styles[q]>"u"&&(w.styles[q]=w[A]),console.error("Use of deprecated option: "+A+", use the style "+q+" instead."))});for(var j=0,D=["styles","bodyStyles","headStyles","footStyles"];j<D.length;j++){var T=D[j];g(w[T]||{})}for(var L=w.columnStyles||{},C=0,G=Object.keys(L);C<G.length;C++){var Z=G[C];g(L[Z]||{})}},N=0,f=[v,p,_];N<f.length;N++){var x=f[N];S(x)}}l.default=d;function g(m){m.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),m.minCellHeight||(m.minCellHeight=m.rowHeight)):m.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),m.cellWidth||(m.cellWidth=m.columnWidth))}},260:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var g=d(796),m=d(172),v=d(420),p=function(){function f(x,w){this.pageNumber=1,this.pageCount=1,this.id=x.id,this.settings=x.settings,this.styles=x.styles,this.hooks=x.hooks,this.columns=w.columns,this.head=w.head,this.body=w.body,this.foot=w.foot}return f.prototype.getHeadHeight=function(x){return this.head.reduce(function(w,j){return w+j.getMaxCellHeight(x)},0)},f.prototype.getFootHeight=function(x){return this.foot.reduce(function(w,j){return w+j.getMaxCellHeight(x)},0)},f.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},f.prototype.callCellHooks=function(x,w,j,D,T,L){for(var C=0,G=w;C<G.length;C++){var Z=G[C],R=new m.CellHookData(x,this,j,D,T,L),A=Z(R)===!1;if(j.text=Array.isArray(j.text)?j.text:[j.text],A)return!1}return!0},f.prototype.callEndPageHooks=function(x,w){x.applyStyles(x.userStyles);for(var j=0,D=this.hooks.didDrawPage;j<D.length;j++){var T=D[j];T(new m.HookData(x,this,w))}},f.prototype.callWillDrawPageHooks=function(x,w){for(var j=0,D=this.hooks.willDrawPage;j<D.length;j++){var T=D[j];T(new m.HookData(x,this,w))}},f.prototype.getWidth=function(x){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var w=this.columns.reduce(function(D,T){return D+T.wrappedWidth},0);return w}else{var j=this.settings.margin;return x-j.left-j.right}},f}();l.Table=p;var _=function(){function f(x,w,j,D,T){T===void 0&&(T=!1),this.height=0,this.raw=x,x instanceof g.HtmlRowInput&&(this.raw=x._element,this.element=x._element),this.index=w,this.section=j,this.cells=D,this.spansMultiplePages=T}return f.prototype.getMaxCellHeight=function(x){var w=this;return x.reduce(function(j,D){var T;return Math.max(j,((T=w.cells[D.index])===null||T===void 0?void 0:T.height)||0)},0)},f.prototype.hasRowSpan=function(x){var w=this;return x.filter(function(j){var D=w.cells[j.index];return D?D.rowSpan>1:!1}).length>0},f.prototype.canEntireRowFit=function(x,w){return this.getMaxCellHeight(w)<=x},f.prototype.getMinimumRowHeight=function(x,w){var j=this;return x.reduce(function(D,T){var L=j.cells[T.index];if(!L)return 0;var C=w.getLineHeight(L.styles.fontSize),G=L.padding("vertical"),Z=G+C;return Z>D?Z:D},0)},f}();l.Row=_;var S=function(){function f(x,w,j){var D,T;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=w,this.section=j,this.raw=x;var L=x;x!=null&&typeof x=="object"&&!Array.isArray(x)?(this.rowSpan=x.rowSpan||1,this.colSpan=x.colSpan||1,L=(T=(D=x.content)!==null&&D!==void 0?D:x.title)!==null&&T!==void 0?T:x,x._element&&(this.raw=x._element)):(this.rowSpan=1,this.colSpan=1);var C=L!=null?""+L:"",G=/\r\n|\r|\n/g;this.text=C.split(G)}return f.prototype.getTextPos=function(){var x;if(this.styles.valign==="top")x=this.y+this.padding("top");else if(this.styles.valign==="bottom")x=this.y+this.height-this.padding("bottom");else{var w=this.height-this.padding("vertical");x=this.y+w/2+this.padding("top")}var j;if(this.styles.halign==="right")j=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var D=this.width-this.padding("horizontal");j=this.x+D/2+this.padding("left")}else j=this.x+this.padding("left");return{x:j,y:x}},f.prototype.getContentHeight=function(x,w){w===void 0&&(w=1.15);var j=Array.isArray(this.text)?this.text.length:1,D=this.styles.fontSize/x*w,T=j*D+this.padding("vertical");return Math.max(T,this.styles.minCellHeight)},f.prototype.padding=function(x){var w=(0,v.parseSpacing)(this.styles.cellPadding,0);return x==="vertical"?w.top+w.bottom:x==="horizontal"?w.left+w.right:w[x]},f}();l.Cell=S;var N=function(){function f(x,w,j){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=x,this.raw=w,this.index=j}return f.prototype.getMaxCustomCellWidth=function(x){for(var w=0,j=0,D=x.allRows();j<D.length;j++){var T=D[j],L=T.cells[this.index];L&&typeof L.styles.cellWidth=="number"&&(w=Math.max(w,L.styles.cellWidth))}return w},f}();l.Column=N},356:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function d(g,m,v,p,_){if(g==null)throw new TypeError("Cannot convert undefined or null to object");for(var S=Object(g),N=1;N<arguments.length;N++){var f=arguments[N];if(f!=null)for(var x in f)Object.prototype.hasOwnProperty.call(f,x)&&(S[x]=f[x])}return S}l.assign=d},972:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var g=d(744),m=d(260),v=d(324),p=d(796),_=d(356);function S(T,L){var C=new g.DocHandler(T),G=N(L,C.scaleFactor()),Z=new m.Table(L,G);return(0,v.calculateWidths)(C,Z),C.applyStyles(C.userStyles),Z}l.createTable=S;function N(T,L){var C=T.content,G=j(C.columns);if(C.head.length===0){var Z=x(G,"head");Z&&C.head.push(Z)}if(C.foot.length===0){var Z=x(G,"foot");Z&&C.foot.push(Z)}var R=T.settings.theme,A=T.styles;return{columns:G,head:f("head",C.head,G,A,R,L),body:f("body",C.body,G,A,R,L),foot:f("foot",C.foot,G,A,R,L)}}function f(T,L,C,G,Z,R){var A={},q=L.map(function(K,te){for(var $=0,Q={},V=0,B=0,ie=0,ve=C;ie<ve.length;ie++){var E=ve[ie];if(A[E.index]==null||A[E.index].left===0)if(B===0){var U=void 0;Array.isArray(K)?U=K[E.index-V-$]:U=K[E.dataKey];var X={};typeof U=="object"&&!Array.isArray(U)&&(X=(U==null?void 0:U.styles)||{});var ne=D(T,E,te,Z,G,R,X),P=new m.Cell(U,ne,T);Q[E.dataKey]=P,Q[E.index]=P,B=P.colSpan-1,A[E.index]={left:P.rowSpan-1,times:B}}else B--,V++;else A[E.index].left--,B=A[E.index].times,$++}return new m.Row(K,te,T,Q)});return q}function x(T,L){var C={};return T.forEach(function(G){if(G.raw!=null){var Z=w(L,G.raw);Z!=null&&(C[G.dataKey]=Z)}}),Object.keys(C).length>0?C:null}function w(T,L){if(T==="head"){if(typeof L=="object")return L.header||L.title||null;if(typeof L=="string"||typeof L=="number")return L}else if(T==="foot"&&typeof L=="object")return L.footer;return null}function j(T){return T.map(function(L,C){var G,Z,R;return typeof L=="object"?R=(Z=(G=L.dataKey)!==null&&G!==void 0?G:L.key)!==null&&Z!==void 0?Z:C:R=C,new m.Column(R,L,C)})}function D(T,L,C,G,Z,R,A){var q=(0,p.getTheme)(G),K;T==="head"?K=Z.headStyles:T==="body"?K=Z.bodyStyles:T==="foot"&&(K=Z.footStyles);var te=(0,_.assign)({},q.table,q[T],Z.styles,K),$=Z.columnStyles[L.dataKey]||Z.columnStyles[L.index]||{},Q=T==="body"?$:{},V=T==="body"&&C%2===0?(0,_.assign)({},q.alternateRow,Z.alternateRowStyles):{},B=(0,p.defaultStyles)(R),ie=(0,_.assign)({},B,te,V,Q);return(0,_.assign)(ie,A)}},664:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var g=d(420),m=d(260),v=d(744),p=d(356),_=d(136),S=d(224);function N($,Q){var V=Q.settings,B=V.startY,ie=V.margin,ve={x:ie.left,y:B},E=Q.getHeadHeight(Q.columns)+Q.getFootHeight(Q.columns),U=B+ie.bottom+E;if(V.pageBreak==="avoid"){var X=Q.body,ne=X.reduce(function(J,Y){return J+Y.height},0);U+=ne}var P=new v.DocHandler($);(V.pageBreak==="always"||V.startY!=null&&U>P.pageSize().height)&&(te(P),ve.y=ie.top),Q.callWillDrawPageHooks(P,ve);var H=(0,p.assign)({},ve);Q.startPageNumber=P.pageNumber(),V.horizontalPageBreak?f(P,Q,H,ve):(P.applyStyles(P.userStyles),(V.showHead==="firstPage"||V.showHead==="everyPage")&&Q.head.forEach(function(J){return Z(P,Q,J,ve,Q.columns)}),P.applyStyles(P.userStyles),Q.body.forEach(function(J,Y){var be=Y===Q.body.length-1;G(P,Q,J,be,H,ve,Q.columns)}),P.applyStyles(P.userStyles),(V.showFoot==="lastPage"||V.showFoot==="everyPage")&&Q.foot.forEach(function(J){return Z(P,Q,J,ve,Q.columns)})),(0,g.addTableBorder)(P,Q,H,ve),Q.callEndPageHooks(P,ve),Q.finalY=ve.y,$.lastAutoTable=Q,$.previousAutoTable=Q,$.autoTable&&($.autoTable.previous=Q),P.applyStyles(P.userStyles)}l.drawTable=N;function f($,Q,V,B){var ie=(0,S.calculateAllColumnsCanFitInPage)($,Q),ve=Q.settings;if(ve.horizontalPageBreakBehaviour==="afterAllRows")ie.forEach(function(ne,P){$.applyStyles($.userStyles),P>0?K($,Q,V,B,ne.columns,!0):x($,Q,B,ne.columns),w($,Q,V,B,ne.columns),D($,Q,B,ne.columns)});else for(var E=-1,U=ie[0],X=function(){var ne=E;if(U){$.applyStyles($.userStyles);var P=U.columns;E>=0?K($,Q,V,B,P,!0):x($,Q,B,P),ne=j($,Q,E+1,B,P),D($,Q,B,P)}var H=ne-E;ie.slice(1).forEach(function(J){$.applyStyles($.userStyles),K($,Q,V,B,J.columns,!0),j($,Q,E+1,B,J.columns,H),D($,Q,B,J.columns)}),E=ne};E<Q.body.length-1;)X()}function x($,Q,V,B){var ie=Q.settings;$.applyStyles($.userStyles),(ie.showHead==="firstPage"||ie.showHead==="everyPage")&&Q.head.forEach(function(ve){return Z($,Q,ve,V,B)})}function w($,Q,V,B,ie){$.applyStyles($.userStyles),Q.body.forEach(function(ve,E){var U=E===Q.body.length-1;G($,Q,ve,U,V,B,ie)})}function j($,Q,V,B,ie,ve){$.applyStyles($.userStyles),ve=ve??Q.body.length;var E=Math.min(V+ve,Q.body.length),U=-1;return Q.body.slice(V,E).forEach(function(X,ne){var P=V+ne===Q.body.length-1,H=q($,Q,P,B);X.canEntireRowFit(H,ie)&&(Z($,Q,X,B,ie),U=V+ne)}),U}function D($,Q,V,B){var ie=Q.settings;$.applyStyles($.userStyles),(ie.showFoot==="lastPage"||ie.showFoot==="everyPage")&&Q.foot.forEach(function(ve){return Z($,Q,ve,V,B)})}function T($,Q,V){var B=V.getLineHeight($.styles.fontSize),ie=$.padding("vertical"),ve=Math.floor((Q-ie)/B);return Math.max(0,ve)}function L($,Q,V,B){var ie={};$.spansMultiplePages=!0,$.height=0;for(var ve=0,E=0,U=V.columns;E<U.length;E++){var X=U[E],ne=$.cells[X.index];if(ne){Array.isArray(ne.text)||(ne.text=[ne.text]);var P=new m.Cell(ne.raw,ne.styles,ne.section);P=(0,p.assign)(P,ne),P.text=[];var H=T(ne,Q,B);ne.text.length>H&&(P.text=ne.text.splice(H,ne.text.length));var J=B.scaleFactor(),Y=B.getLineHeightFactor();ne.contentHeight=ne.getContentHeight(J,Y),ne.contentHeight>=Q&&(ne.contentHeight=Q,P.styles.minCellHeight-=Q),ne.contentHeight>$.height&&($.height=ne.contentHeight),P.contentHeight=P.getContentHeight(J,Y),P.contentHeight>ve&&(ve=P.contentHeight),ie[X.index]=P}}var be=new m.Row($.raw,-1,$.section,ie,!0);be.height=ve;for(var we=0,Pe=V.columns;we<Pe.length;we++){var X=Pe[we],P=be.cells[X.index];P&&(P.height=be.height);var ne=$.cells[X.index];ne&&(ne.height=$.height)}return be}function C($,Q,V,B){var ie=$.pageSize().height,ve=B.settings.margin,E=ve.top+ve.bottom,U=ie-E;Q.section==="body"&&(U-=B.getHeadHeight(B.columns)+B.getFootHeight(B.columns));var X=Q.getMinimumRowHeight(B.columns,$),ne=X<V;if(X>U)return console.error("Will not be able to print row ".concat(Q.index," correctly since it's minimum height is larger than page height")),!0;if(!ne)return!1;var P=Q.hasRowSpan(B.columns),H=Q.getMaxCellHeight(B.columns)>U;return H?(P&&console.error("The content of row ".concat(Q.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(P||B.settings.rowPageBreak==="avoid")}function G($,Q,V,B,ie,ve,E){var U=q($,Q,B,ve);if(V.canEntireRowFit(U,E))Z($,Q,V,ve,E);else if(C($,V,U,Q)){var X=L(V,U,Q,$);Z($,Q,V,ve,E),K($,Q,ie,ve,E),G($,Q,X,B,ie,ve,E)}else K($,Q,ie,ve,E),G($,Q,V,B,ie,ve,E)}function Z($,Q,V,B,ie){B.x=Q.settings.margin.left;for(var ve=0,E=ie;ve<E.length;ve++){var U=E[ve],X=V.cells[U.index];if(!X){B.x+=U.width;continue}$.applyStyles(X.styles),X.x=B.x,X.y=B.y;var ne=Q.callCellHooks($,Q.hooks.willDrawCell,X,V,U,B);if(ne===!1){B.x+=U.width;continue}R($,X,B);var P=X.getTextPos();(0,_.default)(X.text,P.x,P.y,{halign:X.styles.halign,valign:X.styles.valign,maxWidth:Math.ceil(X.width-X.padding("left")-X.padding("right"))},$.getDocument()),Q.callCellHooks($,Q.hooks.didDrawCell,X,V,U,B),B.x+=U.width}B.y+=V.height}function R($,Q,V){var B=Q.styles;if($.getDocument().setFillColor($.getDocument().getFillColor()),typeof B.lineWidth=="number"){var ie=(0,g.getFillStyle)(B.lineWidth,B.fillColor);ie&&$.rect(Q.x,V.y,Q.width,Q.height,ie)}else typeof B.lineWidth=="object"&&(B.fillColor&&$.rect(Q.x,V.y,Q.width,Q.height,"F"),A($,Q,V,B.lineWidth))}function A($,Q,V,B){var ie,ve,E,U;B.top&&(ie=V.x,ve=V.y,E=V.x+Q.width,U=V.y,B.right&&(E+=.5*B.right),B.left&&(ie-=.5*B.left),X(B.top,ie,ve,E,U)),B.bottom&&(ie=V.x,ve=V.y+Q.height,E=V.x+Q.width,U=V.y+Q.height,B.right&&(E+=.5*B.right),B.left&&(ie-=.5*B.left),X(B.bottom,ie,ve,E,U)),B.left&&(ie=V.x,ve=V.y,E=V.x,U=V.y+Q.height,B.top&&(ve-=.5*B.top),B.bottom&&(U+=.5*B.bottom),X(B.left,ie,ve,E,U)),B.right&&(ie=V.x+Q.width,ve=V.y,E=V.x+Q.width,U=V.y+Q.height,B.top&&(ve-=.5*B.top),B.bottom&&(U+=.5*B.bottom),X(B.right,ie,ve,E,U));function X(ne,P,H,J,Y){$.getDocument().setLineWidth(ne),$.getDocument().line(P,H,J,Y,"S")}}function q($,Q,V,B){var ie=Q.settings.margin.bottom,ve=Q.settings.showFoot;return(ve==="everyPage"||ve==="lastPage"&&V)&&(ie+=Q.getFootHeight(Q.columns)),$.pageSize().height-B.y-ie}function K($,Q,V,B,ie,ve){ie===void 0&&(ie=[]),ve===void 0&&(ve=!1),$.applyStyles($.userStyles),Q.settings.showFoot==="everyPage"&&!ve&&Q.foot.forEach(function(U){return Z($,Q,U,B,ie)}),Q.callEndPageHooks($,B);var E=Q.settings.margin;(0,g.addTableBorder)($,Q,V,B),te($),Q.pageNumber++,Q.pageCount++,B.x=E.left,B.y=E.top,V.y=E.top,Q.callWillDrawPageHooks($,B),Q.settings.showHead==="everyPage"&&(Q.head.forEach(function(U){return Z($,Q,U,B,ie)}),$.applyStyles($.userStyles))}l.addPage=K;function te($){var Q=$.pageNumber();$.setPage(Q+1);var V=$.pageNumber();return V===Q?($.addPage(),!0):!1}},224:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var g=d(420);function m(p,_,S){var N;S===void 0&&(S={});var f=(0,g.getPageAvailableWidth)(p,_),x=new Map,w=[],j=[],D=[];_.settings.horizontalPageBreakRepeat,Array.isArray(_.settings.horizontalPageBreakRepeat)?D=_.settings.horizontalPageBreakRepeat:(typeof _.settings.horizontalPageBreakRepeat=="string"||typeof _.settings.horizontalPageBreakRepeat=="number")&&(D=[_.settings.horizontalPageBreakRepeat]),D.forEach(function(G){var Z=_.columns.find(function(R){return R.dataKey===G||R.index===G});Z&&!x.has(Z.index)&&(x.set(Z.index,!0),w.push(Z.index),j.push(_.columns[Z.index]),f-=Z.wrappedWidth)});for(var T=!0,L=(N=S==null?void 0:S.start)!==null&&N!==void 0?N:0;L<_.columns.length;){if(x.has(L)){L++;continue}var C=_.columns[L].wrappedWidth;if(T||f>=C)T=!1,w.push(L),j.push(_.columns[L]),f-=C;else break;L++}return{colIndexes:w,columns:j,lastIndex:L-1}}function v(p,_){for(var S=[],N=0;N<_.columns.length;N++){var f=m(p,_,{start:N});f.columns.length&&(S.push(f),N=f.lastIndex)}return S}l.calculateAllColumnsCanFitInPage=v},324:function(o,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var g=d(420);function m(w,j){v(w,j);var D=[],T=0;j.columns.forEach(function(C){var G=C.getMaxCustomCellWidth(j);G?C.width=G:(C.width=C.wrappedWidth,D.push(C)),T+=C.width});var L=j.getWidth(w.pageSize().width)-T;L&&(L=p(D,L,function(C){return Math.max(C.minReadableWidth,C.minWidth)})),L&&(L=p(D,L,function(C){return C.minWidth})),L=Math.abs(L),!j.settings.horizontalPageBreak&&L>.1/w.scaleFactor()&&(L=L<1?L:Math.round(L),console.warn("Of the table content, ".concat(L," units width could not fit page"))),S(j),N(j,w),_(j)}l.calculateWidths=m;function v(w,j){var D=w.scaleFactor(),T=j.settings.horizontalPageBreak,L=(0,g.getPageAvailableWidth)(w,j);j.allRows().forEach(function(C){for(var G=0,Z=j.columns;G<Z.length;G++){var R=Z[G],A=C.cells[R.index];if(A){var q=j.hooks.didParseCell;j.callCellHooks(w,q,A,C,R,null);var K=A.padding("horizontal");A.contentWidth=(0,g.getStringWidth)(A.text,A.styles,w)+K;var te=(0,g.getStringWidth)(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,w);if(A.minReadableWidth=te+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||T===!0)A.contentWidth>L?(A.minWidth=L,A.wrappedWidth=L):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var $=10/D;A.minWidth=A.styles.minCellWidth||$,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),j.allRows().forEach(function(C){for(var G=0,Z=j.columns;G<Z.length;G++){var R=Z[G],A=C.cells[R.index];if(A&&A.colSpan===1)R.wrappedWidth=Math.max(R.wrappedWidth,A.wrappedWidth),R.minWidth=Math.max(R.minWidth,A.minWidth),R.minReadableWidth=Math.max(R.minReadableWidth,A.minReadableWidth);else{var q=j.styles.columnStyles[R.dataKey]||j.styles.columnStyles[R.index]||{},K=q.cellWidth||q.minCellWidth;K&&typeof K=="number"&&(R.minWidth=K,R.wrappedWidth=K)}A&&(A.colSpan>1&&!R.minWidth&&(R.minWidth=A.minWidth),A.colSpan>1&&!R.wrappedWidth&&(R.wrappedWidth=A.minWidth))}})}function p(w,j,D){for(var T=j,L=w.reduce(function($,Q){return $+Q.wrappedWidth},0),C=0;C<w.length;C++){var G=w[C],Z=G.wrappedWidth/L,R=T*Z,A=G.width+R,q=D(G),K=A<q?q:A;j-=K-G.width,G.width=K}if(j=Math.round(j*1e10)/1e10,j){var te=w.filter(function($){return j<0?$.width>D($):!0});te.length&&(j=p(te,j,D))}return j}l.resizeColumns=p;function _(w){for(var j={},D=1,T=w.allRows(),L=0;L<T.length;L++)for(var C=T[L],G=0,Z=w.columns;G<Z.length;G++){var R=Z[G],A=j[R.index];if(D>1)D--,delete C.cells[R.index];else if(A)A.cell.height+=C.height,D=A.cell.colSpan,delete C.cells[R.index],A.left--,A.left<=1&&delete j[R.index];else{var q=C.cells[R.index];if(!q)continue;if(q.height=C.height,q.rowSpan>1){var K=T.length-L,te=q.rowSpan>K?K:q.rowSpan;j[R.index]={cell:q,left:te,row:C}}}}}function S(w){for(var j=w.allRows(),D=0;D<j.length;D++)for(var T=j[D],L=null,C=0,G=0,Z=0;Z<w.columns.length;Z++){var R=w.columns[Z];if(G-=1,G>1&&w.columns[Z+1])C+=R.width,delete T.cells[R.index];else if(L){var A=L;delete T.cells[R.index],L=null,A.width=R.width+C}else{var A=T.cells[R.index];if(!A)continue;if(G=A.colSpan,C=0,A.colSpan>1){L=A,C+=R.width;continue}A.width=R.width+C}}}function N(w,j){for(var D={count:0,height:0},T=0,L=w.allRows();T<L.length;T++){for(var C=L[T],G=0,Z=w.columns;G<Z.length;G++){var R=Z[G],A=C.cells[R.index];if(A){j.applyStyles(A.styles,!0);var q=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=j.splitTextToSize(A.text,q+1/j.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=f(A.text,q,A.styles,j,"...");else if(A.styles.overflow==="hidden")A.text=f(A.text,q,A.styles,j,"");else if(typeof A.styles.overflow=="function"){var K=A.styles.overflow(A.text,q);typeof K=="string"?A.text=[K]:A.text=K}A.contentHeight=A.getContentHeight(j.scaleFactor(),j.getLineHeightFactor());var te=A.contentHeight/A.rowSpan;A.rowSpan>1&&D.count*D.height<te*A.rowSpan?D={height:te,count:A.rowSpan}:D&&D.count>0&&D.height>te&&(te=D.height),te>C.height&&(C.height=te)}}D.count--}}function f(w,j,D,T,L){return w.map(function(C){return x(C,j,D,T,L)})}l.ellipsize=f;function x(w,j,D,T,L){var C=1e4*T.scaleFactor();if(j=Math.ceil(j*C)/C,j>=(0,g.getStringWidth)(w,D,T))return w;for(;j<(0,g.getStringWidth)(w+L,D,T)&&!(w.length<=1);)w=w.substring(0,w.length-1);return w.trim()+L}},964:function(o){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}o.exports=n}},i={};function s(o){var l=i[o];if(l!==void 0)return l.exports;var d=i[o]={exports:{}};return r[o].call(d.exports,d,d.exports,s),d.exports}var a={};return function(){var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.Cell=o.Column=o.Row=o.Table=o.CellHookData=o.__drawTable=o.__createTable=o.applyPlugin=void 0;var l=s(340),d=s(776),g=s(664),m=s(972),v=s(260);Object.defineProperty(o,"Table",{enumerable:!0,get:function(){return v.Table}});var p=s(172);Object.defineProperty(o,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var _=s(260);Object.defineProperty(o,"Cell",{enumerable:!0,get:function(){return _.Cell}}),Object.defineProperty(o,"Column",{enumerable:!0,get:function(){return _.Column}}),Object.defineProperty(o,"Row",{enumerable:!0,get:function(){return _.Row}});function S(j){(0,l.default)(j)}o.applyPlugin=S;function N(j,D){var T=(0,d.parseInput)(j,D),L=(0,m.createTable)(j,T);(0,g.drawTable)(j,L)}function f(j,D){var T=(0,d.parseInput)(j,D);return(0,m.createTable)(j,T)}o.__createTable=f;function x(j,D){(0,g.drawTable)(j,D)}o.__drawTable=x;try{var w=s(964);w.jsPDF&&(w=w.jsPDF),S(w)}catch{}o.default=N}(),a}()})})(Fw);var Gj=Fw.exports;const $o=l0(Gj),Yj=[{value:"docente",label:"Docente"},{value:"amministratore",label:"Amministratore"},{value:"dipendente",label:"Dipendente"}],Kj=({trip:t,onClose:e,onSaved:n})=>{const{state:r,updateTrip:i,getVehiclesForPerson:s,formatDate:a}=Kr(),{showToast:o}=ma(),l=Yr(),[d,g]=fe.useState(""),[m,v]=fe.useState(""),[p,_]=fe.useState(""),[S,N]=fe.useState(""),[f,x]=fe.useState(!1),[w,j]=fe.useState(""),[D,T]=fe.useState(""),[L,C]=fe.useState(""),[G,Z]=fe.useState(!1),[R,A]=fe.useState(""),[q,K]=fe.useState(!1),[te,$]=fe.useState([]),[Q,V]=fe.useState(!1);if(fe.useEffect(()=>{if(!t)return;g(t.date),v(t.origin),_(t.destination),N(t.distance.toString()),x(t.isRoundTrip),j(t.tripRole||""),T(t.vehicleId),C(t.purpose||""),Z(t.hasToll||!1),A(t.tollAmount?t.tollAmount.toString():"");const Y=t.meals&&t.meals.length>0?t.meals.map(be=>({mealType:be.mealType,amount:be.amount})):t.hasMeal&&t.mealType&&t.mealAmount?[{mealType:t.mealType,amount:t.mealAmount}]:[];$(Y),K(Y.length>0)},[t]),fe.useEffect(()=>{const Y=be=>{be.key==="Escape"&&e()};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[e]),!t)return null;const B=s(t.personId),ie=Y=>{K(Y),Y?te.length===0&&$([{mealType:"pranzo",amount:0}]):$([])},ve=()=>{$(Y=>[...Y,{mealType:"cena",amount:0}])},E=Y=>{$(be=>{const we=be.filter((Pe,je)=>je!==Y);return we.length===0&&K(!1),we})},U=(Y,be,we)=>{$(Pe=>Pe.map((je,He)=>He===Y?{...je,[be]:be==="amount"?parseFloat(we)||0:we}:je))},X=async()=>{if(!S||isNaN(parseFloat(S))||parseFloat(S)<=0){o("Inserisci un valore valido per i km","error");return}V(!0);try{const Y={...t,date:d,origin:m.trim(),destination:p.trim(),distance:parseFloat(S),isRoundTrip:f,tripRole:w||void 0,vehicleId:D,purpose:L.trim(),hasToll:G,tollAmount:G&&R?parseFloat(R):void 0,tollEntryStation:G?t.tollEntryStation:void 0,tollExitStation:G?t.tollExitStation:void 0,returnTollEntryStation:G&&f?t.returnTollEntryStation:void 0,returnTollExitStation:G&&f?t.returnTollExitStation:void 0,returnTollAmount:G&&f?t.returnTollAmount:void 0,hasMeal:q&&te.length>0,mealType:void 0,mealAmount:void 0};await i(Y,q&&te.length>0?te:[]),o("Trasferta aggiornata","success"),n(),e()}catch(Y){console.error(Y),o("Errore durante il salvataggio","error")}finally{V(!1)}},ne=parseFloat(S)||0,P=f?ne*2:ne,H=r.vehicles.find(Y=>Y.id===D),J=H?P*H.reimbursementRate:null;return Yh.createPortal(c.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:Y=>{Y.target===Y.currentTarget&&e()},children:c.jsxs("div",{className:"flex min-h-screen items-center justify-center px-4 py-8",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-700 bg-opacity-60 transition-opacity","aria-hidden":"true"}),c.jsxs("div",{className:"relative z-10 w-full max-w-2xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Modifica rapida trasferta"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[a(t.date),"  ",t.origin,"  ",t.destination]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>{e(),l(`/tragitti/${t.id}`)},className:"inline-flex items-center gap-1.5 text-xs text-teal-600 hover:text-teal-800 font-medium transition-colors px-2 py-1 rounded hover:bg-teal-50",title:"Apri scheda completa",children:[c.jsx(Fm,{size:13}),"Scheda completa"]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors rounded p-1 hover:bg-gray-100",children:c.jsx(kl,{size:20})})]})]}),c.jsxs("div",{className:"px-6 py-5 space-y-5",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Data"}),c.jsx("input",{type:"date",value:d,onChange:Y=>g(Y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ruolo trasferta"}),c.jsxs("select",{value:w,onChange:Y=>j(Y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none bg-white",children:[c.jsx("option",{value:"",children:"-- nessun ruolo --"}),Yj.map(Y=>c.jsx("option",{value:Y.value,children:Y.label},Y.value))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Origine"}),c.jsx("input",{type:"text",value:m,onChange:Y=>v(Y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Destinazione"}),c.jsx("input",{type:"text",value:p,onChange:Y=>_(Y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Km (solo andata)"}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"number",min:"0",step:"0.1",value:S,onChange:Y=>N(Y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none"}),c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none whitespace-nowrap",children:[c.jsx("input",{type:"checkbox",checked:f,onChange:Y=>x(Y.target.checked),className:"h-4 w-4 text-teal-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-xs font-medium text-gray-700",children:"A/R"})]})]}),ne>0&&c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Totale: ",c.jsxs("span",{className:"font-medium",children:[P.toFixed(1)," km"]}),J!==null&&c.jsxs("span",{className:"ml-2 text-teal-700 font-medium",children:[J.toFixed(2)," "]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Veicolo"}),c.jsx("select",{value:D,onChange:Y=>T(Y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none bg-white",children:B.map(Y=>c.jsxs("option",{value:Y.id,children:[Y.make," ",Y.model," (",Y.plate,")  ",Y.reimbursementRate.toFixed(4)," /km"]},Y.id))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Motivo"}),c.jsx("input",{type:"text",value:L,onChange:Y=>C(Y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none"})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:G,onChange:Y=>Z(Y.target.checked),className:"h-4 w-4 text-teal-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pedaggio autostradale"})]}),G&&c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Importo pedaggio ",f?"(solo andata; il ritorno rimane invariato)":""]}),c.jsx("input",{type:"number",min:"0",step:"0.01",value:R,onChange:Y=>A(Y.target.value),className:"w-32 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",placeholder:"0.00"}),c.jsx("span",{className:"ml-2 text-sm text-gray-500",children:""}),f&&t.returnTollAmount&&c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Ritorno: ",t.returnTollAmount.toFixed(2),"  (invariato, modifica dalla scheda completa)"]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:q,onChange:Y=>ie(Y.target.checked),className:"h-4 w-4 text-teal-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Rimborso pasto"})]}),q&&c.jsxs("div",{className:"space-y-2",children:[te.map((Y,be)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("select",{value:Y.mealType,onChange:we=>U(be,"mealType",we.target.value),className:"border border-gray-300 rounded-lg px-2 py-1.5 text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none bg-white",children:[c.jsx("option",{value:"pranzo",children:"Pranzo"}),c.jsx("option",{value:"cena",children:"Cena"})]}),c.jsx("input",{type:"number",min:"0",step:"0.01",value:Y.amount||"",onChange:we=>U(be,"amount",we.target.value),className:"w-28 border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",placeholder:"0.00"}),c.jsx("span",{className:"text-sm text-gray-500",children:""}),c.jsx("button",{onClick:()=>E(be),className:"text-red-400 hover:text-red-600 transition-colors",children:c.jsx(kl,{size:16})})]},be)),c.jsx("button",{onClick:ve,className:"text-xs text-teal-600 hover:text-teal-800 font-medium transition-colors",children:"+ Aggiungi pasto"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:[c.jsx(gt,{variant:"secondary",onClick:e,disabled:Q,children:"Annulla"}),c.jsx(gt,{variant:"primary",icon:c.jsx(kh,{size:16}),onClick:X,disabled:Q,children:Q?"Salvataggio...":"Salva modifiche"})]})]})]})}),document.body)},qo=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"];function Ms(t){return"dateFrom"in t&&t.dateFrom instanceof Date}const Jj=()=>{var An,Et;const{state:t,generateMonthlyReport:e,generatePeriodReport:n,getPerson:r,getVehicle:i,formatDate:s}=Kr(),[a,o]=fe.useState(""),[l,d]=fe.useState(new Date().getMonth().toString()),[g,m]=fe.useState(new Date().getFullYear().toString()),[v,p]=fe.useState("mensile"),[_,S]=fe.useState("1"),[N,f]=fe.useState("1"),[x,w]=fe.useState(""),[j,D]=fe.useState(""),[T,L]=fe.useState(null),[C,G]=fe.useState(!0),[Z,R]=fe.useState(!0),[A,q]=fe.useState(!0),[K,te]=fe.useState("all"),[$,Q]=fe.useState([]),[V,B]=fe.useState("include"),[ie,ve]=fe.useState(null),[E,U]=fe.useState(!1),[X,ne]=fe.useState(null),P=Array.from({length:12},(de,le)=>({value:le.toString(),label:qo[le]})),H=new Date().getFullYear(),J=Array.from({length:5},(de,le)=>({value:(H-le).toString(),label:(H-le).toString()})),Y=[{value:"1",label:"1 Trimestre (Gen  Mar)"},{value:"2",label:"2 Trimestre (Apr  Giu)"},{value:"3",label:"3 Trimestre (Lug  Set)"},{value:"4",label:"4 Trimestre (Ott  Dic)"}],be=[{value:"1",label:"1 Semestre (Gen  Giu)"},{value:"2",label:"2 Semestre (Lug  Dic)"}],we=t.people.filter(de=>!C&&!Z&&!A?!0:C&&de.isDocente||Z&&de.isAmministratore||A&&de.isDipendente).sort((de,le)=>de.surname.localeCompare(le.surname)||de.name.localeCompare(le.name)),Pe=(de,le)=>{const Ze=[0,3,6,9],Lt=[2,5,8,11],Ge=Ze[de-1],_t=Lt[de-1];return{dateFrom:new Date(le,Ge,1),dateTo:new Date(le,_t+1,0),label:`${de} Trimestre ${le} (${qo[Ge]}  ${qo[_t]})`}},je=(de,le)=>de===1?{dateFrom:new Date(le,0,1),dateTo:new Date(le,5,30),label:`1 Semestre ${le} (Gennaio  Giugno)`}:{dateFrom:new Date(le,6,1),dateTo:new Date(le,11,31),label:`2 Semestre ${le} (Luglio  Dicembre)`},He=(de,le,Ze)=>{if(le.length===0)return de;const Lt=de.trips.filter(ut=>Ze==="include"?le.includes(ut.destination):!le.includes(ut.destination));let Ge=0,_t=0,nt=0,Ve=0;return Lt.forEach(ut=>{const St=i(ut.vehicleId);if(St){const rt=ut.isRoundTrip?ut.distance*2:ut.distance;Ge+=rt,_t+=rt*St.reimbursementRate}ut.hasToll&&ut.tollAmount&&(nt+=ut.isRoundTrip?ut.tollAmount*2:ut.tollAmount),ut.isRoundTrip&&ut.returnTollAmount&&(nt+=ut.returnTollAmount),ut.meals&&ut.meals.length>0?ut.meals.forEach(rt=>{Ve+=rt.amount}):ut.hasMeal&&ut.mealAmount&&(Ve+=ut.mealAmount)}),{...de,trips:Lt,totalDistance:Ge,totalReimbursement:_t,totalTollFees:nt,totalMealReimbursement:Ve}},Ne=(de,le)=>{if(le==="all")return de;const Ze=de.trips.filter(Ve=>Ve.tripRole===le);let Lt=0,Ge=0,_t=0,nt=0;return Ze.forEach(Ve=>{const ut=i(Ve.vehicleId);if(ut){const St=Ve.isRoundTrip?Ve.distance*2:Ve.distance;Lt+=St,Ge+=St*ut.reimbursementRate}Ve.hasToll&&Ve.tollAmount&&(_t+=Ve.isRoundTrip?Ve.tollAmount*2:Ve.tollAmount),Ve.isRoundTrip&&Ve.returnTollAmount&&(_t+=Ve.returnTollAmount),Ve.meals&&Ve.meals.length>0?Ve.meals.forEach(St=>{nt+=St.amount}):Ve.hasMeal&&Ve.mealAmount&&(nt+=Ve.mealAmount)}),{...de,trips:Ze,totalDistance:Lt,totalReimbursement:Ge,totalTollFees:_t,totalMealReimbursement:nt}},se=()=>{if(!a)return;U(!1);const de=parseInt(g);let le=null;if(v==="mensile")le=e(a,parseInt(l),de);else if(v==="trimestrale"){const{dateFrom:Ve,dateTo:ut,label:St}=Pe(parseInt(_),de);le=n(a,Ve,ut,St)}else if(v==="semestrale"){const{dateFrom:Ve,dateTo:ut,label:St}=je(parseInt(N),de);le=n(a,Ve,ut,St)}else if(v==="personalizzato"){if(!x||!j)return;const Ve=new Date(x),ut=new Date(j),St=`${Ve.toLocaleDateString("it-IT")}  ${ut.toLocaleDateString("it-IT")}`;le=n(a,Ve,ut,St)}if(!le){L(null),U(!0);return}const Ze={docente:0,amministratore:0,dipendente:0};le.trips.forEach(Ve=>{Ve.tripRole&&(Ze[Ve.tripRole]=(Ze[Ve.tripRole]||0)+1)});const Lt=Object.entries(Ze).filter(([Ve,ut])=>ut>0);ve({hasMultipleRoles:Lt.length>1,roleCounts:Ze});const Ge=$.length>0?t.favoriteDestinations.filter(Ve=>$.includes(Ve.id)).map(Ve=>Ve.address):[],_t=He(le,Ge,V),nt=Ne(_t,K);L(nt)},Qe=()=>{se()},Ue=de=>{Q(le=>le.includes(de)?le.filter(Ze=>Ze!==de):[...le,de])},Le=de=>Ms(de)?de.periodLabel:`${qo[de.month]} ${de.year}`,Oe=(de,le)=>{const Ze=[],Lt=new Date(de.getFullYear(),de.getMonth(),1),Ge=new Date(le.getFullYear(),le.getMonth(),1);for(;Lt<=Ge;)Ze.push({month:Lt.getMonth(),year:Lt.getFullYear(),label:`${qo[Lt.getMonth()]} ${Lt.getFullYear()}`}),Lt.setMonth(Lt.getMonth()+1);return Ze},ae=(de,le,Ze)=>Oe(le,Ze).map(Ge=>({...Ge,trips:de.filter(_t=>{const nt=new Date(_t.date);return nt.getMonth()===Ge.month&&nt.getFullYear()===Ge.year})})).filter(Ge=>Ge.trips.length>0),oe=(de,le,Ze)=>Oe(le,Ze).map(Ge=>({...Ge,expenses:de.filter(_t=>{const nt=new Date(_t.date);return nt.getMonth()===Ge.month&&nt.getFullYear()===Ge.year})})).filter(Ge=>Ge.expenses.length>0),ye=de=>{if(!de)return null;const Ze={docente:{label:"Docente",bg:"bg-teal-100",text:"text-teal-700"},amministratore:{label:"Amministratore",bg:"bg-blue-100",text:"text-blue-700"},dipendente:{label:"Dipendente",bg:"bg-gray-100",text:"text-gray-700"}}[de]||{label:de,bg:"bg-gray-100",text:"text-gray-700"};return c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${Ze.bg} ${Ze.text}`,children:Ze.label})},De=de=>de.meals&&de.meals.length>0?de.meals.reduce((le,Ze)=>le+Ze.amount,0):de.hasMeal&&de.mealAmount?de.mealAmount:0,Me=de=>de.meals&&de.meals.length>0?de.meals.map(le=>le.mealType==="pranzo"?"P":"C").join("+"):de.hasMeal&&de.mealType?de.mealType==="pranzo"?"Pranzo":"Cena":"",me=()=>!T||!Ms(T)?!1:Oe(T.dateFrom,T.dateTo).length>1,bt=()=>{if(!T)return;const de=r(T.personId);if(!de)return;const le=new at,Ze=Le(T),Lt=`${de.name} ${de.surname}`,Ge=[0,0,0],_t=[50,50,50],nt=[120,120,120],Ve=[240,240,240],ut=[255,255,255],St=[220,220,220],rt={docente:"Docente",amministratore:"Amministratore",dipendente:"Dipendente"};le.setDrawColor(...nt),le.setLineWidth(.3),le.line(14,8,196,8),le.setFontSize(15),le.setFont("helvetica","bold"),le.setTextColor(...Ge),le.text("NOTA SPESE DI TRASFERTA",14,16);const Rt=K!=="all"?rt[K]:null,Ti=$.length>0?(V==="exclude"?"Escl.: ":"")+t.favoriteDestinations.filter(Vt=>$.includes(Vt.id)).map(Vt=>Vt.name).join(", "):null,fn=[Lt,Ze];Rt&&fn.push(Rt),Ti&&fn.push(Ti),le.setFontSize(9),le.setFont("helvetica","normal"),le.setTextColor(..._t),le.text(fn.join("  |  "),14,22),le.setFontSize(8),le.setFont("helvetica","bold"),le.setTextColor(...Ge),le.text(Id.ragioneSociale,196,12,{align:"right"}),le.setFont("helvetica","normal"),le.setTextColor(..._t),le.setFontSize(7.5),le.text(`P.IVA / C.F.: ${Id.partitaIva}`,196,17,{align:"right"}),le.text(`REA: ${Id.rea}`,196,22,{align:"right"}),le.setDrawColor(...nt),le.setLineWidth(.3),le.line(14,26,196,26);let Je=34;const Cr=T.totalReimbursement+T.totalTollFees+T.totalMealReimbursement+T.totalExpenses+T.totalAccommodations;if($o(le,{startY:Je,head:[["Voce di Spesa","Importo"]],body:[["Rimborso Chilometrico",`${T.totalReimbursement.toFixed(2)} `],["Pedaggi Autostradali",`${T.totalTollFees.toFixed(2)} `],["Rimborsi Vitto (Pasti)",`${T.totalMealReimbursement.toFixed(2)} `],["Spese Documentate",`${T.totalExpenses.toFixed(2)} `],["Alloggi",`${T.totalAccommodations.toFixed(2)} `]],foot:[["TOTALE RIMBORSO SPESE",`${Cr.toFixed(2)} `]],theme:"grid",headStyles:{fillColor:Ve,textColor:Ge,fontStyle:"bold",lineColor:nt},footStyles:{fillColor:Ve,textColor:Ge,fontStyle:"bold",fontSize:10,lineColor:nt},bodyStyles:{textColor:_t,lineColor:Ve},columnStyles:{1:{halign:"right",fontStyle:"bold"}},margin:{left:14,right:14}}),Je=le.lastAutoTable.finalY+10,T.trips.length>0)if(le.setFontSize(11),le.setFont("helvetica","bold"),le.setTextColor(..._t),le.text("Rimborsi Chilometrici",14,Je),Je+=4,Ms(T)&&Oe(T.dateFrom,T.dateTo).length>1&&Ms(T)){const Ft=ae(T.trips,T.dateFrom,T.dateTo);for(const ht of Ft){Je>240&&(le.addPage(),Je=20),le.setFontSize(9),le.setFont("helvetica","bold"),le.setTextColor(..._t),le.setFillColor(...St),le.rect(14,Je,182,6,"F"),le.text(ht.label,16,Je+4.2),Je+=8;const kt=ht.trips.map(jt=>{const Lr=i(jt.vehicleId),vr=jt.isRoundTrip?jt.distance*2:jt.distance,Yn=Lr?(vr*Lr.reimbursementRate).toFixed(2)+" ":"-",or=jt.hasToll&&jt.tollAmount?(jt.isRoundTrip?jt.tollAmount*2:jt.tollAmount).toFixed(2)+" ":"-",Kn=De(jt),lr=Kn>0?`${Kn.toFixed(2)}  (${Me(jt)})`:"-",yr=jt.tripRole?rt[jt.tripRole]??jt.tripRole:"-";return[(()=>{const Rr=new Date(jt.date);return`${Rr.getDate()}/${Rr.getMonth()+1}`})(),`${jt.origin} -> ${jt.destination}${jt.isRoundTrip?" (A/R)":""}`,Lr?Lr.plate:"-",`${vr.toFixed(1)} km`,Yn,or,lr,yr,jt.purpose||"-"]});$o(le,{startY:Je,head:[["Data","Percorso","Targa","Km","Rimborso","Pedaggio","Vitto","Ruolo","Motivo"]],body:kt,theme:"grid",headStyles:{fillColor:Ve,textColor:Ge,fontStyle:"bold",fontSize:8,lineColor:nt},bodyStyles:{fontSize:7.5,textColor:_t,lineColor:Ve},alternateRowStyles:{fillColor:ut},columnStyles:{0:{cellWidth:12},1:{cellWidth:38},2:{cellWidth:18},3:{cellWidth:14},4:{cellWidth:18},5:{cellWidth:16},6:{cellWidth:18},7:{cellWidth:22}},margin:{left:14,right:14}}),Je=le.lastAutoTable.finalY+6}Je+=4}else{const Ft=T.trips.map(ht=>{const kt=i(ht.vehicleId),jt=ht.isRoundTrip?ht.distance*2:ht.distance,Lr=kt?(jt*kt.reimbursementRate).toFixed(2)+" ":"-",vr=ht.hasToll&&ht.tollAmount?(ht.isRoundTrip?ht.tollAmount*2:ht.tollAmount).toFixed(2)+" ":"-",Yn=De(ht),or=Yn>0?`${Yn.toFixed(2)}  (${Me(ht)})`:"-",Kn=ht.tripRole?rt[ht.tripRole]??ht.tripRole:"-";return[(()=>{const lr=new Date(ht.date);return`${lr.getDate()}/${lr.getMonth()+1}`})(),`${ht.origin} -> ${ht.destination}${ht.isRoundTrip?" (A/R)":""}`,kt?kt.plate:"-",`${jt.toFixed(1)} km`,Lr,vr,or,Kn,ht.purpose||"-"]});$o(le,{startY:Je,head:[["Data","Percorso","Targa","Km","Rimborso","Pedaggio","Vitto","Ruolo","Motivo"]],body:Ft,theme:"grid",headStyles:{fillColor:Ve,textColor:Ge,fontStyle:"bold",fontSize:8,lineColor:nt},bodyStyles:{fontSize:7.5,textColor:_t,lineColor:Ve},alternateRowStyles:{fillColor:ut},columnStyles:{0:{cellWidth:12},1:{cellWidth:38},2:{cellWidth:18},3:{cellWidth:14},4:{cellWidth:18},5:{cellWidth:16},6:{cellWidth:18},7:{cellWidth:22}},margin:{left:14,right:14}}),Je=le.lastAutoTable.finalY+10}if(T.expenses.length>0)if(Je>240&&(le.addPage(),Je=20),le.setFontSize(11),le.setFont("helvetica","bold"),le.setTextColor(..._t),le.text("Spese di Viaggio e Trasferimento",14,Je),Je+=4,Ms(T)&&Oe(T.dateFrom,T.dateTo).length>1&&Ms(T)){const Ft=oe(T.expenses,T.dateFrom,T.dateTo);for(const ht of Ft)Je>240&&(le.addPage(),Je=20),le.setFontSize(9),le.setFont("helvetica","bold"),le.setTextColor(..._t),le.setFillColor(...St),le.rect(14,Je,182,6,"F"),le.text(ht.label,16,Je+4.2),Je+=8,$o(le,{startY:Je,head:[["Data","Tipo","Dettaglio","Importo"]],body:ht.expenses.map(kt=>[new Date(kt.date).toLocaleDateString("it-IT"),cs[kt.expenseType],kt.fromLocation&&kt.toLocation?`${kt.fromLocation} -> ${kt.toLocation}`:kt.description||"-",`${kt.amount.toFixed(2)} `]),theme:"grid",headStyles:{fillColor:Ve,textColor:Ge,fontStyle:"bold",fontSize:9,lineColor:nt},bodyStyles:{textColor:_t,lineColor:Ve},alternateRowStyles:{fillColor:ut},columnStyles:{3:{halign:"right",fontStyle:"bold"}},margin:{left:14,right:14}}),Je=le.lastAutoTable.finalY+6;Je>240&&(le.addPage(),Je=20),le.setFontSize(9),le.setFont("helvetica","bold"),le.setTextColor(..._t),le.text(`Totale Spese Documentate: ${T.totalExpenses.toFixed(2)} `,196,Je,{align:"right"}),Je+=10}else $o(le,{startY:Je,head:[["Data","Tipo","Dettaglio","Importo"]],body:T.expenses.map(Ft=>[new Date(Ft.date).toLocaleDateString("it-IT"),cs[Ft.expenseType],Ft.fromLocation&&Ft.toLocation?`${Ft.fromLocation} -> ${Ft.toLocation}`:Ft.description||"-",`${Ft.amount.toFixed(2)} `]),foot:[["","","TOTALE",`${T.totalExpenses.toFixed(2)} `]],theme:"grid",headStyles:{fillColor:Ve,textColor:Ge,fontStyle:"bold",fontSize:9,lineColor:nt},bodyStyles:{textColor:_t,lineColor:Ve},footStyles:{fontStyle:"bold",fillColor:Ve,textColor:Ge,lineColor:nt},alternateRowStyles:{fillColor:ut},columnStyles:{3:{halign:"right",fontStyle:"bold"}},margin:{left:14,right:14}}),Je=le.lastAutoTable.finalY+10;T.accommodations.length>0&&(Je>240&&(le.addPage(),Je=20),le.setFontSize(11),le.setFont("helvetica","bold"),le.setTextColor(..._t),le.text("Alloggi",14,Je),Je+=4,$o(le,{startY:Je,head:[["Periodo","Luogo","Importo"]],body:T.accommodations.map(Vt=>[`${new Date(Vt.dateFrom).toLocaleDateString("it-IT")} -> ${new Date(Vt.dateTo).toLocaleDateString("it-IT")}`,Vt.location||"-",`${Vt.amount.toFixed(2)} `]),foot:[["","TOTALE",`${T.totalAccommodations.toFixed(2)} `]],theme:"grid",headStyles:{fillColor:Ve,textColor:Ge,fontStyle:"bold",fontSize:9,lineColor:nt},bodyStyles:{textColor:_t,lineColor:Ve},footStyles:{fontStyle:"bold",fillColor:Ve,textColor:Ge,lineColor:nt},alternateRowStyles:{fillColor:ut},columnStyles:{2:{halign:"right",fontStyle:"bold"}},margin:{left:14,right:14}}),Je=le.lastAutoTable.finalY+10),Je>230&&(le.addPage(),Je=20),le.setDrawColor(...nt),le.setLineWidth(.3),le.line(14,Je,196,Je),Je+=8,le.setFontSize(12),le.setFont("helvetica","bold"),le.setTextColor(...Ge),le.text("TOTALE RIMBORSO SPESE:",14,Je),le.text(`${Cr.toFixed(2)} `,196,Je,{align:"right"}),Je+=16,le.setFontSize(8.5),le.setFont("helvetica","normal"),le.setTextColor(...nt),le.text("Firmare e allegare tutta la relativa documentazione (ricevute, scontrini, biglietti, ecc.)",14,Je),Je+=12,le.setTextColor(..._t),le.text("Firma:",14,Je),le.setDrawColor(...nt),le.line(40,Je,100,Je),le.text("Data:",120,Je),le.line(135,Je,196,Je);const it=le.internal.getNumberOfPages();for(let Vt=1;Vt<=it;Vt++)le.setPage(Vt),le.setDrawColor(...Ve),le.setLineWidth(.3),le.line(14,287,196,287),le.setFontSize(7),le.setTextColor(...nt),le.text(`${Lt} - ${Ze}`,14,291),le.text(`P.IVA ${Id.partitaIva}`,105,291,{align:"center"}),le.text(`Pagina ${Vt} di ${it}`,196,291,{align:"right"});const Tr=v==="mensile"?`${qo[parseInt(l)].toLowerCase()}-${g}`:v==="trimestrale"?`T${_}-${g}`:v==="semestrale"?`S${N}-${g}`:`${x}_${j}`;le.save(`nota-spese_${de.surname.toLowerCase()}_${Tr}.pdf`)},Tt=[{key:"date",header:"Data",render:de=>c.jsx("span",{children:s(de.date)})},{key:"route",header:"Percorso",render:de=>c.jsxs("span",{children:[de.origin,"  ",de.destination,de.isRoundTrip&&c.jsx("span",{className:"ml-1 text-teal-600",children:"(A/R)"})]})},{key:"role",header:"Ruolo",render:de=>ye(de.tripRole)},{key:"vehicle",header:"Veicolo",render:de=>{const le=i(de.vehicleId);return le?c.jsxs("span",{children:[le.make," ",le.model," (",le.plate,")"]}):c.jsx("span",{className:"text-red-500",children:"N/D"})}},{key:"distance",header:"Km",render:de=>{const le=de.isRoundTrip?de.distance*2:de.distance;return c.jsxs("span",{children:[le.toFixed(1)," km"]})}},{key:"reimbursement",header:"Rimborso km",render:de=>{const le=i(de.vehicleId);if(!le)return c.jsx("span",{children:"-"});const Ze=de.isRoundTrip?de.distance*2:de.distance;return c.jsxs("span",{className:"font-medium",children:[(Ze*le.reimbursementRate).toFixed(2)," "]})}},{key:"toll",header:"Pedaggio",render:de=>{if(de.hasToll&&de.tollAmount){const le=de.isRoundTrip?de.tollAmount*2:de.tollAmount;return c.jsxs("span",{className:"font-medium text-amber-700",children:[le.toFixed(2)," "]})}return c.jsx("span",{className:"text-gray-400",children:"-"})}},{key:"meal",header:"Vitto",render:de=>{const le=De(de);return le>0?c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{className:"font-medium text-green-700",children:[le.toFixed(2)," "]}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",Me(de),")"]})]}):c.jsx("span",{className:"text-gray-400",children:"-"})}},{key:"purpose",header:"Motivo"},{key:"actions",header:"",render:de=>c.jsxs("button",{onClick:()=>ne(de),className:"inline-flex items-center gap-1 text-xs text-teal-600 hover:text-teal-800 font-medium transition-colors px-2 py-1 rounded hover:bg-teal-50",title:"Modifica trasferta",children:[c.jsx(Jh,{size:13}),"Modifica"]})}],tt=me(),yt=T&&Ms(T)?T.dateFrom:null,Be=T&&Ms(T)?T.dateTo:null;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Report Trasferte"}),c.jsxs(zn,{children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Genera Report"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtra persone per Ruolo"}),c.jsx("div",{className:"flex flex-wrap gap-4",children:[{key:"filterDocenti",value:C,set:G,label:"Docenti"},{key:"filterAmministratori",value:Z,set:R,label:"Amministratori"},{key:"filterDipendenti",value:A,set:q,label:"Dipendenti"}].map(de=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:de.value,onChange:le=>de.set(le.target.checked),className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:de.label})]},de.key))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsx(hn,{id:"personId",label:"Seleziona Persona",options:[{value:"",label:"Seleziona..."},...we.map(de=>{const le=[];return de.isDocente&&le.push("D"),de.isAmministratore&&le.push("A"),de.isDipendente&&le.push("Dip"),{value:de.id,label:`${de.surname} ${de.name} (${le.join(", ")})`}})],value:a,onChange:de=>o(de.target.value)}),c.jsx(hn,{id:"tripRole",label:"Filtra per Ruolo Trasferta",options:[{value:"all",label:"Tutti i ruoli"},{value:"docente",label:"Solo Docente"},{value:"amministratore",label:"Solo Amministratore"},{value:"dipendente",label:"Solo Dipendente"}],value:K,onChange:de=>te(de.target.value)})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo di Periodo"}),c.jsx("div",{className:"flex flex-wrap gap-3",children:[{value:"mensile",label:"Mensile"},{value:"trimestrale",label:"Trimestrale"},{value:"semestrale",label:"Semestrale"},{value:"personalizzato",label:"Personalizzato"}].map(de=>c.jsx("button",{onClick:()=>p(de.value),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-colors ${v===de.value?"bg-teal-600 text-white border-teal-600":"bg-white text-gray-700 border-gray-300 hover:border-teal-400"}`,children:de.label},de.value))})]}),v==="mensile"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsx(hn,{id:"month",label:"Mese",options:P,value:l,onChange:de=>d(de.target.value)}),c.jsx(hn,{id:"year",label:"Anno",options:J,value:g,onChange:de=>m(de.target.value)})]}),v==="trimestrale"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsx(hn,{id:"quarter",label:"Trimestre",options:Y,value:_,onChange:de=>S(de.target.value)}),c.jsx(hn,{id:"year",label:"Anno",options:J,value:g,onChange:de=>m(de.target.value)})]}),v==="semestrale"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsx(hn,{id:"semester",label:"Semestre",options:be,value:N,onChange:de=>f(de.target.value)}),c.jsx(hn,{id:"year",label:"Anno",options:J,value:g,onChange:de=>m(de.target.value)})]}),v==="personalizzato"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsx(Pt,{id:"dateFrom",label:"Data Inizio",type:"date",value:x,onChange:de=>w(de.target.value)}),c.jsx(Pt,{id:"dateTo",label:"Data Fine",type:"date",value:j,onChange:de=>D(de.target.value)})]}),t.favoriteDestinations.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Filtra per Destinazione Abituale"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden text-xs",children:[c.jsx("button",{onClick:()=>B("include"),className:`px-3 py-1.5 font-medium transition-colors ${V==="include"?"bg-teal-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"Includi"}),c.jsx("button",{onClick:()=>B("exclude"),className:`px-3 py-1.5 font-medium border-l border-gray-300 transition-colors ${V==="exclude"?"bg-red-600 text-white border-red-600":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"Escludi"})]}),$.length>0&&c.jsx("button",{onClick:()=>Q([]),className:"text-xs text-teal-600 hover:text-teal-800 font-medium transition-colors",children:"Deseleziona tutte"})]})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:t.favoriteDestinations.slice().sort((de,le)=>de.name.localeCompare(le.name)).map(de=>c.jsxs("button",{onClick:()=>Ue(de.id),className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium border transition-all ${$.includes(de.id)?V==="include"?"bg-teal-600 text-white border-teal-600":"bg-red-600 text-white border-red-600":"bg-white text-gray-600 border-gray-300 hover:border-teal-400"}`,children:[c.jsx(Nl,{size:11,className:"mr-1.5"}),de.name]},de.id))}),$.length>0&&c.jsx("p",{className:`mt-2 text-xs ${V==="include"?"text-teal-700":"text-red-700"}`,children:V==="include"?`Verranno incluse solo le trasferte verso: ${t.favoriteDestinations.filter(de=>$.includes(de.id)).map(de=>de.name).join(", ")}`:`Verranno escluse le trasferte verso: ${t.favoriteDestinations.filter(de=>$.includes(de.id)).map(de=>de.name).join(", ")}`})]}),c.jsx(gt,{variant:"primary",icon:c.jsx(bp,{size:18}),onClick:se,disabled:!a||v==="personalizzato"&&(!x||!j),children:"Genera Report"})]}),E&&c.jsx("div",{className:"border-t border-gray-200 pt-6 text-center py-6",children:c.jsx("p",{className:"text-gray-500",children:"Nessuna trasferta, spesa o alloggio registrati per il periodo selezionato."})}),T&&c.jsxs("div",{className:"border-t border-gray-200 pt-6 space-y-6",children:[(ie==null?void 0:ie.hasMultipleRoles)&&K==="all"&&c.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(n_,{className:"h-5 w-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-amber-800 mb-1",children:"Trasferte in Piu' Ruoli Rilevate"}),c.jsxs("ul",{className:"text-sm text-amber-700 list-disc list-inside mb-2",children:[ie.roleCounts.docente>0&&c.jsxs("li",{children:[c.jsx("strong",{children:ie.roleCounts.docente})," trasferte come ",c.jsx("strong",{children:"Docente"})]}),ie.roleCounts.amministratore>0&&c.jsxs("li",{children:[c.jsx("strong",{children:ie.roleCounts.amministratore})," trasferte come ",c.jsx("strong",{children:"Amministratore"})]}),ie.roleCounts.dipendente>0&&c.jsxs("li",{children:[c.jsx("strong",{children:ie.roleCounts.dipendente})," trasferte come ",c.jsx("strong",{children:"Dipendente"})]})]}),c.jsx("p",{className:"text-sm text-amber-700",children:"Si consiglia di generare report separati per ogni ruolo usando il filtro apposito."})]})]})}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:[(An=r(T.personId))==null?void 0:An.name," ",(Et=r(T.personId))==null?void 0:Et.surname]}),K!=="all"&&ye(K)]}),c.jsx("p",{className:"text-sm text-gray-600",children:Le(T)})]}),c.jsx(gt,{variant:"primary",icon:c.jsx(u_,{size:18}),onClick:bt,children:"Scarica PDF"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[{label:"Km totali",value:`${T.totalDistance.toFixed(1)} km`,colorClass:"bg-blue-50 border-blue-100",icon:c.jsx(oc,{className:"h-5 w-5 text-blue-500"})},{label:"Rimborso km",value:`${T.totalReimbursement.toFixed(2)} `,colorClass:"bg-teal-50 border-teal-100",icon:c.jsx(bp,{className:"h-5 w-5 text-teal-500"})},{label:"Pedaggi",value:`${T.totalTollFees.toFixed(2)} `,colorClass:"bg-amber-50 border-amber-100",icon:c.jsx(Dm,{className:"h-5 w-5 text-amber-500"})},{label:"Vitto (pasti)",value:`${T.totalMealReimbursement.toFixed(2)} `,colorClass:"bg-green-50 border-green-100",icon:c.jsx(q5,{className:"h-5 w-5 text-green-500"})},{label:"Spese doc.",value:`${T.totalExpenses.toFixed(2)} `,colorClass:"bg-orange-50 border-orange-100",icon:c.jsx(ac,{className:"h-5 w-5 text-orange-500"})},{label:"Alloggi",value:`${T.totalAccommodations.toFixed(2)} `,colorClass:"bg-sky-50 border-sky-100",icon:c.jsx(Sh,{className:"h-5 w-5 text-sky-500"})}].map(de=>c.jsxs("div",{className:`${de.colorClass} p-3 rounded-lg border`,children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[de.icon,c.jsx("span",{className:"text-xs font-medium text-gray-600",children:de.label})]}),c.jsx("p",{className:"text-sm font-bold text-gray-900",children:de.value})]},de.label))}),c.jsx("div",{className:"bg-gray-900 p-5 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-gray-300 font-medium",children:"TOTALE RIMBORSO SPESE"}),c.jsxs("span",{className:"text-2xl font-bold text-white",children:[(T.totalReimbursement+T.totalTollFees+T.totalMealReimbursement+T.totalExpenses+T.totalAccommodations).toFixed(2)," "]})]})}),T.trips.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[c.jsx(bp,{size:18,className:"text-teal-500"}),"Rimborsi Chilometrici (",T.trips.length," trasferte)"]}),tt&&yt&&Be?c.jsx("div",{className:"space-y-4",children:ae(T.trips,yt,Be).map(de=>c.jsxs("div",{children:[c.jsx("div",{className:"bg-gray-100 px-3 py-2 rounded-t-lg border border-gray-200",children:c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:de.label})}),c.jsx("div",{className:"border border-t-0 border-gray-200 rounded-b-lg overflow-hidden",children:c.jsx(Km,{columns:Tt,data:de.trips,keyExtractor:le=>le.id})})]},`${de.year}-${de.month}`))}):c.jsx(Km,{columns:Tt,data:T.trips,keyExtractor:de=>de.id})]}),T.expenses.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[c.jsx(ac,{size:18,className:"text-orange-500"}),"Spese di Viaggio e Trasferimento (",T.expenses.length," voci)"]}),tt&&yt&&Be?c.jsxs("div",{className:"space-y-4",children:[oe(T.expenses,yt,Be).map(de=>c.jsxs("div",{children:[c.jsx("div",{className:"bg-gray-100 px-3 py-2 rounded-t-lg border border-gray-200",children:c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:de.label})}),c.jsx("div",{className:"border border-t-0 border-gray-200 rounded-b-lg overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:["Data","Tipo","Dettaglio","Note","Importo"].map(le=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:le},le))})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:de.expenses.map(le=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:s(le.date)}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:cs[le.expenseType]})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:le.fromLocation&&le.toLocation?`${le.fromLocation}  ${le.toLocation}`:le.description||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:le.notes||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:[le.amount.toFixed(2)," "]})]},le.id))})]})})})]},`${de.year}-${de.month}`)),c.jsxs("div",{className:"bg-orange-50 px-4 py-3 rounded-lg text-right",children:[c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Totale Spese Documentate: "}),c.jsxs("span",{className:"text-sm font-bold text-orange-700",children:[T.totalExpenses.toFixed(2)," "]})]})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:["Data","Tipo","Dettaglio","Note","Importo"].map(de=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:de},de))})}),c.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[T.expenses.map(de=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:s(de.date)}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:cs[de.expenseType]})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:de.fromLocation&&de.toLocation?`${de.fromLocation}  ${de.toLocation}`:de.description||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:de.notes||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:[de.amount.toFixed(2)," "]})]},de.id)),c.jsxs("tr",{className:"bg-orange-50",children:[c.jsx("td",{colSpan:4,className:"px-4 py-3 text-sm font-semibold text-gray-700 text-right",children:"Totale Spese Documentate:"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-orange-700",children:[T.totalExpenses.toFixed(2)," "]})]})]})]})})]}),T.accommodations.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[c.jsx(Sh,{size:18,className:"text-sky-500"}),"Alloggi (",T.accommodations.length," soggiorni)"]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:["Periodo","Luogo","Note","Importo"].map(de=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:de},de))})}),c.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[T.accommodations.map(de=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[s(de.dateFrom),"  ",s(de.dateTo)]}),c.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-700",children:de.location||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:de.notes||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:[de.amount.toFixed(2)," "]})]},de.id)),c.jsxs("tr",{className:"bg-sky-50",children:[c.jsx("td",{colSpan:3,className:"px-4 py-3 text-sm font-semibold text-gray-700 text-right",children:"Totale Alloggi:"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-sky-700",children:[T.totalAccommodations.toFixed(2)," "]})]})]})]})})]})]})]}),c.jsx(Kj,{trip:X,onClose:()=>ne(null),onSaved:Qe})]})},Bp={name:"",address:"",defaultDistance:""},Xj=()=>{const{state:t,addFavoriteDestination:e,updateFavoriteDestination:n,deleteFavoriteDestination:r}=Kr(),{showToast:i}=ma(),[s,a]=fe.useState(!1),[o,l]=fe.useState(null),[d,g]=fe.useState(Bp),[m,v]=fe.useState({}),[p,_]=fe.useState(!1),S=()=>{g(Bp),v({}),l(null),a(!0)},N=T=>{g({name:T.name,address:T.address,defaultDistance:String(T.defaultDistance)}),v({}),l(T.id),a(!0)},f=()=>{a(!1),l(null),g(Bp),v({})},x=()=>{const T={};d.name.trim()||(T.name="Il nome  obbligatorio"),d.address.trim()||(T.address="L'indirizzo  obbligatorio");const L=parseFloat(d.defaultDistance);return(!d.defaultDistance||isNaN(L)||L<=0)&&(T.defaultDistance="Inserisci una distanza valida (km)"),v(T),Object.keys(T).length===0},w=async()=>{if(x()){_(!0);try{const T={name:d.name.trim(),address:d.address.trim(),defaultDistance:parseFloat(d.defaultDistance)};if(o){const L=t.favoriteDestinations.find(C=>C.id===o);await n({...L,...T}),i("Destinazione aggiornata","success")}else await e(T),i("Destinazione aggiunta","success");f()}catch{i("Errore durante il salvataggio","error")}finally{_(!1)}}},j=async T=>{if(window.confirm(`Eliminare "${T.name}"?`))try{await r(T.id),i("Destinazione eliminata","success")}catch{i("Errore durante l'eliminazione","error")}},D=T=>{const{name:L,value:C}=T.target;g(G=>({...G,[L]:C})),m[L]&&v(G=>({...G,[L]:void 0}))};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Destinazioni Abituali"}),!s&&c.jsx(gt,{icon:c.jsx(oi,{size:18}),onClick:S,children:"Aggiungi"})]}),s&&c.jsxs(zn,{className:"border-2 border-teal-200",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:o?"Modifica Destinazione":"Nuova Destinazione Abituale"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Pt,{id:"fav-name",name:"name",label:"Nome breve",value:d.name,onChange:D,error:m.name,placeholder:"Es. Servizi Sociali Chioggia",required:!0}),c.jsx(Pt,{id:"fav-address",name:"address",label:"Indirizzo completo",value:d.address,onChange:D,error:m.address,placeholder:"Es. Corso del Popolo, 1193, 30015 Chioggia",required:!0}),c.jsx(Pt,{id:"fav-defaultDistance",name:"defaultDistance",label:"Distanza predefinita (km)",type:"number",step:"0.5",min:"0.1",value:d.defaultDistance,onChange:D,error:m.defaultDistance,placeholder:"Es. 75",required:!0}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx(gt,{variant:"secondary",onClick:f,icon:c.jsx(kl,{size:16}),children:"Annulla"}),c.jsx(gt,{onClick:w,disabled:p,icon:c.jsx(o_,{size:16}),children:p?"Salvataggio...":o?"Salva modifiche":"Aggiungi"})]})]})]}),t.favoriteDestinations.length===0&&!s?c.jsx(zn,{children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx(ug,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"Nessuna destinazione abituale"}),c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Aggiungi le destinazioni frequenti per velocizzare l'inserimento delle trasferte"}),c.jsx(gt,{className:"mt-4",icon:c.jsx(oi,{size:18}),onClick:S,children:"Aggiungi la prima destinazione"})]})}):c.jsx("div",{className:"space-y-3",children:t.favoriteDestinations.map(T=>c.jsx(zn,{className:"hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-start space-x-3 min-w-0",children:[c.jsx("div",{className:"bg-amber-50 p-2 rounded-lg flex-shrink-0 mt-0.5",children:c.jsx(Nl,{className:"h-4 w-4 text-amber-600"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[c.jsx("span",{className:"font-semibold text-gray-900",children:T.name}),c.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800",children:[T.defaultDistance," km"]})]}),c.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:T.address})]})]}),c.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0 ml-4",children:[c.jsx("button",{onClick:()=>N(T),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Modifica",children:c.jsx(Jh,{size:16})}),c.jsx("button",{onClick:()=>j(T),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Elimina",children:c.jsx(la,{size:16})})]})]})},T.id))})]})},Qj=()=>{var f,x;const t=Yr(),e=vs(),{signIn:n,user:r}=Tl(),{showToast:i}=ma(),[s,a]=fe.useState(""),[o,l]=fe.useState(""),[d,g]=fe.useState(!1),[m,v]=fe.useState({}),p=fe.useRef(!1),_=((x=(f=e.state)==null?void 0:f.from)==null?void 0:x.pathname)||"/";fe.useEffect(()=>{p.current&&r&&t(_,{replace:!0})},[r,_,t]);const S=()=>{const w={};return s.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(w.email="Email non valida"):w.email="Email obbligatoria",o||(w.password="Password obbligatoria"),v(w),Object.keys(w).length===0},N=async w=>{if(w.preventDefault(),!!S()){g(!0);try{const{error:j}=await n(s,o);j?(j.message.includes("Invalid login credentials")?i("Email o password non corretti","error"):j.message.includes("Email not confirmed")?i("Conferma la tua email prima di accedere","error"):i(j.message,"error"),g(!1)):(i("Accesso effettuato con successo","success"),p.current=!0)}catch{i("Errore durante l'accesso","error"),g(!1)}}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 to-blue-50 px-4",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(d_,{className:"w-8 h-8 text-white"})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Accedi"}),c.jsx("p",{className:"text-gray-600",children:"Rimborsi Chilometrici ITFV"})]}),c.jsxs("form",{onSubmit:N,className:"space-y-6",children:[c.jsx(Pt,{label:"Email",type:"email",value:s,onChange:w=>a(w.target.value),error:m.email,placeholder:"nome@esempio.it",autoComplete:"email"}),c.jsx(Pt,{label:"Password",type:"password",value:o,onChange:w=>l(w.target.value),error:m.password,placeholder:"",autoComplete:"current-password"}),c.jsx("div",{className:"flex items-center justify-between",children:c.jsx(Hn,{to:"/forgot-password",className:"text-sm text-teal-600 hover:text-teal-700 font-medium",children:"Password dimenticata?"})}),c.jsx(gt,{type:"submit",className:"w-full",disabled:d,children:d?"Accesso in corso...":"Accedi"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-gray-600",children:["Non hai un account?"," ",c.jsx(Hn,{to:"/signup",className:"text-teal-600 hover:text-teal-700 font-medium",children:"Registrati"})]})})]})})})},Zj=()=>{const t=Yr(),{signUp:e}=Tl(),{state:n}=Kr(),{showToast:r}=ma(),[i,s]=fe.useState(""),[a,o]=fe.useState(""),[l,d]=fe.useState(""),[g,m]=fe.useState(""),[v,p]=fe.useState(!1),[_,S]=fe.useState({}),N=[...n.people].sort((w,j)=>w.surname.localeCompare(j.surname)||w.name.localeCompare(j.name)).map(w=>({value:w.id,label:`${w.surname} ${w.name}`})),f=()=>{const w={};return i.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)||(w.email="Email non valida"):w.email="Email obbligatoria",a?a.length<8&&(w.password="La password deve contenere almeno 8 caratteri"):w.password="Password obbligatoria",l?a!==l&&(w.confirmPassword="Le password non corrispondono"):w.confirmPassword="Conferma password obbligatoria",g||(w.personId="Seleziona una persona"),S(w),Object.keys(w).length===0},x=async w=>{if(w.preventDefault(),!!f()){p(!0);try{const{error:j}=await e(i,a,g);j?j.message.includes("already registered")?r("Questa email  gi registrata","error"):r(j.message,"error"):(r("Registrazione completata! Ora puoi accedere.","success"),t("/login"))}catch{r("Errore durante la registrazione","error")}finally{p(!1)}}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 to-blue-50 px-4 py-12",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(U5,{className:"w-8 h-8 text-white"})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Registrati"}),c.jsx("p",{className:"text-gray-600",children:"Crea il tuo account"})]}),c.jsxs("form",{onSubmit:x,className:"space-y-6",children:[c.jsx(hn,{label:"Seleziona Persona",value:g,onChange:w=>m(w.target.value),options:N,error:_.personId,placeholder:"Seleziona..."}),c.jsx(Pt,{label:"Email",type:"email",value:i,onChange:w=>s(w.target.value),error:_.email,placeholder:"nome@esempio.it",autoComplete:"email"}),c.jsx(Pt,{label:"Password",type:"password",value:a,onChange:w=>o(w.target.value),error:_.password,placeholder:"",autoComplete:"new-password",hint:"Minimo 8 caratteri"}),c.jsx(Pt,{label:"Conferma Password",type:"password",value:l,onChange:w=>d(w.target.value),error:_.confirmPassword,placeholder:"",autoComplete:"new-password"}),c.jsx(gt,{type:"submit",className:"w-full",disabled:v,children:v?"Registrazione in corso...":"Registrati"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-gray-600",children:["Hai gi un account?"," ",c.jsx(Hn,{to:"/login",className:"text-teal-600 hover:text-teal-700 font-medium",children:"Accedi"})]})})]})})})},eA=()=>{const{resetPassword:t}=Tl(),{showToast:e}=ma(),[n,r]=fe.useState(""),[i,s]=fe.useState(!1),[a,o]=fe.useState(!1),[l,d]=fe.useState({}),g=()=>{const v={};return n.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||(v.email="Email non valida"):v.email="Email obbligatoria",d(v),Object.keys(v).length===0},m=async v=>{if(v.preventDefault(),!!g()){s(!0);try{const{error:p}=await t(n);p?e(p.message,"error"):(o(!0),e("Email di recupero inviata con successo","success"))}catch{e("Errore durante l'invio dell'email","error")}finally{s(!1)}}};return a?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 to-blue-50 px-4",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(dv,{className:"w-8 h-8 text-green-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Email Inviata"}),c.jsxs("p",{className:"text-gray-600 mb-6",children:["Abbiamo inviato un link per il recupero della password all'indirizzo ",c.jsx("strong",{children:n}),". Controlla la tua casella di posta e segui le istruzioni."]}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Se non ricevi l'email entro qualche minuto, controlla la cartella spam."}),c.jsx(Hn,{to:"/login",children:c.jsxs(gt,{className:"w-full",children:[c.jsx(sc,{className:"w-4 h-4 mr-2"}),"Torna al Login"]})})]})})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 to-blue-50 px-4",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(dv,{className:"w-8 h-8 text-white"})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Password Dimenticata?"}),c.jsx("p",{className:"text-gray-600",children:"Inserisci la tua email e ti invieremo un link per reimpostare la password."})]}),c.jsxs("form",{onSubmit:m,className:"space-y-6",children:[c.jsx(Pt,{label:"Email",type:"email",value:n,onChange:v=>r(v.target.value),error:l.email,placeholder:"nome@esempio.it",autoComplete:"email"}),c.jsx(gt,{type:"submit",className:"w-full",disabled:i,children:i?"Invio in corso...":"Invia Link di Recupero"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs(Hn,{to:"/login",className:"text-teal-600 hover:text-teal-700 font-medium inline-flex items-center",children:[c.jsx(sc,{className:"w-4 h-4 mr-2"}),"Torna al Login"]})})]})})})},tA=()=>{const t=Yr(),{updatePassword:e}=Tl(),{showToast:n}=ma(),[r,i]=fe.useState(""),[s,a]=fe.useState(""),[o,l]=fe.useState(!1),[d,g]=fe.useState({}),m=()=>{const p={};return r?r.length<8&&(p.password="La password deve contenere almeno 8 caratteri"):p.password="Password obbligatoria",s?r!==s&&(p.confirmPassword="Le password non corrispondono"):p.confirmPassword="Conferma password obbligatoria",g(p),Object.keys(p).length===0},v=async p=>{if(p.preventDefault(),!!m()){l(!0);try{const{error:_}=await e(r);_?n(_.message,"error"):(n("Password aggiornata con successo","success"),t("/login"))}catch{n("Errore durante l'aggiornamento della password","error")}finally{l(!1)}}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 to-blue-50 px-4",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(c_,{className:"w-8 h-8 text-white"})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reimposta Password"}),c.jsx("p",{className:"text-gray-600",children:"Inserisci la tua nuova password"})]}),c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsx(Pt,{label:"Nuova Password",type:"password",value:r,onChange:p=>i(p.target.value),error:d.password,placeholder:"",autoComplete:"new-password",hint:"Minimo 8 caratteri"}),c.jsx(Pt,{label:"Conferma Nuova Password",type:"password",value:s,onChange:p=>a(p.target.value),error:d.confirmPassword,placeholder:"",autoComplete:"new-password"}),c.jsx(gt,{type:"submit",className:"w-full",disabled:o,children:o?"Aggiornamento in corso...":"Aggiorna Password"})]})]})})})},Th=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,confirmLabel:s="Conferma",cancelLabel:a="Annulla"})=>t?Yh.createPortal(c.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:c.jsxs("div",{className:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0",children:[c.jsx("div",{className:"fixed inset-0 transition-opacity\\","aria-hidden":"true",children:c.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),c.jsx("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true",children:""}),c.jsxs("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle",children:[c.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:c.jsx("div",{className:"sm:flex sm:items-start",children:c.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:r}),c.jsxs("button",{type:"button",className:"rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500",onClick:e,children:[c.jsx("span",{className:"sr-only",children:"Chiudi"}),c.jsx(kl,{className:"h-6 w-6"})]})]}),c.jsx("div",{className:"mt-2",children:c.jsx("p",{className:"text-sm text-gray-500",children:i})})]})})}),c.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[c.jsx(gt,{variant:"danger",className:"w-full sm:ml-3 sm:w-auto",onClick:n,children:s}),c.jsx(gt,{variant:"secondary",className:"mt-3 w-full sm:mt-0 sm:w-auto",onClick:e,children:a})]})]})]})}),document.body):null,nA=Object.entries(cs).map(([t,e])=>({value:t,label:e})),rA=["treno","supplemento_treno","aereo"],h2=()=>({personId:"",date:new Date().toISOString().split("T")[0],expenseType:"treno",description:"",fromLocation:"",toLocation:"",amount:"",notes:""}),iA=()=>{const{state:t,addTripExpense:e,updateTripExpense:n,deleteTripExpense:r,formatDate:i}=Kr(),[s,a]=fe.useState(!1),[o,l]=fe.useState(null),[d,g]=fe.useState(null),[m,v]=fe.useState(h2()),[p,_]=fe.useState(!1),[S,N]=fe.useState(""),[f,x]=fe.useState(new Date().getFullYear().toString()),[w,j]=fe.useState(new Date().getMonth().toString()),D=new Date().getFullYear(),T=Array.from({length:3},(te,$)=>({value:(D-$).toString(),label:(D-$).toString()})),L=[{value:"",label:"Tutti i mesi"},...Array.from({length:12},(te,$)=>({value:$.toString(),label:new Date(0,$).toLocaleString("it-IT",{month:"long"})}))],C=t.tripExpenses.filter(te=>{if(S&&te.personId!==S)return!1;const $=new Date(te.date);return!(f&&$.getFullYear()!==parseInt(f)||w!==""&&$.getMonth()!==parseInt(w))}),G=()=>{l(null),v(h2()),a(!0)},Z=te=>{l(te),v({personId:te.personId,date:te.date,expenseType:te.expenseType,description:te.description,fromLocation:te.fromLocation,toLocation:te.toLocation,amount:te.amount.toString(),notes:te.notes}),a(!0)},R=async te=>{if(te.preventDefault(),!(!m.personId||!m.amount)){_(!0);try{const $={personId:m.personId,date:m.date,expenseType:m.expenseType,description:m.description,fromLocation:m.fromLocation,toLocation:m.toLocation,amount:parseFloat(m.amount),notes:m.notes};o?await n({...$,id:o.id,createdAt:o.createdAt}):await e($),a(!1)}finally{_(!1)}}},A=async()=>{d&&(await r(d),g(null))},q=rA.includes(m.expenseType),K=C.reduce((te,$)=>te+$.amount,0);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Spese Documentate"}),c.jsx(gt,{variant:"primary",icon:c.jsx(oi,{size:18}),onClick:G,children:"Aggiungi Spesa"})]}),c.jsx(zn,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(hn,{id:"filterPerson",label:"Persona",options:[{value:"",label:"Tutte le persone"},...[...t.people].sort((te,$)=>te.surname.localeCompare($.surname)||te.name.localeCompare($.name)).map(te=>({value:te.id,label:`${te.surname} ${te.name}`}))],value:S,onChange:te=>N(te.target.value)}),c.jsx(hn,{id:"filterYear",label:"Anno",options:T,value:f,onChange:te=>x(te.target.value)}),c.jsx(hn,{id:"filterMonth",label:"Mese",options:L,value:w,onChange:te=>j(te.target.value)})]})}),C.length===0?c.jsx(zn,{children:c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(ac,{size:40,className:"mx-auto mb-3 text-gray-300"}),c.jsx("p",{children:"Nessuna spesa trovata per i filtri selezionati."})]})}):c.jsx(zn,{children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:["Data","Persona","Tipo","Dettaglio","Note","Importo","Azioni"].map(te=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:te},te))})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(te=>{const $=t.people.find(Q=>Q.id===te.personId);return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 whitespace-nowrap",children:i(te.date)}),c.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:$?`${$.name} ${$.surname}`:"-"}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:cs[te.expenseType]})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:te.fromLocation&&te.toLocation?`${te.fromLocation}  ${te.toLocation}`:te.description||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:te.notes||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900 whitespace-nowrap",children:[te.amount.toFixed(2)," "]}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>Z(te),className:"text-teal-600 hover:text-teal-800 p-1 rounded transition-colors",title:"Modifica",children:c.jsx(Jh,{size:16})}),c.jsx("button",{onClick:()=>g(te.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Elimina",children:c.jsx(la,{size:16})})]})})]},te.id)})}),c.jsx("tfoot",{children:c.jsxs("tr",{className:"bg-gray-50",children:[c.jsxs("td",{colSpan:5,className:"px-4 py-3 text-sm font-semibold text-gray-700 text-right",children:["Totale (",C.length," voci):"]}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-teal-700",children:[K.toFixed(2)," "]}),c.jsx("td",{})]})})]})})}),s&&c.jsx(Th,{title:o?"Modifica Spesa":"Nuova Spesa Documentata",onClose:()=>a(!1),children:c.jsxs("form",{onSubmit:R,className:"space-y-4",children:[c.jsx(hn,{id:"personId",label:"Persona *",options:[{value:"",label:"Seleziona persona..."},...[...t.people].sort((te,$)=>te.surname.localeCompare($.surname)||te.name.localeCompare($.name)).map(te=>({value:te.id,label:`${te.surname} ${te.name}`}))],value:m.personId,onChange:te=>v($=>({...$,personId:te.target.value})),required:!0}),c.jsx(Pt,{id:"date",label:"Data *",type:"date",value:m.date,onChange:te=>v($=>({...$,date:te.target.value})),required:!0}),c.jsx(hn,{id:"expenseType",label:"Tipo di Spesa *",options:nA,value:m.expenseType,onChange:te=>v($=>({...$,expenseType:te.target.value}))}),q?c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Pt,{id:"fromLocation",label:"Da",value:m.fromLocation,onChange:te=>v($=>({...$,fromLocation:te.target.value})),placeholder:"Partenza"}),c.jsx(Pt,{id:"toLocation",label:"A",value:m.toLocation,onChange:te=>v($=>({...$,toLocation:te.target.value})),placeholder:"Destinazione"})]}):c.jsx(Pt,{id:"description",label:"Descrizione",value:m.description,onChange:te=>v($=>({...$,description:te.target.value})),placeholder:"Descrizione della spesa"}),c.jsx(Pt,{id:"amount",label:"Importo () *",type:"number",step:"0.01",min:"0",value:m.amount,onChange:te=>v($=>({...$,amount:te.target.value})),required:!0}),c.jsx(Pt,{id:"notes",label:"Note",value:m.notes,onChange:te=>v($=>({...$,notes:te.target.value})),placeholder:"Note aggiuntive"}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(gt,{variant:"secondary",type:"button",onClick:()=>a(!1),children:"Annulla"}),c.jsx(gt,{variant:"primary",type:"submit",disabled:p,children:p?"Salvataggio...":o?"Salva Modifiche":"Aggiungi Spesa"})]})]})}),d&&c.jsxs(Th,{title:"Conferma Eliminazione",onClose:()=>g(null),children:[c.jsx("p",{className:"text-gray-700 mb-6",children:"Sei sicuro di voler eliminare questa spesa?"}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(gt,{variant:"secondary",onClick:()=>g(null),children:"Annulla"}),c.jsx(gt,{variant:"danger",onClick:A,children:"Elimina"})]})]})]})},f2=()=>({personId:"",dateFrom:new Date().toISOString().split("T")[0],dateTo:new Date().toISOString().split("T")[0],location:"",amount:"",notes:""}),sA=()=>{const{state:t,addAccommodation:e,updateAccommodation:n,deleteAccommodation:r,formatDate:i}=Kr(),[s,a]=fe.useState(!1),[o,l]=fe.useState(null),[d,g]=fe.useState(null),[m,v]=fe.useState(f2()),[p,_]=fe.useState(!1),[S,N]=fe.useState(""),[f,x]=fe.useState(new Date().getFullYear().toString()),w=new Date().getFullYear(),j=[{value:"",label:"Tutti gli anni"},...Array.from({length:3},(A,q)=>({value:(w-q).toString(),label:(w-q).toString()}))],D=t.accommodations.filter(A=>{if(S&&A.personId!==S)return!1;if(f){const q=new Date(A.dateFrom),K=new Date(A.dateTo),te=parseInt(f);if(q.getFullYear()!==te&&K.getFullYear()!==te)return!1}return!0}),T=(A,q)=>{const K=new Date(q).getTime()-new Date(A).getTime();return Math.max(0,Math.round(K/(1e3*60*60*24)))},L=()=>{l(null),v(f2()),a(!0)},C=A=>{l(A),v({personId:A.personId,dateFrom:A.dateFrom,dateTo:A.dateTo,location:A.location,amount:A.amount.toString(),notes:A.notes}),a(!0)},G=async A=>{if(A.preventDefault(),!(!m.personId||!m.amount)){_(!0);try{const q={personId:m.personId,dateFrom:m.dateFrom,dateTo:m.dateTo,location:m.location,amount:parseFloat(m.amount),notes:m.notes};o?await n({...q,id:o.id,createdAt:o.createdAt}):await e(q),a(!1)}finally{_(!1)}}},Z=async()=>{d&&(await r(d),g(null))},R=D.reduce((A,q)=>A+q.amount,0);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Alloggi"}),c.jsx(gt,{variant:"primary",icon:c.jsx(oi,{size:18}),onClick:L,children:"Aggiungi Alloggio"})]}),c.jsx(zn,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(hn,{id:"filterPerson",label:"Persona",options:[{value:"",label:"Tutte le persone"},...[...t.people].sort((A,q)=>A.surname.localeCompare(q.surname)||A.name.localeCompare(q.name)).map(A=>({value:A.id,label:`${A.surname} ${A.name}`}))],value:S,onChange:A=>N(A.target.value)}),c.jsx(hn,{id:"filterYear",label:"Anno",options:j,value:f,onChange:A=>x(A.target.value)})]})}),D.length===0?c.jsx(zn,{children:c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Sh,{size:40,className:"mx-auto mb-3 text-gray-300"}),c.jsx("p",{children:"Nessun alloggio trovato per i filtri selezionati."})]})}):c.jsx(zn,{children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:["Persona","Periodo","Notti","Luogo","Note","Importo","Azioni"].map(A=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:A},A))})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(A=>{const q=t.people.find(te=>te.id===A.personId),K=T(A.dateFrom,A.dateTo);return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:q?`${q.name} ${q.surname}`:"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 whitespace-nowrap",children:[i(A.dateFrom),"  ",i(A.dateTo)]}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:c.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-sky-100 text-sky-700",children:[K," ",K===1?"notte":"notti"]})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:A.location||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:A.notes||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900 whitespace-nowrap",children:[A.amount.toFixed(2)," "]}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>C(A),className:"text-teal-600 hover:text-teal-800 p-1 rounded transition-colors",title:"Modifica",children:c.jsx(Jh,{size:16})}),c.jsx("button",{onClick:()=>g(A.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Elimina",children:c.jsx(la,{size:16})})]})})]},A.id)})}),c.jsx("tfoot",{children:c.jsxs("tr",{className:"bg-gray-50",children:[c.jsxs("td",{colSpan:5,className:"px-4 py-3 text-sm font-semibold text-gray-700 text-right",children:["Totale (",D.length," soggiorni):"]}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-teal-700",children:[R.toFixed(2)," "]}),c.jsx("td",{})]})})]})})}),s&&c.jsx(Th,{title:o?"Modifica Alloggio":"Nuovo Alloggio",onClose:()=>a(!1),children:c.jsxs("form",{onSubmit:G,className:"space-y-4",children:[c.jsx(hn,{id:"personId",label:"Persona *",options:[{value:"",label:"Seleziona persona..."},...[...t.people].sort((A,q)=>A.surname.localeCompare(q.surname)||A.name.localeCompare(q.name)).map(A=>({value:A.id,label:`${A.surname} ${A.name}`}))],value:m.personId,onChange:A=>v(q=>({...q,personId:A.target.value})),required:!0}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Pt,{id:"dateFrom",label:"Data inizio *",type:"date",value:m.dateFrom,onChange:A=>v(q=>({...q,dateFrom:A.target.value})),required:!0}),c.jsx(Pt,{id:"dateTo",label:"Data fine *",type:"date",value:m.dateTo,onChange:A=>v(q=>({...q,dateTo:A.target.value})),required:!0})]}),c.jsx(Pt,{id:"location",label:"Luogo",value:m.location,onChange:A=>v(q=>({...q,location:A.target.value})),placeholder:"Citt / Hotel"}),c.jsx(Pt,{id:"amount",label:"Importo () *",type:"number",step:"0.01",min:"0",value:m.amount,onChange:A=>v(q=>({...q,amount:A.target.value})),required:!0}),c.jsx(Pt,{id:"notes",label:"Note",value:m.notes,onChange:A=>v(q=>({...q,notes:A.target.value})),placeholder:"Note aggiuntive"}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(gt,{variant:"secondary",type:"button",onClick:()=>a(!1),children:"Annulla"}),c.jsx(gt,{variant:"primary",type:"submit",disabled:p,children:p?"Salvataggio...":o?"Salva Modifiche":"Aggiungi Alloggio"})]})]})}),d&&c.jsxs(Th,{title:"Conferma Eliminazione",onClose:()=>g(null),children:[c.jsx("p",{className:"text-gray-700 mb-6",children:"Sei sicuro di voler eliminare questo alloggio?"}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(gt,{variant:"secondary",onClick:()=>g(null),children:"Annulla"}),c.jsx(gt,{variant:"danger",onClick:Z,children:"Elimina"})]})]})]})},aA=()=>{const{id:t}=og(),{state:e,deleteTrip:n,getVehicle:r,formatDate:i}=Kr(),s=Yr(),[a,o]=fe.useState(""),[l,d]=fe.useState(""),g=e.people.find(w=>w.id===t),m=e.trips.filter(w=>w.personId===t),v=()=>{const w=[{value:"",label:"Tutti i mesi"}],j=new Set;m.forEach(T=>{const L=new Date(T.date),C=`${L.getFullYear()}-${(L.getMonth()+1).toString().padStart(2,"0")}`;j.add(C)});const D=new Date;for(let T=0;T<24;T++){const L=new Date(D.getFullYear(),D.getMonth()-T,1),C=`${L.getFullYear()}-${(L.getMonth()+1).toString().padStart(2,"0")}`;if(j.has(C)){const G=`${L.toLocaleString("it-IT",{month:"long"})} ${L.getFullYear()}`;w.push({value:C,label:G})}}return w},p=[{value:"",label:"Tutti i ruoli"},{value:"docente",label:"Docente"},{value:"dipendente",label:"Dipendente"},{value:"amministratore",label:"Amministratore"}],_=m.filter(w=>{if(a){const[j,D]=a.split("-").map(Number),T=new Date(w.date);if(!(T.getFullYear()===j&&T.getMonth()===D-1))return!1}return!(l&&w.tripRole!==l)}).sort((w,j)=>new Date(j.date).getTime()-new Date(w.date).getTime()),S=_.reduce((w,j)=>w+(j.isRoundTrip?j.distance*2:j.distance),0),N=_.reduce((w,j)=>{if(!j.hasToll)return w;const D=j.tollAmount??0,T=j.isRoundTrip?j.returnTollAmount??j.tollAmount??0:0;return w+D+T},0),f=w=>{window.confirm("Sei sicuro di voler eliminare questa trasferta?")&&n(w)},x=w=>{s("/tragitti/nuovo",{state:{duplicateTrip:w}})};return g?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs("button",{onClick:()=>s("/tragitti"),className:"flex items-center gap-1.5 text-sm text-gray-500 hover:text-gray-800 transition-colors",children:[c.jsx(sc,{size:16}),"Trasferte"]})}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-50 border border-teal-100 flex items-center justify-center flex-shrink-0",children:c.jsx(oc,{size:22,className:"text-teal-600"})}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[g.surname," ",g.name]}),c.jsx("div",{className:"flex items-center gap-4 mt-0.5",children:c.jsxs("span",{className:"text-sm text-gray-500 flex items-center gap-1.5",children:[c.jsx(Nh,{size:13}),m.length," ",m.length===1?"trasferta":"trasferte"," totali"]})})]})]}),c.jsx(gt,{variant:"primary",icon:c.jsx(B5,{size:16}),onClick:()=>s("/tragitti/nuovo",{state:{preselectedPersonId:g.id}}),children:"Nuova Trasferta"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[c.jsx("div",{className:"w-full sm:w-56",children:c.jsx(hn,{id:"month-filter",label:"",options:v(),value:a,onChange:w=>o(w.target.value)})}),c.jsx("div",{className:"w-full sm:w-52",children:c.jsx(hn,{id:"role-filter",label:"",options:p,value:l,onChange:w=>d(w.target.value)})}),_.length>0&&c.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(Nl,{size:14,className:"text-teal-600"}),c.jsxs("span",{className:"font-medium text-gray-800",children:[S.toFixed(0)," km"]})]}),N>0&&c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(Dm,{size:14,className:"text-amber-600"}),c.jsxs("span",{className:"font-medium text-gray-800",children:[N.toFixed(2)," "]})," pedaggi"]})]})]}),_.length===0?c.jsxs("div",{className:"text-center py-20 text-gray-400",children:[c.jsx(Nh,{size:40,className:"mx-auto mb-3 opacity-40"}),c.jsx("p",{className:"text-sm",children:a||l?"Nessuna trasferta corrisponde ai filtri selezionati.":"Nessuna trasferta registrata."})]}):c.jsx("div",{className:"space-y-2",children:_.map(w=>{const j=r(w.vehicleId),D=w.isRoundTrip?w.distance*2:w.distance,T=w.hasToll&&w.tollAmount?w.tollAmount:null,L=w.hasToll&&w.isRoundTrip?w.returnTollAmount??w.tollAmount??null:null,C=(T??0)+(L??0);return c.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-5 py-4 flex flex-col sm:flex-row sm:items-center gap-3 hover:border-gray-300 transition-colors",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[c.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[c.jsx(s_,{size:12}),i(w.date)]}),j&&c.jsxs("span",{className:"text-xs text-gray-400",children:[j.make," ",j.model]}),w.isRoundTrip&&c.jsx("span",{className:"text-xs font-medium text-teal-600 bg-teal-50 border border-teal-100 rounded px-1.5 py-0.5",children:"A/R"})]}),c.jsxs("p",{className:"text-sm font-semibold text-gray-800 mt-1.5",children:[w.origin,"  ",w.destination]}),w.purpose&&c.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:w.purpose})]}),c.jsxs("div",{className:"flex items-center gap-5 flex-shrink-0 text-sm",children:[c.jsxs("span",{className:"flex items-center gap-1 text-gray-700 font-medium",children:[c.jsx(Nl,{size:13,className:"text-teal-500"}),D.toFixed(1)," km"]}),C>0&&c.jsxs("span",{className:"flex items-center gap-1 text-amber-700",children:[c.jsx(Dm,{size:13}),C.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.jsxs("button",{title:"Modifica",onClick:()=>s(`/tragitti/${w.id}`),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-blue-600 border border-blue-100 hover:bg-blue-50 transition-colors",children:[c.jsx(lg,{size:13}),"Modifica"]}),c.jsxs("button",{title:"Duplica",onClick:()=>x(w),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 border border-gray-200 hover:bg-gray-100 transition-colors",children:[c.jsx(F5,{size:13}),"Duplica"]}),c.jsxs("button",{title:"Elimina",onClick:()=>f(w.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-red-500 border border-red-100 hover:bg-red-50 transition-colors",children:[c.jsx(la,{size:13}),"Elimina"]})]})]},w.id)})})]}):c.jsxs("div",{className:"text-center py-20 text-gray-400",children:[c.jsx(oc,{size:40,className:"mx-auto mb-3 opacity-40"}),c.jsx("p",{className:"text-sm",children:"Persona non trovata."}),c.jsx(gt,{variant:"secondary",className:"mt-4",onClick:()=>s("/tragitti"),children:"Torna alle trasferte"})]})};function oA(){return c.jsxs($3,{children:[c.jsx(Dn,{path:"/login",element:c.jsx(Qj,{})}),c.jsx(Dn,{path:"/signup",element:c.jsx(Zj,{})}),c.jsx(Dn,{path:"/forgot-password",element:c.jsx(eA,{})}),c.jsx(Dn,{path:"/reset-password",element:c.jsx(tA,{})}),c.jsxs(Dn,{path:"/",element:c.jsx(ZN,{children:c.jsx(QN,{})}),children:[c.jsx(Dn,{index:!0,element:c.jsx(Mk,{})}),c.jsx(Dn,{path:"persone",element:c.jsx(zk,{})}),c.jsx(Dn,{path:"persone/nuovo",element:c.jsx(qv,{})}),c.jsx(Dn,{path:"persone/:id",element:c.jsx(qv,{})}),c.jsx(Dn,{path:"tragitti",element:c.jsx(Uk,{})}),c.jsx(Dn,{path:"tragitti/persona/:id",element:c.jsx(aA,{})}),c.jsx(Dn,{path:"tragitti/nuovo",element:c.jsx(Wv,{})}),c.jsx(Dn,{path:"tragitti/:id",element:c.jsx(Wv,{})}),c.jsx(Dn,{path:"percorsi",element:c.jsx(Xj,{})}),c.jsx(Dn,{path:"report",element:c.jsx(Jj,{})}),c.jsx(Dn,{path:"spese",element:c.jsx(iA,{})}),c.jsx(Dn,{path:"alloggi",element:c.jsx(sA,{})})]})]})}j5(document.getElementById("root")).render(c.jsx(fe.StrictMode,{children:c.jsx(K3,{children:c.jsx(KN,{children:c.jsx(XN,{children:c.jsx(Fk,{children:c.jsx(oA,{})})})})})}));export{Ut as _,Gf as c,l0 as g};
